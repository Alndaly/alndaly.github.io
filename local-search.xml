<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Djangoå¿«é€Ÿæ­å»ºåç«¯</title>
    <link href="/2022/04/08/%E5%90%8E%E7%AB%AF/Django/"/>
    <url>/2022/04/08/%E5%90%8E%E7%AB%AF/Django/</url>
    
    <content type="html"><![CDATA[<h2 id="å®˜æ–¹æ–‡æ¡£ï¼ˆå«æ•™ç¨‹ï¼‰"><a href="#å®˜æ–¹æ–‡æ¡£ï¼ˆå«æ•™ç¨‹ï¼‰" class="headerlink" title="å®˜æ–¹æ–‡æ¡£ï¼ˆå«æ•™ç¨‹ï¼‰"></a>å®˜æ–¹æ–‡æ¡£ï¼ˆå«æ•™ç¨‹ï¼‰</h2><p><a href="https://www.djangoproject.com/">Django</a></p><p><a href="https://www.django-rest-framework.org/">Home - Django REST framework</a></p><h2 id="åŸºæœ¬æ“ä½œï¼ˆç»ˆç«¯ä¸­æ‰§è¡Œï¼‰"><a href="#åŸºæœ¬æ“ä½œï¼ˆç»ˆç«¯ä¸­æ‰§è¡Œï¼‰" class="headerlink" title="åŸºæœ¬æ“ä½œï¼ˆç»ˆç«¯ä¸­æ‰§è¡Œï¼‰"></a>åŸºæœ¬æ“ä½œï¼ˆç»ˆç«¯ä¸­æ‰§è¡Œï¼‰</h2><p>æ–°å»ºä¸€ä¸ªDjangoé¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">django-admin startproject mysite<br></code></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªæ¥å£ç»„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">django-admin startapp test_app<br></code></pre></td></tr></table></figure><p>å¯åŠ¨Djangoé¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python manage.py runserver<br></code></pre></td></tr></table></figure><p>åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python manage.py createsuperuser<br></code></pre></td></tr></table></figure><h2 id="rest-framework"><a href="#rest-framework" class="headerlink" title="rest_framework"></a>rest_framework</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">INSTALLED_APPS = [<br><span class="hljs-string">&#x27;rest_framework&#x27;</span>, <span class="hljs-comment">#å¢åŠ è¿™ä¸€è¡Œ</span><br>    <span class="hljs-string">&#x27;django.contrib.admin&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.auth&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.contenttypes&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.staticfiles&#x27;</span>,<br>]<br></code></pre></td></tr></table></figure><h2 id="è§£å†³æ—¶åŒºé—®é¢˜"><a href="#è§£å†³æ—¶åŒºé—®é¢˜" class="headerlink" title="è§£å†³æ—¶åŒºé—®é¢˜"></a>è§£å†³æ—¶åŒºé—®é¢˜</h2><p>åœ¨<code>settings.py</code>ä¸­ä¿®æ”¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">TIME_ZONE = <span class="hljs-string">&#x27;Asia/Shanghai&#x27;</span> <span class="hljs-comment">#æ—¶åŒºæ”¹æˆä¸Šæµ·</span><br><span class="hljs-comment"># USE_TZ = True #è¿™è¡Œæ³¨é‡Š</span><br></code></pre></td></tr></table></figure><h2 id="è§£å†³è·¨åŸŸ"><a href="#è§£å†³è·¨åŸŸ" class="headerlink" title="è§£å†³è·¨åŸŸ"></a>è§£å†³è·¨åŸŸ</h2><p>åœ¨<code>settings.py</code>ä¸­ä¿®æ”¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">INSTALLED_APPS = [<br>    <span class="hljs-string">&#x27;django.contrib.admin&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.auth&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.contenttypes&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.staticfiles&#x27;</span>,<br>    <span class="hljs-string">&#x27;corsheaders&#x27;</span>,  <span class="hljs-comment"># è¿™é‡Œå¢åŠ å…è®¸è·¨åŸŸè¯·æ±‚å¤´é…ç½®</span><br>]<br><br>MIDDLEWARE = [<br><span class="hljs-comment">#ä¸­é—´ä»¶ä¿®æ”¹æˆå¦‚ä¸‹</span><br>    <span class="hljs-string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;corsheaders.middleware.CorsMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,<br>]<br></code></pre></td></tr></table></figure><h2 id="Djangoé»˜è®¤æ ·å¼ä¸å¥½çœ‹"><a href="#Djangoé»˜è®¤æ ·å¼ä¸å¥½çœ‹" class="headerlink" title="Djangoé»˜è®¤æ ·å¼ä¸å¥½çœ‹"></a>Djangoé»˜è®¤æ ·å¼ä¸å¥½çœ‹</h2><p>åœ¨<code>settings.py</code>ä¸­ä¿®æ”¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">INSTALLED_APPS = [<br>    <span class="hljs-string">&#x27;simpleui&#x27;</span>, <span class="hljs-comment">#å¢åŠ è¿™ä¸€è¡Œ</span><br>    <span class="hljs-string">&#x27;mall.apps.MallConfig&#x27;</span>,<br>    <span class="hljs-string">&#x27;rest_framework&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.admin&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.auth&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.contenttypes&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.staticfiles&#x27;</span>,<br>    <span class="hljs-string">&#x27;corsheaders&#x27;</span>,  <span class="hljs-comment"># è¿™é‡Œå¢åŠ å…è®¸è·¨åŸŸè¯·æ±‚å¤´é…ç½®</span><br>]<br></code></pre></td></tr></table></figure><aside> ğŸ’¡ simpleuiçš„ä¸€äº›åŸºæœ¬é…ç½®â¬‡ï¸ï¼Œåœ¨`settings.py`ä¸­å¢åŠ </aside><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å»æ‰é»˜è®¤Logoæˆ–æ¢æˆè‡ªå·±Logoé“¾æ¥</span><br>SIMPLEUI_LOGO = <span class="hljs-string">&#x27;&lt;https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202109211712667.png&gt;&#x27;</span><br><span class="hljs-comment"># é»˜è®¤è¯­è¨€æ¢æˆä¸­æ–‡</span><br>LANGUAGE_CODE = <span class="hljs-string">&#x27;zh-hans&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="Djangoçš„æ—¶é—´è¿”å›ä¸­é—´å¸¦T"><a href="#Djangoçš„æ—¶é—´è¿”å›ä¸­é—´å¸¦T" class="headerlink" title="Djangoçš„æ—¶é—´è¿”å›ä¸­é—´å¸¦T"></a>Djangoçš„æ—¶é—´è¿”å›ä¸­é—´å¸¦<code>T</code></h2><p><code>settings.py</code>ä¸­å¢åŠ å¦‚ä¸‹é…ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">REST_FRAMEWORK = &#123;<br>    <span class="hljs-string">&#x27;DATETIME_FORMAT&#x27;</span>: <span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="æ•°æ®åº“é…ç½®"><a href="#æ•°æ®åº“é…ç½®" class="headerlink" title="æ•°æ®åº“é…ç½®"></a>æ•°æ®åº“é…ç½®</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">DATABASES = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;OPTIONS&#x27;</span>: &#123;<span class="hljs-string">&#x27;charset&#x27;</span>: <span class="hljs-string">&#x27;utf8mb4&#x27;</span>&#125;,<br>        <span class="hljs-string">&#x27;ENGINE&#x27;</span>: <span class="hljs-string">&#x27;django.db.backends.mysql&#x27;</span>,  <span class="hljs-comment"># æ•°æ®åº“å¼•æ“</span><br>        <span class="hljs-string">&#x27;NAME&#x27;</span>: <span class="hljs-string">&#x27;mall&#x27;</span>,  <span class="hljs-comment"># æ•°æ®åº“åç§°</span><br>        <span class="hljs-string">&#x27;USER&#x27;</span>: <span class="hljs-string">&#x27;root&#x27;</span>,  <span class="hljs-comment"># è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·åç§°</span><br>        <span class="hljs-string">&#x27;PASSWORD&#x27;</span>: <span class="hljs-string">&#x27;root&#x27;</span>,  <span class="hljs-comment"># ç”¨æˆ·å¯†ç </span><br>        <span class="hljs-string">&#x27;HOST&#x27;</span>: <span class="hljs-string">&#x27;localhost&#x27;</span>,  <span class="hljs-comment"># è®¿é—®çš„æ•°æ®åº“çš„ä¸»æœºçš„ipåœ°å€</span><br>        <span class="hljs-string">&#x27;PORT&#x27;</span>: <span class="hljs-string">&#x27;3306&#x27;</span>,  <span class="hljs-comment"># é»˜è®¤mysqlè®¿é—®ç«¯å£</span><br>    &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Mysqlè½¬Djangoæ¨¡å‹ç±»"><a href="#Mysqlè½¬Djangoæ¨¡å‹ç±»" class="headerlink" title="Mysqlè½¬Djangoæ¨¡å‹ç±»"></a>Mysqlè½¬Djangoæ¨¡å‹ç±»</h2><p>åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">django-admin startproject â€˜xxxxâ€˜<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹settingæ–‡ä»¶ï¼Œåœ¨settingé‡Œé¢è®¾ç½®ä½ è¦è¿æ¥çš„æ•°æ®åº“ç±»å‹å’Œè¿æ¥åç§°ï¼Œåœ°å€ä¹‹ç±»ï¼Œå’Œåˆ›å»ºæ–°é¡¹ç›®çš„æ—¶å€™ä¸€è‡´</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable constant_">DATABASES</span> = &#123;<br>    <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;ENGINE&#x27;</span>: <span class="hljs-string">&#x27;django.db.backends.mysql&#x27;</span>,<br>        <span class="hljs-string">&#x27;NAME&#x27;</span>: <span class="hljs-string">&#x27;sqlexam&#x27;</span>,<br>        <span class="hljs-string">&#x27;USER&#x27;</span>: <span class="hljs-string">&#x27;root&#x27;</span>,<br>        <span class="hljs-string">&#x27;PASSWORD&#x27;</span>: <span class="hljs-string">&#x27;root12345&#x27;</span>,<br>        <span class="hljs-string">&#x27;HOST&#x27;</span>: <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,<br>        <span class="hljs-string">&#x27;PORT&#x27;</span>: <span class="hljs-number">3306</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¯ä»¥æ ¹æ®æ•°æ®åº“æ•°æ®ç”Ÿæˆå¯¹åº”çš„modelsæ¨¡å‹æ–‡ä»¶</p><p>1ã€ç”Ÿæˆæ¨¡å‹æ–‡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">python3 manage.<span class="hljs-property">py</span> inspectdb<br></code></pre></td></tr></table></figure><p>2ã€å°†æ¨¡å‹æ–‡ä»¶å¯¼å…¥åˆ°appå½“ä¸­</p><p>åˆ›å»ºapp</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">python3 manage.<span class="hljs-property">py</span> startapp <span class="hljs-string">&#x27;appåå­—&#x27;</span><br></code></pre></td></tr></table></figure><p>å°†æ¨¡å‹å¯¼å…¥åˆ›å»ºçš„appä¸­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">python3 manage.<span class="hljs-property">py</span> inspectdb &gt; app/models.<span class="hljs-property">py</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Django</tag>
      
      <tag>åç«¯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸‰äºšæ—…æ¸¸</title>
    <link href="/2022/04/08/%E6%97%85%E6%B8%B8/%E4%B8%89%E4%BA%9A/"/>
    <url>/2022/04/08/%E6%97%85%E6%B8%B8/%E4%B8%89%E4%BA%9A/</url>
    
    <content type="html"><![CDATA[<div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202204082330074.jpeg" alt="å¤©ç©º"></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202204082331874.jpeg" alt="å—æµ·è§‚éŸ³"></div><div class="group-image-wrap"><img src="https://sunrise-luckyda.top/image/IMG_2558.jpeg" alt="IMG_2558"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202204082330450.JPG" alt="æˆ‘"></div><div class="group-image-wrap"><img src="https://sunrise-luckyda.top/image/IMG_2803.jpeg" alt="IMG_2803"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="https://sunrise-luckyda.top/image/IMG_2674.jpeg" alt="IMG_2674"></div><div class="group-image-wrap"><img src="https://sunrise-luckyda.top/image/IMG_2728.jpeg" alt="IMG_2728"></div><div class="group-image-wrap"><img src="https://sunrise-luckyda.top/image/IMG_2801.jpeg" alt="IMG_2801"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="https://sunrise-luckyda.top/image/IMG_2802.jpeg" alt="IMG_2802"></div><div class="group-image-wrap"><img src="https://sunrise-luckyda.top/image/IMG_2842.jpeg" alt="IMG_2842"></div><div class="group-image-wrap"><img src="https://sunrise-luckyda.top/image/IMG_2859.jpeg" alt="IMG_2859"></div></div></div>]]></content>
    
    
    <categories>
      
      <category>ç”Ÿæ´»</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä¸‰äºš</tag>
      
      <tag>æ—…è¡Œ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git å¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜</title>
    <link href="/2022/04/07/Git/Git%E5%A4%A7%E5%B0%8F%E5%86%99%E9%BB%98%E8%AE%A4%E4%B8%8D%E6%95%8F%E6%84%9F/"/>
    <url>/2022/04/07/Git/Git%E5%A4%A7%E5%B0%8F%E5%86%99%E9%BB%98%E8%AE%A4%E4%B8%8D%E6%95%8F%E6%84%9F/</url>
    
    <content type="html"><![CDATA[<h1 id="Git-å¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"><a href="#Git-å¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜" class="headerlink" title="Git å¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></a>Git å¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜</h1><p>[![img](<a href="https://p26-passport.byteacctimg.com/img/user-avatar/65fb661a904a41f70ac47d51519c3e51~300x300.image">https://p26-passport.byteacctimg.com/img/user-avatar/65fb661a904a41f70ac47d51519c3e51~300x300.image</a></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0c2eae29e98142dfb3584c2317e9328a~tplv-k3u1fbpfcp-zoom-crop-mark:1304:1304:1304:734.image" alt="ã€Gitç³»åˆ—ã€‘Git å¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„è¡€æ¡ˆ"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>ç”±äºå½“å¹´å¤ªå¹´è½»ï¼Œèµ„å†ä¸å¤Ÿæ·±ï¼ï¼ï¼å¯¼è‡´æ–‡ä»¶å‘½åä¸è§„èŒƒï¼Œç°åœ¨æƒ³æ›´æ­£æ–‡ä»¶å¤¹åå­—ï¼ˆ<code>common =&gt; COMMON</code>ï¼‰ï¼Œç»“æœå‘ç°ä¸€ä¸ªå¾ˆå¥‡ç‰¹çš„ç°è±¡ï¼ git å¯¹æ–‡ä»¶(å¤¹)åçš„å¤§å°å†™ä¸æ•æ„Ÿï¼ï¼ï¼ï¼å¼•å‘äº†ä¸€äº›é—®é¢˜ã€‚æœ€ç»ˆç»è¿‡æŸ¥é˜…èµ„æ–™å¾—ä»¥è§£å†³ï¼Œé‚ï¼å†™ä¸‹è¿™ç¯‡å¸–å­è®°å½•ä¸€ä¸‹ã€‚èµ°<del>è·Ÿç€æ¸£æ¸£ä¸€èµ·åƒç€èŠ±ç”Ÿ ğŸ¥œ å–ç€å•¤é…’ ğŸº ç‡¥èµ·æ¥</del></p></blockquote><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c755d04984c446708721485b8bff8d28~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="13.jpg"></p><h2 id="demo-éƒ¨åˆ†ç›®å½•ç»“æ„"><a href="#demo-éƒ¨åˆ†ç›®å½•ç»“æ„" class="headerlink" title="demo éƒ¨åˆ†ç›®å½•ç»“æ„"></a>demo éƒ¨åˆ†ç›®å½•ç»“æ„</h2><ul><li><p><code>master</code> åˆ†æ”¯çš„ä»£ç åŠæ–‡ä»¶ç›®å½•æƒ…å†µ</p><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># masteråˆ†æ”¯åŸå§‹ç›®å½•</span><br>.<br>â”œâ”€â”€ main.js<br>â””â”€â”€ src<br>    â””â”€â”€ components<br>        â””â”€â”€ common<br>            â”œâ”€â”€ FootCell<br>            â”‚   â””â”€â”€ index.vue<br>            â”œâ”€â”€ Pagination<br>            â”‚   â””â”€â”€ index.vue<br>            â”œâ”€â”€ Table<br>            â”‚   â””â”€â”€ index.vue<br>            â””â”€â”€ TitleCell<br>                â””â”€â”€ index.vue<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// main.js</span><br><span class="hljs-keyword">const</span> files = <span class="hljs-built_in">require</span>.<span class="hljs-title function_">context</span>(<span class="hljs-string">&#x27;../components/common&#x27;</span>, <span class="hljs-literal">true</span>, <span class="hljs-regexp">/\.vue$/</span>)<br></code></pre></td></tr></table></figure></li></ul><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><h3 id="æ¨¡æ‹Ÿå¤šç”¨æˆ·"><a href="#æ¨¡æ‹Ÿå¤šç”¨æˆ·" class="headerlink" title="æ¨¡æ‹Ÿå¤šç”¨æˆ·"></a>æ¨¡æ‹Ÿå¤šç”¨æˆ·</h3><ul><li><p><code>user1</code> åˆ†æ”¯ï¼š<code>feature/user1</code></p></li><li><p><code>user2</code> åˆ†æ”¯ï¼š<code>feature/user2</code></p><p>æ­¤æ—¶åˆ†åˆ«æœ‰ä¸¤ä¸ªç”¨æˆ·<code>user1</code>å’Œ<code>user2</code>åœ¨å„è‡ªçš„ç”µè„‘ä¸Šæ‹‰å–äº†è¿™ä¸ªé¡¹ç›®ã€‚</p></li></ul><h1 id="éªšæ“ä½œå¼€å§‹-ç¬¬ä¸€ç§"><a href="#éªšæ“ä½œå¼€å§‹-ç¬¬ä¸€ç§" class="headerlink" title="éªšæ“ä½œå¼€å§‹ ç¬¬ä¸€ç§"></a>éªšæ“ä½œå¼€å§‹ ç¬¬ä¸€ç§</h1><blockquote><p>æ–‡ä»¶åçš„å˜æ›´æœªåŒæ­¥åˆ°è¿œç«¯ï¼Œä½†æ˜¯å¼•ç”¨è·¯å¾„å´åŒæ­¥åˆ°è¿œç«¯äº†ï¼</p></blockquote><ul><li><p><code>user1</code> ä¸çŸ¥é“ <code>git</code> å¤§å°å†™ä¸æ•æ„Ÿ,<code>user2</code> å¯çŸ¥å¯ä¸çŸ¥ï¼Œåæ­£æœ€åéƒ½!ä¼š!çŸ¥!é“!!!</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22443ba58c794d919058c0879836bfad~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="09.gif"></p></li></ul><h2 id="user1-å‘è¿œç«¯åŒæ­¥å˜æ›´"><a href="#user1-å‘è¿œç«¯åŒæ­¥å˜æ›´" class="headerlink" title="[user1]å‘è¿œç«¯åŒæ­¥å˜æ›´"></a>[user1]å‘è¿œç«¯åŒæ­¥å˜æ›´</h2><h3 id="æ›´æ”¹æ–‡ä»¶å-æ›´æ”¹å¼•ç”¨è·¯å¾„"><a href="#æ›´æ”¹æ–‡ä»¶å-æ›´æ”¹å¼•ç”¨è·¯å¾„" class="headerlink" title="æ›´æ”¹æ–‡ä»¶å + æ›´æ”¹å¼•ç”¨è·¯å¾„"></a>æ›´æ”¹æ–‡ä»¶å + æ›´æ”¹å¼•ç”¨è·¯å¾„</h3><blockquote><p>å› ä¸º è¿™é‡Œ <code>git</code> å¤§å°å†™ä¸æ•æ„Ÿæ‰€ä»¥åªè¿›è¡Œæ–‡ä»¶åå˜æ›´(å¤§å°å†™)çš„è¯ï¼Œä¸ä¼šè¢« <code>git</code> æ£€æµ‹åˆ°ï¼Œæ‰€ä»¥å¿…é¡»è¦æ”¹åŠ¨ä¸€ä¸ªæ–‡ä»¶ï¼Œè®© <code>git</code> æ£€æµ‹åˆ°å˜æ›´ã€‚æ‰èƒ½è¿›è¡Œ<code>commit</code>!åˆšå¥½æ–‡ä»¶åçš„å˜æ›´å¯¼è‡´äº†å¼•ç”¨è·¯å¾„ä¹Ÿéœ€è¦å˜æ›´ï¼å› æ­¤æœ¬æ¬¡å¯ä»¥è¿›è¡Œæäº¤</p></blockquote><ul><li><p>ç”±äºè¢«ç»¿å¤ªç‹ äº†ï¼Œå¿ƒæƒ…ä¸å¤ªå¥½å°±å¼€å§‹äº†éªšæ“ä½œå‘é˜Ÿå‹ï¼<code>common =&gt; COMMON</code>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">  <span class="hljs-comment"># common =&gt; COMMON</span><br>  .<br>  â”œâ”€â”€ main.js<br>  â””â”€â”€ src<br>      â””â”€â”€ components<br>          â””â”€â”€ COMMON<br>              â”œâ”€â”€ FootCell<br>              â”‚   â””â”€â”€ index.vue<br>              â”œâ”€â”€ Pagination<br>              â”‚   â””â”€â”€ index.vue<br>              â”œâ”€â”€ Table<br>              â”‚   â””â”€â”€ index.vue<br>              â””â”€â”€ TitleCell<br>                  â””â”€â”€ index.vue<br>å¤åˆ¶ä»£ç <br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// main.js</span><br><span class="hljs-keyword">const</span> files = <span class="hljs-built_in">require</span>.<span class="hljs-title function_">context</span>(<span class="hljs-string">&#x27;../components/common&#x27;</span>, <span class="hljs-literal">true</span>, <span class="hljs-regexp">/\.vue$/</span>)<br></code></pre></td></tr></table></figure></li></ul><p>æœ€åå¹¶æŠŠä»£ç æäº¤åˆ°äº†è¿œç«¯,å¹¶ä¸”å‘Šè¯‰ <code>user2</code> ä»£ç æœ‰æ›´æ–°</p><h2 id="user2-çš„å“åº”"><a href="#user2-çš„å“åº”" class="headerlink" title="[user2]çš„å“åº”"></a>[user2]çš„å“åº”</h2><h3 id="pull-ä»£ç "><a href="#pull-ä»£ç " class="headerlink" title="pull ä»£ç "></a><code>pull</code> ä»£ç </h3><ul><li><p><code>user2</code>äºæ˜¯ä¹å°±å…ˆ<code>pull</code>ç„¶å<code>merge</code>äº†ä¸€ä¸‹ï¼ŒæŠŠ <code>user1</code> çš„ä»£ç åŒæ­¥åˆ°è‡ªå·±çš„åˆ†æ”¯ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ­¤æ—¶ common =&gt; common æ²¡æœ‰å˜åŒ–ï¼ï¼ï¼</span><br>.<br>â”œâ”€â”€ main.js<br>â””â”€â”€ src<br>    â””â”€â”€ components<br>        â””â”€â”€ common<br>            â”œâ”€â”€ FootCell<br>            â”‚   â””â”€â”€ index.vue<br>            â”œâ”€â”€ Pagination<br>            â”‚   â””â”€â”€ index.vue<br>            â”œâ”€â”€ Table<br>            â”‚   â””â”€â”€ index.vue<br>            â””â”€â”€ TitleCell<br>                â””â”€â”€ index.vue<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// main.js æœ‰å˜åŒ–ï¼ï¼ï¼</span><br><span class="hljs-keyword">const</span> files = <span class="hljs-built_in">require</span>.<span class="hljs-title function_">context</span>(<span class="hljs-string">&#x27;../components/COMMON&#x27;</span>, <span class="hljs-literal">true</span>, <span class="hljs-regexp">/\.vue$/</span>)<br></code></pre></td></tr></table></figure><p>  è¿™ä¸ªæ—¶å€™ï¼Œâ€œ<del>æŠ¥åº”</del>â€æ¥çš„å¤ªçªç„¶ï¼Œé¡¹ç›®æŠ¥é”™äº†ï¼å¼•ç”¨çš„è·¯å¾„æ˜¯<code>COMMON</code>è€Œå®é™…é¡¹ç›®çš„è·¯å¾„æ˜¯<code>common</code></p><p>  <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a073f83286924f99bf704bead00db36e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="18.jpg"></p><ul><li>ç„¶å<code>user2</code>å°±å¥½å¥‡ä¸ºå•¥ä¼šæ˜¯è¿™ç§æƒ…å†µ,æ–‡ä»¶åæ²¡æœ‰å˜åŒ–ï¼Ÿï¼Ÿäºæ˜¯ä¹å¼€å¯äº†æ¢ç´¢ä¹‹è·¯~~</li></ul><h3 id="æ¢ç´¢é—®é¢˜"><a href="#æ¢ç´¢é—®é¢˜" class="headerlink" title="æ¢ç´¢é—®é¢˜"></a>æ¢ç´¢é—®é¢˜</h3><blockquote><p>å› ä¸º<code>user1</code>è¢«ç»¿äº†ä¸€æ³¢ï¼Œå¿ƒæƒ…ä¸å¥½æäº‹æƒ…ï¼Œå®³å¾—<code>user2</code>å¼•å‘äº† bugï¼Œä½†æ˜¯åˆšå¥½æ¿€å‘äº†<code>user2</code>çš„å¥½å¥‡å¿ƒã€‚</p></blockquote><ul><li><p>ä¸ºå•¥<code>user1</code>çš„æ˜¯ <code>COMMON</code>,åˆ°æˆ‘è¿™é‡Œæ˜¯ <code>common</code>ï¼Ÿï¼Ÿï¼Ÿ</p><p>æœ€å<code>user2</code>æŸ¥åˆ°äº†ç­”æ¡ˆï¼ åŸæ¥æ˜¯ <code>git</code> å¯¹æ–‡ä»¶åçš„å¤§å°å†™ä¸æ•æ„Ÿï¼Œæ‰ä¼šå¼•å‘è¿™ä¸ªé—®é¢˜ã€‚å¥½äº†é‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯è¿™ä¹ˆå»è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿï¼Ÿ</p></li></ul><p><strong>æ¸©é¦¨æç¤º</strong></p><blockquote><p>å› ä¸º <code>git</code> é»˜è®¤ä¸åŒºåˆ†å¤§å°å†™ï¼Œæ‰€ä»¥å¦‚æœåªæ›´æ”¹æ–‡ä»¶åçš„è¯ <code>git</code> å¹¶ä¸ä¼šæ£€æµ‹åˆ°æ–‡ä»¶æœ‰å˜åŒ–ï¼Œå›ºï¼æ— æ³•è¿›è¡Œ <code>commit</code>ï¼Œæ‰€æœ‰è¿™æ¬¡æµ‹è¯•åœ¨æ›´æ”¹æ–‡ä»¶åçš„æ—¶å€™é™„å¸¦çš„æ”¹åŠ¨äº†å…¶ä»–åœ°æ–¹ï¼Œä»¥ä¾¿æäº¤ï¼</p></blockquote><h3 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h3><p>æ—¢ç„¶<code>user2</code>å·²ç»çŸ¥é“äº† <code>git</code> é»˜è®¤å¤§å°å†™ä¸æ•æ„Ÿï¼Œé‚£å°±è®©ä»–æ•æ„Ÿå‘—ã€‚å¤šç®€å•ï¼</p><h2 id="user2-æ›´æ–°å˜æ›´"><a href="#user2-æ›´æ–°å˜æ›´" class="headerlink" title="[user2]æ›´æ–°å˜æ›´"></a>[user2]æ›´æ–°å˜æ›´</h2><h3 id="1-å¼€å¯-æ•æ„Ÿæ¨¡å¼"><a href="#1-å¼€å¯-æ•æ„Ÿæ¨¡å¼" class="headerlink" title="1. å¼€å¯ æ•æ„Ÿæ¨¡å¼"></a>1. å¼€å¯ æ•æ„Ÿæ¨¡å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config core.ignorecase <span class="hljs-literal">false</span> <span class="hljs-comment"># è®©ä½ å˜çš„æ•æ„Ÿ</span><br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bcd4ced859947e79225ba37c62c01b6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="21.jpg"></p><blockquote><p>å…¶å®<code>user1</code>å‹æ ¹å°±æ²¡æœ‰æŠŠæ–‡ä»¶åæ›´æ”¹åŒæ­¥åˆ°åˆ°è¿œç«¯!(æ‰€ä»¥å¼€å¤´æ‰è¯´ï¼Œä»–ä¸çŸ¥é“ <code>git</code> å¤§å°å†™ä¸æ•æ„Ÿ!ä½†æ˜¯æ–‡ä»¶å¼•ç”¨è·¯å¾„å˜æ›´äº†ï¼Œè¿™ä¸ªå°±å¯¼è‡´å…¶ä»–äºº<code>(user2)</code>å› ä¸ºæ–‡ä»¶è·¯å¾„æ”¹å˜å¯¼è‡´é¡¹ç›®æŠ¥é”™)</p></blockquote><h3 id="2-åˆ‡æ¢åˆ†æ”¯ï¼Œæ‹‰å–æœ€æ–°ä»£ç "><a href="#2-åˆ‡æ¢åˆ†æ”¯ï¼Œæ‹‰å–æœ€æ–°ä»£ç " class="headerlink" title="2. åˆ‡æ¢åˆ†æ”¯ï¼Œæ‹‰å–æœ€æ–°ä»£ç "></a>2. åˆ‡æ¢åˆ†æ”¯ï¼Œæ‹‰å–æœ€æ–°ä»£ç </h3><ul><li><p>åˆ‡åˆ†æ”¯ <code>checkout</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git che master<br></code></pre></td></tr></table></figure></li><li><p>æ‹‰ä»£ç  <code>pull</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git pull<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>è¿™ä¸ªæ—¶å€™å°±ä¼šå‘ç°é¡¹ç›®æ— æ³•å¯åŠ¨ï¼Œå› ä¸º <code>main.js</code> ä¸­çš„æ–‡ä»¶è·¯å¾„å¼•ç”¨å·²ç»ç”± <code>common =&gt; COMMON</code> äº†ï¼Œä½†å®é™…æ–‡ä»¶åä¾æ—§æ˜¯ <code>common</code></p></blockquote><h3 id="3-æ‰‹åŠ¨æ›´æ”¹æ–‡ä»¶å"><a href="#3-æ‰‹åŠ¨æ›´æ”¹æ–‡ä»¶å" class="headerlink" title="3. æ‰‹åŠ¨æ›´æ”¹æ–‡ä»¶å"></a>3. æ‰‹åŠ¨æ›´æ”¹æ–‡ä»¶å</h3><ul><li><p><code>common</code> &#x3D;&gt; <code>COMMON</code></p><p><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/19_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="19_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li></ul><h3 id="4-æš‚å­˜ã€æäº¤ã€pushã€åˆ‡åˆ†æ”¯ã€merge-åˆ°-feature-x2F-user2-åˆ†æ”¯"><a href="#4-æš‚å­˜ã€æäº¤ã€pushã€åˆ‡åˆ†æ”¯ã€merge-åˆ°-feature-x2F-user2-åˆ†æ”¯" class="headerlink" title="4. æš‚å­˜ã€æäº¤ã€pushã€åˆ‡åˆ†æ”¯ã€merge åˆ° feature&#x2F;user2 åˆ†æ”¯"></a>4. æš‚å­˜ã€æäº¤ã€pushã€åˆ‡åˆ†æ”¯ã€merge åˆ° feature&#x2F;user2 åˆ†æ”¯</h3><ul><li><p>æš‚å­˜ <code>add</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git add .<br></code></pre></td></tr></table></figure></li><li><p>æäº¤ <code>commit</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m user2æ‰‹åŠ¨åŒæ­¥æ›´æ–°æ–‡ä»¶å<br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8f6c3930f274425b8a8f7e851d6d1a15~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="20_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li><li><p>æ¨é€ <code>push</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿™ä¸€æ­¥æ˜¯æ›¿user1ï¼Œå°†æ–‡ä»¶åå˜æ›´åŒæ­¥åˆ°è¿œç«¯ï¼Œä¾›user3â€¦â€¦ç­‰ä½¿ç”¨</span><br><span class="hljs-comment">#ï¼ˆæ­¤æ—¶å¦‚æœå…¶ä»–ç”¨æˆ·æ˜¯ä¹‹å‰æ‹‰å–çš„åˆ†æ”¯é‚£ä¹ˆä¹Ÿä¼šå‡ºç°æœ¬ç¯‡æ–‡ç« æ‰€æè¿°çš„é—®é¢˜ï¼ï¼‰</span><br><span class="hljs-comment"># æ–¹æ³•å˜›~~ å°±æ˜¯å½“å‰æ–‡ç« ~~å“ˆå“ˆå“ˆ</span><br>git push<br></code></pre></td></tr></table></figure></li><li><p>åˆ‡åˆ†æ”¯ <code>checkout</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git che feature/user2<br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d1bcad27960452eb1a6c49ae8b58c9a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="08_D_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61453f98e4ea4a508027ecc39cbae4cd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="09_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li><li><p><code>merge</code> master åˆ° <code>feature/user2</code> åˆ†æ”¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git merge master<br></code></pre></td></tr></table></figure></li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5949cfb1676b41ef9d44b58f3f173259~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="10_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/811b5a7041f54b08a2b4b0ab47be5460~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="11_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><h3 id="æŸ¥çœ‹-commit-è®°å½•"><a href="#æŸ¥çœ‹-commit-è®°å½•" class="headerlink" title="æŸ¥çœ‹ commit è®°å½•"></a>æŸ¥çœ‹ <code>commit</code> è®°å½•</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4d3ab1becd9c45c3b9caeba5a2b1c3be~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="12_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><h1 id="éªšæ“ä½œå¼€å§‹-ç¬¬äºŒç§"><a href="#éªšæ“ä½œå¼€å§‹-ç¬¬äºŒç§" class="headerlink" title="éªšæ“ä½œå¼€å§‹ ç¬¬äºŒç§"></a>éªšæ“ä½œå¼€å§‹ ç¬¬äºŒç§</h1><blockquote><p>æ–‡ä»¶åå˜æ›´å®é™…å·²ç»åŒæ­¥åˆ°è¿œç«¯äº†ï¼Œä¸”å¼•ç”¨è·¯å¾„ä¹ŸåŒæ­¥åˆ°äº†è¿œç«¯ï¼</p></blockquote><ul><li><p>è¿™æ¬¡<code>user1</code> çŸ¥é“ <code>git</code> å¤§å°å†™ä¸æ•æ„Ÿ, <code>user2</code> åŒæ ·å¯çŸ¥å¯ä¸çŸ¥ï¼Œäºæ˜¯ä¸€å¼€å§‹å°±é€¼è¿«å¥¹ï¼Œè®©å¥¹å˜å¾—æ•æ„Ÿå†æ•æ„Ÿï¼</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/490d0d4ad6094906b2265b12dde0797f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="16.jpg"></p></li></ul><h2 id="user1-å‘è¿œç«¯åŒæ­¥å˜æ›´-1"><a href="#user1-å‘è¿œç«¯åŒæ­¥å˜æ›´-1" class="headerlink" title="[user1]å‘è¿œç«¯åŒæ­¥å˜æ›´"></a>[user1]å‘è¿œç«¯åŒæ­¥å˜æ›´</h2><ul><li><code>user1</code> çš„åˆ†æ”¯ï¼š<code>feature/user1</code></li></ul><h3 id="1-è®©å¥¹æ•æ„Ÿæ•æ„Ÿå†æ•æ„Ÿ"><a href="#1-è®©å¥¹æ•æ„Ÿæ•æ„Ÿå†æ•æ„Ÿ" class="headerlink" title="1. è®©å¥¹æ•æ„Ÿæ•æ„Ÿå†æ•æ„Ÿ"></a>1. è®©å¥¹æ•æ„Ÿæ•æ„Ÿå†æ•æ„Ÿ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config core.ignorecase <span class="hljs-literal">false</span> <span class="hljs-comment"># emmmmmâ€¦â€¦ä¿ºæ•æ„Ÿäº†</span><br></code></pre></td></tr></table></figure><h3 id="2-æ›´æ”¹æ–‡ä»¶å-amp-æ–‡ä»¶å¼•ç”¨è·¯å¾„"><a href="#2-æ›´æ”¹æ–‡ä»¶å-amp-æ–‡ä»¶å¼•ç”¨è·¯å¾„" class="headerlink" title="2. æ›´æ”¹æ–‡ä»¶å &amp; æ–‡ä»¶å¼•ç”¨è·¯å¾„"></a>2. æ›´æ”¹æ–‡ä»¶å &amp; æ–‡ä»¶å¼•ç”¨è·¯å¾„</h3><ul><li><p><code>common =&gt; COMMON</code></p></li><li><p>æ›´æ”¹å¼•ç”¨è·¯å¾„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// æ—§</span><br><span class="hljs-keyword">const</span> files = <span class="hljs-built_in">require</span>.<span class="hljs-title function_">context</span>(<span class="hljs-string">&#x27;../components/common&#x27;</span>, <span class="hljs-literal">true</span>, <span class="hljs-regexp">/\.vue$/</span>)<br><br><span class="hljs-comment">// æ–°</span><br><span class="hljs-keyword">const</span> files = <span class="hljs-built_in">require</span>.<span class="hljs-title function_">context</span>(<span class="hljs-string">&#x27;../components/COMMON&#x27;</span>, <span class="hljs-literal">true</span>, <span class="hljs-regexp">/\.vue$/</span>)<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-æš‚å­˜ï¼ˆaddï¼‰-amp-æäº¤-commit"><a href="#3-æš‚å­˜ï¼ˆaddï¼‰-amp-æäº¤-commit" class="headerlink" title="3. æš‚å­˜ï¼ˆaddï¼‰&amp; æäº¤(commit)"></a>3. æš‚å­˜ï¼ˆaddï¼‰&amp; æäº¤(commit)</h3><ul><li><p>æš‚å­˜ <code>add</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git add .<br></code></pre></td></tr></table></figure></li><li><p>æäº¤ <code>commit</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m &lt;msg&gt;<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-åˆ‡æ¢åˆ†æ”¯"><a href="#4-åˆ‡æ¢åˆ†æ”¯" class="headerlink" title="4. åˆ‡æ¢åˆ†æ”¯"></a>4. åˆ‡æ¢åˆ†æ”¯</h3><ul><li><p><code>git checkout master</code></p><p><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/08_D_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="08_D_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd6b53edeb94401c877e27e2ab7d397d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="09_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li></ul><h3 id="4-merge-åˆ°-master-å¹¶-pull-å‘è¿œç«¯"><a href="#4-merge-åˆ°-master-å¹¶-pull-å‘è¿œç«¯" class="headerlink" title="4.merge åˆ° master å¹¶ pull å‘è¿œç«¯"></a>4.merge åˆ° master å¹¶ pull å‘è¿œç«¯</h3><ul><li><p><code>merge</code> ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git merge feature/user1 <span class="hljs-comment"># user1çš„åˆ†æ”¯åˆå¹¶åˆ°æœ¬åœ°master</span><br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0411bb699b343a9a588d424481eb5ff~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="10_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f3bc59c816414a0d81c6b08ce98b8fe5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="11_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li><li><p>æ¨é€ <code>push</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git push <span class="hljs-comment"># æ¨é€åˆ°è¿œç«¯master</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="user2-æ›´æ–°å˜æ›´-1"><a href="#user2-æ›´æ–°å˜æ›´-1" class="headerlink" title="[user2]æ›´æ–°å˜æ›´"></a>[user2]æ›´æ–°å˜æ›´</h2><ul><li><code>user2</code> çš„åˆ†æ”¯ï¼š<code>feature/user2</code></li></ul><h3 id="1-å¼€å¯-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€"><a href="#1-å¼€å¯-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€" class="headerlink" title="1. å¼€å¯ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€"></a>1. å¼€å¯ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config core.ignorecase <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h3 id="2-åˆ‡åˆ†æ”¯-amp-pull-ä»£ç "><a href="#2-åˆ‡åˆ†æ”¯-amp-pull-ä»£ç " class="headerlink" title="2. åˆ‡åˆ†æ”¯ &amp; pull ä»£ç "></a>2. åˆ‡åˆ†æ”¯ &amp; pull ä»£ç </h3><ul><li><p>åˆ‡åˆ†æ”¯ <code>checkout</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git checkout master<br></code></pre></td></tr></table></figure></li><li><p>æ‹‰ä»£ç  <code>pull</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git pull <span class="hljs-comment"># æ›´æ–° master åˆ†æ”¯</span><br></code></pre></td></tr></table></figure></li><li><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ç»“æœ error</span><br>KaKa:test2  xxx$ git pull<br>æ›´æ–° 5f318b9..5174f2e<br>error: å·¥ä½œåŒºä¸­ä¸‹åˆ—æœªè·Ÿè¸ªçš„æ–‡ä»¶å°†ä¼šå› ä¸ºåˆå¹¶æ“ä½œè€Œè¢«è¦†ç›–ï¼š<br>        src/components/COMMON/FootCell/index.vue<br>        src/components/COMMON/Pagination/index.vue<br>        src/components/COMMON/Table/index.vue<br>        src/components/COMMON/TitleCell/index.vue<br>è¯·åœ¨åˆå¹¶å‰ç§»åŠ¨æˆ–åˆ é™¤ã€‚<br>æ­£åœ¨ç»ˆæ­¢<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼ä¸Šé¢é‚£ä¸ªé—®é¢˜ä¸€æ—¦è§¦å‘ï¼Œé‚£ä¹ˆä½ æ¥ä¸‹æ¥æ‰€æœ‰çš„æ“ä½œæ¯”å¦‚ <code>check</code>,<code>switch</code>,<code>pull</code>ç­‰æ“ä½œéƒ½ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ï¼ï¼</p></blockquote><p>å…¶å®ä¸Šé¢å·²ç»å‘Šè¯‰ä½ æ€ä¹ˆæ“ä½œäº†ï¼ŒæŒ‰ç…§æç¤º <code>åˆ é™¤</code>æˆ–è€…<code>ç§»åŠ¨</code>åŸæœ‰çš„<code>commonæ–‡ä»¶å¤¹</code>,ç„¶åå†<code>pull</code>(<code>check</code>,<code>switch</code>)å³å¯è§£å†³</p><ul><li><p>ç»“æœå¦‚ä¸‹å›¾ï¼š</p><p><code>common</code>æ–‡ä»¶åå·²ç»å˜æ›´ä¸º<code>COMMON</code></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34243070d2a24aeca70341c0df0b05d6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="11_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li></ul></li></ul><h3 id="3-åˆ‡æ¢åˆ†æ”¯-amp-merge-ä»£ç "><a href="#3-åˆ‡æ¢åˆ†æ”¯-amp-merge-ä»£ç " class="headerlink" title="3. åˆ‡æ¢åˆ†æ”¯ &amp; merge ä»£ç "></a>3. åˆ‡æ¢åˆ†æ”¯ &amp; merge ä»£ç </h3><p>å¦‚æœä¸Šä¸€æ­¥é—®é¢˜è§£å†³äº†é‚£ä¹ˆè¿™ä¸€æ­¥å°±æ²¡ä»€ä¹ˆå¼‚å¸¸äº†ï¼Œ<code>user2</code> çš„åˆ†æ”¯ä»£ç å·²ç»è¢«æ›´æ–°äº†</p><ul><li><p>åˆ‡åˆ†æ”¯ <code>checkout</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git checkout feature/user2<br></code></pre></td></tr></table></figure></li><li><p><code>merge</code> ä»£ç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git merge master <span class="hljs-comment"># æ›´æ–° feature/user2 åˆ†æ”¯</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="4-æŸ¥çœ‹-commit-è®°å½•"><a href="#4-æŸ¥çœ‹-commit-è®°å½•" class="headerlink" title="4 æŸ¥çœ‹ commit è®°å½•"></a>4 æŸ¥çœ‹ <code>commit</code> è®°å½•</h3><ul><li><p>å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/15_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="15_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li></ul><h3 id="5-æ­å–œåŒæ­¥æˆåŠŸ"><a href="#5-æ­å–œåŒæ­¥æˆåŠŸ" class="headerlink" title="5 æ­å–œåŒæ­¥æˆåŠŸ"></a>5 æ­å–œåŒæ­¥æˆåŠŸ</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/08ade974c64e4ad19f2fe72f6d90886c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="33.jpg"></p><h3 id="1-å…³é—­-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ"><a href="#1-å…³é—­-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ" class="headerlink" title="1 å…³é—­ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ"></a>1 å…³é—­ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config core.ignorecase <span class="hljs-literal">true</span> <span class="hljs-comment"># git é»˜è®¤ä¸æ•æ„Ÿ</span><br></code></pre></td></tr></table></figure><h3 id="2-åˆ‡åˆ†æ”¯-amp-pull-ä»£ç -1"><a href="#2-åˆ‡åˆ†æ”¯-amp-pull-ä»£ç -1" class="headerlink" title="2. åˆ‡åˆ†æ”¯ &amp; pull ä»£ç "></a>2. åˆ‡åˆ†æ”¯ &amp; pull ä»£ç </h3><ul><li><p>åˆ‡åˆ†æ”¯ <code>checkout</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git checkout master<br></code></pre></td></tr></table></figure></li><li><p>æ‹‰ä»£ç  <code>pull</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git pull <span class="hljs-comment"># æ›´æ–° master åˆ†æ”¯</span><br></code></pre></td></tr></table></figure></li></ul><p>ç»“æœå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b4aa62317a0d45b996b4346f0c55bc28~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="13_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><p>æƒŠä¸æƒŠå–œæ„ä¸æ„å¤–ï¼Ÿ</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/637c79a4d8e244e7b1823eb5c6bb4e4a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="40.jpg"></p><p>è™½ç„¶è¿œç«¯çš„æ–‡ä»¶åå·²ç»ç”±<code>common</code> &#x3D;&gt; <code>COMMON</code>,ä½†æ˜¯å½“<code>user2</code> æ‰§è¡Œ<code>pull</code>çš„æ—¶å€™æœ¬åœ°çš„æ–‡ä»¶åä¾æ—§è¿˜æ˜¯è€çš„<code>common</code></p><h3 id="3-æ›´æ”¹æ–‡ä»¶åã€åˆ‡æ¢åˆ†æ”¯ã€merge-master"><a href="#3-æ›´æ”¹æ–‡ä»¶åã€åˆ‡æ¢åˆ†æ”¯ã€merge-master" class="headerlink" title="3. æ›´æ”¹æ–‡ä»¶åã€åˆ‡æ¢åˆ†æ”¯ã€merge master"></a>3. æ›´æ”¹æ–‡ä»¶åã€åˆ‡æ¢åˆ†æ”¯ã€merge master</h3><ul><li><p>å…ˆæ›´æ”¹æ–‡ä»¶å<br><code>common</code> &#x3D;&gt; <code>COMMON</code></p></li><li><p>å†åˆ‡æ¢åˆ†æ”¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git checkout feature/user2<br></code></pre></td></tr></table></figure><p><code>COMMONæ–‡ä»¶å¤¹</code>å˜æˆç©ºçš„äº†</p><p><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/08_D_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="08_D_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><p><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/09_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="09_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li><li><p>æœ€åæ‰§è¡Œ <code>merge</code> åçš„å˜åŒ–å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git merge master<br></code></pre></td></tr></table></figure></li></ul><p><code>COMMONæ–‡ä»¶å¤¹</code>åˆæœ‰å†…å®¹äº†</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f391d8a96f248bc962b63bede21d5fb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="14_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><h3 id="4-æŸ¥çœ‹-commit"><a href="#4-æŸ¥çœ‹-commit" class="headerlink" title="4. æŸ¥çœ‹ commit"></a>4. æŸ¥çœ‹ <code>commit</code></h3><ul><li><p>è®°å½•å¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/15_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="15_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li></ul><h3 id="5-æ­å–œåŒæ­¥æˆåŠŸ-1"><a href="#5-æ­å–œåŒæ­¥æˆåŠŸ-1" class="headerlink" title="5. æ­å–œåŒæ­¥æˆåŠŸ"></a>5. æ­å–œåŒæ­¥æˆåŠŸ</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88c5e8f29c454bd6820cc72bf3de7417~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="03.jpg"></p><h1 id="å¦å¤–ä¸€ç§æ–¹å¼-git-rm"><a href="#å¦å¤–ä¸€ç§æ–¹å¼-git-rm" class="headerlink" title="å¦å¤–ä¸€ç§æ–¹å¼ git rm"></a>å¦å¤–ä¸€ç§æ–¹å¼ git rm</h1><ul><li><p>åˆ é™¤æ–‡ä»¶å¤¹ <code>rm</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">rm</span> &lt;æ–‡ä»¶å¤¹è·¯å¾„&gt; -r <span class="hljs-comment"># -r è¡¨ç¤ºé€’å½’</span><br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤æ–‡ä»¶ <code>rm</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">rm</span> &lt;æ–‡ä»¶è·¯å¾„&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="user1-å‘è¿œç«¯åŒæ­¥å˜æ›´-2"><a href="#user1-å‘è¿œç«¯åŒæ­¥å˜æ›´-2" class="headerlink" title="[user1]å‘è¿œç«¯åŒæ­¥å˜æ›´"></a>[user1]å‘è¿œç«¯åŒæ­¥å˜æ›´</h2><h3 id="1-å¼€å¯-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€-1"><a href="#1-å¼€å¯-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€-1" class="headerlink" title="1. å¼€å¯ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€"></a>1. å¼€å¯ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config core.ignorecase <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h3 id="2-åˆ¶ä½œå‰¯æœ¬"><a href="#2-åˆ¶ä½œå‰¯æœ¬" class="headerlink" title="2. åˆ¶ä½œå‰¯æœ¬"></a>2. åˆ¶ä½œå‰¯æœ¬</h3><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">common` =&gt; `common copy<br></code></pre></td></tr></table></figure><p>å¤åˆ¶å‰¯æœ¬ä»¥åä¸èƒ½ç›´æ¥å°† <code>common copy</code> æ”¹æˆ <code>COMMON</code> (æ­¤æ—¶ <code>common</code> è¿˜å­˜åœ¨)</p><h3 id="3-ä½¿ç”¨-rm-åˆ é™¤-common-æ–‡ä»¶å¤¹"><a href="#3-ä½¿ç”¨-rm-åˆ é™¤-common-æ–‡ä»¶å¤¹" class="headerlink" title="3. ä½¿ç”¨ rm åˆ é™¤ common æ–‡ä»¶å¤¹"></a>3. ä½¿ç”¨ rm åˆ é™¤ common æ–‡ä»¶å¤¹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">rm</span> ./src/components/common -r <span class="hljs-comment"># -r è¡¨ç¤ºé€’å½’</span><br></code></pre></td></tr></table></figure><h3 id="4-è¿˜åŸåå­—"><a href="#4-è¿˜åŸåå­—" class="headerlink" title="4. è¿˜åŸåå­—"></a>4. è¿˜åŸåå­—</h3><ul><li><p><code>common copy</code> &#x3D;&gt; <code>COMMON</code></p><p>çœ‹åˆ°è¿™é‡Œæœ‰çš„åŒå­¦è¯¥é—®äº†ä¸ºå•¥ä¸æ‹·è´å‰¯æœ¬ <code>common copy</code> ä»¥åç«‹é©¬ç›´æ¥å¯¹å…¶å˜æ›´åå­—(<code>common copy =&gt; COMMON</code>),ç„¶åæ‰§è¡Œ<code>ç¬¬3æ­¥</code>æ“ä½œå‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿé—®çš„å¥½å•Šã€‚é¼“æŒ ğŸ‘</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/11277325b5004da78d9b5c49d802515e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="16_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><p>çœ‹åˆ°è¿™ä¸ªç»“æœÂ·Â·Â·Â·Â·</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9e312d8e54524e1bbde83ea6add468a0~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="06.jpg"></p><p>å…¶å®æœ¬äººä¹Ÿæ˜¯å¾ˆæƒ³è¿™ä¹ˆæ“ä½œçš„ï¼Œå¯æ˜¯ç°åœ¨å›å¤´æƒ³æƒ³ï¼Œåœ¨ä¸åŒºåˆ†å¤§å°å†™çš„æƒ…å†µä¸‹:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">common === <span class="hljs-variable constant_">COMMON</span> <span class="hljs-comment">// true,</span><br></code></pre></td></tr></table></figure></li></ul><p>æ‰€ä»¥ä¸Šé¢çš„æç¤ºæ˜¯æ²¡æœ‰é—®é¢˜çš„ æˆ‘ä¸ªäººè®¤ä¸º</p><h3 id="5-æš‚å­˜ã€commitã€merge-åˆ°-masterã€æ¨åˆ°è¿œç«¯"><a href="#5-æš‚å­˜ã€commitã€merge-åˆ°-masterã€æ¨åˆ°è¿œç«¯" class="headerlink" title="5. æš‚å­˜ã€commitã€merge åˆ° masterã€æ¨åˆ°è¿œç«¯"></a>5. æš‚å­˜ã€commitã€merge åˆ° masterã€æ¨åˆ°è¿œç«¯</h3><p>åœ¨è¿™ä¸€æ­¥ ä½ å°†é‡åˆ°å¦‚ä¸‹é”™è¯¯ä¿¡æ¯å¯¼è‡´åˆ‡æ¢åˆ†æ”¯å¤±è´¥ (è·Ÿä¸Šé¢çš„è¿˜ä¸å¤ªä¸€æ ·)</p><ul><li><p><code>check</code> å‡ºé—®é¢˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">KaKa:<span class="hljs-built_in">test</span> xxxx$ git che master<br><br>error: å·¥ä½œåŒºä¸­ä¸‹åˆ—æœªè·Ÿè¸ªçš„æ–‡ä»¶å°†ä¼šå› ä¸ºæ£€å‡ºæ“ä½œè€Œè¢«è¦†ç›–ï¼š<br>        src/components/common/FootCell/index.vue<br>        src/components/common/Pagination/index.vue<br>        src/components/common/Table/index.vue<br>        src/components/common/TitleCell/index.vue<br>è¯·åœ¨åˆ‡æ¢åˆ†æ”¯å‰ç§»åŠ¨æˆ–åˆ é™¤ã€‚<br>æ­£åœ¨ç»ˆæ­¢<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶çš„é¡¹ç›®ç»“æ„æ˜¯è¿™æ ·å­çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">.<br>â”œâ”€â”€ README.md<br>â”œâ”€â”€ main.js<br>â””â”€â”€ src<br>    â””â”€â”€ components<br>        â””â”€â”€ COMMON  &lt;= <span class="hljs-comment"># é‡ç‚¹ï¼è¿™é‡Œ!!! å¹¶æ²¡æœ‰ common</span><br>            â”œâ”€â”€ FootCell<br>            â”‚   â””â”€â”€ index.vue<br>            â”œâ”€â”€ Pagination<br>            â”‚   â””â”€â”€ index.vue<br>            â”œâ”€â”€ Table<br>            â”‚   â””â”€â”€ index.vue<br>            â””â”€â”€ TitleCell<br>                â””â”€â”€ index.vue<br></code></pre></td></tr></table></figure><p>å¹¶æ²¡æœ‰<code>common</code>æ–‡ä»¶å¤¹ï¼!é‚£ä¹ˆå°±æ— è§£äº†ï¼Ÿï¼Ÿä½†æ˜¯å¦å®šçš„ï¼é‚£æˆ‘ä»¬å°±:</p><ul><li><p>æŠŠ<code>COMMON</code>&#x3D;&gt; <code>common</code></p></li><li><p>å†åˆ é™¤<code>common</code></p><p><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/22_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="22_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e34a54996c1047b1ad5323ac80d6eb63~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="23_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li><li><p>æœ€åæ‰§è¡Œ <code>git check master</code></p></li></ul><p>å¿½ç•¥æ‰§è¡Œåˆ é™¤åçš„æ–‡ä»¶å˜æ›´ï¼Œç›´æ¥ <code>git checkout master</code></p></li><li><p><code>merge</code> å‡ºé—®é¢˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">KaKa-3:<span class="hljs-built_in">test</span> xxxx$ git merge feature/user1<br><br>æ›´æ–° 5f318b9..24b399d<br>error: å·¥ä½œåŒºä¸­ä¸‹åˆ—æœªè·Ÿè¸ªçš„æ–‡ä»¶å°†ä¼šå› ä¸ºåˆå¹¶æ“ä½œè€Œè¢«è¦†ç›–ï¼š<br>        src/components/COMMON/FootCell/index.vue<br>        src/components/COMMON/Pagination/index.vue<br>        src/components/COMMON/Table/index.vue<br>        src/components/COMMON/TitleCell/index.vue<br>è¯·åœ¨åˆå¹¶å‰ç§»åŠ¨æˆ–åˆ é™¤ã€‚<br>æ­£åœ¨ç»ˆæ­¢<br></code></pre></td></tr></table></figure><p>å¹¶æ²¡æœ‰<code>COMMON</code>,å¤„ç†æ–¹æ³•åŒä¸Š:</p><ul><li>æŠŠ<code>common</code>&#x3D;&gt; <code>COMMON</code></li><li>å†åˆ é™¤<code>COMMON</code><br><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/24_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="24_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/efb8b56621944f0da593a1f6e99e3477~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="23_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></li><li>æœ€å<code>git merge feature/user1</code>å°±å¯ä»¥äº†~</li></ul></li></ul><h3 id="6-æŸ¥çœ‹-commit-è®°å½•"><a href="#6-æŸ¥çœ‹-commit-è®°å½•" class="headerlink" title="6. æŸ¥çœ‹ commit è®°å½•"></a>6. æŸ¥çœ‹ <code>commit</code> è®°å½•</h3><ul><li>å¦‚ä¸‹å›¾ï¼š <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a361ed790bf94b7691f468c63c080841~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="17_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></li></ul><h3 id="1-å…³é—­-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ-1"><a href="#1-å…³é—­-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ-1" class="headerlink" title="1. å…³é—­ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ"></a>1. å…³é—­ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config core.ignorecase <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="2-æ›´æ”¹æ–‡ä»¶å"><a href="#2-æ›´æ”¹æ–‡ä»¶å" class="headerlink" title="2. æ›´æ”¹æ–‡ä»¶å"></a>2. æ›´æ”¹æ–‡ä»¶å</h3><ul><li><p><code>common</code> &#x3D;&gt; <code>COMMON</code></p><p>ç„¶è€Œå°´å°¬çš„ä¸€å¹•å®ƒå‘ç”Ÿäº†ï¼ï¼ï¼å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/928907269477471d856d2496dce8e50e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="11_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><p><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/10_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="10_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><p>å§æ§½ï¼ <code>Git</code> å¹¶æ²¡æœ‰æ£€æµ‹åˆ° æ–‡ä»¶æœ‰å˜åŒ–ï¼</p></li></ul><h3 id="3-å’"><a href="#3-å’" class="headerlink" title="3. å’!"></a>3. å’!</h3><ul><li><p>è¿™ç§æƒ…å†µè¦ä¹ˆæ”¾å¼ƒï¼Œè¦ä¹ˆå¼€å¯æ•æ„Ÿæ¨¡å¼ï¼å¦‚æœå¼€å¯é‚£å°±æ˜¯<code>æƒ…å†µä¸€</code>äº†</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e41e7a1c4e5c4673ac3a42d6bdf680ae~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="46.jpg"></p></li></ul><h2 id="user2-æ›´æ–°å˜æ›´-2"><a href="#user2-æ›´æ–°å˜æ›´-2" class="headerlink" title="[user2]æ›´æ–°å˜æ›´"></a>[user2]æ›´æ–°å˜æ›´</h2><ul><li><p>æ­¤æ—¶ <code>user2</code>çš„<code>master</code> åˆ†æ”¯åˆå§‹ç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">.<br>â”œâ”€â”€ README.md<br>â”œâ”€â”€ main.js<br>â””â”€â”€ src<br>    â””â”€â”€ components<br>        â””â”€â”€ common<br>            â”œâ”€â”€ FootCell<br>            â”‚   â””â”€â”€ index.vue<br>            â”œâ”€â”€ Pagination<br>            â”‚   â””â”€â”€ index.vue<br>            â”œâ”€â”€ Table<br>            â”‚   â””â”€â”€ index.vue<br>            â””â”€â”€ TitleCell<br>                â””â”€â”€ index.vue<br></code></pre></td></tr></table></figure></li></ul><h3 id="1-å¼€å¯-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€-2"><a href="#1-å¼€å¯-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€-2" class="headerlink" title="1. å¼€å¯ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€"></a>1. å¼€å¯ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µä¸€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config core.ignorecase <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h3 id="2-pull-æœ€æ–°ä»£ç "><a href="#2-pull-æœ€æ–°ä»£ç " class="headerlink" title="2. pull æœ€æ–°ä»£ç "></a>2. pull æœ€æ–°ä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">KaKa:test2  xxxx$ git pull<br>æ›´æ–° 5f318b9..24b399d<br>error: å·¥ä½œåŒºä¸­ä¸‹åˆ—æœªè·Ÿè¸ªçš„æ–‡ä»¶å°†ä¼šå› ä¸ºåˆå¹¶æ“ä½œè€Œè¢«è¦†ç›–ï¼š<br>        src/components/COMMON/FootCell/index.vue<br>        src/components/COMMON/Pagination/index.vue<br>        src/components/COMMON/Table/index.vue<br>        src/components/COMMON/TitleCell/index.vue<br>è¯·åœ¨åˆå¹¶å‰ç§»åŠ¨æˆ–åˆ é™¤ã€‚<br>æ­£åœ¨ç»ˆæ­¢<br></code></pre></td></tr></table></figure><p>ä¸å‡ºæ‰€æ–™ ä¼šè·Ÿå¼€å¤´è®²çš„ çŠ¶å†µä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸é‡å¤èµ˜è¿°äº†ï¼Œå‚è€ƒä¸Šé¢çš„å³å¯è§£å†³ã€‚</p><h3 id="3-æŸ¥çœ‹-commit-è®°å½•"><a href="#3-æŸ¥çœ‹-commit-è®°å½•" class="headerlink" title="3. æŸ¥çœ‹ commit è®°å½•"></a>3. æŸ¥çœ‹ <code>commit</code> è®°å½•</h3><ul><li><p>å¦‚ä¸‹å›¾:</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7fc4f8cfc7d548b9801ea7fb7f854e72~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="17_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li></ul><h3 id="1-å…³é—­-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ-2"><a href="#1-å…³é—­-æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ-2" class="headerlink" title="1. å…³é—­ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ"></a>1. å…³é—­ æ•æ„Ÿæ¨¡å¼Â·æƒ…å†µäºŒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config core.ignorecase <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="2-pull-æœ€æ–°ä»£ç -1"><a href="#2-pull-æœ€æ–°ä»£ç -1" class="headerlink" title="2. pull æœ€æ–°ä»£ç "></a>2. <code>pull</code> æœ€æ–°ä»£ç </h3><ul><li><p>å¦‚ä¸‹å›¾</p><p><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/18_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="18_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p><p>åŒå‰é¢æ‰€è¯´,å˜æ›´éƒ½è¿‡æ¥äº†ï¼Œå”¯ç‹¬æ–‡ä»¶åç”±äºæœ¬åœ°çš„å¤§å°å†™ä¸æ•æ„Ÿï¼Œæ‰€ä»¥æ²¡æœ‰è‡ªåŠ¨å˜æ›´åå­—</p></li></ul><h3 id="3-æ‰‹åŠ¨æ›´æ”¹æ–‡ä»¶å-1"><a href="#3-æ‰‹åŠ¨æ›´æ”¹æ–‡ä»¶å-1" class="headerlink" title="3. æ‰‹åŠ¨æ›´æ”¹æ–‡ä»¶å"></a>3. æ‰‹åŠ¨æ›´æ”¹æ–‡ä»¶å</h3><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">common` =&gt; `COMMON<br></code></pre></td></tr></table></figure><h3 id="4-åˆ‡æ¢åˆ†æ”¯ï¼Œmer-master-ä»£ç "><a href="#4-åˆ‡æ¢åˆ†æ”¯ï¼Œmer-master-ä»£ç " class="headerlink" title="4. åˆ‡æ¢åˆ†æ”¯ï¼Œmer master ä»£ç "></a>4. åˆ‡æ¢åˆ†æ”¯ï¼Œmer master ä»£ç </h3><ul><li><p>åˆ‡åˆ†æ”¯ <code>checkout</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git checkout feature/user2<br></code></pre></td></tr></table></figure></li><li><p><code>merge</code> ä»£ç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git merge master<br></code></pre></td></tr></table></figure></li></ul><h3 id="5-æŸ¥çœ‹-commit-è®°å½•"><a href="#5-æŸ¥çœ‹-commit-è®°å½•" class="headerlink" title="5. æŸ¥çœ‹ commit è®°å½•"></a>5. æŸ¥çœ‹ <code>commit</code> è®°å½•</h3><ul><li><p>å¦‚ä¸‹å›¾:</p><p><img src="https://raw.githubusercontent.com/Popxie/kaka-img-repo/master/img/blogs/17_git%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98.png" alt="17_gitå¤§å°å†™ä¸æ•æ„Ÿå¼•å‘çš„é—®é¢˜"></p></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»¼ä¸Šçš„å‡ºæ¥çš„ç»“è®ºå°±æ˜¯å¤šäººåä½œå¼€å‘çš„æ—¶å€™å­˜åœ¨å·²ä¸‹æƒ…å†µ</p><ul><li><p>ç¬¬ä¸€ç§æ–¹å¼ <code>user1</code> ä¸¤ç§ï¼Œ <code>user2</code> ä¸¤ç§ï¼Œæ€»å…±å››ç§æƒ…å†µã€‚ä¸”æ–‡ä»¶éƒ½è¢«æ ‡è®°ä¸ºA</p><ul><li>éƒ½æœªå¼€å¯æ•æ„Ÿæ¨¡å¼ï¼ˆç»å¤§å¤šæ•°éƒ½æ˜¯è¿™ä¸ªæƒ…å†µï¼‰<br>è¿™ç§æƒ…å†µå¯æƒ³è€ŒçŸ¥ï¼Œè¿œç«¯çš„æ–‡ä»¶åä¸€ç›´éƒ½æ˜¯ common è€Œé COMMONï¼Œæ‰€æœ‰äººä¹ƒè‡³ä»¥åéƒ½ä¼šä¸€ç›´å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼ˆè‡ªå·±æœ¬åœ°éœ€è¦å»æ‰‹åŠ¨çš„æ›´æ”¹æ–‡ä»¶åï¼‰ï¼Œ</li><li>éƒ½å¼€å¯äº†æ•æ„Ÿæ¨¡å¼<br>è¿™ç§æƒ…å†µ <code>user2</code> åœ¨åŒæ­¥æ›´æ–° <code>master</code> åˆ†æ”¯ä»£ç çš„æ—¶å€™ä¼šé‡åˆ° <code>error</code>ï¼Œæ ¹æ®æç¤ºåˆ é™¤æˆ–ç§»åŠ¨æ–‡ä»¶ä½ç½®å³å¯ï¼ï¼ˆåˆ é™¤æœ€ç®€å•ç›´è§‚ï¼‰</li><li>ä¿®æ”¹æ–¹(<code>user1</code>)å¼€èµ·äº†æ•æ„Ÿæ¨¡å¼ï¼Œè¢«é€šçŸ¥æ–¹(<code>user2</code>)æœªå¼€å¯ è™½ç„¶æ–‡ä»¶åå·²ç»è¢«æ”¹åŠ¨ä¸”åŒæ­¥åˆ°äº†è¿œç«¯ï¼Œä½†æ˜¯å½“ user2 ï¼ˆmasterï¼‰æ‹‰å–çš„æ—¶å€™ä¼šå‘ç°è‡ªå·±æœ¬åœ°çš„æ–‡ä»¶åä¾æ—§æ˜¯ common æœªæ”¹åŠ¨ã€‚è¿™ä¸ªæ—¶å€™åªéœ€è¦æ‰‹åŠ¨çš„å»æ›´æ”¹æ–‡ä»¶åï¼Œç„¶å <code>merge</code> åˆ° <code>user2</code> çš„åˆ†æ”¯å³å¯</li><li>ä¿®æ”¹æ–¹(<code>user1</code>)æœªå¼€å¯æ•æ„Ÿæ¨¡å¼ï¼Œè¢«é€šçŸ¥æ–¹(<code>user2</code>)å¼€å¯äº†<br><code>user1</code> è‡ªä»¥ä¸ºæ–‡ä»¶åå·²ç»æ›´æ”¹æˆåŠŸä¸”åŒæ­¥åˆ°äº†è¿œç«¯ï¼Œå®é™…å¹¶æ²¡æœ‰åŒæ­¥åˆ°è¿œç«¯ï¼Œ<code>user2</code> è‡ªå·±æ‰‹åŠ¨æ›´æ”¹ï¼Œæ›´æ”¹å <code>push</code> åˆ°è¿œç«¯ï¼Œè¿™æ ·æ‰€æœ‰äººçš„æ–‡ä»¶å¼•ç”¨è·¯å¾„é”™è¯¯é—®é¢˜éƒ½èƒ½å¾—åˆ°è§£å†³</li></ul></li><li><p>ç¬¬äºŒç§æ–¹å¼</p><p>é€šè¿‡<code>git rm</code> è¿™ä¸ªæ“ä½œæ¥å¤„ç†ã€‚é€šè¿‡è¿™ç§æ–¹å¼å˜æ›´æ–‡ä»¶ä¼šè¢«æ ‡è®°ä¸ºR</p></li></ul><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>å·²ä¸Šæ‰€æœ‰å†…å®¹éƒ½æ˜¯ç»è¿‡å¥½å‡ éæµ‹è¯•ï¼Œä¸€éå®è·µä¸€éè®°å½•çš„å½¢å¼æ¥æ’°å†™çš„ï¼Œæœ€åä¹Ÿåå¤æ£€æŸ¥äº†å¥½å‡ éï¼Œç›®æµ‹æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¦‚æœæœ‰é—®é¢˜äº†å°±è¯·ç•™è¨€å‘ŠçŸ¥å§~</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43b9c2f3777647d1a0650f753e57cfd9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.image" alt="47.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¨¡å‹è°ƒä¼˜-åˆ é™¤å¼‚å¸¸å€¼ï¼ˆç®±å‹å›¾ï¼‰</title>
    <link href="/2022/04/06/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/%E6%A8%A1%E5%9E%8B%E8%B0%83%E4%BC%98%20-%20%E5%88%A0%E9%99%A4%E5%BC%82%E5%B8%B8%E5%80%BC%EF%BC%88%E7%AE%B1%E7%BA%BF%E5%9B%BE%EF%BC%89/"/>
    <url>/2022/04/06/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/%E6%A8%A1%E5%9E%8B%E8%B0%83%E4%BC%98%20-%20%E5%88%A0%E9%99%A4%E5%BC%82%E5%B8%B8%E5%80%BC%EF%BC%88%E7%AE%B1%E7%BA%BF%E5%9B%BE%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="1-ç®±çº¿å›¾"><a href="#1-ç®±çº¿å›¾" class="headerlink" title="1.ç®±çº¿å›¾"></a>1.ç®±çº¿å›¾</h2><p><strong>ç®±å½¢å›¾</strong>ï¼ˆBox plotï¼‰ï¼Œæ˜¯ä¸€ç§ç”¨ä½œæ˜¾ç¤ºä¸€ç»„æ•°æ®åˆ†æ•£æƒ…å†µèµ„æ–™çš„<a href="https://zh.wikipedia.org/wiki/%E7%BB%9F%E8%AE%A1%E5%9B%BE">ç»Ÿè®¡å›¾</a>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202204071304169.png" alt="ç®±å‹å›¾"></p><p>ç®±çº¿å›¾å¯ä»¥æ·±å…¥äº†è§£æ•°æ®çš„åˆ†å¸ƒç‰¹æ€§ï¼Œä¸Šå›¾è¯´æ˜äº†ç®±çº¿å›¾çš„ä¸åŒç‰¹å¾ã€‚</p><p>å…¶ä¸­**éå¼‚å¸¸å€¼æœ€å¸¸è§çš„å®šä¹‰æ˜¯[Q1 - 1.5xIQR, Q3 + 1.5xIQR]**ï¼Œå¦‚æœæ˜¯åŒºé—´å¤–çš„å€¼å°±è¢«è§†ä¸ºoutlierå¹¶æ˜¾ç¤ºåœ¨å›¾ä¸Šã€‚</p><ul><li>Q1ï¼šç¬¬ä¸€å››åˆ†ä½æ•°</li><li>medianï¼šæ˜¯ä¸­ä½æ•°</li><li>Q3ï¼šç¬¬ä¸‰å››åˆ†ä½æ•°</li><li>IQRï¼šå››åˆ†ä½é—´è·</li></ul><h2 id="2-éšæœºç”Ÿæˆæ•°æ®"><a href="#2-éšæœºç”Ÿæˆæ•°æ®" class="headerlink" title="2.éšæœºç”Ÿæˆæ•°æ®"></a>2.éšæœºç”Ÿæˆæ•°æ®</h2><ul><li>éšæœºç”Ÿæˆä¸€ç»„ä»¥æ­£æ€åˆ†å¸ƒå‡å€¼ç­‰äº10çš„æ•°æ®</li></ul><figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns<br><span class="hljs-comment"># è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</span><br>plt.rcParams[<span class="hljs-string">&#x27;font.sans-serif&#x27;</span>] = [<span class="hljs-string">&#x27;Simhei&#x27;</span>]<br><br>data = np.random.normal(loc = <span class="hljs-number">10</span>, scale = <span class="hljs-number">1</span>, size = <span class="hljs-number">1000</span>)<br>sns.distplot(data, bins=<span class="hljs-number">100</span>, color=<span class="hljs-string">&#x27;r&#x27;</span>)<br></code></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾ï¼šæ­£æ€çš„æ ‡å‡†åŒ–ç›´æ–¹å›¾äºå¯†åº¦ä¼°è®¡</p><p><img src="https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202204071305649.png" alt="æ­£æ€åˆ†å¸ƒç›´æ–¹å›¾"></p><h2 id="3-å¯»æ‰¾å¼‚å¸¸å€¼"><a href="#3-å¯»æ‰¾å¼‚å¸¸å€¼" class="headerlink" title="3.å¯»æ‰¾å¼‚å¸¸å€¼"></a>3.å¯»æ‰¾å¼‚å¸¸å€¼</h2><ul><li>æ‰¾åˆ°å¼‚å¸¸å€¼æ‰€åœ¨èŒƒå›´ï¼š<code>[Q1 - 1.5 x IQR, Q3 + 1.5 x IQR]</code></li><li>ç›´æ¥ä½¿ç”¨<code>matplotlib.pyplot.boxplot</code>çš„è¿”å›å€¼whiskersè·å–ä¸¤æç«¯çš„éå¼‚å¸¸æ•°æ®ç‚¹</li><li>ç»˜å›¾åè·å–å®ƒä»¬ï¼Œå½“ç»˜åˆ¶ç®±çº¿å›¾å®Œæˆæ—¶ï¼Œä½¿ç”¨<code>get_ydata()</code>æ–¹æ³•</li><li>å®ƒçš„è¿”å›å€¼è¿”å›ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œç¬¬äºŒä¸ªå…ƒç´ å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„å€¼ï¼ˆä¸Šè¾¹ç¼˜å’Œä¸‹è¾¹ç¼˜ï¼‰</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">fig = plt.figure(figsize=(<span class="hljs-number">10</span>,<span class="hljs-number">8</span>))<br>ax1 = fig.add_subplot(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>)<br>bp = ax1.boxplot(data)<br><br>lower_whisker = [item.get_ydata()[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> bp[<span class="hljs-string">&#x27;whiskers&#x27;</span>]][<span class="hljs-number">0</span>]<br>upper_whisker = [item.get_ydata()[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> bp[<span class="hljs-string">&#x27;whiskers&#x27;</span>]][<span class="hljs-number">1</span>]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä¸Šè¾¹ç¼˜ï¼š&quot;</span>, upper_whisker)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä¸‹è¾¹ç¼˜ï¼š&quot;</span>, lower_whisker)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;éå¼‚å¸¸èŒƒå›´ï¼š&quot;</span>, [lower_whisker,upper_whisker])<br><br><span class="hljs-comment">##### å¯»æ‰¾å¼‚å¸¸å€¼ #####</span><br>outlier = data[(data &lt; lower_whisker) | (data &gt; upper_whisker)]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¼‚å¸¸å€¼ï¼ˆç¦»æ•£å€¼ï¼‰ï¼š&quot;</span>, outlier)<br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">ä¸Šè¾¹ç¼˜ï¼š 12.610201767794644</span><br><span class="hljs-string">ä¸‹è¾¹ç¼˜ï¼š 7.4427962773205625</span><br><span class="hljs-string">éå¼‚å¸¸èŒƒå›´ï¼š [7.4427962773205625, 12.610201767794644]</span><br><span class="hljs-string">å¼‚å¸¸å€¼ï¼ˆç¦»æ•£å€¼ï¼‰ï¼š [13.10837006  7.14081742 12.71635149 12.66670042  7.25470382  6.8162954 7.05752588]</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br></code></pre></td></tr></table></figure><h2 id="4-åˆ é™¤å¼‚å¸¸å€¼"><a href="#4-åˆ é™¤å¼‚å¸¸å€¼" class="headerlink" title="4.åˆ é™¤å¼‚å¸¸å€¼"></a>4.åˆ é™¤å¼‚å¸¸å€¼</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">##### åˆ é™¤å¼‚å¸¸å€¼ ######</span><br>not_outlier = data[(data &gt; lower_whisker) &amp; (data &lt; upper_whisker)]<br><br><span class="hljs-comment">##### é‡æ–°æ£€æŸ¥æ˜¯å¦è¿˜æœ‰å¼‚å¸¸å€¼ #####</span><br>ax2 = fig.add_subplot(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,sharey =ax1)<br>ax2.boxplot(not_outlier,<br>            boxprops=&#123;<span class="hljs-string">&#x27;color&#x27;</span>:<span class="hljs-string">&#x27;red&#x27;</span>&#125;,<br>            <span class="hljs-comment">#è®¾ç½®ä¸Šä¸‹è¾¹ç¼˜çš„æ˜¾ç¤ºæ ·å¼</span><br>            capprops=&#123;<span class="hljs-string">&#x27;color&#x27;</span>:<span class="hljs-string">&#x27;green&#x27;</span>, <span class="hljs-string">&#x27;lw&#x27;</span>:<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;ls&#x27;</span>:<span class="hljs-string">&#x27;--&#x27;</span>&#125;,<br>            <span class="hljs-comment">#è®¾ç½®å¼‚å¸¸å€¼çš„æ˜¾ç¤ºæ ·å¼</span><br>            flierprops=&#123;<span class="hljs-string">&#x27;marker&#x27;</span>:<span class="hljs-string">&#x27;*&#x27;</span>, <span class="hljs-string">&#x27;markersize&#x27;</span>: <span class="hljs-number">8</span>&#125;)<br>ax1.set_xlabel(<span class="hljs-string">&#x27;åˆ é™¤å¼‚å¸¸å€¼å‰&#x27;</span>)<br>ax2.set_xlabel(<span class="hljs-string">&#x27;åˆ é™¤å¼‚å¸¸å€¼å&#x27;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202204071306550.png" alt="åˆ é™¤å¼‚å¸¸å€¼å‰åå¯¹æ¯”"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸Šé¢çš„ä¾‹å­ä»¥ä¸€ç»´æ•°ç»„å±•å¼€æ“ä½œï¼Œå¦‚æœä½ çš„æ˜¯äºŒç»´æ•°ç»„ï¼Œä½ æƒ³è§£å†³è¿™ç±»é—®é¢˜æˆ–è€…æœ‰å¤šä¸ªç®±çº¿å›¾ï¼Œæƒ³æ‰¹é‡åˆ é™¤å¼‚å¸¸å€¼è¯¥æ€ä¹ˆåšï¼Œå¯ä»¥å‚è€ƒæœ€åé™„ä¸Šçš„ç›¸å…³å‚è€ƒï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>æ•°æ®åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äººäººéƒ½æ˜¯è‡ªåª’ä½“</title>
    <link href="/2022/04/05/%E9%9A%8F%E7%AC%94/%E4%BA%BA%E4%BA%BA%E9%83%BD%E6%98%AF%E8%87%AA%E5%AA%92%E4%BD%93/"/>
    <url>/2022/04/05/%E9%9A%8F%E7%AC%94/%E4%BA%BA%E4%BA%BA%E9%83%BD%E6%98%AF%E8%87%AA%E5%AA%92%E4%BD%93/</url>
    
    <content type="html"><![CDATA[<h1 id="äº’è”ç½‘æ—¶ä»£ä¸‹ï¼Œä½ çœŸçš„çœ‹æ¸…è‡ªå·±äº†å—ï¼Ÿ"><a href="#äº’è”ç½‘æ—¶ä»£ä¸‹ï¼Œä½ çœŸçš„çœ‹æ¸…è‡ªå·±äº†å—ï¼Ÿ" class="headerlink" title="äº’è”ç½‘æ—¶ä»£ä¸‹ï¼Œä½ çœŸçš„çœ‹æ¸…è‡ªå·±äº†å—ï¼Ÿ"></a>äº’è”ç½‘æ—¶ä»£ä¸‹ï¼Œä½ çœŸçš„çœ‹æ¸…è‡ªå·±äº†å—ï¼Ÿ</h1><p>èº«å¤„äº’è”ç½‘æ—¶ä»£ï¼Œå½¢å½¢è‰²è‰²çš„ä¿¡æ¯æµç›®ä¸æš‡æ¥â€”â€”æŠ–éŸ³ã€Bç«™ã€å°çº¢ä¹¦ã€å¤´æ¡ï¼Œå„ç§å¹³å°ä¸€ä¸ªä¸€ä¸ªå‡ºç°åœ¨æˆ‘ä»¬é¢å‰å¯¹æˆ‘ä»¬è¯´ç€ç”¨æˆ‘ç”¨æˆ‘ï¼Œå¤§é‡çš„æ–°å¥‡åŠŸèƒ½ä¹Ÿç¡®å®å¸å¼•äº†å¾ˆå¤šçš„çŒå¥‡ç”¨æˆ·ï¼Œè¿™éƒ¨åˆ†çŒå¥‡ç”¨æˆ·åˆä¸ºäº†èƒ½å¤Ÿä»å¹³å°æä¾›çš„æ´»åŠ¨ä¸­è·å–æ›´å¤šåˆ©ç›Šï¼Œå‘æ›´å¤šçš„äººå¼€å§‹å®£ä¼ å¹³å°ï¼Œéšç€è¿™ç§ç–¯ç‹‚çš„ä¼ é€’ï¼Œå¹³å°ä½¿ç”¨äººæ•°ç–¯ç‹‚å¢é•¿ã€‚</p><p>æˆ‘ä»¬è¢«è’™è”½äº†åŒçœ¼</p>]]></content>
    
    
    <categories>
      
      <category>éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è‡ªåª’ä½“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åˆ©ç”¨ Github Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢</title>
    <link href="/2022/04/05/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/Hexo/"/>
    <url>/2022/04/05/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/Hexo/</url>
    
    <content type="html"><![CDATA[<h1 id="åˆ©ç”¨-Github-Actions-è‡ªåŠ¨éƒ¨ç½²-Hexo-åšå®¢"><a href="#åˆ©ç”¨-Github-Actions-è‡ªåŠ¨éƒ¨ç½²-Hexo-åšå®¢" class="headerlink" title="åˆ©ç”¨ Github Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢"></a>åˆ©ç”¨ Github Actions è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>Github Actions å¯ä»¥å¾ˆæ–¹ä¾¿å®ç° CI&#x2F;CD å·¥ä½œæµï¼Œç±»ä¼¼ Travis çš„ç”¨æ³•ï¼Œæ¥å¸®æˆ‘ä»¬å®Œæˆä¸€äº›å·¥ä½œï¼Œæ¯”å¦‚å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²ç­‰æ“ä½œã€‚å½“æˆ‘ä»¬è¿è¡Œ Jobs æ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªå®¹å™¨ (runner)ï¼Œå®¹å™¨æ”¯æŒï¼šUbuntuã€Windows å’Œ MacOS ç­‰ç³»ç»Ÿï¼Œåœ¨å®¹å™¨ä¸­æˆ‘ä»¬å¯ä»¥å®‰è£…è½¯ä»¶ï¼Œåˆ©ç”¨å®‰è£…çš„è½¯ä»¶å¸®æˆ‘ä»¬å¤„ç†ä¸€äº›æ•°æ®ï¼Œç„¶åæŠŠå¤„ç†å¥½çš„æ•°æ®æ¨é€åˆ°æŸä¸ªåœ°æ–¹ã€‚</p><p>æœ¬æ–‡å°†ä»‹ç»åˆ©ç”¨ Github Actions å®ç°è‡ªåŠ¨éƒ¨ç½² hexo åˆ° Github Pagesï¼Œåœ¨ä¹‹å‰æˆ‘ä»¬éœ€è¦å†™å®Œæ–‡ç« æ‰§è¡Œ <code>hexo generate --deploy</code> æ¥éƒ¨ç½²ï¼Œå½“ä½ æ–‡ç« æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå¯èƒ½è¿˜éœ€è¦ç­‰å¾…å¾ˆä¹…ï¼Œè€Œä¸”è¿˜å¯èƒ½ä¼šé‡åˆ°æœ¬åœ°å®‰è£…çš„ Node.js ç‰ˆæœ¬ä¸ Hexo ä¸å…¼å®¹çš„é—®é¢˜ï¼Œç›®å‰æˆ‘å°±æ˜¯å› ä¸ºç”µè„‘çš„ Node.js ç‰ˆæœ¬å‡åˆ° v14 ç‰ˆæœ¬å¯¼è‡´ä¸ Hexo ä¸å…¼å®¹éƒ¨ç½²ä¸äº†ï¼Œæ‰æ¥æ£è…¾ Github Actions åŠŸèƒ½çš„ã€‚åˆ©ç”¨ Github Actions ä½ å°†ä¼šæ²¡æœ‰è¿™äº›çƒ¦æ¼ã€‚</p><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><h3 id="åˆ›å»ºæ‰€éœ€ä»“åº“"><a href="#åˆ›å»ºæ‰€éœ€ä»“åº“" class="headerlink" title="åˆ›å»ºæ‰€éœ€ä»“åº“"></a>åˆ›å»ºæ‰€éœ€ä»“åº“</h3><ol><li>åˆ›å»º <code>blog</code> ä»“åº“ç”¨æ¥å­˜æ”¾ Hexo é¡¹ç›®</li><li>åˆ›å»º <code>your.github.io</code> ä»“åº“ç”¨æ¥å­˜æ”¾é™æ€åšå®¢é¡µé¢</li></ol><h3 id="ç”Ÿæˆéƒ¨ç½²å¯†é’¥"><a href="#ç”Ÿæˆéƒ¨ç½²å¯†é’¥" class="headerlink" title="ç”Ÿæˆéƒ¨ç½²å¯†é’¥"></a>ç”Ÿæˆéƒ¨ç½²å¯†é’¥</h3><p>ä¸€è·¯æŒ‰å›è½¦ç›´åˆ°ç”ŸæˆæˆåŠŸ</p><figure class="highlight powershell"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> ssh<span class="hljs-literal">-keygen</span> <span class="hljs-operator">-f</span> github<span class="hljs-literal">-deploy-key</span><br></code></pre></td></tr></table></figure><p>å½“å‰ç›®å½•ä¸‹ä¼šæœ‰ <code>github-deploy-key</code> å’Œ <code>github-deploy-key.pub</code> ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><h3 id="é…ç½®éƒ¨ç½²å¯†é’¥"><a href="#é…ç½®éƒ¨ç½²å¯†é’¥" class="headerlink" title="é…ç½®éƒ¨ç½²å¯†é’¥"></a>é…ç½®éƒ¨ç½²å¯†é’¥</h3><p>å¤åˆ¶ <code>github-deploy-key</code> æ–‡ä»¶å†…å®¹ï¼Œåœ¨ <code>blog</code> ä»“åº“ <code>Settings -&gt; Secrets -&gt; Add a new secret</code> é¡µé¢ä¸Šæ·»åŠ ã€‚</p><ol><li>åœ¨ <code>Name</code> è¾“å…¥æ¡†å¡«å†™ <code>HEXO_DEPLOY_PRI</code>ã€‚</li><li>åœ¨ <code>Value</code> è¾“å…¥æ¡†å¡«å†™ <code>github-deploy-key</code> æ–‡ä»¶å†…å®¹ã€‚</li></ol><p><img src="https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/add-secret@2x.png" alt="img"></p><p>å¤åˆ¶ <code>github-deploy-key.pub</code> æ–‡ä»¶å†…å®¹ï¼Œåœ¨ <code>your.github.io</code> ä»“åº“ <code>Settings -&gt; Deploy keys -&gt; Add deploy key</code> é¡µé¢ä¸Šæ·»åŠ ã€‚</p><ol><li>åœ¨ <code>Title</code> è¾“å…¥æ¡†å¡«å†™ <code>HEXO_DEPLOY_PUB</code>ã€‚</li><li>åœ¨ <code>Key</code> è¾“å…¥æ¡†å¡«å†™ <code>github-deploy-key.pub</code> æ–‡ä»¶å†…å®¹ã€‚</li><li>å‹¾é€‰ <code>Allow write access</code> é€‰é¡¹ã€‚</li></ol><p><img src="https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/add-key@2x.png" alt="img"></p><h2 id="ç¼–å†™-Github-Actions"><a href="#ç¼–å†™-Github-Actions" class="headerlink" title="ç¼–å†™ Github Actions"></a>ç¼–å†™ Github Actions</h2><h3 id="Workflow-æ¨¡ç‰ˆ"><a href="#Workflow-æ¨¡ç‰ˆ" class="headerlink" title="Workflow æ¨¡ç‰ˆ"></a>Workflow æ¨¡ç‰ˆ</h3><p>åœ¨ <code>blog</code> ä»“åº“æ ¹ç›®å½•ä¸‹åˆ›å»º <code>.github/workflows/deploy.yml</code> æ–‡ä»¶ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ã€‚</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">blog <span class="hljs-params">(repository)</span><br>â””â”€â”€ <span class="hljs-string">.github</span><br>    â””â”€â”€ workflows<br>        â””â”€â”€ <span class="hljs-keyword">deploy</span>.yml<br></code></pre></td></tr></table></figure><p>åœ¨ <code>deploy.yml</code> æ–‡ä»¶ä¸­ç²˜è´´ä»¥ä¸‹å†…å®¹ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">CI</span><br><br><span class="hljs-attr">on:</span><br>  <span class="hljs-attr">push:</span><br>    <span class="hljs-attr">branches:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">master</span><br><br><span class="hljs-attr">env:</span><br>  <span class="hljs-attr">GIT_USER:</span> <span class="hljs-string">Sanonz</span><br>  <span class="hljs-attr">GIT_EMAIL:</span> <span class="hljs-string">sanonz@126.com</span><br>  <span class="hljs-attr">THEME_REPO:</span> <span class="hljs-string">sanonz/hexo-theme-concise</span><br>  <span class="hljs-attr">THEME_BRANCH:</span> <span class="hljs-string">master</span><br>  <span class="hljs-attr">DEPLOY_REPO:</span> <span class="hljs-string">sanonz/sanonz.github.io</span><br>  <span class="hljs-attr">DEPLOY_BRANCH:</span> <span class="hljs-string">master</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">build:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">on</span> <span class="hljs-string">node</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">matrix.node_version</span> <span class="hljs-string">&#125;&#125;</span> <span class="hljs-string">and</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">matrix.os</span> <span class="hljs-string">&#125;&#125;</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">strategy:</span><br>      <span class="hljs-attr">matrix:</span><br>        <span class="hljs-attr">os:</span> [<span class="hljs-string">ubuntu-latest</span>]<br>        <span class="hljs-attr">node_version:</span> [<span class="hljs-number">12.</span><span class="hljs-string">x</span>]<br><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">theme</span> <span class="hljs-string">repo</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">repository:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.THEME_REPO</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">ref:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.THEME_BRANCH</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">path:</span> <span class="hljs-string">themes/concise</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span> <span class="hljs-string">deploy</span> <span class="hljs-string">repo</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">repository:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.DEPLOY_REPO</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">ref:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">env.DEPLOY_BRANCH</span> <span class="hljs-string">&#125;&#125;</span><br>          <span class="hljs-attr">path:</span> <span class="hljs-string">.deploy_git</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Use</span> <span class="hljs-string">Node.js</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">matrix.node_version</span> <span class="hljs-string">&#125;&#125;</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v1</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">node-version:</span> <span class="hljs-string">$&#123;&#123;</span> <span class="hljs-string">matrix.node_version</span> <span class="hljs-string">&#125;&#125;</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Configuration</span> <span class="hljs-string">environment</span><br>        <span class="hljs-attr">env:</span><br>          <span class="hljs-attr">HEXO_DEPLOY_PRI:</span> <span class="hljs-string">$&#123;&#123;secrets.HEXO_DEPLOY_PRI&#125;&#125;</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          sudo timedatectl set-timezone &quot;Asia/Shanghai&quot;</span><br><span class="hljs-string">          mkdir -p ~/.ssh/</span><br><span class="hljs-string">          echo &quot;$HEXO_DEPLOY_PRI&quot; &gt; ~/.ssh/id_rsa</span><br><span class="hljs-string">          chmod 600 ~/.ssh/id_rsa</span><br><span class="hljs-string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span><br><span class="hljs-string">          git config --global user.name $GIT_USER</span><br><span class="hljs-string">          git config --global user.email $GIT_EMAIL</span><br><span class="hljs-string">          cp _config.theme.yml themes/concise/_config.yml</span><br><span class="hljs-string"></span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">dependencies</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br><span class="hljs-string">          npm install</span><br><span class="hljs-string"></span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">hexo</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">|</span><br>          <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">deploy</span><br></code></pre></td></tr></table></figure><h3 id="æ¨¡ç‰ˆå‚æ•°è¯´æ˜"><a href="#æ¨¡ç‰ˆå‚æ•°è¯´æ˜" class="headerlink" title="æ¨¡ç‰ˆå‚æ•°è¯´æ˜"></a>æ¨¡ç‰ˆå‚æ•°è¯´æ˜</h3><ul><li><p><em>name</em> ä¸ºæ­¤ Action çš„åå­—</p></li><li><p><em>on</em> è§¦å‘æ¡ä»¶ï¼Œå½“æ»¡è¶³æ¡ä»¶æ—¶ä¼šè§¦å‘æ­¤ä»»åŠ¡ï¼Œè¿™é‡Œçš„ <code>on.push.branches.$.master</code> æ˜¯æŒ‡å½“ <code>master</code> åˆ†æ”¯æ”¶åˆ° <code>push</code> åæ‰§è¡Œä»»åŠ¡ã€‚</p></li><li><p>env</p><p>ä¸ºç¯å¢ƒå˜é‡å¯¹è±¡</p><ul><li><em>env.GIT_USER</em> ä¸º Hexo ç¼–è¯‘åä½¿ç”¨æ­¤ git ç”¨æˆ·éƒ¨ç½²åˆ°ä»“åº“ã€‚</li><li><em>env.GIT_EMAIL</em> ä¸º Hexo ç¼–è¯‘åä½¿ç”¨æ­¤ git é‚®ç®±éƒ¨ç½²åˆ°ä»“åº“ã€‚</li><li><em>env.THEME_REPO</em> ä¸ºæ‚¨çš„ Hexo æ‰€ä½¿ç”¨çš„ä¸»é¢˜çš„ä»“åº“ï¼Œè¿™é‡Œä¸º <code>sanonz/hexo-theme-concise</code>ã€‚</li><li><em>env.THEME_BRANCH</em> ä¸ºæ‚¨çš„ Hexo æ‰€ä½¿ç”¨çš„ä¸»é¢˜ä»“åº“çš„ç‰ˆæœ¬ï¼Œå¯ä»¥æ˜¯ï¼šbranchã€tag æˆ–è€… SHAã€‚</li><li><em>env.DEPLOY_REPO</em> ä¸º Hexo ç¼–è¯‘åè¦éƒ¨ç½²çš„ä»“åº“ï¼Œä¾‹å¦‚ï¼š<code>sanonz/sanonz.github.io</code>ã€‚</li><li><em>env.DEPLOY_BRANCH</em> ä¸º Hexo ç¼–è¯‘åè¦éƒ¨ç½²åˆ°çš„åˆ†æ”¯ï¼Œä¾‹å¦‚ï¼šmasterã€‚</li></ul></li><li><p>jobs</p><p>ä¸ºæ­¤ Action ä¸‹çš„ä»»åŠ¡åˆ—è¡¨</p><ul><li><p><em>jobs.{job}.name</em> ä»»åŠ¡åç§°</p></li><li><p><em>jobs.{job}.runs-on</em> ä»»åŠ¡æ‰€éœ€å®¹å™¨ï¼Œå¯é€‰å€¼ï¼š<code>ubuntu-latest</code>ã€<code>windows-latest</code>ã€<code>macos-latest</code>ã€‚</p></li><li><p><em>jobs.{job}.strategy</em> ç­–ç•¥ä¸‹å¯ä»¥å†™ <code>array</code> æ ¼å¼ï¼Œæ­¤ job ä¼šéå†æ­¤æ•°ç»„æ‰§è¡Œã€‚</p></li><li><p>jobs.{job}.steps</p><p>ä¸€ä¸ªæ­¥éª¤æ•°ç»„ï¼Œå¯ä»¥æŠŠæ‰€è¦å¹²çš„äº‹åˆ†æ­¥éª¤æ”¾åˆ°è¿™é‡Œã€‚</p><ul><li><em>jobs.{job}.steps.$.name</em> æ­¥éª¤åï¼Œç¼–è¯‘æ—¶ä¼šä¼šä»¥ LOG å½¢å¼è¾“å‡ºã€‚</li><li><em>jobs.{job}.steps.$.uses</em> æ‰€è¦è°ƒç”¨çš„ Actionï¼Œå¯ä»¥åˆ° <a href="https://github.com/actions">https://github.com/actions</a> æŸ¥çœ‹æ›´å¤šã€‚</li><li><em>jobs.{job}.steps.$.with</em> ä¸€ä¸ªå¯¹è±¡ï¼Œè°ƒç”¨ Action ä¼ çš„å‚æ•°ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æ‰€ä½¿ç”¨ Action çš„è¯´æ˜ã€‚</li></ul></li></ul></li></ul><h3 id="ç¬¬ä¸‰æ–¹-Actions"><a href="#ç¬¬ä¸‰æ–¹-Actions" class="headerlink" title="ç¬¬ä¸‰æ–¹ Actions"></a>ç¬¬ä¸‰æ–¹ Actions</h3><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹ Actions è¯­æ³• <code>&#123;owner&#125;/&#123;repo&#125;@&#123;ref&#125;</code> æˆ–è€… <code>&#123;owner&#125;/&#123;repo&#125;/&#123;path&#125;@&#123;ref&#125;</code> ä¾‹å¦‚ï¼š</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">jobs</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">build</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">runs-on</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attribute">steps</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">uses: actions/checkout@v2</span><br></code></pre></td></tr></table></figure><p>ä¸€ã€è°ƒç”¨ <code>actions/checkout@v2</code> å¯ä»¥å®ç° Checkout ä¸€ä¸ª git ä»“åº“åˆ°å®¹å™¨ã€‚</p><p>ä¾‹å¦‚ Checkout å½“å‰ä»“åº“åˆ°æœ¬åœ°ï¼Œ<code>with.repo</code> ä¸å¡«å†™é»˜è®¤ä¸ºå½“å‰ä»“åº“ã€‚</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">jobs</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">build</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">runs-on</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attribute">steps</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">uses: actions/checkout@v2</span><br>        <span class="hljs-comment"># with:</span><br>          <span class="hljs-comment"># repository: $&#123;&#123; github.repository &#125;&#125;</span><br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚ Checkout ç¬¬ä¸‰æ–¹ä»“åº“ <code>git@github.com:sanonz/hexo-theme-concise.git</code> çš„ <code>master</code> åˆ†æ”¯åˆ°å®¹å™¨ <code>themes/concise</code> ç›®å½•ã€‚</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">jobs</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">build</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">runs-on</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attribute">steps</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">uses: actions/checkout@v2</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">with:</span><br>          <span class="hljs-attribute">repository</span><span class="hljs-punctuation">:</span> <span class="hljs-string">sanonz/hexo-theme-concise</span><br>          <span class="hljs-attribute">ref</span><span class="hljs-punctuation">:</span> <span class="hljs-string">master</span><br>          <span class="hljs-attribute">path</span><span class="hljs-punctuation">:</span> <span class="hljs-string">themes/concise</span><br></code></pre></td></tr></table></figure><p>äºŒã€è°ƒç”¨ <code>actions/setup-node@v1</code> å¯ä»¥é…ç½®å®¹å™¨ Node.js ç¯å¢ƒã€‚</p><p>ä¾‹å¦‚å®‰è£… Node.js ç‰ˆæœ¬ v12 åˆ°å®¹å™¨ä¸­ï¼Œ<code>with.node-version</code> å¯ä»¥æŒ‡å®š Node.js ç‰ˆæœ¬ã€‚</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">jobs</span><span class="hljs-punctuation">:</span><br>  <span class="hljs-attribute">build</span><span class="hljs-punctuation">:</span><br>    <span class="hljs-attribute">runs-on</span><span class="hljs-punctuation">:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attribute">steps</span><span class="hljs-punctuation">:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">uses: actions/setup-node@v1</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">with:</span><br>          <span class="hljs-attribute">node-version</span><span class="hljs-punctuation">:</span> <span class="hljs-string">v12</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥åœ¨è¿™é‡ŒæŸ¥æ‰¾æ›´å¤š Actions ä»¥åŠä½¿ç”¨æ–¹å¼ <a href="https://github.com/marketplace?type=actions&query=checkout">å®˜æ–¹ Actions å¸‚åœº</a>ã€‚</p><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>å¤åˆ¶ä¸€ä»½ <a href="https://github.com/sanonz/hexo-theme-concise/blob/master/_config.example.yml%EF%BC%8C%E6%94%BE%E5%88%B0">https://github.com/sanonz/hexo-theme-concise/blob/master/_config.example.ymlï¼Œæ”¾åˆ°</a> <code>blog</code> æ ¹ç›®å½•ä¸‹ï¼Œåä¸º <code>_config.theme.yml</code>ï¼Œå¦‚æœæ‚¨å·²ç»é…ç½®è¿‡æ­¤æ–‡ä»¶ï¼Œåªéœ€è¦æŠŠæ‚¨çš„å¤åˆ¶è¿‡æ¥å°±è¡Œã€‚</p><p>æœ€ç»ˆç›®å½•ç»“æ„</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">blog (repository)<br>â”œâ”€â”€ _config<span class="hljs-selector-class">.theme</span><span class="hljs-selector-class">.yml</span><br>â””â”€â”€ <span class="hljs-selector-class">.github</span><br>    â””â”€â”€ workflows<br>        â””â”€â”€ deploy.yml<br></code></pre></td></tr></table></figure><p>æŠŠ <code>_config.theme.yml</code> ä¸ <code>deploy.yml</code> æ–‡ä»¶æ¨é€åˆ° <code>blog</code> ä»“åº“ï¼Œåœ¨æ­¤ä»“åº“ <code>Actions</code> é¡µé¢å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåå­—ä¸º <code>CI</code> çš„ Actionã€‚</p><h3 id="æ‰§è¡Œä»»åŠ¡"><a href="#æ‰§è¡Œä»»åŠ¡" class="headerlink" title="æ‰§è¡Œä»»åŠ¡"></a>æ‰§è¡Œä»»åŠ¡</h3><p>å†™ä¸€ç¯‡æ–‡ç« ï¼Œ<code>push</code> åˆ° <code>blog</code> ä»“åº“çš„ <code>master</code> åˆ†æ”¯ï¼Œåœ¨æ­¤ä»“åº“ <code>Actions</code> é¡µé¢æŸ¥çœ‹å½“å‰ taskã€‚</p><p><img src="https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/run@2x.png" alt="img"></p><p>å½“ä»»åŠ¡å®ŒæˆåæŸ¥çœ‹æ‚¨çš„åšå®¢ <code>https://your.github.io</code>ï¼Œå¦‚æœä¸å‡ºæ„å¤–çš„è¯å·²ç»å¯ä»¥çœ‹åˆ°æ–°æ·»åŠ çš„æ–‡ç« äº†ã€‚</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>å·æ‡’æ˜¯äººç±»å‘å±•çš„åŠ¨åŠ›ï¼Œäººéƒ½æœ‰å·æ‡’çš„æƒ³æ³•ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†è®©è‡ªå·±èƒ½å¤Ÿæ´»å¾—æ›´å¥½ï¼Œç»è¿‡å‡ åƒå¹´çš„ä¸æ–­å‘å±•ï¼Œç°åœ¨äººå·æ‡’çš„æ–¹å¼æ— ç–‘æ›´åŠ çš„å…ˆè¿›ã€‚</p><p>è‡³æ­¤ç»“æŸï¼Œæ„Ÿè°¢é˜…è¯»ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
      <tag>Hexo</tag>
      
      <tag>Actions</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>WebpackDay01</title>
    <link href="/2022/04/05/Webpack%E5%AD%A6%E4%B9%A0/Day01/"/>
    <url>/2022/04/05/Webpack%E5%AD%A6%E4%B9%A0/Day01/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»£ç åˆ†ç¦»æ–¹æ³•"><a href="#ä»£ç åˆ†ç¦»æ–¹æ³•" class="headerlink" title="ä»£ç åˆ†ç¦»æ–¹æ³•"></a>ä»£ç åˆ†ç¦»æ–¹æ³•</h1><h2 id="å…¥å£èµ·ç‚¹"><a href="#å…¥å£èµ·ç‚¹" class="headerlink" title="å…¥å£èµ·ç‚¹"></a>å…¥å£èµ·ç‚¹</h2><blockquote><p>ä½¿ç”¨ <a href="https://webpack.docschina.org/configuration/entry-context"><code>entry</code></a> é…ç½®æ‰‹åŠ¨åœ°åˆ†ç¦»ä»£ç ã€‚</p></blockquote><p><code>webpack.config.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br> <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;./src/index.js&#x27;</span>,<br> <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br> <span class="hljs-attr">entry</span>: &#123;<br>   <span class="hljs-attr">index</span>: <span class="hljs-string">&#x27;./src/index.js&#x27;</span>,<br>   <span class="hljs-attr">another</span>: <span class="hljs-string">&#x27;./src/another-module.js&#x27;</span>,<br> &#125;,<br>  <span class="hljs-attr">output</span>: &#123;<br>   <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;main.js&#x27;</span>,<br>   <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;[name].bundle.js&#x27;</span>,<br>   <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>),<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>è¿™ç§æ–¹å¼å­˜åœ¨ä¸€äº›éšæ‚£</strong>ï¼š</p><ul><li>å¦‚æœå…¥å£ chunk ä¹‹é—´åŒ…å«ä¸€äº›é‡å¤çš„æ¨¡å—ï¼Œé‚£äº›é‡å¤æ¨¡å—éƒ½ä¼šè¢«å¼•å…¥åˆ°å„ä¸ª bundle ä¸­ã€‚</li><li>è¿™ç§æ–¹æ³•ä¸å¤Ÿçµæ´»ï¼Œå¹¶ä¸”ä¸èƒ½åŠ¨æ€åœ°å°†æ ¸å¿ƒåº”ç”¨ç¨‹åºé€»è¾‘ä¸­çš„ä»£ç æ‹†åˆ†å‡ºæ¥ã€‚</li></ul><h2 id="é˜²æ­¢é‡å¤"><a href="#é˜²æ­¢é‡å¤" class="headerlink" title="é˜²æ­¢é‡å¤"></a>é˜²æ­¢é‡å¤</h2><blockquote><p>ä½¿ç”¨ <a href="https://webpack.docschina.org/configuration/entry-context/#dependencies">Entry dependencies</a> æˆ–è€… <a href="https://webpack.docschina.org/plugins/split-chunks-plugin"><code>SplitChunksPlugin</code></a> å»é‡å’Œåˆ†ç¦» chunk</p></blockquote><h3 id="å…¥å£ä¾èµ–"><a href="#å…¥å£ä¾èµ–" class="headerlink" title="å…¥å£ä¾èµ–"></a>å…¥å£ä¾èµ–</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>  <span class="hljs-attr">entry</span>: &#123;<br>    <span class="hljs-attr">index</span>: &#123;<br>      <span class="hljs-attr">import</span>: <span class="hljs-string">&#x27;./src/index.js&#x27;</span>,<br>      <span class="hljs-attr">dependOn</span>: <span class="hljs-string">&#x27;shared&#x27;</span>,<br>    &#125;,<br>    <span class="hljs-attr">another</span>: &#123;<br>      <span class="hljs-attr">import</span>: <span class="hljs-string">&#x27;./src/another-module.js&#x27;</span>,<br>      <span class="hljs-attr">dependOn</span>: <span class="hljs-string">&#x27;shared&#x27;</span>,<br>    &#125;,<br>    <span class="hljs-attr">shared</span>: <span class="hljs-string">&#x27;lodash&#x27;</span>,<br>  &#125;,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;[name].bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>),<br>  &#125;,<br> <span class="hljs-attr">optimization</span>: &#123;<br>   <span class="hljs-attr">runtimeChunk</span>: <span class="hljs-string">&#x27;single&#x27;</span>,<br> &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="SplitChunksPlugin"><a href="#SplitChunksPlugin" class="headerlink" title="SplitChunksPlugin"></a>SplitChunksPlugin</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;development&#x27;</span>,<br>  <span class="hljs-attr">entry</span>: &#123;<br>    <span class="hljs-attr">index</span>: <span class="hljs-string">&#x27;./src/index.js&#x27;</span>,<br>    <span class="hljs-attr">another</span>: <span class="hljs-string">&#x27;./src/another-module.js&#x27;</span>,<br>  &#125;,<br>  <span class="hljs-attr">output</span>: &#123;<br>    <span class="hljs-attr">filename</span>: <span class="hljs-string">&#x27;[name].bundle.js&#x27;</span>,<br>    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;dist&#x27;</span>),<br>  &#125;,<br> <span class="hljs-attr">optimization</span>: &#123;<br>   <span class="hljs-attr">splitChunks</span>: &#123;<br>     <span class="hljs-attr">chunks</span>: <span class="hljs-string">&#x27;all&#x27;</span>,<br>   &#125;,<br> &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="åŠ¨æ€å¯¼å…¥"><a href="#åŠ¨æ€å¯¼å…¥" class="headerlink" title="åŠ¨æ€å¯¼å…¥"></a>åŠ¨æ€å¯¼å…¥</h2><blockquote><p>é€šè¿‡æ¨¡å—çš„å†…è”å‡½æ•°è°ƒç”¨æ¥åˆ†ç¦»ä»£ç ã€‚</p></blockquote><p><strong>src&#x2F;index.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getComponent</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;div&#x27;</span>);<br>  <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">default</span>: _ &#125; = <span class="hljs-keyword">await</span> <span class="hljs-title function_">import</span>(<span class="hljs-string">&#x27;lodash&#x27;</span>);<br><br>  element.<span class="hljs-property">innerHTML</span> = _.<span class="hljs-title function_">join</span>([<span class="hljs-string">&#x27;Hello&#x27;</span>, <span class="hljs-string">&#x27;webpack&#x27;</span>], <span class="hljs-string">&#x27; &#x27;</span>);<br><br>  <span class="hljs-keyword">return</span> element;<br> &#125;<br><br> <span class="hljs-title function_">getComponent</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">component</span>) =&gt;</span> &#123;<br>   <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(component);<br> &#125;);<br></code></pre></td></tr></table></figure><h1 id="ä»£ç åŒ…åˆ†æ"><a href="#ä»£ç åŒ…åˆ†æ" class="headerlink" title="ä»£ç åŒ…åˆ†æ"></a>ä»£ç åŒ…åˆ†æ</h1><p><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack-bundle-analyzerå·¥å…·</a></p><p><img src="https://cloud.githubusercontent.com/assets/302213/20628702/93f72404-b338-11e6-92d4-9a365550a701.gif"></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Webpack</tag>
      
      <tag>å‰ç«¯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TCP</title>
    <link href="/2022/04/05/%E9%9D%A2%E8%AF%95/TCP/"/>
    <url>/2022/04/05/%E9%9D%A2%E8%AF%95/TCP/</url>
    
    <content type="html"><![CDATA[<h1 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h1><p>TCP çš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Œå¯ä»¥è¯´æ˜¯è€ç”Ÿå¸¸è°ˆçš„ç»å…¸é—®é¢˜äº†ï¼Œé€šå¸¸ä¹Ÿä½œä¸ºå„å¤§å…¬å¸å¸¸è§çš„é¢è¯•è€ƒé¢˜ï¼Œå…·æœ‰ä¸€å®šçš„æ°´å¹³åŒºåˆ†åº¦ã€‚çœ‹ä¼¼æ˜¯ç®€å•çš„é¢è¯•é—®é¢˜ï¼Œå¦‚æœä½ çš„å›ç­”ä¸ç¬¦åˆé¢è¯•å®˜æœŸå¾…çš„æ°´å‡†ï¼Œæœ‰å¯èƒ½å°±ç›´æ¥å‡‰å‡‰äº†ã€‚  </p><p>æœ¬æ–‡ä¼šå›´ç»•ï¼Œä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ç›¸å…³çš„ä¸€äº›åˆ—æ ¸å¿ƒé—®é¢˜ï¼Œåˆ†äº«å¦‚ä½•æ›´å‡†ç¡®çš„å›ç­”å’Œåº”å¯¹å¸¸è§çš„é¢è¯•é—®é¢˜ï¼Œä»¥åé¢å¯¹å†åˆé’»çš„é¢è¯•å®˜ï¼Œä½ éƒ½å¯ä»¥éšæ„åœ°è·Ÿä»–æ‰¯çš®äº†ã€‚</p><h2 id="é¢è¯•TCPçš„æ„ä¹‰"><a href="#é¢è¯•TCPçš„æ„ä¹‰" class="headerlink" title="é¢è¯•TCPçš„æ„ä¹‰"></a>é¢è¯•TCPçš„æ„ä¹‰</h2><p>æˆ‘æƒ³è¦å…ˆè¯´æ˜ä¸€ä¸ªé‡è¦é—®é¢˜ï¼Œåˆ°åº•é¢è¯• TCP çš„æ„ä¹‰ä½•åœ¨ï¼Ÿ</p><p>ç»å¸¸ä¼šå¬åˆ°è¿™æ ·æŠ±æ€¨ï¼šæˆ‘æ˜¯åšä¸šåŠ¡ç¨‹åºå¼€å‘çš„ï¼Œé¢è¯•å®˜ç«Ÿç„¶é—®æˆ‘ TCP ä¸‰æ¬¡æ¡æ‰‹ã€TCP æ‹¥å¡æ§åˆ¶çš„é—®é¢˜ï¼Œè¿˜é—®çš„è¿™ä¹ˆç»†è‡´ï¼Ÿ</p><p>è¿™äº›åŒå­¦ä¼šè§‰ç€é¢è¯•å®˜æ˜¯é—²çš„æ·¡ç–¼ï¼Œæˆ–æ˜¯æ•…æ„åˆéš¾å€™é€‰äººï¼Œæ›´æœ‰åŒå­¦è®¤ä¸ºé¢è¯•å®˜æ˜¯ä¸ºäº†é˜²æ­¢è‡ªå·±æŠ€æœ¯é€€æ­¥æ‹¿æ¥ç»ƒæ‰‹çš„ï¼Œè¿™ç§æƒ³æ³•æˆ‘ä¹Ÿæ˜¯é†‰äº†ã€‚</p><p>å½“ç„¶ï¼Œä¸åŒäººå¯¹æ­¤å¯èƒ½ä¼šæœ‰ä¸åŒçš„æƒ³æ³•ï¼Œä½†æˆ‘ä»¬æŠ€æœ¯äººåº”è¯¥ä»¥ç§¯æçš„å¿ƒæ€æ¥ç†è§£å’Œé¢å¯¹è¿™ä¸ªé—®é¢˜ï¼Œåœ¨æˆ‘çœ‹æ¥é¢è¯• TCP æœ‰é‡è¦çš„æ„ä¹‰ï¼š</p><p><em>1.</em> ä»é¢è¯•å®˜çš„è§’åº¦ï¼Œå¯ä»¥å¿«é€Ÿè€ƒå¯Ÿå€™é€‰äººå¯¹åŸºç¡€çŸ¥è¯†çš„æŒæ¡ç¨‹åº¦ï¼Œä»¥åŠå€™é€‰äººå¯¹å¾…æŠ€æœ¯çš„é‚£ç§çŸ¥å…¶æ‰€ä»¥ç„¶çš„æ€åº¦ã€‚</p><p><em>2.</em> ä»æ±‚èŒè€…çš„è§’åº¦ï¼Œå³ä½¿å·¥ä½œå†…å®¹ä¸­æ²¡æœ‰ç›´æ¥ç”¨åˆ° TCP åè®®ï¼Œä½†åœ¨é‡åˆ°ç½‘ç»œæ•…éšœï¼Œè°ƒè¯•å’Œåˆ†æé—®é¢˜æ—¶ï¼Œç†Ÿæ‚‰ TCP æ˜¾å¾—ååˆ†é‡è¦ï¼Œè¦ä¸æŠ“åŒ…éƒ½çœ‹ä¸æ‡‚ã€‚</p><p><em>3.</em> ä»å­¦ä¹ çš„è§’åº¦ï¼Œæˆ‘ä»¬å¯ä»¥å­¦ä¹  TCP çš„è®¾è®¡ç†å¿µï¼Œæ¯”å¦‚ TCP é‡ä¼ ã€æ‹¥å¡æ§åˆ¶ï¼Œä»¥åŠå¦‚ä½•åœ¨æ€§èƒ½å’ŒåŸç†ä¹‹é—´åšæƒè¡¡å’Œå–èˆçš„ï¼Œä¸¾ä¸€åä¸‰ï¼Œå°†è¿™äº›åŸç†ç»†èŠ‚åº”ç”¨åˆ°æˆ‘ä»¬å¹³æ—¶çš„è½¯ä»¶è®¾è®¡ä¸Šï¼Œä¹Ÿæ˜¯ä¸€ç§æ€ç»´ä¸Šçš„å­¦ä¹ æˆé•¿ã€‚</p><p><em>4.</em> å¦‚æœæƒ³è¦è°ƒæ•´ TCP å‚æ•°æ¥æå‡ä¼ è¾“é€Ÿåº¦ï¼Œå¯æœåŠ¡å™¨ä¸Šç›¸å…³çš„ç³»ç»Ÿå‚æ•°æœ‰å‡ åä¸ªï¼Œç©¶ç«Ÿè¯¥æ€ä¹ˆè°ƒæ•´å‘¢ï¼Ÿ</p><p><em>5.</em> åœ¨æœåŠ¡å™¨æœ¬åœ°çš„ TCP è¿æ¥çŠ¶æ€å‡ºç°äº†ç±»ä¼¼ <code>fin_wait</code>ã€<code>time_wait</code>ï¼Œè¯¥æ€ä¹ˆè§£å†³ï¼Œæ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„ï¼Ÿå¦‚æœä¸æ‡‚ TCPï¼Œå³ä½¿åˆ«äººå‘Šè¯‰ä½ è§£å†³æ–¹æ¡ˆï¼Œä½ ä¹Ÿä¸èƒ½å¤ŸçœŸæ­£ç†è§£çš„ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éå¸¸æœ‰å¿…è¦è®¤çœŸå­¦ä¹  TCP åè®®ï¼Œå¯¹ TCP ç†Ÿæ‚‰ç¨‹åº¦ï¼Œåœ¨æŸç§æ„ä¹‰ä¸Šä¹Ÿæ˜¯ä½ ä¸åˆ«äººæ‹‰å¼€è·ç¦»çš„é‡è¦æ ‡è¯†ã€‚</p><h2 id="TCP-åŸºç¡€"><a href="#TCP-åŸºç¡€" class="headerlink" title="TCP åŸºç¡€"></a>TCP åŸºç¡€</h2><p>è¿™é‡Œå…ˆå¸®å°ä¼™ä¼´ä»¬ç†Ÿæ‚‰å’Œå›é¡¾ä¸‹ TCP çš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥è‡³äºèƒ½å¤Ÿæ›´å¥½çš„ç†è§£æ–‡ç« åè¾¹çš„å†…å®¹ã€‚</p><p>TCP å…¶å®æ˜¯éå¸¸å¤æ‚çš„åè®®ï¼Œæˆ‘ä»¬å…ˆèŠä¸€äº›åŸºç¡€çš„ã€‚æˆ‘ä»¬çŸ¥é“ TCP æ˜¯ä¸€ç§å¯é çš„åè®®ï¼Œå®ƒä¸»è¦é€šè¿‡è§£å†³è¿™å‡ ä¸ªé—®é¢˜æ¥å®ç°å¯é æ€§çš„ï¼Œåˆ†åˆ«æ˜¯ï¼šä¹±åºã€ä¸¢åŒ…é‡ä¼ ã€æµæ§ã€æ‹¥å¡æ§åˆ¶ã€‚é€šè¿‡ä»å›¾ä¸­æŠ¥æ–‡æ ¼å¼çš„å­—æ®µï¼Œä¹Ÿèƒ½å¤Ÿç®€å•äº†è§£åˆ° TCP çš„ç›¸å…³æ¦‚å¿µã€‚</p><p><img src="https://mianbaoban-assets.oss-cn-shenzhen.aliyuncs.com/2021/3/77fiE3.jpeg"></p><ul><li><p>TCP åœ¨ç½‘ç»œ OSI ä¸ƒå±‚æ¨¡å‹ä¸­çš„ç¬¬å››å±‚ï¼ŒTCP åŒ…æ˜¯æ²¡æœ‰ IP åœ°å€çš„ï¼Œä½†æœ‰æºç«¯å£å’Œç›®çš„ç«¯å£ï¼Œç”¨æ¥æ ‡è¯†é€šä¿¡çš„è¿›ç¨‹ã€‚</p></li><li><p><code>Sequence Number</code> æ˜¯è®°å½•åŒ…çš„åºå·ï¼ŒTCP ä¼šæŒ‰ç…§æŠ¥æ–‡å­—èŠ‚è¿›è¡Œç¼–å·ï¼Œå®ƒæ˜¯ç”¨æ¥è§£å†³åŒ…åœ¨ç½‘ç»œä¸­ä¹±åºçš„é—®é¢˜ã€‚</p></li><li><p><code>Acknowledgement Number</code> ç¡®è®¤åºåˆ—å·ï¼Œæ˜¯ç”¨äºå‘å‘é€æ–¹ç¡®è®¤å·²ç»æ”¶åˆ°äº†å“ªäº›åŒ…ï¼Œç”¨æ¥è§£å†³ä¸ä¸¢åŒ…çš„é—®é¢˜ã€‚</p></li><li><p><code>Windows</code> ä¹Ÿå« <code>Advertised-Windows</code>ï¼Œä¹Ÿå°±æ˜¯è‘—åçš„æ»‘åŠ¨çª—å£ï¼Œä¸»è¦æ˜¯ç”¨æ¥è§£å†³æµæ§çš„ã€‚</p></li><li><p><code>TCP Flag</code> å°±æ˜¯åŒ…çš„ç±»å‹ï¼Œä¸»è¦æ˜¯ç”¨äºæ“æ§ TCP çŠ¶æ€æœºçš„ã€‚</p></li></ul><h2 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h2><p><strong>ä¸‰æ¬¡æ¡æ‰‹</strong>æ˜¯å„ä¸ªå…¬å¸å¸¸è§çš„é¢è¯•è€ƒç‚¹ã€‚ä»¥è¿‡æ¥äººç»éªŒæ¥è®²ï¼Œè™½ç„¶è¯¥é—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œä½†ä½ è¿˜çœŸä¸ä¸€å®šèƒ½å¤Ÿå›ç­”çš„å¥½ã€‚</p><p>è§è¿‡æ¯”è¾ƒå…¸å‹é¢è¯•é—®ç­”åœºæ™¯ï¼š</p><blockquote><p>_é¢è¯•å®˜_ï¼šè¯·æè¿°ä¸€ä¸‹ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹å§<br>_æ±‚èŒè€…_ï¼šç¬¬ä¸€æ¬¡å®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘é€ä¸€ä¸ªæŠ¥æ–‡ï¼Œç¬¬äºŒæ¬¡æ˜¯æœåŠ¡å™¨æ”¶åˆ°åŒ…ä¹‹åï¼Œä¹Ÿç»™å®¢æˆ·ç«¯åº”ç­”ä¸€ä¸ªæŠ¥æ–‡ï¼Œç¬¬ä¸‰æ¬¡æ˜¯å®¢æˆ·ç«¯å†ç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ªå›å¤æŠ¥æ–‡ï¼ŒTCP ä¸‰æ¬¡æ¡æ‰‹æˆåŠŸã€‚<br>_é¢è¯•å®˜_ï¼šè¿˜æœ‰å—ï¼Ÿ<br>_æ±‚èŒè€…_ï¼šè¯´å®Œäº†å“ˆï¼Œè¿™å°±æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¾ˆç®€å•çš„<br>_é¢è¯•å®˜_ï¼šå—¯ï¼Œæˆ‘æ²¡ä»€ä¹ˆé—®çš„äº†ï¼Œä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p></blockquote><p>è¿™æ—¶æ±‚èŒè€…ç´§å¼ çš„å¿ƒç»ˆäºå¹³é™äº†ï¼Œå› ä¸ºé¢è¯•å®˜æ²¡æœ‰æ·±å…¥ä¸‹å»çš„æ„æ€ï¼Œç»§ç»­é—®ä¸‹å»å¯èƒ½ä¹Ÿä¸æ‡‚ï¼Œçš†å¤§æ¬¢å–œï¼å½“ç„¶æœ¬æ¬¡é¢è¯•åŸºæœ¬ä¸Šä¹Ÿå°± <code>game over</code>äº†ã€‚</p><p>æ±‚èŒè€…å›ç­”çš„ä¸æ­£ç¡®ä¹ˆï¼Ÿæ­£ç¡®ï¼Œä½†æ˜¯å›ç­”çš„è¿‡äºç®€å•ï¼Œç¦»é¢è¯•å®˜çš„æœŸæœ›çš„ç­”æ¡ˆè¿˜æœ‰ä¸€å®šçš„è·ç¦»ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆå›ç­”å‘¢ï¼Ÿ</p><p><img src="https://mianbaoban-assets.oss-cn-shenzhen.aliyuncs.com/2021/3/uqEjMv.png"></p><p>TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…¶å®å°±æ˜¯å»ºç«‹ä¸€ä¸ª TCP è¿æ¥ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨äº¤äº’éœ€è¦ 3 ä¸ªæ•°æ®åŒ…ã€‚æ¡æ‰‹çš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸ºäº†ç¡®è®¤åŒæ–¹çš„æ¥æ”¶å’Œå‘é€èƒ½åŠ›æ˜¯å¦æ­£å¸¸ï¼Œåˆå§‹åºåˆ—å·ï¼Œäº¤æ¢çª—å£å¤§å°ä»¥åŠ MSS ç­‰ä¿¡æ¯ã€‚</p><ul><li><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ <code>SYN</code> æŠ¥æ–‡ï¼Œå¹¶è¿›å…¥ <code>SYN_SENT</code> çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨çš„ç¡®è®¤ï¼›</p></li><li><p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ° <code>SYN</code> æŠ¥æ–‡ï¼Œéœ€è¦ç»™å®¢æˆ·ç«¯å‘é€ <code>ACK</code> ç¡®è®¤æŠ¥æ–‡ï¼ŒåŒæ—¶æœåŠ¡å™¨ä¹Ÿè¦å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª <code>SYN</code> æŠ¥æ–‡ï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯å‘å®¢æˆ·ç«¯å‘é€ <code>SYN + ACK</code> æŠ¥æ–‡ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥ <code>SYN_RCVD</code> çŠ¶æ€ï¼›</p></li><li><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° <code>SYN + ACK</code> æŠ¥æ–‡ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ï¼Œå®¢æˆ·ç«¯è¿›å…¥ <code>ESTABLISHED</code> çŠ¶æ€ã€‚å¾…æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„ <code>ACK</code> åŒ…ä¹Ÿä¼šè¿›å…¥ <code>ESTABLISHED</code> çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚</p></li></ul><p>æˆ‘ä»¬å›ç­”æ—¶ï¼Œå¯ä»¥å…ˆç®€å•æ¦‚è¿° TCP è¿‡ç¨‹ï¼Œç„¶åä¸‰æ¬¡æ¡æ‰‹å…·ä½“æè¿°æ—¶ï¼Œéœ€è¦è¯´æ˜çŠ¶æ€çš„åŸºæœ¬è½¬æ¢ã€‚</p><p>TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…¶å®å°±æ˜¯ TCP åº”ç”¨åœ¨å‘é€æ•°æ®å‰ï¼Œé€šè¿‡ TCP åè®®è·Ÿé€šä¿¡å¯¹æ–¹åå•†å¥½è¿æ¥ä¿¡æ¯ï¼Œå»ºç«‹èµ·TCPçš„è¿æ¥å…³ç³»ã€‚</p><p>æˆ‘ä»¬éœ€è¦çŸ¥é“ï¼ŒTCP è¿æ¥å¹¶éæ˜¯åœ¨é€šä¿¡è®¾å¤‡ä¸¤ç«¯ä¹‹é—´å»ºç«‹ä¿¡å·éš§é“ï¼Œè€Œæœ¬è´¨ä¸Šå°±æ˜¯åŒæ–¹å„è‡ªç»´æŠ¤æ‰€éœ€çš„çŠ¶æ€çŠ¶æ€ï¼Œä»¥è¾¾åˆ° TCP è¿æ¥çš„æ•ˆæœã€‚æ‰€ä»¥ TCP çŠ¶æ€æœºæ˜¯ TCP çš„æ ¸å¿ƒå†…å®¹ï¼Œå­¦ä¹  TCP ä¸€å®šè¦ææ‡‚è¿™äº›çŠ¶æ€æœºä¹‹é—´çš„è½¬æ¢ã€‚</p><h2 id="äºŒæ¬¡æ¡æ‰‹å¯ä»¥å—"><a href="#äºŒæ¬¡æ¡æ‰‹å¯ä»¥å—" class="headerlink" title="äºŒæ¬¡æ¡æ‰‹å¯ä»¥å—"></a>äºŒæ¬¡æ¡æ‰‹å¯ä»¥å—</h2><blockquote><p>é—®ï¼šä¸ºä»€ä¹ˆ TCP é‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹ï¼ŒäºŒæ¬¡æ¡æ‰‹å¯ä»¥å—ï¼Ÿ</p></blockquote><p>æˆ‘ä»¬å¯ä»¥ä»å‡ ä¸ªæ–¹é¢æ¥è§£é‡Šï¼š</p><p><strong>ï¼ˆä¸€ï¼‰ç¡®è®¤åŒæ–¹çš„æ”¶å‘èƒ½åŠ›</strong></p><p>TCP å»ºç«‹è¿æ¥ä¹‹å‰ï¼Œéœ€è¦ç¡®è®¤å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨åŒæ–¹çš„æ”¶åŒ…å’Œå‘åŒ…çš„èƒ½åŠ›ã€‚</p><p><em>1.</em> ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ç½‘ç»œåŒ…ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°äº†ã€‚è¿™æ ·æœåŠ¡ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šå®¢æˆ·ç«¯çš„å‘é€èƒ½åŠ›ã€æœåŠ¡ç«¯çš„æ¥æ”¶èƒ½åŠ›æ˜¯æ­£å¸¸çš„ã€‚</p><p><em>2.</em> ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯å‘åŒ…ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°äº†ã€‚è¿™æ ·å®¢æˆ·ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šæœåŠ¡ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›ï¼Œå®¢æˆ·ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ˜¯æ­£å¸¸çš„ã€‚ä¸è¿‡æ­¤æ—¶æœåŠ¡å™¨å¹¶ä¸èƒ½ç¡®è®¤å®¢æˆ·ç«¯çš„æ¥æ”¶èƒ½åŠ›æ˜¯å¦æ­£å¸¸ã€‚</p><p><em>3.</em> ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘åŒ…ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°äº†ã€‚è¿™æ ·æœåŠ¡ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šå®¢æˆ·ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ­£å¸¸ï¼ŒæœåŠ¡å™¨è‡ªå·±çš„å‘é€ã€æ¥æ”¶èƒ½åŠ›ä¹Ÿæ­£å¸¸ã€‚</p><p>æ‰€ä»¥ï¼Œåªæœ‰ä¸‰æ¬¡æ¡æ‰‹æ‰èƒ½ç¡®è®¤åŒæ–¹çš„æ¥æ”¶ä¸å‘é€èƒ½åŠ›æ˜¯å¦æ­£å¸¸ã€‚</p><p><strong>ï¼ˆäºŒï¼‰åºåˆ—å·å¯é åŒæ­¥</strong></p><p>å¦‚æœæ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡ç«¯æ— æ³•ç¡®å®šå®¢æˆ·ç«¯æ˜¯å¦å·²ç»æ¥æ”¶åˆ°äº†è‡ªå·±å‘é€çš„åˆå§‹åºåˆ—å·ï¼Œå¦‚æœç¬¬äºŒæ¬¡æ¡æ‰‹æŠ¥æ–‡ä¸¢å¤±ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å°±æ— æ³•çŸ¥é“æœåŠ¡ç«¯çš„åˆå§‹åºåˆ—å·ï¼Œé‚£ TCP çš„å¯é æ€§å°±æ— ä»è°ˆèµ·ã€‚</p><p><strong>ï¼ˆä¸‰ï¼‰é˜»æ­¢é‡å¤å†å²è¿æ¥çš„åˆå§‹åŒ–</strong></p><p>å®¢æˆ·ç«¯ç”±äºæŸç§åŸå› å‘é€äº†ä¸¤ä¸ªä¸åŒåºå·çš„ <code>SYN</code> åŒ…ï¼Œæˆ‘ä»¬çŸ¥é“ç½‘ç»œç¯å¢ƒæ˜¯å¤æ‚çš„ï¼Œæ—§çš„æ•°æ®åŒ…æœ‰å¯èƒ½å…ˆåˆ°è¾¾æœåŠ¡å™¨ã€‚å¦‚æœæ˜¯ä¸¤æ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡å™¨æ”¶åˆ°æ—§çš„ <code>SYN</code> å°±ä¼šç«‹åˆ»å»ºç«‹è¿æ¥ï¼Œé‚£ä¹ˆä¼šé€ æˆç½‘ç»œå¼‚å¸¸ã€‚</p><p>å¦‚æœæ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡å™¨éœ€è¦å›å¤ <code>SYN+ACK</code> åŒ…ï¼Œå®¢æˆ·ç«¯ä¼šå¯¹æ¯”åº”ç­”çš„åºå·ï¼Œå¦‚æœå‘ç°æ˜¯æ—§çš„æŠ¥æ–‡ï¼Œå°±ä¼šç»™æœåŠ¡å™¨å‘ <code>RST</code> æŠ¥æ–‡ï¼Œç›´åˆ°æ­£å¸¸çš„ <code>SYN</code> åˆ°è¾¾æœåŠ¡å™¨åæ‰æ­£å¸¸å»ºç«‹è¿æ¥ã€‚</p><p>æ‰€ä»¥ä¸‰æ¬¡æ¡æ‰‹æ‰æœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯æ¥åˆ¤æ–­å½“å‰è¿æ¥æ˜¯å¦æ˜¯å†å²è¿æ¥ã€‚</p><p><strong>ï¼ˆå››ï¼‰å®‰å…¨é—®é¢˜</strong></p><p>æˆ‘ä»¬çŸ¥é“ TCP æ–°å»ºè¿æ¥æ—¶ï¼Œå†…æ ¸ä¼šä¸ºè¿æ¥åˆ†é…ä¸€ç³»åˆ—çš„å†…å­˜èµ„æºï¼Œå¦‚æœé‡‡ç”¨ä¸¤æ¬¡æ¡æ‰‹ï¼Œå°±å»ºç«‹è¿æ¥ï¼Œé‚£ä¼šæ”¾å¤§ DDOS æ”»å‡»çš„ã€‚</p><p>TCP ä½œä¸ºä¸€ç§å¯é ä¼ è¾“æ§åˆ¶åè®®ï¼Œå…¶æ ¸å¿ƒæ€æƒ³ï¼šæ—¢è¦ä¿è¯æ•°æ®å¯é ä¼ è¾“ï¼Œåˆè¦æé«˜ä¼ è¾“çš„æ•ˆç‡ï¼Œè€Œä¸‰æ¬¡æ¡æ‰‹æ°å¥½å¯ä»¥æ»¡è¶³ä»¥ä¸Šä¸¤æ–¹é¢çš„éœ€æ±‚ï¼</p><h2 id="åˆå§‹åºåˆ—å·ï¼ˆISNï¼‰"><a href="#åˆå§‹åºåˆ—å·ï¼ˆISNï¼‰" class="headerlink" title="åˆå§‹åºåˆ—å·ï¼ˆISNï¼‰"></a>åˆå§‹åºåˆ—å·ï¼ˆISNï¼‰</h2><blockquote><p>é—®ï¼šISN ä»£è¡¨ä»€ä¹ˆï¼Ÿæ„ä¹‰ä½•åœ¨ï¼ŸISN æ˜¯å›ºå®šä¸å˜çš„å—ï¼ŸISNä¸ºä½•è¦åŠ¨æ€éšæœºï¼Ÿ</p></blockquote><p><strong>ISN æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>ç­”ï¼š<code>ISN</code> å…¨ç§°æ˜¯ <code>Initial Sequence Number</code>ï¼Œæ˜¯ TCP å‘é€æ–¹çš„å­—èŠ‚æ•°æ®ç¼–å·çš„åŸç‚¹ï¼Œå‘Šè¯‰å¯¹æ–¹æˆ‘è¦å¼€å§‹å‘é€æ•°æ®çš„åˆå§‹åŒ–åºåˆ—å·</p><p><strong>ISN æ˜¯å›ºå®šä¸å˜çš„å—ï¼Ÿ</strong></p><p>ç­”ï¼šISN å¦‚æœæ˜¯å›ºå®šçš„ï¼Œæ”»å‡»è€…å¾ˆå®¹æ˜“çŒœå‡ºåç»­çš„ç¡®è®¤åºå·ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œé¿å…è¢«ç¬¬ä¸‰æ–¹çŒœåˆ°ä»è€Œå‘é€ä¼ªé€ çš„ <code>RST</code> æŠ¥æ–‡ï¼Œå› æ­¤ ISN æ˜¯åŠ¨æ€ç”Ÿæˆçš„</p><h2 id="åŠè¿æ¥é˜Ÿåˆ—"><a href="#åŠè¿æ¥é˜Ÿåˆ—" class="headerlink" title="åŠè¿æ¥é˜Ÿåˆ—"></a>åŠè¿æ¥é˜Ÿåˆ—</h2><blockquote><p>ä»€ä¹ˆæ˜¯åŠè¿æ¥é˜Ÿåˆ—ï¼Ÿ</p></blockquote><p>ç­”ï¼šæœåŠ¡å™¨ç¬¬ä¸€æ¬¡æ”¶åˆ°å®¢æˆ·ç«¯çš„ <code>SYN</code> ä¹‹åï¼Œå°±ä¼šå¤„äº <code>SYN_RCVD</code> çŠ¶æ€ï¼Œæ­¤æ—¶åŒæ–¹è¿˜æ²¡æœ‰å®Œå…¨å»ºç«‹è¿æ¥ã€‚æœåŠ¡å™¨ä¼šæŠŠè¿™ç§çŠ¶æ€ä¸‹è¯·æ±‚è¿æ¥æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œæˆ‘ä»¬æŠŠè¿™ç§é˜Ÿåˆ—ç§°ä¹‹ä¸ºåŠè¿æ¥é˜Ÿåˆ—ã€‚</p><p>å½“ç„¶è¿˜æœ‰ä¸€ä¸ª_å…¨è¿æ¥é˜Ÿåˆ—_ï¼Œå°±æ˜¯å·²ç»å®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œå»ºç«‹èµ·è¿æ¥çš„å°±ä¼šæ”¾åœ¨å…¨è¿æ¥é˜Ÿåˆ—ä¸­ã€‚å¦‚æœé˜Ÿåˆ—æ»¡äº†å°±æœ‰å¯èƒ½ä¼šå‡ºç°ä¸¢åŒ…ç°è±¡ã€‚</p><h2 id="ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ"><a href="#ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ"></a>ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ</h2><blockquote><p>é—®ï¼šä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æºå¸¦æ•°æ®å—ï¼Ÿ</p></blockquote><p>ç­”ï¼šç¬¬ä¸€æ¬¡ã€ç¬¬äºŒæ¬¡æ¡æ‰‹ä¸å¯ä»¥æºå¸¦æ•°æ®ï¼Œè€Œç¬¬ä¸‰æ¬¡æ¡æ‰‹æ˜¯å¯ä»¥æºå¸¦æ•°æ®çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œå‡å¦‚ç¬¬ä¸€æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®çš„è¯ï¼Œå¦‚æœæœ‰äººè¦æ¶æ„æ”»å‡»æœåŠ¡å™¨ï¼Œé‚£ä»–æ¯æ¬¡éƒ½åœ¨ç¬¬ä¸€æ¬¡æ¡æ‰‹ä¸­çš„ SYN æŠ¥æ–‡ä¸­æ”¾å…¥å¤§é‡çš„æ•°æ®ï¼Œç–¯ç‹‚ç€é‡å¤å‘ SYN æŠ¥æ–‡ï¼Œè¿™ä¼šè®©æœåŠ¡å™¨èŠ±è´¹å¤§é‡çš„å†…å­˜ç©ºé—´æ¥ç¼“å­˜è¿™äº›æŠ¥æ–‡ï¼Œè¿™æ ·æœåŠ¡å™¨å°±æ›´å®¹æ˜“è¢«æ”»å‡»äº†ã€‚</p><p>å¯¹äºç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å·²ç»å¤„äºè¿æ¥çŠ¶æ€ï¼Œä»–å·²ç»çŸ¥é“æœåŠ¡å™¨çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ˜¯æ­£å¸¸çš„äº†ï¼Œæ‰€ä»¥å¯ä»¥æºå¸¦æ•°æ®æ˜¯æƒ…ç†ä¹‹ä¸­ã€‚</p><h2 id="TCP-å››æ¬¡æŒ¥æ‰‹"><a href="#TCP-å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="TCP å››æ¬¡æŒ¥æ‰‹"></a>TCP å››æ¬¡æŒ¥æ‰‹</h2><p>å½“æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸éœ€è¦æ•°æ®é€šä¿¡äº†ï¼Œå°±ä¼šå‘èµ·æ–­å¼€ TCP è¿æ¥ã€‚å»ºç«‹ä¸€ä¸ªè¿æ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œè€Œç»ˆæ­¢ä¸€ä¸ªè¿æ¥éœ€è¦ç»è¿‡å››æ¬¡æŒ¥æ‰‹ã€‚</p><p><img src="https://mianbaoban-assets.oss-cn-shenzhen.aliyuncs.com/2021/3/UzARVz.png"></p><ul><li><p>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ã€‚å®¢æˆ·ç«¯å‘èµ· <code>FIN</code> åŒ…ï¼ˆFIN &#x3D; 1ï¼‰,å®¢æˆ·ç«¯è¿›å…¥ <code>FIN_WAIT_1</code> çŠ¶æ€ã€‚TCP è§„å®šï¼Œå³ä½¿ <code>FIN</code> åŒ…ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿè¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚</p></li><li><p>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ã€‚æœåŠ¡å™¨ç«¯æ”¶åˆ° <code>FIN</code> åŒ…ï¼Œå‘å‡ºç¡®è®¤åŒ… <code>ACK</code>ï¼ˆack &#x3D; u + 1ï¼‰ï¼Œå¹¶å¸¦ä¸Šè‡ªå·±çš„åºå· seq&#x3D;vï¼ŒæœåŠ¡å™¨ç«¯è¿›å…¥äº† <code>CLOSE_WAIT</code> çŠ¶æ€ã€‚è¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œä¸è¿‡æœåŠ¡å™¨ç«¯æœ‰æ•°æ®å‘é€çš„è¯ï¼Œå®¢æˆ·ç«¯ä¾ç„¶éœ€è¦æ¥æ”¶ã€‚å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡å™¨ç«¯å‘é€çš„ <code>ACK</code> åï¼Œè¿›å…¥äº† <code>FIN_WAIT_2</code> çŠ¶æ€ã€‚</p></li><li><p>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ã€‚æœåŠ¡å™¨ç«¯æ•°æ®å‘é€å®Œæ¯•åï¼Œå‘å®¢æˆ·ç«¯å‘é€ <code>FIN</code> åŒ…ï¼ˆseq&#x3D;w ack&#x3D;u+1ï¼‰ï¼ŒåŠè¿æ¥çŠ¶æ€ä¸‹æœåŠ¡å™¨å¯èƒ½åˆå‘é€äº†ä¸€äº›æ•°æ®ï¼Œå‡è®¾å‘é€ seq ä¸º wã€‚æœåŠ¡å™¨æ­¤æ—¶è¿›å…¥äº† <code>LAST_ACK</code> çŠ¶æ€ã€‚</p></li><li><p>ç¬¬å››æ¬¡æŒ¥æ‰‹ã€‚å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ <code>FIN</code> åŒ…åï¼Œå‘å‡ºç¡®è®¤åŒ…ï¼ˆACK&#x3D;1ï¼Œack&#x3D;w+1ï¼‰ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å°±è¿›å…¥äº† <code>TIME_WAIT</code> çŠ¶æ€ã€‚æ³¨æ„æ­¤æ—¶ TCP è¿æ¥è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå¿…é¡»ç»è¿‡ <code>2*MSL</code> åï¼Œæ‰è¿›å…¥ <code>CLOSED</code> çŠ¶æ€ã€‚è€ŒæœåŠ¡å™¨ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„ç¡®è®¤åŒ… <code>ACK</code> åå°±è¿›å…¥äº† <code>CLOSED</code> çŠ¶æ€ï¼Œå¯ä»¥çœ‹å‡ºæœåŠ¡å™¨ç«¯ç»“æŸ TCP è¿æ¥çš„æ—¶é—´è¦æ¯”å®¢æˆ·ç«¯æ—©ä¸€äº›ã€‚</p></li></ul><blockquote><p>é—®ï¼šä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥æ¡æ‰‹ä¸‰æ¬¡ï¼Œå…³é—­è¿æ¥æ—¶éœ€è¦æ˜¯å››æ¬¡å‘¢ï¼Ÿ</p></blockquote><p>ç­”ï¼šå…¶å®åœ¨ TCP æ¡æ‰‹çš„æ—¶å€™ï¼Œæ¥æ”¶ç«¯å‘é€ <code>SYN+ACK</code> çš„åŒ…æ˜¯å°†ä¸€ä¸ª <code>ACK</code> å’Œä¸€ä¸ª <code>SYN</code>åˆå¹¶åˆ°ä¸€ä¸ªåŒ…ä¸­ï¼Œæ‰€ä»¥å‡å°‘äº†ä¸€æ¬¡åŒ…çš„å‘é€ï¼Œä¸‰æ¬¡å®Œæˆæ¡æ‰‹ã€‚</p><p>å¯¹äºå››æ¬¡æŒ¥æ‰‹ï¼Œå› ä¸º TCP æ˜¯å…¨åŒå·¥é€šä¿¡ï¼Œåœ¨ä¸»åŠ¨å…³é—­æ–¹å‘é€ FIN åŒ…åï¼Œæ¥æ”¶ç«¯å¯èƒ½è¿˜è¦å‘é€æ•°æ®ï¼Œä¸èƒ½ç«‹å³å…³é—­æœåŠ¡å™¨ç«¯åˆ°å®¢æˆ·ç«¯çš„æ•°æ®é€šé“ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸èƒ½å°†æœåŠ¡å™¨ç«¯çš„ <code>FIN</code> åŒ…ä¸å¯¹å®¢æˆ·ç«¯çš„ <code>ACK</code> åŒ…åˆå¹¶å‘é€ï¼Œåªèƒ½å…ˆç¡®è®¤ <code>ACK</code>ï¼Œç„¶åæœåŠ¡å™¨å¾…æ— éœ€å‘é€æ•°æ®æ—¶å†å‘é€ <code>FIN</code> åŒ…ï¼Œæ‰€ä»¥å››æ¬¡æŒ¥æ‰‹æ—¶å¿…é¡»æ˜¯å››æ¬¡æ•°æ®åŒ…çš„äº¤äº’ã€‚</p><blockquote><p>é—®ï¼šä¸ºä»€ä¹ˆTIME_WAIT çŠ¶æ€éœ€è¦ç»è¿‡ 2MSL æ‰èƒ½è¿”å›åˆ° CLOSE çŠ¶æ€ï¼Ÿ</p></blockquote><p>ç­”ï¼š<code>MSL</code> æŒ‡çš„æ˜¯æŠ¥æ–‡åœ¨ç½‘ç»œä¸­æœ€å¤§ç”Ÿå­˜æ—¶é—´ã€‚åœ¨å®¢æˆ·ç«¯å‘é€å¯¹æœåŠ¡å™¨ç«¯çš„ <code>FIN</code> çš„ç¡®è®¤åŒ… <code>ACK</code> åï¼Œè¿™ä¸ª <code>ACK</code> åŒ…æ˜¯æœ‰å¯èƒ½ä¸å¯è¾¾çš„ï¼ŒæœåŠ¡å™¨ç«¯å¦‚æœæ”¶ä¸åˆ° <code>ACK</code> çš„è¯éœ€è¦é‡æ–°å‘é€ <code>FIN</code> åŒ…ã€‚</p><p>æ‰€ä»¥å®¢æˆ·ç«¯å‘é€ <code>ACK</code> åéœ€è¦ç•™å‡º <code>2MSL</code> æ—¶é—´ï¼ˆACK åˆ°è¾¾æœåŠ¡å™¨ + æœåŠ¡å™¨å‘é€ FIN é‡ä¼ åŒ…ï¼Œä¸€æ¥ä¸€å›ï¼‰ç­‰å¾…ç¡®è®¤æœåŠ¡å™¨ç«¯ç¡®å®æ”¶åˆ°äº† ACK åŒ…ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´å®¢æˆ·ç«¯å¦‚æœç­‰å¾… <code>2MSL</code> æ—¶é—´ä¹Ÿæ²¡æœ‰æ”¶åˆ°æœåŠ¡å™¨ç«¯çš„é‡ä¼ åŒ… <code>FIN</code>ï¼Œè¯´æ˜å¯ä»¥ç¡®è®¤æœåŠ¡å™¨å·²ç»æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„ <code>ACK</code>ã€‚</p><p>è¿˜æœ‰ç¬¬ <em>2</em> ä¸ªç†ç”±ï¼Œé¿å…æ–°æ—§è¿æ¥æ··æ·†ã€‚</p><p>åœ¨å®¢æˆ·ç«¯å‘é€å®Œæœ€åä¸€ä¸ª <code>ACK</code> æŠ¥æ–‡æ®µåï¼Œåœ¨ç»è¿‡ <code>2MSL</code> æ—¶é—´ï¼Œå°±å¯ä»¥ä½¿æœ¬è¿æ¥æŒç»­çš„æ—¶é—´å†…æ‰€äº§ç”Ÿçš„æ‰€æœ‰æŠ¥æ–‡éƒ½ä»ç½‘ç»œä¸­æ¶ˆå¤±ï¼Œä½¿ä¸‹ä¸€ä¸ªæ–°çš„è¿æ¥ä¸­ä¸ä¼šå‡ºç°è¿™ç§æ—§çš„è¿æ¥è¯·æ±‚æŠ¥æ–‡ã€‚</p><p>ä½ è¦çŸ¥é“ï¼Œæœ‰äº›è‡ªä½œä¸»å¼ çš„è·¯ç”±å™¨ä¼šç¼“å­˜ IP æ•°æ®åŒ…ï¼Œå¦‚æœè¿æ¥é‡ç”¨äº†ï¼Œé‚£ä¹ˆè¿™äº›å»¶è¿Ÿæ”¶åˆ°çš„åŒ…å°±æœ‰å¯èƒ½ä¼šè·Ÿæ–°è¿æ¥æ··åœ¨ä¸€èµ·ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« ä»¥ TCP ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹è¿™ä¸ªç»å…¸é—®é¢˜ä¸ºä¸»é¢˜ï¼Œåˆæ­¥çª¥æ¢äº† TCP åè®®çš„å…¥é—¨çŸ¥è¯†ç‚¹ï¼Œåè¾¹ä¼šæœ‰ä¸€ç³»åˆ—çš„æ–‡ç« ï¼Œæ¥åˆ†äº« TCP åè®®ç›¸å…³çš„æ–¹æ–¹é¢é¢ï¼Œå¦‚æœæ„Ÿå…´è¶£è¯·å…³æ³¨æˆ‘ï¼Œæˆ‘ä»¬ä¸€èµ·æŠŠ TCP åè®®å½»åº•æé€å½»äº†ã€‚</p><p>æœ€åï¼Œå¸®å¤§å®¶æ€»ç»“ä¸€ä¸‹ TCP çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ã€‚æˆ‘ä»¬çŸ¥é“ TCP åè®®æ˜¯å¯é çš„ï¼Œå®ƒä¸»è¦æ˜¯é€šè¿‡è§£å†³å¦‚ä¸‹å‡ ä¸ªé—®é¢˜æ¥ä¿è¯å¯é æ€§çš„ï¼š</p><ul><li><p><em>ä¹±åº</em></p></li><li><p><em>ä¸¢åŒ…</em></p></li><li><p><em>æµæ§</em></p></li><li><p><em>æ‹¥å¡æ§åˆ¶</em></p></li></ul><p>TCP æ˜¯ä¸€ä¸ªå·¨å¤æ‚çš„åè®®ï¼ŒåŸºæœ¬ä¸Š TCP æ¶‰åŠçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯å›´ç»•è§£å†³è¿™å‡ ä¸ªé—®é¢˜çš„ï¼Œè¯·åŠ¡å¿…æ—¶åˆ»è®¤çœŸç‰¢è®°ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>TCP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¢è¯•é¢˜</title>
    <link href="/2022/04/05/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <url>/2022/04/05/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="ï¼ˆç®€ç­”é¢˜ï¼‰è¯·ç®€è¿°ä¸€ä¸‹ä½ å¯¹å‰ç«¯å·¥ç¨‹åŒ–çš„ç†è§£ï¼ˆ300å­—ä»¥å†…ï¼‰"><a href="#ï¼ˆç®€ç­”é¢˜ï¼‰è¯·ç®€è¿°ä¸€ä¸‹ä½ å¯¹å‰ç«¯å·¥ç¨‹åŒ–çš„ç†è§£ï¼ˆ300å­—ä»¥å†…ï¼‰" class="headerlink" title="ï¼ˆç®€ç­”é¢˜ï¼‰è¯·ç®€è¿°ä¸€ä¸‹ä½ å¯¹å‰ç«¯å·¥ç¨‹åŒ–çš„ç†è§£ï¼ˆ300å­—ä»¥å†…ï¼‰"></a>ï¼ˆç®€ç­”é¢˜ï¼‰è¯·ç®€è¿°ä¸€ä¸‹ä½ å¯¹å‰ç«¯å·¥ç¨‹åŒ–çš„ç†è§£ï¼ˆ300å­—ä»¥å†…ï¼‰</h2><p>å¦‚æœä»¥ä»¥å‰çš„é€»è¾‘å‰ç«¯ä¸‰ä»¶å¥—ï¼ˆhtmlã€cssã€jsï¼‰ï¼Œå½“ä¸€ä¸ªé¡¹ç›®åœ¨è¶Šåšè¶Šå¤§çš„è¿‡ç¨‹ä¸­ï¼Œæœ¬èº«ä¼šæå…¶å®¹æ˜“äº§ç”Ÿå†—ä½™ä»£ç ã€‚å¦‚ä»Šä¸€ä¸ªé¡¹ç›®çš„å‰ç«¯å·²ç»ä¸å¯èƒ½æ˜¯ä¼šjqueryè¡Œå¤©ä¸‹äº†ã€‚<br>åœ¨æ›´å¤šäººä¸€èµ·åˆä½œåšä¸€ä¸ªé¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼ŒåŸºäºå¤§å®¶è¦ç›¸äº’é…åˆï¼Œæ›´è®²ç©¶çš„æ˜¯æ¨¡å—åŒ–ï¼Œç»„ä»¶åŒ–ï¼Œé€šè¿‡æ¨¡å—ä¸ç»„ä»¶çš„å¤ç”¨æ¥å¤§å¤§åœ°æé«˜é¡¹ç›®çš„å¼€å‘æ•ˆç‡ã€‚ä¸”ä¸è¯´ç°åœ¨ESè§„èŒƒæœ¬èº«å·²ç»æœ‰äº†æ¨¡å—çš„å¯¼å…¥å¯¼å‡ºæ–¹æ³•ï¼Œåœ¨ä¹‹å‰è¿˜æ²¡æœ‰å®˜æ–¹è§„èŒƒä¹‹å‰ï¼Œä¾¿å·²ç»å­˜åœ¨å„ç§å„æ ·çš„æ¨¡å—å¼•å…¥å¯¼å‡ºè§„èŒƒï¼ŒCommonJsä¾¿æ˜¯ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„ä¾‹å­ï¼Œå¦‚ä»Šçš„å¾ˆå¤šnpmåŒ…ä¸­requireä¾ç„¶æ˜¯å¾ˆå¸¸è§çš„å¼•å…¥æ–¹å¼ã€‚æ— è®ºæ˜¯æ¨¡å—åŒ–è¿˜æ˜¯ç»„ä»¶åŒ–ï¼Œéƒ½å¤§å¤§é™ä½äº†ä»£ç çš„å†—ä½™ï¼ŒåŒæ—¶æé«˜äº†å¤šäººååŒå¼€å‘çš„æ•ˆç‡ï¼Œå‡å°‘äº†ä¸å¿…è¦çš„é‡å¤é€ è½®å­çš„æ—¶é—´æµªè´¹ã€‚<br>åŒæ—¶ï¼Œåœ¨å¦‚ä»Šçš„æ¡†æ¶ç››è¡Œçš„æƒ…å†µä¸‹ï¼Œæ— è®ºæ˜¯Vueã€Reactè¿™äº›å‰ç«¯æ¡†æ¶ï¼Œè¿˜æ˜¯Webpackã€Viteè¿™äº›æ‰“åŒ…æ¡†æ¶ï¼Œéƒ½æœ‰ç€è‡ªå·±çš„ä¸€å¥—è§„èŒƒï¼Œè¿™é‡Œèƒ½å¤Ÿæ·±åˆ»ä½“ä¼šåˆ°è§„èŒƒçš„é‡è¦æ€§ï¼Œè¾ƒå¥½çš„è§„èŒƒï¼Œæ¯”å¦‚æ–‡ä»¶ç›®å½•çš„é…ç½®ï¼Œå‚æ•°çš„é…ç½®ï¼ŒAPIçš„è®¾è®¡ï¼Œéƒ½èƒ½å¤Ÿå¤§å¤§çš„é™ä½å­¦ä¹ æˆæœ¬ä»¥åŠç†è§£æˆæœ¬ï¼Œä»è€Œæ›´å¥½çš„ä¸Šæ‰‹é¡¹ç›®ï¼Œè¿›è¡Œå®è·µã€‚</p><h2 id="ï¼ˆç®€ç­”é¢˜ï¼‰è¯·ç®€è¿°ä¸€ä¸‹ä½ åœ¨å‰ç«¯ä¸åŒæ–¹å‘-WebGLã€å°ç¨‹åºã€WebAssemblyã€è·¨ç«¯ç­‰-æ‰€åšçš„æŠ€æœ¯å°è¯•ï¼ˆ300å­—ä»¥å†…ï¼‰"><a href="#ï¼ˆç®€ç­”é¢˜ï¼‰è¯·ç®€è¿°ä¸€ä¸‹ä½ åœ¨å‰ç«¯ä¸åŒæ–¹å‘-WebGLã€å°ç¨‹åºã€WebAssemblyã€è·¨ç«¯ç­‰-æ‰€åšçš„æŠ€æœ¯å°è¯•ï¼ˆ300å­—ä»¥å†…ï¼‰" class="headerlink" title="ï¼ˆç®€ç­”é¢˜ï¼‰è¯·ç®€è¿°ä¸€ä¸‹ä½ åœ¨å‰ç«¯ä¸åŒæ–¹å‘(WebGLã€å°ç¨‹åºã€WebAssemblyã€è·¨ç«¯ç­‰)æ‰€åšçš„æŠ€æœ¯å°è¯•ï¼ˆ300å­—ä»¥å†…ï¼‰"></a>ï¼ˆç®€ç­”é¢˜ï¼‰è¯·ç®€è¿°ä¸€ä¸‹ä½ åœ¨å‰ç«¯ä¸åŒæ–¹å‘(WebGLã€å°ç¨‹åºã€WebAssemblyã€è·¨ç«¯ç­‰)æ‰€åšçš„æŠ€æœ¯å°è¯•ï¼ˆ300å­—ä»¥å†…ï¼‰</h2><p>åœ¨å°ç¨‹åºæ–¹é¢ï¼šç”±äºåˆ›ä¸šé¡¹ç›®æœ¬èº«å°±æ˜¯åŸºäºå°ç¨‹åºèµ·å®¶çš„ï¼Œæ‰€ä»¥åœ¨å°ç¨‹åºæ–¹é¢æœ‰ç€è¾ƒæ·±çš„è€•è€˜ï¼Œå¯¹å…¶æ¡†æ¶ã€ä»£ç ç»“æ„ã€APIéƒ½æœ‰æ¯”è¾ƒå¤šçš„äº†è§£å’Œå­¦ä¹ ä»¥åŠå®è·µã€‚<br>åœ¨è·¨ç«¯æ–¹é¢ï¼šä»Webé€‚é…ä¸åŒç»ˆç«¯çš„è§’åº¦æ¥è®²ï¼Œæ¯”è¾ƒå¸¸ç”¨åˆ°çš„æ˜¯@mediaæ¥åˆ¤æ–­æ˜¯ä½•ç§è®¾å¤‡ä»¥åŠå…¶å®½é«˜ï¼Œå¹¶åŸºäºæ­¤æ¥åšå“åº”å¼è°ƒæ•´cssæ ·å¼ã€‚ä»ä¸€å¥—ä»£ç å¤šç§ç»ˆç«¯æ¥è®²ï¼Œå°è¯•è¿‡Flutterå’Œuniappï¼Œuniappä¸ªäººæ„Ÿè§‰åœ¨å°ç¨‹åºæ–¹é¢çš„æ€§èƒ½è¡¨ç°è¿˜ä¸é”™çš„ï¼ŒFlutterçš„è¯åªåˆæ­¥å°è¯•è¿‡ä¸€ä¸‹ï¼Œåšäº†ä¸ªç®€å•çš„å¤©æ°”Demoï¼ˆè¿˜æ˜¯è‡ªå·±ç”¨Djangoç²—ç•¥æ­çš„ä¸€ä¸ªåç«¯æœåŠ¡&#x3D;ã€‚&#x3D;ï¼‰ï¼Œå½“ç„¶ä¸å¾—ä¸è¯´ä¸€å¥ï¼Œdartè¯­è¨€çš„ä»£ç ç»“æ„å®åœ¨æ˜¯å¤ªå®¹æ˜“è®©äººè¯Ÿç—…äº†ï¼ˆæ— é™å¥—å¨ƒï¼‰ã€‚è¿™ä¸€éƒ¨åˆ†ç”±äºæ—¶é—´å’Œç²¾åŠ›å› ç´ æ²¡æœ‰æ¯”è¾ƒæ·±å…¥çš„å­¦ä¹ æ¢ç´¢ã€‚<br>APPæ–¹é¢ï¼šåŸºäºå…´è¶£çˆ±å¥½ï¼Œè®¢é˜…äº†è‹¹æœçš„å¼€å‘è€…è´¦å·ï¼Œå¹¶åœ¨100Days of Swiftä¸Šå­¦ä¹ äº†ä¸€é˜µå­ï¼Œä¸ªäººæ„Ÿè§‰è‹¹æœçš„ä¸€å¥—è‡ªå®¶çš„UIç¡®å®å¾ˆç®€å•åˆå¥½çœ‹0.0ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆå¥½æ“ä½œï¼Œé™¤äº†å’Œdartè¯­è¨€ä¸€æ ·æœ‰ç€ä»£ç æ ¼å¼è¾ƒä¸ºæ··ä¹±çš„é—®é¢˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NPMåŸºæœ¬æ“ä½œ</title>
    <link href="/2022/04/05/NPM/NPM%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    <url>/2022/04/05/NPM/NPM%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h1 id="è‡ªå·±çš„åŒ…çš„ä¸Šä¼ "><a href="#è‡ªå·±çš„åŒ…çš„ä¸Šä¼ " class="headerlink" title="è‡ªå·±çš„åŒ…çš„ä¸Šä¼ "></a>è‡ªå·±çš„åŒ…çš„ä¸Šä¼ </h1><ol><li>å…ˆæŠŠä¸‹è½½åŒ…çš„æœåŠ¡å™¨åœ°å€åˆ‡æ¢ä¸ºNPMå®˜æ–¹æœåŠ¡å™¨ï¼Œæ³¨æ„è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼</li><li>è¾“å…¥<code>npm login</code> å›è½¦ï¼Œæ ¹æ®æç¤ºè¾“å…¥è´¦å·ã€å¯†ç ã€é‚®ç®±ï¼Œè¾“å…¥å¯†ç çš„æ—¶å€™ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œç›´æ¥è¾“å°±å¯ä»¥äº†ã€‚</li><li>åˆ›å»ºä¸€ä¸ªè¦æ‰“åŒ…çš„æ–‡ä»¶å¤¹ï¼Œè¿›å…¥åˆ°æ–‡ä»¶å¤¹ã€‚</li><li>è¿è¡Œ<code>npm init</code>åˆå§‹åŒ–ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶ï¼Œæ ¹æ®æç¤ºè¾“å…¥åŒ…åï¼Œå…¥å£ã€‚è¿™é‡Œæ²¡å†™çš„æˆ–è€…è¦ä¿®æ”¹ä¹Ÿå¯ä»¥åˆ°<code>package.json</code>æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚</li><li>åœ¨ä½ åˆ›å»ºçš„æ–‡ä»¶å¤¹é‡Œæ–°å»ºä¸¤ä¸ªæ–‡ä»¶: <code>index.js</code>å’Œ<code>README.md</code>ï¼Œ<code>index.js</code>æ–‡ä»¶å°±æ˜¯ä½ è¦å¯¼å‡ºçš„å†…å®¹ã€‚</li><li><code>README.md</code>å°±æ˜¯ä¸€ä¸ªåŒ…çš„ä»‹ç»,å¯ä»¥å†™æ€ä¹ˆä¸‹è½½,æ€ä¹ˆä½¿ç”¨</li><li>åŒ…å†™å¥½å,è¿è¡Œ<code>npm publish æ–‡ä»¶å¤¹åç§°</code>å‘å¸ƒï¼Œæ³¨æ„<code>npm publish</code>åé¢è¿™ä¸ªæ˜¯ä½ çš„åŒ…æ–‡ä»¶å¤¹åç§°ä¸æ˜¯<code>package.json</code>é‡Œçš„<code>name</code>ï¼Œä¸ºäº†ç»Ÿä¸€ï¼Œæ–‡ä»¶å¤¹åç§°å’ŒåŒ…åæœ€å¥½è¿˜æ˜¯å†™ä¸€æ ·çš„ã€‚</li><li>å‘å¸ƒæˆåŠŸå,åˆ°<a href="https://www.npmjs.com/">NPMå®˜ç½‘</a>æœç´¢å°±å¯ä»¥æœåˆ°äº†ã€‚</li></ol><h1 id="æŸ¥çœ‹æœ¬åœ°NPMé•œåƒ"><a href="#æŸ¥çœ‹æœ¬åœ°NPMé•œåƒ" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°NPMé•œåƒ"></a>æŸ¥çœ‹æœ¬åœ°NPMé•œåƒ</h1><p>1.æŸ¥çœ‹é•œåƒæº</p><p><code>npm get registry</code></p><p>2.åˆ‡æ¢å®˜æ–¹æº</p><p><code>npm config set registry &lt;http://registry.npmjs.org</code>&gt;</p><p>3.åˆ‡æ¢æ·˜å®æºï¼ˆæœ€æ–°ç‰ˆï¼‰</p><p><code>npm config set registry &lt;https://registry.npmmirror.com</code>&gt;</p><p>4.ä½¿ç”¨ä¸´æ—¶é•œåƒæºï¼Œå½“å®‰è£…ä¾èµ–ä¸æƒ³åˆ‡æ¢æºåœ°å€æ—¶ï¼Œä»…å®‰è£…å½“å‰ä¾èµ–å¯ä»¥ä½¿ç”¨</p><p><code>npm install xxxï¼ˆä¾èµ–åï¼‰ --registry=https://xxxï¼ˆæºåœ°å€ï¼‰</code></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NPM</tag>
      
      <tag>Node</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PipåŸºæœ¬æ“ä½œ</title>
    <link href="/2022/04/05/Anaconda/Pip/"/>
    <url>/2022/04/05/Anaconda/Pip/</url>
    
    <content type="html"><![CDATA[<p><a href="https://pypi.org/">PyPI Â· The Python Package Index</a></p><h1 id="æŸ¥çœ‹æœ¬åœ°ç¯å¢ƒ"><a href="#æŸ¥çœ‹æœ¬åœ°ç¯å¢ƒ" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°ç¯å¢ƒ"></a>æŸ¥çœ‹æœ¬åœ°ç¯å¢ƒ</h1><h2 id="æŸ¥çœ‹é•œåƒæº"><a href="#æŸ¥çœ‹é•œåƒæº" class="headerlink" title="æŸ¥çœ‹é•œåƒæº"></a>æŸ¥çœ‹é•œåƒæº</h2><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">pip config list<br></code></pre></td></tr></table></figure><h2 id="pipå›½å†…çš„ä¸€äº›é•œåƒ"><a href="#pipå›½å†…çš„ä¸€äº›é•œåƒ" class="headerlink" title="pipå›½å†…çš„ä¸€äº›é•œåƒ"></a>pipå›½å†…çš„ä¸€äº›é•œåƒ</h2><ul><li>é˜¿é‡Œäº‘ <a href="https://mirrors.aliyun.com/pypi/simple/"></a><a href="https://mirrors.aliyun.com/pypi/simple/">https://mirrors.aliyun.com/pypi/simple/</a></li><li>ä¸­å›½ç§‘æŠ€å¤§å­¦ <a href="https://pypi.mirrors.ustc.edu.cn/simple/"></a><a href="https://pypi.mirrors.ustc.edu.cn/simple/">https://pypi.mirrors.ustc.edu.cn/simple/</a></li><li>è±†ç“£(douban) <a href="http://pypi.douban.com/simple/"></a><a href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a></li><li>æ¸…åå¤§å­¦ <a href="https://pypi.tuna.tsinghua.edu.cn/simple/"></a><a href="https://pypi.tuna.tsinghua.edu.cn/simple/">https://pypi.tuna.tsinghua.edu.cn/simple/</a></li><li>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ <a href="http://pypi.mirrors.ustc.edu.cn/simple/"></a><a href="http://pypi.mirrors.ustc.edu.cn/simple/">http://pypi.mirrors.ustc.edu.cn/simple/</a></li></ul><h2 id="ä¿®æ”¹æºæ–¹æ³•ï¼š"><a href="#ä¿®æ”¹æºæ–¹æ³•ï¼š" class="headerlink" title="ä¿®æ”¹æºæ–¹æ³•ï¼š"></a>ä¿®æ”¹æºæ–¹æ³•ï¼š</h2><h3 id="ä¸´æ—¶ä½¿ç”¨ï¼š"><a href="#ä¸´æ—¶ä½¿ç”¨ï¼š" class="headerlink" title="ä¸´æ—¶ä½¿ç”¨ï¼š"></a>ä¸´æ—¶ä½¿ç”¨ï¼š</h3><p>å¯ä»¥åœ¨ä½¿ç”¨pipçš„æ—¶å€™åœ¨åé¢åŠ ä¸Š-iå‚æ•°ï¼ŒæŒ‡å®špipæº</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">pip install scrapy -i &lt;https:<span class="hljs-regexp">//</span>pypi.tuna.tsinghua.edu.cn/simple&gt;<br></code></pre></td></tr></table></figure><h3 id="æ°¸ä¹…ä¿®æ”¹ï¼š"><a href="#æ°¸ä¹…ä¿®æ”¹ï¼š" class="headerlink" title="æ°¸ä¹…ä¿®æ”¹ï¼š"></a>æ°¸ä¹…ä¿®æ”¹ï¼š</h3><p><strong>linux</strong> ä¿®æ”¹ <code>~/.pip/pip.conf</code> (æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ª)ï¼Œ å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[global]</span><br><span class="hljs-attr">index-url</span> = &lt;https://pypi.tuna.tsinghua.edu.cn/simple&gt;<br></code></pre></td></tr></table></figure><p><strong>windows</strong> ç›´æ¥åœ¨<code>user</code>ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª<code>pip</code>ç›®å½•ï¼Œå¦‚ï¼š<code>C:\\Users\\xx\\pip</code>ï¼Œæ–°å»ºæ–‡ä»¶<code>pip.ini</code>ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[global]</span><br><span class="hljs-attr">index-url</span> = &lt;https://pypi.tuna.tsinghua.edu.cn/simple&gt;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œä¸€ä¸ªPyPiå¸å·"><a href="#ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œä¸€ä¸ªPyPiå¸å·" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œä¸€ä¸ªPyPiå¸å·"></a>ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œä¸€ä¸ªPyPiå¸å·</h1><p>åœ¨ä¸Šè¾¹çš„æ³¨å†Œç½‘ç«™ä¸Šæ³¨å†Œä¸€ä¸ªè‡ªå·²çš„å¸å·ï¼Œæ³¨å†Œå¥½ååœ¨é‚®ç®±æ¿€æ´»ï¼Œä¸€èˆ¬æ³¨å†Œæµç¨‹éƒ½æ˜¯è¿™ä¹ˆæ“ä½œäº†ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚</p><h1 id="ç¬¬äºŒæ­¥ï¼šåœ¨githubä¸Šåˆ›å»ºä¸€ä¸ªé¡¹ç›®"><a href="#ç¬¬äºŒæ­¥ï¼šåœ¨githubä¸Šåˆ›å»ºä¸€ä¸ªé¡¹ç›®" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåœ¨githubä¸Šåˆ›å»ºä¸€ä¸ªé¡¹ç›®"></a>ç¬¬äºŒæ­¥ï¼šåœ¨githubä¸Šåˆ›å»ºä¸€ä¸ªé¡¹ç›®</h1><p>å¦‚æœä½ è¿˜æ²¡æœ‰ä½¿ç”¨è¿‡githubæºç æ‰˜ç®¡ç½‘ç«™ï¼Œå¯ä»¥å…ˆæ³¨å†Œä¸€ä¸ªgithubçš„å¸æˆ·å†åˆ›å»ºé¡¹ç›®ï¼Œæˆ‘ä¸€èˆ¬åˆ›å»ºé¡¹ç›®ç”¨çš„æ˜¯å®˜ç½‘æä¾›çš„æ¡Œé¢å·¥å…·Github Desktop.</p><p>Github Desktopçš„ä¸‹è½½åœ°å€ï¼š<a href="https://desktop.github.com/"></a><a href="https://desktop.github.com/">https://desktop.github.com</a></p><p>githubæ³¨å†Œå’Œåˆ›å»ºæ–°é¡¹ç›®ï¼Œè¿™é‡Œä¹Ÿä¸è¯´äº†ï¼Œç¨‹åºå‘˜çš„åŸºæœ¬åŠŸã€‚</p><h1 id="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™è‡ªå·²çš„pythoné¡¹ç›®"><a href="#ç¬¬ä¸‰æ­¥ï¼šç¼–å†™è‡ªå·²çš„pythoné¡¹ç›®" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šç¼–å†™è‡ªå·²çš„pythoné¡¹ç›®"></a>ç¬¬ä¸‰æ­¥ï¼šç¼–å†™è‡ªå·²çš„pythoné¡¹ç›®</h1><p>æˆ‘è¿™é‡Œåªæœ‰ä¸€ä¸ª<code>timetool.py</code>å’Œ<code>pathtool.py</code>ä¸¤ä¸ªæ–‡ä»¶</p><p>å…ˆå»ºä¸€ä¸ªç›®å½•ï¼Œæ¯”å¦‚<code>magetool</code>ï¼Œè¿™ä¸ªé‡Œè¾¹æ”¾çš„æ˜¯ä½ çš„é¡¹ç›®ä»£ç </p><p>åœ¨è¿™ä¸ª<code>magetool</code>ç›®å½•é‡Œ,æ–°å»ºä¸€ä¸ª<code>__init__.py</code>ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œå¯ä»¥ä»€ä¹ˆéƒ½ä¸ç”¨å†™ï¼Œç„¶åå°±æ˜¯ä½ è¦å‘å¸ƒçš„<code>.py</code>æ–‡ä»¶</p><h1 id="ç¬¬å››æ­¥ï¼šç¼–å†™setup-pyæ–‡ä»¶"><a href="#ç¬¬å››æ­¥ï¼šç¼–å†™setup-pyæ–‡ä»¶" class="headerlink" title="ç¬¬å››æ­¥ï¼šç¼–å†™setup.pyæ–‡ä»¶"></a>ç¬¬å››æ­¥ï¼šç¼–å†™setup.pyæ–‡ä»¶</h1><p>è¿™é‡Œé‡ç‚¹è¯´æ˜ä¸€ä¸‹è¿™ä¸ª<code>setup.py</code>æ–‡ä»¶ï¼Œå› ä¸ºæ•´ä¸ª<code>pip</code>é¡¹ç›®çš„å‘å¸ƒå’Œä¸Šä¼ éƒ½æ˜¯åŸºäºè¿™ä¸ª<code>setup.py</code>æ–‡ä»¶å®Œæˆçš„ã€‚</p><p>å¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ç¤ºä¾‹é¡¹ç›®çš„<code>setup.py</code>æ˜¯æ€ä¹ˆå†™çš„ï¼Œå…¶å®æˆ‘ä¹Ÿæ˜¯ä»ç½‘ä¸Šä¸‹è½½åˆ«äººå†™å¥½çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/usr/bin/env python</span><br><span class="hljs-comment">#-*- coding:utf-8 -*-</span><br>from setuptools import setup, find_packages<br><br>setup(<br>name = <span class="hljs-string">&quot;magetool&quot;</span>,<br>version = <span class="hljs-string">&quot;0.1.0&quot;</span>,<br>keywords = (<span class="hljs-string">&quot;pip&quot;</span>, <span class="hljs-string">&quot;pathtool&quot;</span>,<span class="hljs-string">&quot;timetool&quot;</span>, <span class="hljs-string">&quot;magetool&quot;</span>, <span class="hljs-string">&quot;mage&quot;</span>),<br>description = <span class="hljs-string">&quot;time and path tool&quot;</span>,<br>long_description = <span class="hljs-string">&quot;time and path tool&quot;</span>,<br>license = <span class="hljs-string">&quot;MIT Licence&quot;</span>,<br>url = <span class="hljs-string">&quot;&lt;https://github.com/fengmm521/pipProject&gt;&quot;</span>,<br>author = <span class="hljs-string">&quot;mage&quot;</span>,<br>author_email = <span class="hljs-string">&quot;mage@woodcol.com&quot;</span>,<br>packages = find_packages(),<br>include_package_data = True,<br>platforms = <span class="hljs-string">&quot;any&quot;</span>,<br>install_requires = []<br>)<br></code></pre></td></tr></table></figure><h2 id="setup-pyä¸­é‡è¦çš„å‚æ•°æœ‰5ä¸ªï¼š"><a href="#setup-pyä¸­é‡è¦çš„å‚æ•°æœ‰5ä¸ªï¼š" class="headerlink" title="setup.pyä¸­é‡è¦çš„å‚æ•°æœ‰5ä¸ªï¼š"></a>setup.pyä¸­é‡è¦çš„å‚æ•°æœ‰5ä¸ªï¼š</h2><h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><p><code>name = â€œmagetoolâ€</code>ï¼Œè¿™ä¸ª<code>name</code>å‚æ•°åè¾¹çš„å°±æ˜¯ä½ çš„é¡¹ç›®ä»£ç æ‰€åœ¨ç›®å½•ï¼Œä¹Ÿæ˜¯ä½ <code>pip</code>è¦ä¸Šä¼ çš„é¡¹ç›®åç§°ï¼Œå…¶ä»–äººç”¨<code>pip install xxx</code>æ¥å®‰è£…æ—¶ï¼Œåè¾¹çš„<code>xxx</code>å°±æ˜¯ä½ çš„è¿™ä¸ª<code>magetool</code></p><h3 id="version"><a href="#version" class="headerlink" title="version"></a>version</h3><p><code>version = â€œ0.1.0â€</code>ï¼Œä½ å·¥å…·çš„ç‰ˆæœ¬å·ï¼ŒåæœŸä½ å·¥å…·æ›´æ–°äº†ï¼Œè¦ç”¨pipæ¥æ›´æ–°åŒ…çš„æ—¶å€™ï¼Œä¼šæ›´æ–°æ¯”å½“å‰ç‰ˆæœ¬å·é«˜çš„æ–°ç‰ˆæœ¬ã€‚</p><p>ä¸‹è¾¹æ˜¯pip æ›´æ–°åŒ…çš„å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install --upgrade &lt;åŒ…çš„åå­—&gt;<br>pip install -U &lt;åŒ…çš„åå­—&gt;<br></code></pre></td></tr></table></figure><h3 id="packages"><a href="#packages" class="headerlink" title="packages"></a>packages</h3><p><code>packages = find_packages()</code>ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¯¼å…¥ç›®å½•ä¸‹çš„æ‰€æœ‰<code>__init__.py</code>åŒ…</p><h3 id="install-requires"><a href="#install-requires" class="headerlink" title="install_requires"></a>install_requires</h3><p><code>install_requires = []</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œè¾¹åŒ…å«çš„æ˜¯å’±çš„pipé¡¹ç›®å¼•ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚æœä½ çš„é¡¹ç›®æœ‰ç”¨åˆ°ç¬¬ä¸‰æ–¹åº“ï¼Œè¦åœ¨è¿™é‡Œæ·»ä¸Šç¬¬ä¸‰æ–¹åº“çš„åŒ…åï¼Œå¦‚æœç”¨çš„ç¬¬ä¸‰æ–¹ç‰ˆæœ¬ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œè¿˜è¦æœ‰ç‰ˆæœ¬å·ã€‚</p><h1 id="ç¬¬äº”æ­¥ï¼šæ‰“åŒ…è‡ªå·²çš„é¡¹ç›®"><a href="#ç¬¬äº”æ­¥ï¼šæ‰“åŒ…è‡ªå·²çš„é¡¹ç›®" class="headerlink" title="ç¬¬äº”æ­¥ï¼šæ‰“åŒ…è‡ªå·²çš„é¡¹ç›®"></a>ç¬¬äº”æ­¥ï¼šæ‰“åŒ…è‡ªå·²çš„é¡¹ç›®</h1><p>åœ¨ä»£ç ç¼–å†™å®Œæˆï¼Œè‡ªå·²æµ‹è¯•åæ²¡æœ‰é—®é¢˜äº†ï¼Œå°±å¯ä»¥æ‰“åŒ…äº†ã€‚ æ‰“åŒ…ä½¿ç”¨ä¸‹è¾¹ä¸¤ä¸ªå‘½ä»¤ï¼š</p><p>æˆ‘ä½¿ç”¨çš„æ˜¯ç¬¬äºŒä¸ª</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">python [setup.py](&lt;http://setup.py/&gt;) bdist_egg     <span class="hljs-comment"># ç”Ÿæˆç±»ä¼¼ edssdk-0.0.1-py2.7.eggï¼Œæ”¯æŒ easy_install</span><br>python [setup.py](&lt;http://setup.py/&gt;) sdist         <span class="hljs-comment"># ç”Ÿæˆç±»ä¼¼ edssdk-0.0.1.tar.gzï¼Œæ”¯æŒ pip</span><br></code></pre></td></tr></table></figure><p>ä¸¤ä¸ªå‘½ä»¤æ‰“åŒ…å¥½ä¹‹åéƒ½ä¼šç”Ÿæˆ<code>build</code>å’Œ<code>dist</code>ä¸¤ä¸ªç›®å½•ï¼Œæ‰“åŒ…çš„æ–‡ä»¶ä¼šæ”¾åœ¨<code>dist</code>ç›®å½•ä¸‹ï¼Œä¾›åè¾¹ä¸Šä¼ åˆ°<code>PyPi</code>æœåŠ¡å™¨</p><h1 id="ç¬¬å…­æ­¥ï¼šä¸Šä¼ åˆ°PyPiæœåŠ¡å™¨"><a href="#ç¬¬å…­æ­¥ï¼šä¸Šä¼ åˆ°PyPiæœåŠ¡å™¨" class="headerlink" title="ç¬¬å…­æ­¥ï¼šä¸Šä¼ åˆ°PyPiæœåŠ¡å™¨"></a>ç¬¬å…­æ­¥ï¼šä¸Šä¼ åˆ°PyPiæœåŠ¡å™¨</h1><p>åœ¨ä¸Šä¼ å‰ï¼Œè¦å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œ<code>$HOME/.pypirc</code>ï¼Œ<code>$HOME</code>ç›®å½•åœ¨<code>linux</code>æˆ–è€…<code>mac</code>ç³»ç»Ÿä¸‹å°±æ˜¯~&#x2F;ç›®å½•ã€‚åœ¨è¿™é‡Œå»ºä¸€ä¸ª<code>.pypirc</code>æ–‡ä»¶ã€‚é‡Œè¾¹çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">[distutils]<br>index-servers = pypi<br>[pypi]<br>username:ä½ çš„PyPiç”¨æˆ·å<br>password:ä½ çš„PyPiå¯†ç <br></code></pre></td></tr></table></figure><p>å› ä¸ºä¸èƒ½ä½¿ç”¨<code>python setup.py register</code>è¿›è¡Œä¸Šä¼ ï¼Œä½¿ç”¨è¿™ä¸ªä¸Šä¼ ä¼šæŠ¥ä¸€ä¸ª410çš„é”™è¯¯ã€‚æ‰€ä»¥è¦ä½¿ç”¨<code>.pypirc</code>æ–‡ä»¶ä¿å­˜ä½ çš„PyPiç”¨æˆ·ä¿¡æ¯ï¼Œè¿™æ—¶ä½¿ç”¨ä¸‹è½½çš„<code>twine</code>å°±å¯ä»¥ç›´æ¥ä¸Šä¼ äº†ã€‚</p><p>åœ¨åˆ«çš„åœ°æ–¹æ‰¾åˆ°çš„æœ‰è¯´ä¸Šä¼ ç”¨<code>python setup.py sdist upload</code>å‘½ä»¤ï¼Œä½†åœ¨æˆ‘è¿™é‡Œç”¨è¿™ä¸ªå‘½ä»¤ä¹Ÿä¼šä¸€ç›´å¤±è´¥ï¼Œæ‰€ä»¥æˆ‘ç”¨ä¸‹è¾¹çš„å‘½ä»¤ä¸Šä¼ æ‰“åŒ…å¥½çš„pipé¡¹ç›®ï¼Œæˆ‘ä¸Šä¼ çš„æ˜¯ç”¨ç¬¬äº”æ­¥çš„ï¼Œ<code>python setup.py sdist</code>å‘½ä»¤æ‰“åŒ…å¥½çš„é¡¹ç›®ï¼Œ</p><p>ä¸Šä¼ å¥½æ‰“åŒ…çš„<code>pip</code>å®‰è£…åŒ…:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">twine upload dist/magetool-0.1.0.tar.gz<br></code></pre></td></tr></table></figure><h1 id="ç¬¬ä¸ƒæ­¥ï¼šä½¿ç”¨pipå®‰è£…åˆšåˆšä¸Šä¼ çš„åŒ…"><a href="#ç¬¬ä¸ƒæ­¥ï¼šä½¿ç”¨pipå®‰è£…åˆšåˆšä¸Šä¼ çš„åŒ…" class="headerlink" title="ç¬¬ä¸ƒæ­¥ï¼šä½¿ç”¨pipå®‰è£…åˆšåˆšä¸Šä¼ çš„åŒ…"></a>ç¬¬ä¸ƒæ­¥ï¼šä½¿ç”¨pipå®‰è£…åˆšåˆšä¸Šä¼ çš„åŒ…</h1><p>pipå®‰è£…åŒ…æˆ‘è¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œè¿™ä¸ªä¸€èˆ¬ç”¨pythonçš„éƒ½ä¼šçš„</p><p>ç”¨pipå®‰è£…ä¸Šä¼ çš„åŒ…:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install magetool --user<br>â€“userå‚æ•°çš„æ„æ€æ˜¯å®‰è£…ç»™å½“ç”µè„‘çš„å½“å‰ç”¨æˆ·ï¼Œè¦ä¸ç„¶ä¼šè¦æ±‚ç³»ç»Ÿç®¡ç†å‘˜æƒé™æ‰èƒ½å®‰è£…ã€‚åŠ äº†â€“userä¹‹åå°±ä¸ç”¨sudoçš„ç®¡ç†å‘˜æƒé™äº†ã€‚<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>Pip</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Anacondaç¯å¢ƒé…ç½®/åŸºæœ¬æ“ä½œ</title>
    <link href="/2022/04/05/Anaconda/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    <url>/2022/04/05/Anaconda/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¯å¢ƒåˆ‡æ¢"><a href="#ç¯å¢ƒåˆ‡æ¢" class="headerlink" title="ç¯å¢ƒåˆ‡æ¢"></a>ç¯å¢ƒåˆ‡æ¢</h1><h2 id="ä¸€ã€å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒ"><a href="#ä¸€ã€å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="ä¸€ã€å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒ"></a>ä¸€ã€å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ›å»ºä¸€ä¸ªåç§°ä¸ºmy__test</span><br>conda create --name my__test python=3.7<br></code></pre></td></tr></table></figure><h2 id="äºŒã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"><a href="#äºŒã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="äºŒã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"></a>äºŒã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda activate my_test<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€åˆ‡æ¢ç¯å¢ƒ"><a href="#ä¸‰ã€åˆ‡æ¢ç¯å¢ƒ" class="headerlink" title="ä¸‰ã€åˆ‡æ¢ç¯å¢ƒ"></a>ä¸‰ã€åˆ‡æ¢ç¯å¢ƒ</h2><p>1ã€æŸ¥çœ‹å·²æœ‰çš„è™šæ‹Ÿç¯å¢ƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda env list<br></code></pre></td></tr></table></figure><p><img src="https://pic2.zhimg.com/80/v2-2855cfd302e331d8c9a1ee1dfd84d925_1440w.jpg"></p><p>2ã€åˆ‡æ¢åˆ°æƒ³è¦çš„è™šæ‹Ÿç¯å¢ƒï¼Œè¿™é‡Œæˆ‘åˆ‡æ¢åˆ°my_test</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda activate my_test<br></code></pre></td></tr></table></figure><p>3ã€åœ¨å½“å‰ç¯å¢ƒé‡Œå®‰è£…ipykernel</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda install ipykernel<br></code></pre></td></tr></table></figure><p><img src="https://pic4.zhimg.com/80/v2-3fe468e3a7647d138d6054a0c1c641bb_1440w.jpg"></p><h2 id="4ã€python-m-ipykernel-install-â€“name-my-test"><a href="#4ã€python-m-ipykernel-install-â€“name-my-test" class="headerlink" title="4ã€python -m ipykernel install â€“name my_test"></a>4ã€python -m ipykernel install â€“name my_test</h2><p><img src="https://pic1.zhimg.com/80/v2-abb56915ea64e5583f1dea223876144c_1440w.jpg"></p><h2 id="5ã€æ‰“å¼€jupyteræ–°å»ºä¸€ä¸ªnotebook-å¦‚ä¸‹æ‰€ç¤ºï¼š"><a href="#5ã€æ‰“å¼€jupyteræ–°å»ºä¸€ä¸ªnotebook-å¦‚ä¸‹æ‰€ç¤ºï¼š" class="headerlink" title="5ã€æ‰“å¼€jupyteræ–°å»ºä¸€ä¸ªnotebook,å¦‚ä¸‹æ‰€ç¤ºï¼š"></a>5ã€æ‰“å¼€jupyteræ–°å»ºä¸€ä¸ªnotebook,å¦‚ä¸‹æ‰€ç¤ºï¼š</h2><p><img src="https://pic3.zhimg.com/80/v2-b6ccaa26c129ca4d0e284b645f74bbde_1440w.jpg"></p><h1 id="æ›´æ–°å‡çº§"><a href="#æ›´æ–°å‡çº§" class="headerlink" title="æ›´æ–°å‡çº§"></a>æ›´æ–°å‡çº§</h1><h2 id="æ›´æ–°conda"><a href="#æ›´æ–°conda" class="headerlink" title="æ›´æ–°conda"></a>æ›´æ–°conda</h2><p>å…ˆæ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda update conda<br></code></pre></td></tr></table></figure><p>æŠŠcondaæ›´æ–°åˆ°æœ€æ–°ç‰ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda update anaconda<br></code></pre></td></tr></table></figure><p>ç„¶åè¾“å…¥ï¼ŒæŠŠanacondaæ›´æ–°çš„æ–°ç‰ˆã€‚</p><h2 id="æ›´æ–°æŸä¸€pythonç¯å¢ƒæ‰€æœ‰çš„åº“"><a href="#æ›´æ–°æŸä¸€pythonç¯å¢ƒæ‰€æœ‰çš„åº“" class="headerlink" title="æ›´æ–°æŸä¸€pythonç¯å¢ƒæ‰€æœ‰çš„åº“"></a>æ›´æ–°æŸä¸€pythonç¯å¢ƒæ‰€æœ‰çš„åº“</h2><p>åˆ‡æ¢åˆ°å¯¹åº”pythonç¯å¢ƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda activate python_environment<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda update --all<br></code></pre></td></tr></table></figure><h2 id="é’ˆå¯¹æ›´æ–°é€Ÿåº¦ç¼“æ…¢çš„é—®é¢˜æˆ‘è‡ªå·±æµ‹è¯•ç›®å‰æœ‰ä¸¤ç§è§£å†³åŠæ³•ï¼š"><a href="#é’ˆå¯¹æ›´æ–°é€Ÿåº¦ç¼“æ…¢çš„é—®é¢˜æˆ‘è‡ªå·±æµ‹è¯•ç›®å‰æœ‰ä¸¤ç§è§£å†³åŠæ³•ï¼š" class="headerlink" title="é’ˆå¯¹æ›´æ–°é€Ÿåº¦ç¼“æ…¢çš„é—®é¢˜æˆ‘è‡ªå·±æµ‹è¯•ç›®å‰æœ‰ä¸¤ç§è§£å†³åŠæ³•ï¼š"></a>é’ˆå¯¹æ›´æ–°é€Ÿåº¦ç¼“æ…¢çš„é—®é¢˜æˆ‘è‡ªå·±æµ‹è¯•ç›®å‰æœ‰ä¸¤ç§è§£å†³åŠæ³•ï¼š</h2><p>1.ä½¿ç”¨å…¨å±€ä»£ç†<br>2.æ·»åŠ å›½å†…é•œåƒæº<br>å…¨å±€ä»£ç†è¿™ä¸ªåŠæ³•ï¼Œè¿™é‡Œä¸åšè®²è§£äº†ï¼Œéœ€è¦ä½¿ç”¨çš„æœ‹å‹å¯ä»¥è‡ªå·±å»ç ”ç©¶ä¸€ä¸‹ã€‚è¿™é‡Œè¯´ä¸€ä¸‹æ·»åŠ å›½å†…é•œåƒæºçš„æ–¹æ³•ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/<br></code></pre></td></tr></table></figure><p>2.è®¾ç½®å¯åŠ¨è®¾ç½®å¥½çš„å›½å†…é•œåƒæº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda config --set show_channel_urls yes<br></code></pre></td></tr></table></figure><p>3.æŸ¥çœ‹æ˜¯å¦æ·»åŠ ä¸Šäº†æº</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">conda config --show<br></code></pre></td></tr></table></figure><p><img src="https://pic1.zhimg.com/80/v2-f7e47bb903a26d77bdb47c7c4932cc24_1440w.jpg"><br>è¿™ä¸ªæ˜¯é»˜è®¤çš„ï¼Œå¦‚æœä½ æ·»åŠ æˆåŠŸäº†ï¼Œä¼šåœ¨ä¸Šé¢å‡ºç°ä¸¤ä¸ªåˆšæ‰æ·»åŠ çš„åœ°å€<br>å¦‚æœé•œåƒæºå¤±æ•ˆäº†ï¼Œæˆ–è€…æƒ³æ¢æˆå…¶ä»–çš„æºï¼Œæ€ä¹ˆåˆ é™¤å‘¢ï¼Ÿ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda config --remove channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">conda config --remove channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/<br></code></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥åˆ é™¤äº†ã€‚<br>å‡ºç°æ›´æ–°æ…¢çš„é—®é¢˜çš„ï¼Œå…ˆæŠŠä»£ç†æˆ–è€…æºè®¾ç½®å¥½ï¼Œç„¶åå°±å¯ä»¥æ›´æ–°ä½ çš„Anacondaäº†ã€‚çœ‹åˆ°è¿™é‡Œä¼°è®¡å¯èƒ½ä¼šæœ‰äººæ”¾å¼ƒäº†ï¼Œå¤ªéº»çƒ¦äº†ï¼Œåˆå¾—æ‰¾ä»£ç†ï¼Œåˆå¾—ç”¨å›½å†…é•œåƒçš„ï¼Œå¤ªè´¹åŠ²äº†ï¼Œå½“ç„¶è¿˜æœ‰ä¸€ç§æ›´ç®€å•ç²—æš´çš„æ–¹å¼ï¼Œå¸è½½æ‰ç›®å‰ç”¨çš„ç‰ˆæœ¬ï¼Œå®‰è£…ä¸ªæœ€æ–°ç‰ˆçš„ã€‚ä½†æ˜¯é…ç½®å¥½çš„ç¯å¢ƒåº”è¯¥éƒ½æ²¡æœ‰äº†ï¼Œæˆ‘æ²¡æ•¢å°è¯•è¿™æ ·çš„æ–¹æ³•ã€‚å¦‚æœå¤§å®¶æœ‰æ›´å¥½çš„åŠæ³•è§£å†³Anacondaå‡çº§çš„é—®é¢˜ï¼Œæ¬¢è¿ä¸€èµ·è®¨è®ºä¸€ä¸‹ï¼Œè¿™ä¸ªç»™é‡åˆ°å‡çº§é—®é¢˜çš„å°ä¼™ä¼´ä»¬ä¸€ä¸ªå‚è€ƒï¼Œä¸è¶³ä¹‹å¤„è¯·æŒ‡æ­£ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>Anaconda</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GitåŸºæœ¬æ“ä½œ</title>
    <link href="/2022/04/05/Git/Git/"/>
    <url>/2022/04/05/Git/Git/</url>
    
    <content type="html"><![CDATA[<h1 id="Git-å®‰è£…"><a href="#Git-å®‰è£…" class="headerlink" title="Git å®‰è£…"></a>Git å®‰è£…</h1><p>Git å¯ä»¥åœ¨ Git å®˜ç½‘ä¸‹è½½ï¼Œç›®å‰ Git æ”¯æŒ Windows å’Œ Macï¼Œ æŒ‰é»˜è®¤é€‰é¡¹å®‰è£…å³å¯ã€‚(ä¸æ¸…æ¥šä¸‹è½½åœ°æ–¹çš„å¯ä»¥å…³æ³¨ç§ä¿¡æˆ‘)</p><p>å®‰è£…æ•™ç¨‹å¯å‚ç…§ å»–é›ªå³°è€å¸ˆçš„å®‰è£…æ•™ç¨‹ã€‚</p><h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><p><code>git config</code><br>åœ¨gitä¸­ï¼Œä½¿ç”¨<code>git config</code> å‘½ä»¤æ¥é…ç½® git çš„é…ç½®æ–‡ä»¶ï¼Œgité…ç½®çº§åˆ«ä¸»è¦æœ‰3ç±»ï¼š<br>1ã€ä»“åº“çº§åˆ« local æœ¬åœ° Git ä»“åº“çº§åˆ«é…ç½®æ–‡ä»¶ï¼Œä½œç”¨äºå½“å‰ä»“åº“ã€‚ã€ä¼˜å…ˆçº§æœ€é«˜ã€‘<br>2ã€ç”¨æˆ·çº§åˆ« globalï¼Œå…¨å±€é…ç½®æ–‡ä»¶ï¼Œä½œç”¨äºæ‰€æœ‰ç”¨æˆ·ã€‚ã€ä¼˜å…ˆçº§æ¬¡ä¹‹ã€‘<br>3ã€ç³»ç»Ÿçº§åˆ« systemï¼Œä½œç”¨äºç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·å’Œæ‰€æœ‰åº“ã€‚ã€ä¼˜å…ˆçº§æœ€ä½ã€‘<br><code>git config -l</code> æŸ¥çœ‹æ‰€æœ‰çš„é…ç½®ä¿¡æ¯ï¼Œä¾æ¬¡æ˜¯ç³»ç»Ÿçº§åˆ«ã€ç”¨æˆ·çº§åˆ«ã€ä»“åº“çº§åˆ«<br><code>git config --local -l</code> æŸ¥çœ‹ä»“åº“é…ç½®<br><code>git config --global -l</code> æŸ¥çœ‹ç”¨æˆ·é…ç½®<br><code>git config --system -l</code> æŸ¥çœ‹ç³»ç»Ÿé…ç½®<br><code>git config</code> æ·»åŠ é…ç½®æ–‡ä»¶<br><code>git config --global user.email â€œYou Emailâ€</code><br><code>git config --global user.name â€œYour Nameâ€</code><br><code>git config -e </code>ç¼–è¾‘é…ç½®æ–‡ä»¶<br><code>git config --local -e</code> ç¼–è¾‘ä»“åº“çº§åˆ«é…ç½®æ–‡ä»¶<br><code>git config --global -e</code> ç¼–è¾‘ç”¨æˆ·çº§åˆ«é…ç½®æ–‡ä»¶<br><code>git config --system -e</code> ç¼–è¾‘ç³»ç»Ÿçº§åˆ«é…ç½®æ–‡ä»¶<br><code>git clone</code><br><code>git clone</code> å¤åˆ¶ä»“åº“åˆ°æ–°çš„ç›®å½•<br><code>git fetch</code><br><code>git fetch</code> åˆ›å»ºå¹¶æ›´æ–°æœ¬åœ°è¿œç¨‹åˆ†æ”¯<br><code>git fetch origin</code> æ‰‹åŠ¨æŒ‡å®šè¦ fetch çš„ remote,åœ¨ä¸æŒ‡å®šåˆ†æ”¯æ—¶é€šå¸¸é»˜è®¤ä¸º masterï¼›<br><code>git fetch origin master:temp</code> å¦‚åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªtempåˆ†æ”¯ï¼Œå¹¶å°†è¿œç¨‹ origin ä»“åº“çš„ master åˆ†æ”¯ä»£ç ä¸‹è½½åˆ°æœ¬åœ° temp åˆ†æ”¯<br><code>git diff temp</code> æ¯”è¾ƒæœ¬åœ°ä»£ç ä¸åˆšåˆšä»è¿œç¨‹ä¸‹è½½ä¸‹æ¥çš„ä»£ç çš„åŒºåˆ«<br><code>git merge temp</code> åˆå¹¶ä»£ç <br><code>git branch -d temp</code> ä¸æƒ³è¦ tmp åˆ†æ”¯ï¼Œåˆ é™¤åˆ†æ”¯<br><code>git pull</code><br><code>git pull</code> å°†æ›´æ–°ä»è¿œç¨‹ä»“åº“åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚åœ¨é»˜è®¤æ¨¡å¼ä¸‹ï¼Œ<code>git pull</code> &#x3D;&#x3D; <code>git fetch</code> + <code>git merge</code>ã€‚<br><code>git pull</code> :</p><p>å¦‚ <code>git pull origin master</code></p><p><code>git pull </code>å–å›è¿œç¨‹ä»“åº“æŸä¸ªåˆ†æ”¯çš„æ›´æ–°ï¼Œå†ä¸æœ¬åœ°çš„æŒ‡å®šåˆ†æ”¯è‡ªåŠ¨åˆå¹¶ï¼Œå¯èƒ½ä¼šå‡ºç°ä»£ç å†²çªã€‚</p><p><code>git fetch</code> å…ˆè·å–è¿œç¨‹ä»“åº“æŸä¸ªåˆ†æ”¯çš„æ›´æ–°ï¼Œå†æ‰§è¡Œ mergeï¼Œç›¸æ¯” pull ï¼Œfetch æ›´å¯æ§ã€‚</p><p><code>git add</code></p><p><code>git add -A</code> æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</p><p><code>git add -u</code> æ·»åŠ è¢«ä¿®æ”¹(modified)å’Œè¢«åˆ é™¤(deleted)æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œä¸åŒ…æ‹¬æ–°æ–‡ä»¶(new)</p><p><code>git add .</code> æ·»åŠ æ–°æ–‡ä»¶(new)å’Œè¢«ä¿®æ”¹(modified)æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œä¸åŒ…æ‹¬è¢«åˆ é™¤(deleted)æ–‡ä»¶</p><p>å¯ä»¥é€šè¿‡ <code>git status</code> æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²æ·»åŠ å®Œæ¯•ã€‚</p><p><code>git commit</code></p><p><code>git commit -m</code> â€œâ€ æ¯”è¾ƒå¸¸è§çš„ç”¨æ³•ï¼Œ-m â€œå¡«å†™æ›´æ–°è®°å½•â€</p><p><code>git commit -a -m</code> â€œâ€ æäº¤æ‰€æœ‰å·²è·Ÿè¸ªçš„æ‰§è¡Œä¿®æ”¹æˆ–åˆ é™¤ã€æ–°å»ºçš„æ–‡ä»¶ï¼Œå³ä½¿æ²¡æœ‰æ‰§è¡Œ git add æ·»åŠ åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶ã€‚</p><p><code>git commit --amend</code> ä¿®æ”¹ä¸Šä¸€æ¬¡æäº¤ï¼Œå¯ä»¥åœ¨ä¸å¢åŠ æ–°çš„ commit-id çš„æƒ…å†µä¸‹å°†æ–°ä¿®æ”¹çš„ä»£ç è¿½åŠ åˆ°å‰ä¸€æ¬¡ commit-id ä¸­ã€‚å¦‚ä¸å°å¿ƒæäº¤äº†ä¸€ç‰ˆæ²¡æœ‰ä¿®æ”¹å®Œæˆçš„ç‰ˆæœ¬ä¸Šå»ï¼Œ</p><p>è¿˜éœ€è¦ä¿®æ”¹å®Œå–„åå†æäº¤ï¼Œåˆä¸æƒ³å†æ¬¡å¢åŠ ä¸€ä¸ª commit-id æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿½åŠ æäº¤ã€‚</p><p><code>git commit --help</code> æŸ¥çœ‹å¸®åŠ©</p><p><code>git push</code></p><p><code>git push </code>å°†å·²ç» commit çš„æ–‡ä»¶æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„åˆ†æ”¯</p><p><code>git push origin master</code> æ¨é€åˆ° master åˆ†æ”¯</p><p><code>git push --all origin</code> æ¨é€æœ¬åœ°ä»“åº“æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“åˆ†æ”¯</p><p><code>git push origin :master</code> åˆ é™¤è¿œç¨‹åˆ†æ”¯ï¼Œç­‰åŒäº <code>git push origin --delete master</code></p><p><code>git push -u origin master </code>å°†æœ¬åœ°çš„ master åˆ†æ”¯æ¨é€åˆ° origin ä¸»æœºï¼ŒåŒæ—¶æŒ‡å®š origin ä¸ºé»˜è®¤ä¸»æœºã€‚</p><p><code>git remote</code></p><p><code>git remote -v</code> æŸ¥çœ‹è¿œç¨‹ä»“åº“åœ°å€</p><p><code>git remote set-url origin</code> ä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€</p><p><code>git remote rm origin</code> åˆ é™¤è¿œç¨‹ä»“åº“åœ°å€</p><p><code>git remote add origin [url]</code> æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€</p><p><code>git merge</code></p><p><code>git merge</code> åˆå¹¶ä»£ç </p><p><code>git merge --no-commit</code> é˜²æ­¢åˆå¹¶å¤±è´¥ä¸è‡ªåŠ¨æäº¤</p><p><code>git merge --no-ff</code> ä¸ä½¿ç”¨fast-forwardæ–¹å¼åˆå¹¶ï¼Œåˆ›å»ºä¸€ä¸ª merge çš„ commit ä¿¡æ¯ã€‚</p><p>ä¸€ã€ç‰ˆæœ¬å›é€€<br>æˆ‘ä»¬ç”¨readmeæ–‡ä»¶ä¸¾ä¾‹å­ï¼Œä¿®æ”¹å¥½å†…å®¹ä¹‹åï¼Œé‡æ–°æäº¤<br><code>git add readme.txt</code><br><code>git commit -m &quot;è¯´æ˜&quot;</code>  </p><p><img src="https://upload-images.jianshu.io/upload_images/21452414-8619843d359e464a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200"></p><p>è¿”å›ç»“æœ<br>æˆ‘ä»¬å¯ä»¥å¤šä¿®æ”¹å‡ æ¬¡ï¼Œæ¥è¯•ä¸€ä¸‹ç‰ˆæœ¬å›é€€åŠŸèƒ½  </p><p><img src="https://upload-images.jianshu.io/upload_images/21452414-934dca2c8cf7697e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200"></p><p>ä¿®æ”¹ä¹‹åçš„git log,æŒ‰Qæ¨å‡º</p><p>å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬<code>git reset --hard HEAD^</code>  </p><p><img src="https://upload-images.jianshu.io/upload_images/21452414-660b9a45ac97a052.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200"><br>ç»ˆç«¯æˆªå›¾<br><img src="https://upload-images.jianshu.io/upload_images/21452414-6a040fe5e32e04e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200"></p><p>catå‘½ä»¤æŸ¥çœ‹æ–‡ä»¶å†…å®¹</p><p>ä»¥æ­¤ç±»æ¨å›åˆ°ä¸Šä¸Šä¸ªç‰ˆæœ¬å°±æ˜¯<code>git reset --hard HEAD^^</code><br>å½“å¾€ä¸Šçš„ç‰ˆæœ¬æ¯”è¾ƒå¤šï¼Œæ¯”å¦‚å¾€ä¸Š50ä¸ªç‰ˆæœ¬çš„æ—¶å€™æˆ‘ä»¬ç”¨<code>git reset --hard HEAD~50</code></p><p>é€€å›ä»¥åå‡ºç°ä¸€ä¸ªå¥‡æ€ªçš„äº‹æƒ…ï¼Œæˆ‘ä»¬å†æ‰§è¡Œ<code>git log</code>å‘½ä»¤å‘ç°çœ‹ä¸åˆ°ç¬¬ä¸‰ç‰ˆäº†  </p><p><img src="https://upload-images.jianshu.io/upload_images/21452414-9da314cc6a740f47.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200"></p><p>git logç»“æœ</p><p>è¿™æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦å›åˆ°ç¬¬ä¸‰ç‰ˆéœ€è¦ç”¨ä»¥ä¸‹å‘½ä»¤æ¥<br><code>git rest hard 63ef</code><br><code>63ef</code>æ˜¯ç¬¬ä¸‰æ¬¡æäº¤æ—¶çš„ç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬æ²¡å¿…è¦å»å†™å…¨ï¼Œgitä¼šè‡ªåŠ¨æ£€ç´¢ï¼Œä½†ä¹Ÿä¸èƒ½åªå†™ä¸€ä¸¤ä½ã€‚å› ä¸ºç‰ˆæœ¬å·å¤šäº†ä¼šæœ‰é‡å¤çš„ã€‚  </p><p><img src="https://upload-images.jianshu.io/upload_images/21452414-9803aaf3afe72e31.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200"></p><p>æ¢å¤åˆ°ç¬¬ä¸‰ç‰ˆ</p><ul><li>é—®é¢˜â‘ :å¦‚æœæˆ‘ä»¬æ²¡æœ‰è®°å½•è¢«æ¢å¤ç‰ˆæœ¬çš„ç‰ˆæœ¬å·,æ€ä¹ˆæ‰¾å›å‘¢?</li></ul><p>Gitæä¾›äº†ä¸€ä¸ªå‘½ä»¤<code>git reflog</code>,é€šè¿‡è¿™ä¸ªå‘½ä»¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯æ¬¡gitçš„æ“ä½œè®°å½•</p><ul><li>é—®é¢˜â‘¡:å¦‚æœæˆ‘ä»¬é€šè¿‡gitå›åˆ°ç¬¬ä¸€ç‰ˆ,é‚£ä¹ˆ<code>git log</code>å‘½ä»¤è¿˜èƒ½çœ‹åˆ°ç¬¬äºŒç‰ˆå—?</li></ul><p>å°ç»“:</p><ul><li><p>HEADæŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œå› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„å†å²ä¹‹é—´ç©¿æ¢­ï¼Œä½¿ç”¨å‘½ä»¤<code>git reset --hard commit_id</code></p></li><li><p>ç©¿æ¢­å‰ï¼Œç”¨git logå¯ä»¥æŸ¥çœ‹æäº¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›é€€åˆ°å“ªä¸ªç‰ˆæœ¬ã€‚</p></li><li><p>è¦é‡è¿”æœªæ¥ï¼Œç”¨git reflogæŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ã€‚</p></li></ul><p><strong>ç›´æ¥æ‹‰å–å¹¶è¦†ç›–æœ¬åœ°çš„æ‰€æœ‰ä»£ç </strong><br>ä¸¤ä¸ªç”µè„‘åŒæ—¶å¯¹gitä¸Šçš„é¡¹ç›®è¿›è¡Œè·Ÿæ–°æ—¶ï¼Œä¸å…è¦ç”¨åˆ°å°†gitä¸Šçš„ä»£ç æ‹‰å–åˆ°æœ¬åœ°æ›´æ–°æœ¬åœ°ä»£ç çš„æ“ä½œï¼Œé‰´äºè‡ªå·±å¯¹gitä½¿ç”¨çš„è¿˜ä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œæ‰€ä»¥å°±ç›´æ¥é‡‡å–æš´åŠ›çš„æ–¹æ³•ï¼Œç›´æ¥æ‹‰å–å¹¶è¦†ç›–æœ¬åœ°çš„æ‰€æœ‰ä»£ç ï¼Œå‘½ä»¤å¦‚ä¸‹</p><figure class="highlight sh"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs sh">git fetch --all<br>git reset --hard origin/master<br>git pull<br></code></pre></td></tr></table></figure><h1 id="Difference-between-and"><a href="#Difference-between-and" class="headerlink" title="Difference between ^ and ~"></a>Difference between ^ and ~</h1><h2 id="Rules-of-thumb"><a href="#Rules-of-thumb" class="headerlink" title="Rules of thumb"></a>Rules of thumb</h2><ul><li>Use <code>~</code> most of the time â€” to go back a number of generations, usually what you want</li><li>Use <code>^</code> on merge commits â€” because they have two or more (immediate) parents</li></ul><p>Mnemonics:</p><ul><li>Tilde <code>~</code> is almost linear in appearance and wants to go backward in a straight line</li><li>Caret <code>^</code> suggests an interesting segment of a tree or a fork in the road</li></ul><h2 id="Tilde"><a href="#Tilde" class="headerlink" title="Tilde"></a>Tilde</h2><p>The <a href="https://git-scm.com/docs/git-rev-parse#Documentation/git-rev-parse.txt-emltrevgtltngtemegemmaster3em">â€œSpecifying Revisionsâ€ section of the <code>git rev-parse</code> documentation</a> defines <code>~</code> as</p><blockquote><p><strong><code>&lt;rev&gt;~&lt;n&gt;</code>, e.g. <code>master~3</code></strong><br>A suffix <code>~&lt;n&gt;</code> to a revision parameter means the commit object that is the _n_thgeneration ancestor of the named commit object, following only the first parents. For example, <code>&lt;rev&gt;~3</code> is equivalent to <code>&lt;rev&gt;^^^</code> which is equivalent to <code>&lt;rev&gt;^1^1^1</code> â€¦</p></blockquote><p>You can get to parents of any commit, not just <code>HEAD</code>. You can also move back through generations: for example, <code>master~2</code> means the grandparent of the tip of the master branch, favoring the first parent on merge commits.</p><h2 id="Caret"><a href="#Caret" class="headerlink" title="Caret"></a>Caret</h2><p>Git history is nonlinear: a directed acyclic graph (DAG) or tree. For a commit with only one parent, <code>rev~</code> and <code>rev^</code> mean the same thing. The caret selector becomes useful with merge commits because each one is the child of two or more parents â€” and strains language borrowed from biology.</p><p><code>HEAD^</code> means the first <em>immediate</em> parent of the tip of the current branch. <code>HEAD^</code> is short for <code>HEAD^1</code>, and you can also address <code>HEAD^2</code> and so on as appropriate. The <a href="https://git-scm.com/docs/git-rev-parse#Documentation/git-rev-parse.txt-emltrevgtemegemHEADv1510em">same section of the <code>git rev-parse</code> documentation</a> defines it as</p><blockquote><p><strong><code>&lt;rev&gt;^</code>, <em>e.g.</em> <code>HEAD^</code>, <code>v1.5.1^0</code></strong><br>A suffix <code>^</code> to a revision parameter means the first parent of that commit object. <code>^&lt;n&gt;</code>means the _n_th parent ([<em>e.g.</em>] <code>&lt;rev&gt;^</code> is equivalent to <code>&lt;rev&gt;^1</code>). As a special rule, <code>&lt;rev&gt;^0</code> means the commit itself and is used when <code>&lt;rev&gt;</code> is the object name of a tag object that refers to a commit object.</p></blockquote><h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><p>These specifiers or selectors can be chained arbitrarily, <em>e.g.</em>, <code>topic~3^2</code> in English is the second parent of the merge commit that is the great-grandparent (three generations back) of the current tip of the branch <code>topic</code>.</p><p>The <a href="https://git-scm.com/docs/git-rev-parse#_specifying_revisions">aforementioned section of the <code>git rev-parse</code> documentation</a> traces many paths through a notional git history. Time flows generally downward. Commits D, F, B, and A are merge commits.</p><blockquote><p>Here is an illustration, by Jon Loeliger. Both commit nodes B and C are parents of commit node A. Parent commits are ordered left-to-right. (N.B. The <code>git log --graph</code> command displays history in the opposite order.)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sh">G   H   I   J<br>\ /     \ /<br>D   E   F<br>\  |  / \<br> \ | /   |<br>  \|/    |<br>   B     C<br>    \   /<br>     \ /<br>      A<br><br>A =      = A^0<br>B = A^   = A^1     = A~1<br>C = A^2<br>D = A^^  = A^1^1   = A~2<br>E = B^2  = A^^2<br>F = B^3  = A^^3<br>G = A^^^ = A^1^1^1 = A~3<br>H = D^2  = B^^2    = A^^^2  = A~2^2<br>I = F^   = B^3^    = A^^3^<br>J = F^2  = B^3^2   = A^^3^2<br></code></pre></td></tr></table></figure></blockquote><p>Run the code below to create a git repository whose history matches the quoted illustration.</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#! /usr/bin/env perl</span><br><br><span class="hljs-keyword">use</span> strict;<br><span class="hljs-keyword">use</span> warnings;<br><span class="hljs-keyword">use</span> subs <span class="hljs-keyword">qw</span>/ postorder /;<br><span class="hljs-keyword">use</span> File::Temp <span class="hljs-keyword">qw</span>/ mkdtemp /;<br><br><span class="hljs-keyword">my</span> %sha1;<br><span class="hljs-keyword">my</span> %parents = (<br>  <span class="hljs-string">A =&gt;</span> [ <span class="hljs-keyword">qw</span>/ B C /               ],<br>  <span class="hljs-string">B =&gt;</span> [ <span class="hljs-keyword">qw</span>/     D E F /         ],<br>  <span class="hljs-string">C =&gt;</span> [ <span class="hljs-keyword">qw</span>/         F /         ],<br>  <span class="hljs-string">D =&gt;</span> [ <span class="hljs-keyword">qw</span>/           G H /     ],<br>  <span class="hljs-string">F =&gt;</span> [ <span class="hljs-keyword">qw</span>/               I J / ],<br>);<br><br><span class="hljs-function"><span class="hljs-keyword">sub</span> <span class="hljs-title">postorder</span> </span>&#123;<br>  <span class="hljs-keyword">my</span>($root,$hash) = @_;<br>  <span class="hljs-keyword">my</span> @parents = @&#123; $parents&#123;$root&#125; || [] &#125;;<br>  postorder($_, $hash) <span class="hljs-keyword">for</span> @parents;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> $sha1&#123;$root&#125;;<br>  @parents = <span class="hljs-keyword">map</span> <span class="hljs-string">&quot;-p $sha1&#123;$_&#125;&quot;</span>, @parents;<br>  <span class="hljs-keyword">chomp</span>($sha1&#123;$root&#125; = <span class="hljs-string">`git commit-tree @parents -m &quot;$root&quot; $hash`</span>);<br>  <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git commit-tree failed&quot;</span> <span class="hljs-keyword">if</span> $?;<br>  <span class="hljs-keyword">system</span>(<span class="hljs-string">&quot;git tag -a -m &#x27;$sha1&#123;$root&#125;&#x27; &#x27;$root&#x27; &#x27;$sha1&#123;$root&#125;&#x27;&quot;</span>) == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git tag failed&quot;</span>;<br>&#125;<br><br>$0 =~ s!^.*<span class="hljs-regexp">/!!;  # /</span> fix Stack Overflow highlighting<br><span class="hljs-keyword">my</span> $repo = mkdtemp <span class="hljs-string">&quot;repoXXXXXXXX&quot;</span>;<br><span class="hljs-keyword">chdir</span> $repo <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: chdir: $!&quot;</span>;<br><span class="hljs-keyword">system</span>(<span class="hljs-string">&quot;git init&quot;</span>) == <span class="hljs-number">0</span>               <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git init failed&quot;</span>;<br><span class="hljs-keyword">chomp</span>(<span class="hljs-keyword">my</span> $tree = <span class="hljs-string">`git write-tree`</span>);      <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git write-tree failed&quot;</span> <span class="hljs-keyword">if</span> $?;<br><br>postorder <span class="hljs-string">&#x27;A&#x27;</span>, $tree;<br><span class="hljs-keyword">system</span> <span class="hljs-string">&quot;git update-ref HEAD   $sha1&#123;A&#125;&quot;</span>; <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git update-ref failed&quot;</span> <span class="hljs-keyword">if</span> $?;<br><span class="hljs-keyword">system</span> <span class="hljs-string">&quot;git update-ref master $sha1&#123;A&#125;&quot;</span>; <span class="hljs-keyword">die</span> <span class="hljs-string">&quot;$0: git update-ref failed&quot;</span> <span class="hljs-keyword">if</span> $?;<br><br><span class="hljs-comment"># for browsing history - http://blog.kfish.org/2010/04/git-lola.html</span><br><span class="hljs-keyword">system</span> <span class="hljs-string">&quot;git config alias.lol  &#x27;log --graph --decorate --pretty=oneline --abbrev-commit&#x27;&quot;</span>;<br><span class="hljs-keyword">system</span> <span class="hljs-string">&quot;git config alias.lola &#x27;log --graph --decorate --pretty=oneline --abbrev-commit --all&#x27;&quot;</span>;<br></code></pre></td></tr></table></figure><p>It adds aliases in the new throwaway repo only for <a href="http://blog.kfish.org/2010/04/git-lola.html"><code>git lol</code> and <code>git lola</code></a> so you can view history as in</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git lol<br>*   29392c8 (HEAD -&gt; master, tag: A) A<br>|\<br>| * a1ef6fd (tag: C) C<br>| |<br>|  \<br>*-. \   8ae20e9 (tag: B) B<br>|\ \ \<br>| | |/<br>| | *   03160db (tag: F) F<br>| | |\<br>| | | * 9df28cb (tag: J) J<br>| | * 2afd329 (tag: I) I<br>| * a77cb1f (tag: E) E<br>*   cd75703 (tag: D) D<br>|\<br>| * 3043d25 (tag: H) H<br>* 4ab0473 (tag: G) G<br></code></pre></td></tr></table></figure><p>Note that on your machine the SHA-1 object names will differ from those above, but the tags allow you to address commits by name and check your understanding.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git <span class="hljs-built_in">log</span> -1 --format=%f $(git rev-parse A^)<br>B<br>$ git <span class="hljs-built_in">log</span> -1 --format=%f $(git rev-parse A~^3~)<br>I<br>$ git <span class="hljs-built_in">log</span> -1 --format=%f $(git rev-parse A^2~)<br>F<br></code></pre></td></tr></table></figure><p>The <a href="https://git-scm.com/docs/git-rev-parse#_specifying_revisions">â€œSpecifying Revisionsâ€ in the <code>git rev-parse</code> documentation</a> is full of great information and is worth an in-depth read. See also <a href="https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection">Git Tools - Revision Selection</a> from the book <a href="https://git-scm.com/book/en/v2/"><em>Pro Git</em></a>.</p><h2 id="Order-of-Parent-Commits"><a href="#Order-of-Parent-Commits" class="headerlink" title="Order of Parent Commits"></a>Order of Parent Commits</h2><p>The commit <a href="https://github.com/git/git/commit/89e4fcb0dd01b42e82b8f27f9a575111a26844df">89e4fcb0dd</a> from gitâ€™s own history is a merge commit, as <code>git show 89e4fcb0dd</code>indicates with the Merge header line that displays the immediate ancestorsâ€™ object names.</p><blockquote> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">commit 89e4fcb0dd01b42e82b8f27f9a575111a26844df<br>Merge: c670b1f876 649bf3a42f b67d40adbb<br>Author: Junio C Hamano &lt;gitster@pobox.com&gt;<br>Date:   Mon Oct 29 10:15:31 2018 +0900<br><br> Merge branches <span class="hljs-string">&#x27;bp/reset-quiet&#x27;</span> and <span class="hljs-string">&#x27;js/mingw-http-ssl&#x27;</span> into nd/config-split [â€¦]<br></code></pre></td></tr></table></figure></blockquote><p>We can confirm the ordering by asking <code>git rev-parse</code> to show 89e4fcb0ddâ€™s immediate parents in sequence.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git rev-parse 89e4fcb0dd^1 89e4fcb0dd^2 89e4fcb0dd^3<br>c670b1f876521c9f7cd40184bf7ed05aad843433<br>649bf3a42f344e71b1b5a7f562576f911a1f7423<br>b67d40adbbaf4f5c4898001bf062a9fd67e43368<br></code></pre></td></tr></table></figure><p>Querying the non-existent fourth parent results in an error.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git rev-parse 89e4fcb0dd^4<br>89e4fcb0dd^4<br>fatal: ambiguous argument <span class="hljs-string">&#x27;89e4fcb0dd^4&#x27;</span>: unknown revision or path not <span class="hljs-keyword">in</span> the working tree.<br>Use <span class="hljs-string">&#x27;--&#x27;</span> to separate paths from revisions, like this:<br><span class="hljs-string">&#x27;git &lt;command&gt; [&lt;revision&gt;...] -- [&lt;file&gt;...]&#x27;</span><br></code></pre></td></tr></table></figure><p>If you want to extract the parents only, use <a href="https://git-scm.com/docs/git-log#_pretty_formats">pretty format</a> <code>%P</code> for the full hashes</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git <span class="hljs-built_in">log</span> -1 --pretty=%P 89e4fcb0dd<br>c670b1f876521c9f7cd40184bf7ed05aad843433 649bf3a42f344e71b1b5a7f562576f911a1f7423 b67d40adbbaf4f5c4898001bf062a9fd67e43368<br></code></pre></td></tr></table></figure><p>or <code>%p</code> for abbreviated parents.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git <span class="hljs-built_in">log</span> -1 --pretty=%p 89e4fcb0dd<br>c670b1f876 649bf3a42f b67d40adbb<br></code></pre></td></tr></table></figure><h1 id="ä¸ªæ€§åŒ–è‡ªå®šä¹‰gitå‘½ä»¤åˆ«å"><a href="#ä¸ªæ€§åŒ–è‡ªå®šä¹‰gitå‘½ä»¤åˆ«å" class="headerlink" title="ä¸ªæ€§åŒ–è‡ªå®šä¹‰gitå‘½ä»¤åˆ«å"></a>ä¸ªæ€§åŒ–è‡ªå®šä¹‰gitå‘½ä»¤åˆ«å</h1><p>æ–‡ä»¶åï¼š.gitconfig_1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs note">[init]<br>defaultBranch = main<br>[user]<br>name = Alndaly<br>email = 1142704468@qq.com<br>[filter &quot;lfs&quot;]<br>clean = git-lfs clean -- %f<br>smudge = git-lfs smudge -- %f<br>process = git-lfs filter-process<br>required = true<br>[alias] <br>lm = log --color --date=format:&#x27;%Y-%m-%d %H:%M:%S&#x27; --author=&#x27;Alndaly&#x27; --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%C(cyan) %s %Cgreen(%cd) %C(bold white)&lt;%an&gt;%Creset&#x27; --abbrev-commit --graph<br>ls = log --color --date=format:&#x27;%Y-%m-%d %H:%M:%S&#x27; --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%C(cyan) %s %Cgreen(%cd) %C(bold white)&lt;%an&gt;%Creset&#x27; --abbrev-commit --graph<br></code></pre></td></tr></table></figure><p>æ–‡ä»¶åï¼š.gitconfig_2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs note">[init]<br>defaultBranch = main<br>[user]<br>name = Smiling22<br>email = lucky.always.h@gmail.com<br>[filter &quot;lfs&quot;]<br>clean = git-lfs clean -- %f<br>smudge = git-lfs smudge -- %f<br>process = git-lfs filter-process<br>required = true<br>[alias] <br>lm = log --color --date=format:&#x27;%Y-%m-%d %H:%M:%S&#x27; --author=&#x27;Alndaly&#x27; --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%C(cyan) %s %Cgreen(%cd) %C(bold white)&lt;%an&gt;%Creset&#x27; --abbrev-commit --graph<br>ls = log --color --date=format:&#x27;%Y-%m-%d %H:%M:%S&#x27; --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%C(cyan) %s %Cgreen(%cd) %C(bold white)&lt;%an&gt;%Creset&#x27; --abbrev-commit --graph<br></code></pre></td></tr></table></figure><h2 id="The-default-branch-has-been-renamed-ï¼ˆå½“è¿œç¨‹åˆ†æ”¯æ”¹äº†åå­—ï¼‰"><a href="#The-default-branch-has-been-renamed-ï¼ˆå½“è¿œç¨‹åˆ†æ”¯æ”¹äº†åå­—ï¼‰" class="headerlink" title="The default branch has been renamed!ï¼ˆå½“è¿œç¨‹åˆ†æ”¯æ”¹äº†åå­—ï¼‰"></a>The default branch has been renamed!ï¼ˆå½“è¿œç¨‹åˆ†æ”¯æ”¹äº†åå­—ï¼‰</h2><p>main is now named master</p><p>If you have a local clone, you can update it by running the following commands.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sh">git branch -m main master<br>git fetch origin<br>git branch -u origin/master master<br>git remote set-head origin -a<br></code></pre></td></tr></table></figure><p>![GitFlow Workflow](&#x2F;Users&#x2F;alnda&#x2F;Developer&#x2F;hexo-blog&#x2F;source&#x2F;_posts&#x2F;Git&#x2F;GitFlow Workflow.md)<br><img src="https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/20220405171749.md" alt="Forking Workflow"></p><h1 id="Resetting-Checking-Out-amp-Reverting"><a href="#Resetting-Checking-Out-amp-Reverting" class="headerlink" title="Resetting, Checking Out &amp; Reverting"></a>Resetting, Checking Out &amp; Reverting</h1><p>The <code>[git reset](https://www.atlassian.com/git/tutorials/undoing-changes/git-reset)</code>, <code>[git checkout](https://www.atlassian.com/git/tutorials/using-branches/git-checkout)</code>, and <code>[git revert](https://www.atlassian.com/git/tutorials/undoing-changes/git-revert)</code> commands are some of the most useful tools in your Git toolbox. They all let you undo some kind of change in your repository, and the first two commands can be used to manipulate either commits or individual files.</p><p>Because theyâ€™re so similar, itâ€™s very easy to mix up which command should be used in any given development scenario. In this article, weâ€™ll compare the most common configurations of <code>git reset</code>, <code>git checkout</code>, and <code>git revert</code>. Hopefully, youâ€™ll walk away with the confidence to navigate your repository using any of these commands.</p><p><img src="https://wac-cdn.atlassian.com/dam/jcr:0c5257d5-ff01-4014-af12-faf2aec53cc3/01.svg?cdnVersion=116" alt="The three trees of Git"></p><p>It helps to think about each command in terms of their effect on the three state management mechanisms of a Git repository: the working directory, the staged snapshot, and the commit history. These components are sometimes known as â€œThe three treesâ€ of Git. We explore the three trees in depth on the <code>[git reset](https://www.atlassian.com/git/tutorials/undoing-changes/git-reset)</code> page. Keep these mechanisms in mind as you read through this article.</p><p>A checkout is an operation that moves the <code>HEAD</code> ref pointer to a specified commit. To demonstrate this consider the following example.</p><p><img src="https://wac-cdn.atlassian.com/dam/jcr:8d616ece-8cee-4fde-bdee-4b280a0a8334/01%20git-sequence-transparent%20kopiera.png?cdnVersion=116" alt="Move the HEAD ref pointer to a specified commit"></p><p>This example demonstrates a sequence of commits on the <code>main</code> branch. The <code>HEAD</code> ref and <code>main</code> branch ref currently point to commit d. Now let us execute <code>git checkout b</code></p><p><img src="https://wac-cdn.atlassian.com/dam/jcr:f45c4a34-8968-4c81-83cf-d55ebf01a447/02%20git-checkout-transparent%20kopiera.png?cdnVersion=116" alt="Sequence of commits on the master branch"></p><p>This is an update to the â€œCommit Historyâ€ tree. The <code>git checkout</code> command can be used in a commit, or file level scope. A file level checkout will change the fileâ€™s contents to those of the specific commit.</p><p>A revert is an operation that takes a specified commit and creates a new commit which inverses the specified commit. <code>git revert</code>can only be run at a commit level scope and has no file level functionality.</p><p>A reset is an operation that takes a specified commit and resets the â€œthree treesâ€ to match the state of the repository at that specified commit. A reset can be invoked in three different modes which correspond to the three trees.</p><p>Checkout and reset are generally used for making local or private â€˜undosâ€™. They modify the history of a repository that can cause conflicts when pushing to remote shared repositories. Revert is considered a safe operation for â€˜public undosâ€™ as it creates new history which can be shared remotely and doesnâ€™t overwrite history remote team members may be dependent on.</p><h2 id="Git-Reset-vs-Revert-vs-Checkout-reference"><a href="#Git-Reset-vs-Revert-vs-Checkout-reference" class="headerlink" title="Git Reset vs Revert vs Checkout reference"></a>Git Reset vs Revert vs Checkout reference</h2><p>The table below sums up the most common use cases for all of these commands. Be sure to keep this reference handy, as youâ€™ll undoubtedly need to use at least some of them during your Git career.</p><p>Command</p><p>Scope</p><p>Common use cases</p><p><code>git reset</code></p><p>Commit-level</p><p>Discard commits in a private branch or throw away uncommited changes</p><p><code>git reset</code></p><p>File-level</p><p>Unstage a file</p><p><code>git checkout</code></p><p>Commit-level</p><p>Switch between branches or inspect old snapshots</p><p><code>git checkout</code></p><p>File-level</p><p>Discard changes in the working directory</p><p><code>git revert</code></p><p>Commit-level</p><p>Undo commits in a public branch</p><p><code>git revert</code></p><p>File-level</p><p>(N&#x2F;A)</p><h2 id="Commit-Level-Operations"><a href="#Commit-Level-Operations" class="headerlink" title="Commit Level Operations"></a>Commit Level Operations</h2><p>The parameters that you pass to <code>git reset</code> and <code>git checkout</code>determine their scope. When you donâ€™t include a file path as a parameter, they operate on whole commits. Thatâ€™s what weâ€™ll be exploring in this section. Note that <code>git revert</code> has no file-level counterpart.</p><h3 id="Reset-A-Specific-Commit"><a href="#Reset-A-Specific-Commit" class="headerlink" title="Reset A Specific Commit"></a>Reset A Specific Commit</h3><p>On the commit-level, resetting is a way to move the tip of a branch to a different commit. This can be used to remove commits from the current branch. For example, the following command moves the <code>hotfix</code> branch backwards by two commits.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout hotfix git reset HEAD~2<br></code></pre></td></tr></table></figure><p>The two commits that were on the end of <code>hotfix</code> are now dangling, or orphaned commits. This means they will be deleted the next time Git performs a garbage collection. In other words, youâ€™re saying that you want to throw away these commits. This can be visualized as the following:</p><p><img src="https://wac-cdn.atlassian.com/dam/jcr:e8a43261-2460-4783-9731-1197dc8959ab/03-04%20Reset%20a%20specific%20commit.png?cdnVersion=116" alt="Resetting the hotfix branch to HEAD-2"></p><p>This usage of <code>git reset</code> is a simple way to undo changes that havenâ€™t been shared with anyone else. Itâ€™s your go-to command when youâ€™ve started working on a feature and find yourself thinking, â€œOh crap, what am I doing? I should just start over.â€</p><p>In addition to moving the current branch, you can also get <code>git reset</code> to alter the staged snapshot and&#x2F;or the working directory by passing it one of the following flags:</p><ul><li><code>--soft</code> â€“ The staged snapshot and working directory are not altered in any way.</li><li><code>--mixed</code> â€“ The staged snapshot is updated to match the specified commit, but the working directory is not affected. This is the default option.</li><li><code>--hard</code> â€“ The staged snapshot and the working directory are both updated to match the specified commit.</li></ul><p>Itâ€™s easier to think of these modes as defining the scope of a <code>git reset</code> operation. For further detailed information visit the <code>[git reset](https://www.atlassian.com/git/tutorials/undoing-changes/git-reset)</code> page.</p><h3 id="Checkout-old-commits"><a href="#Checkout-old-commits" class="headerlink" title="Checkout old commits"></a>Checkout old commits</h3><p>The <code>git checkout</code> command is used to update the state of the repository to a specific point in the projects history. When passed with a branch name, it lets you switch between branches.</p><p> <code>git checkout hotfix</code></p><p>Internally, all the above command does is move <code>HEAD</code> to a different branch and update the working directory to match. Since this has the potential to overwrite local changes, Git forces you to commit or <a href="https://www.atlassian.com/git/tutorials/saving-changes/git-stash">stash</a> any changes in the working directory that will be lost during the checkout operation. Unlike <code>git reset</code>, <code>git checkout</code> doesnâ€™t move any branches around.</p><p><img src="https://wac-cdn.atlassian.com/dam/jcr:7dffc21e-29c6-4bfd-acd1-2965fcdd923e/05-06%20Checkout%20old%20commits.png?cdnVersion=116" alt="Moving HEAD from master to hotfix"></p><p>You can also check out arbitrary commits by passing the commit reference instead of a branch. This does the exact same thing as checking out a branch: it moves the <code>HEAD</code> reference to the specified commit. For example, the following command will check out the grandparent of the current commit:</p><p> <code>git checkout HEAD~2</code></p><p><img src="https://wac-cdn.atlassian.com/dam/jcr:9b4d9562-7ed1-441c-bbd1-1897bea5676e/07.svg?cdnVersion=116" alt="Moving `HEAD` to an arbitrary commit"></p><p>This is useful for quickly inspecting an old version of your project. However, since there is no branch reference to the current <code>HEAD</code>, this puts you in a detached <code>HEAD</code> state. This can be dangerous if you start adding new commits because there will be no way to get back to them after you switch to another branch. For this reason, you should always create a new branch before adding commits to a detached <code>HEAD</code>.</p><h3 id="Undo-Public-Commits-with-Revert"><a href="#Undo-Public-Commits-with-Revert" class="headerlink" title="Undo Public Commits with Revert"></a>Undo Public Commits with Revert</h3><p>Reverting undoes a commit by creating a new commit. This is a safe way to undo changes, as it has no chance of re-writing the commit history. For example, the following command will figure out the changes contained in the 2nd to last commit, create a new commit undoing those changes, and tack the new commit onto the existing project.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout hotfix git revert HEAD~2<br></code></pre></td></tr></table></figure><p>This can be visualized as the following:</p><p><img src="https://wac-cdn.atlassian.com/dam/jcr:f02c67ca-d7b8-47f8-98f8-e0017dc9f7c5/08-09%20Undo%20public%20commits.svg?cdnVersion=116" alt="Reverting the 2nd to last commit"></p><p>Contrast this with <code>git reset</code>, which <em>does</em> alter the existing commit history. For this reason, <code>git revert</code> should be used to undo changes on a public branch, and <code>git reset</code> should be reserved for undoing changes on a private branch.</p><p>You can also think of <code>git revert</code> as a tool for undoing _committed_changes, while <code>git reset HEAD</code> is for undoing _uncommitted_changes.</p><p>Like <code>git checkout</code>, <code>git revert</code> has the potential to overwrite files in the working directory, so it will ask you to commit or <a href="https://www.atlassian.com/git/tutorials/saving-changes/git-stash">stash changes</a> that would be lost during the revert operation.</p><h2 id="File-level-Operations"><a href="#File-level-Operations" class="headerlink" title="File-level Operations"></a>File-level Operations</h2><p>The <code>git reset</code> and <code>git checkout</code> commands also accept an optional file path as a parameter. This dramatically alters their behavior. Instead of operating on entire snapshots, this forces them to limit their operations to a single file.</p><h3 id="Git-Reset-A-Specific-File"><a href="#Git-Reset-A-Specific-File" class="headerlink" title="Git Reset A Specific File"></a>Git Reset A Specific File</h3><p>When invoked with a file path, <code>git reset</code> updates the <em>staged snapshot</em> to match the version from the specified commit. For example, this command will fetch the version of <code>foo.py</code> in the 2nd-to-last commit and stage it for the next commit:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git reset HEAD~2 foo.py<br></code></pre></td></tr></table></figure><p>As with the commit-level version of <code>git reset</code>, this is more commonly used with <code>HEAD</code> rather than an arbitrary commit. Running <code>git reset HEAD foo.py</code> will unstage <code>foo.py</code>. The changes it contains will still be present in the working directory.</p><p><img src="https://wac-cdn.atlassian.com/dam/jcr:1a010f5a-c90d-49ee-a0e6-31054433e2d4/07.svg?cdnVersion=116" alt="Moving a file from the commit history into the staged snapshot"></p><p>The <code>--soft</code>, <code>--mixed</code>, and <code>--hard</code> flags do not have any effect on the file-level version of <code>git reset</code>, as the staged snapshot is <em>always</em> updated, and the working directory is <em>never</em> updated.</p><h3 id="Git-Checkout-File"><a href="#Git-Checkout-File" class="headerlink" title="Git Checkout File"></a>Git Checkout File</h3><p>Checking out a file is similar to using <code>git reset</code> with a file path, except it updates the <em>working directory</em> instead of the stage. Unlike the commit-level version of this command, this does not move the <code>HEAD</code> reference, which means that you wonâ€™t switch branches.</p><p><img src="https://wac-cdn.atlassian.com/dam/jcr:cc252fc0-fc76-4740-8458-9c0d7af94bca/08.svg?cdnVersion=116" alt="Moving a file from the commit history into the working directory"></p><p>For example, the following command makes <code>foo.py</code> in the working directory match the one from the 2nd-to-last commit:<br><strong>ï¼ˆè¦å°†ç‰¹å®šçš„æ–‡ä»¶è€Œä¸æ˜¯æ‰€æœ‰æ–‡ä»¶é€€å›æŸä¸ªç‰ˆæœ¬æ—¶ï¼‰</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout HEAD~2 foo.py<br></code></pre></td></tr></table></figure><p>Just like the commit-level invocation of <code>git checkout</code>, this can be used to inspect old versions of a projectâ€”but the scope is limited to the specified file.</p><p>If you stage and commit the checked-out file, this has the effect of â€œrevertingâ€ to the old version of that file. Note that this removes <em>all</em> of the subsequent changes to the file, whereas the <code>git revert</code> command undoes only the changes introduced by the specified commit.</p><p>Like <code>git reset</code>, this is commonly used with <code>HEAD</code> as the commit reference. For instance, <code>git checkout HEAD foo.py</code> has the effect of discarding unstaged changes to <code>foo.py</code>. This is similar behavior to <code>git reset HEAD --hard</code>, but it operates only on the specified file.</p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>You should now have all the tools you could ever need to undo changes in a Git repository. The <code>[git reset](https://www.atlassian.com/git/tutorials/undoing-changes/git-reset)</code>, <code>[git checkout](https://www.atlassian.com/git/tutorials/using-branches/git-checkout)</code>, and <code>[git revert](https://www.atlassian.com/git/tutorials/undoing-changes/git-revert)</code>commands can be confusing, but when you think about their effects on the working directory, staged snapshot, and commit history, it should be easier to discern which command fits the development task at hand.</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Forking Workflow</title>
    <link href="/2022/04/05/Git/forking%20workflow/"/>
    <url>/2022/04/05/Git/forking%20workflow/</url>
    
    <content type="html"><![CDATA[<h1 id="Forking-Workflow"><a href="#Forking-Workflow" class="headerlink" title="Forking Workflow"></a>Forking Workflow</h1><p>The Forking Workflow is fundamentally different than other popular Git workflows. Instead of using a single server-side repository to act as the â€œcentralâ€ codebase, it gives every developer their own server-side repository. This means that each contributor has not one, but two Git repositories: a private local one and a public server-side one. The Forking Workflow is most often seen in public open source projects.</p><p>The main advantage of the Forking Workflow is that contributions can be integrated without the need for everybody to push to a single central repository. Developers push to their own server-side repositories, and only the project maintainer can push to the official repository. This allows the maintainer to accept commits from any developer without giving them write access to the official codebase.</p><p>The Forking Workflow typically follows a branching model based on the <a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow">Gitflow Workflow</a>. This means that complete feature branches will be purposed for merge into the original project maintainerâ€™s repository. The result is a distributed workflow that provides a flexible way for large, organic teams (including untrusted third-parties) to collaborate securely. This also makes it an ideal workflow for open source projects.  </p><h2 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works"></a>How it works</h2><p>As in the other <a href="https://www.atlassian.com/git/tutorials/comparing-workflows">Git workflows</a>, the Forking Workflow begins with an official public repository stored on a server. But when a new developer wants to start working on the project, they do not directly clone the official repository.</p><p>Instead, they fork the official repository to create a copy of it on the server. This new copy serves as their personal public repositoryâ€”no other developers are allowed to push to it, but they can pull changes from it (weâ€™ll see why this is important in a moment). After they have created their server-side copy, the developer performs a <code>[git clone](https://www.atlassian.com/git/tutorials/setting-up-a-repository/git-clone)</code> to get a copy of it onto their local machine. This serves as their private development environment, just like in the other workflows.</p><p>When theyâ€™re ready to publish a local commit, they push the commit to their own public repositoryâ€”not the official one. Then, they file a pull request with the main repository, which lets the project maintainer know that an update is ready to be integrated. The pull request also serves as a convenient discussion thread if there are issues with the contributed code. The following is a step-by-step example of this workflow.</p><ol><li>A developer â€˜forksâ€™ an â€˜officialâ€™ server-side repository. This creates their own server-side copy.</li><li>The new server-side copy is cloned to their local system.</li><li>A Git remote path for the â€˜officialâ€™ repository is added to the local clone.</li><li>A new local feature branch is created.</li><li>The developer makes changes on the new branch.</li><li>New commits are created for the changes.</li><li>The branch gets pushed to the developerâ€™s own server-side copy.</li><li>The developer opens a pull request from the new branch to the â€˜officialâ€™ repository.</li><li>The pull request gets approved for merge and is merged into the original server-side repository</li></ol><p>To integrate the feature into the official codebase, the maintainer pulls the contributorâ€™s changes into their local repository, checks to make sure it doesnâ€™t break the project, merges it into their local <code>main</code> branch, then pushes the <code>main</code> branch to the official repository on the server. The contribution is now part of the project, and other developers should pull from the official repository to synchronize their local repositories.</p><p>Itâ€™s important to understand that the notion of an â€œofficialâ€ repository in the Forking Workflow is merely a convention. In fact, the only thing that makes the official repository so official is that itâ€™s the public repository of the project maintainer.</p><h2 id="Forking-vs-cloning"><a href="#Forking-vs-cloning" class="headerlink" title="Forking vs cloning"></a>Forking vs cloning</h2><p>Itâ€™s important to note that â€œforkedâ€ repositories and â€œforkingâ€ are not special operations. Forked repositories are created using the standard <code>[git clone](https://www.atlassian.com/git/tutorials/setting-up-a-repository/git-clone)</code> command. Forked repositories are generally â€œserver-side clonesâ€ and usually managed and hosted by a 3rd party Git service like <a href="https://bitbucket.org/product">Bitbucket</a>. There is no unique Git command to create forked repositories. A clone operation is essentially a copy of a repository and its history. </p><h2 id="Branching-in-the-Forking-Workflow"><a href="#Branching-in-the-Forking-Workflow" class="headerlink" title="Branching in the Forking Workflow"></a>Branching in the Forking Workflow</h2><p>All of these personal public repositories are really just a convenient way to share branches with other developers. Everybody should still be using branches to isolate individual features, just like in the <a href="https://www.atlassian.com/git/tutorials/comparing-workflows/feature-branch-workflow">Feature Branch Workflow</a> and the <a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow">Gitflow Workflow.</a> The only difference is how those branches get shared. In the Forking Workflow, they are pulled into another developerâ€™s local repository, while in the Feature Branch and Gitflow Workflows they are pushed to the official repository.</p><h2 id="Fork-a-repository"><a href="#Fork-a-repository" class="headerlink" title="Fork a repository"></a>Fork a repository</h2><p><img src="https://wac-cdn.atlassian.com/dam/jcr:642c56e3-ddc6-43ff-ab86-c5cd845afd05/03.svg?cdnVersion=116" alt="git fork workflow - fork a repositiory"></p><p>All new developers to a Forking Workflow project need to fork the official repository. As previously stated, forking is just a standard <code>git clone</code> operation. Itâ€™s possible to do this by SSHâ€™ing into the server and running <code>git clone</code> to copy it to another location on the server. Popular Git hosting services like Bitbucket, offer repo forking features that automate this step.</p><h2 id="Clone-your-fork"><a href="#Clone-your-fork" class="headerlink" title="Clone your fork"></a>Clone your fork</h2><p>Next each developer needs to clone their own public forked repository. They can do this with the familiar <code>git clone</code>command.</p><p>Assuming the use of Bitbucket to host these repositories, developers on a project should have their own Bitbucket account and they should clone their forked copy of the repository with:</p><figure class="highlight sh"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs sh">git <span class="hljs-built_in">clone</span> https://user@bitbucket.org/user/repo.git<br></code></pre></td></tr></table></figure><h2 id="Adding-a-remote"><a href="#Adding-a-remote" class="headerlink" title="Adding a remote"></a>Adding a remote</h2><p>Whereas other Git workflows use a single origin remote that points to the central repository, the Forking Workflow requires two remotesâ€”one for the official repository, and one for the developerâ€™s personal server-side repository. While you can call these remotes anything you want, a common convention is to use origin as the remote for your forked repository (this will be created automatically when you run <code>git clone</code>) and upstream for the official repository.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git remote add upstream https://bitbucket.org/maintainer/repo<br></code></pre></td></tr></table></figure><p>Youâ€™ll need to create the upstream remote yourself using the above command. This will let you easily keep your local repository up-to-date as the official project progresses. Note that if your upstream repository has authentication enabled (i.e., itâ€™s not open source), youâ€™ll need to supply a username, like so:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git remote add upstream https://user@bitbucket.org/maintainer/repo.git<br></code></pre></td></tr></table></figure><p>This requires users to supply a valid password before cloning or pulling from the official codebase.</p><h2 id="Working-in-a-branch-making-amp-pushing-changes"><a href="#Working-in-a-branch-making-amp-pushing-changes" class="headerlink" title="Working in a branch: making &amp; pushing changes"></a>Working in a branch: making &amp; pushing changes</h2><p>In the developerâ€™s local copy of the forked repository they can edit code, commit changes, and create branches just like in other Git workflows:</p><p> <code>git checkout -b some-feature # Edit some code git commit -a -m &quot;Add first draft of some feature&quot;</code></p><p>All of their changes will be entirely private until they push it to their public repository. And, if the official project has moved forward, they can access new commits with <code>git pull</code>:</p><p> <code>git pull upstream main</code></p><p>Since developers should be working in a dedicated feature branch, this should generally result in a fast-forward merge.</p><h2 id="Making-a-Pull-Request"><a href="#Making-a-Pull-Request" class="headerlink" title="Making a Pull Request"></a>Making a Pull Request</h2><p><img src="https://wac-cdn.atlassian.com/dam/jcr:0de71551-5c08-4fc4-ab6d-dc8a51bfcc5a/05.svg?cdnVersion=116" alt="Git Fork Workflow - Making a pull request"></p><p>Once a developer is ready to share their new feature, they need to do two things. First, they have to make their contribution accessible to other developers by pushing it to their public repository. Their origin remote should already be set up, so all they should have to do is the following:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git push origin feature-branch<br></code></pre></td></tr></table></figure><p>This diverges from the other workflows in that the origin remote points to the developerâ€™s personal server-side repository, not the main codebase.</p><p>Second, they need to notify the project maintainer that they want to merge their feature into the official codebase. Bitbucket provides a â€œpull requestâ€ button that leads to a form asking you to specify which branch you want to merge into the official repository. Typically, youâ€™ll want to integrate your <code>feature</code> branch into the upstream remoteâ€™s <code>main</code> branch.</p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>To recap, the Forking Workflow is commonly used in public open-source projects. Forking is a <code>git clone</code> operation executed on a server copy of a projects repo. A Forking Workflow is often used in conjunction with a Git hosting service like Bitbucket. A high-level example of a Forking Workflow is:</p><ol><li>You want to contribute to an open source library hosted at bitbucket.org&#x2F;userA&#x2F;open-project</li><li>Using Bitbucket you create a fork of the repo to bitbucket.org&#x2F;YourName&#x2F;open-project</li><li>On your local system you execute <code>git clone</code> on <a href="https://bitbucket.org/YourName/open-project">https://bitbucket.org/YourName/open-project</a> to get a local copy of the repo</li><li>You create a new <code>feature</code> branch in your local repo</li><li>Work is done to complete the new feature and <code>git commit</code>is executed to save the changes</li><li>You then push the new <code>feature</code> branch to your remote forked repo</li><li>Using Bitbucket you open up a pull request for the new branch against the original repo at bitbucket.org&#x2F;userA&#x2F;open-project</li></ol><p>The Forking Workflow helps a maintainer of a project open up the repository to contributions from any developer without having to manually manage authorization settings for each individual contributor. This gives the maintainer more of a â€œpullâ€ style workflow. Most commonly used in open-source projects, the Forking Workflow can also be applied to private business workflows to give more authoritative control over what is merged into a release. This can be useful in teams that have Deploy Managers or strict release cycles.</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gitflow Workflow</title>
    <link href="/2022/04/05/Git/gitflow%20workflow/"/>
    <url>/2022/04/05/Git/gitflow%20workflow/</url>
    
    <content type="html"><![CDATA[<h1 id="Gitflow-Workflow"><a href="#Gitflow-Workflow" class="headerlink" title="Gitflow Workflow"></a>Gitflow Workflow</h1><p>Gitflow is a legacy Git workflow that was originally a disruptive and novel strategy for managing Git branches. Gitflow has fallen in popularity in favor of <a href="https://www.atlassian.com/continuous-delivery/continuous-integration/trunk-based-development">trunk-based workflows</a>, which are now considered best practices for modern continuous software development and <a href="https://www.atlassian.com/devops/what-is-devops">DevOps</a> practices. Gitflow also can be challenging to use with <a href="https://www.atlassian.com/continuous-delivery">CI&#x2F;CD</a>. This post details Gitflow for historical purposes.</p><h2 id="What-is-Gitflow"><a href="#What-is-Gitflow" class="headerlink" title="What is Gitflow?"></a>What is Gitflow?</h2><p>Giflow is an alternative Git branching model that involves the use of feature branches and multiple primary branches. It was first published and made popular by <a href="http://nvie.com/posts/a-successful-git-branching-model/">Vincent Driessen at nvie</a>. Compared to trunk-based development, Giflow has numerous, longer-lived branches and larger commits. Under this model, developers create a feature branch and delay merging it to the main trunk branch until the feature is complete. These long-lived feature branches require more collaboration to merge and have a higher risk of deviating from the trunk branch. They can also introduce conflicting updates.</p><p>Gitflow can be used for projects that have a scheduled release cycle and for the <a href="https://www.atlassian.com/devops/what-is-devops/devops-best-practices">DevOps best practice</a> of <a href="https://www.atlassian.com/continuous-delivery">continuous delivery</a>. This workflow doesnâ€™t add any new concepts or commands beyond whatâ€™s required for the <a href="https://www.atlassian.com/git/tutorials/comparing-workflows/feature-branch-workflow">Feature Branch Workflow</a>. Instead, it assigns very specific roles to different branches and defines how and when they should interact. In addition to <code>feature</code> branches, it uses individual branches for preparing, maintaining, and recording releases. Of course, you also get to leverage all the benefits of the Feature Branch Workflow: pull requests, isolated experiments, and more efficient collaboration.</p><h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><p>Gitflow is really just an abstract idea of a Git workflow. This means it dictates what kind of branches to set up and how to merge them together. We will touch on the purposes of the branches below. The git-flow toolset is an actual command line tool that has an installation process. The installation process for git-flow is straightforward. Packages for git-flow are available on multiple operating systems. On OSX systems, you can execute <code>brew install git-flow</code>. On windows you will need to <a href="https://git-scm.com/download/win">download and install git-flow</a>. After installing git-flow you can use it in your project by executing <code>git flow init</code>. Git-flow is a wrapper around Git. The <code>git flow init</code> command is an extension of the default <code>[git init](https://www.atlassian.com/git/tutorials/setting-up-a-repository/git-init)</code> command and doesnâ€™t change anything in your repository other than creating branches for you.</p><h2 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works"></a>How it works</h2><p><img src="https://wac-cdn.atlassian.com/dam/jcr:a13c18d6-94f3-4fc4-84fb-2b8f1b2fd339/01%20How%20it%20works.svg?cdnVersion=116" alt="Git flow workflow - Historical Branches"></p><h3 id="Develop-and-main-branches"><a href="#Develop-and-main-branches" class="headerlink" title="Develop and main branches"></a>Develop and main branches</h3><p>Instead of a single <code>main</code> branch, this workflow uses two branches to record the history of the project. The <code>main</code> branch stores the official release history, and the <code>develop</code> branch serves as an integration branch for features. Itâ€™s also convenient to tag all commits in the <code>main</code> branch with a version number.</p><p>The first step is to complement the default <code>main</code> with a <code>develop</code>branch. A simple way to do this is for one developer to create an empty <code>develop</code> branch locally and push it to the server:</p><figure class="highlight shell"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs shell">git branch develop<br>git push -u origin develop<br></code></pre></td></tr></table></figure><p>This branch will contain the complete history of the project, whereas <code>main</code> will contain an abridged version. Other developers should now clone the central repository and create a tracking branch for <code>develop.</code></p><p>When using the git-flow extension library, executing <code>git flow init</code> on an existing repo will create the <code>develop</code>branch:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git flow init<br>Initialized empty Git repository <span class="hljs-keyword">in</span> ~/project/.git/No branches exist yet. Base branches must be created now.Branch name <span class="hljs-keyword">for</span> production releases: [main]Branch name <span class="hljs-keyword">for</span> <span class="hljs-string">&quot;next release&quot;</span> development: [develop]<br>How to name your supporting branch prefixes?<br>Feature branches? [feature/]<br>Release branches? [release/]<br>Hotfix branches? [hotfix/]<br>Support branches? [support/]<br>Version tag prefix? []<br><br>$ git branch* develop main<br></code></pre></td></tr></table></figure><h2 id="Feature-branches"><a href="#Feature-branches" class="headerlink" title="Feature branches"></a>Feature branches</h2><p>Each new feature should reside in its own branch, which can be <a href="https://www.atlassian.com/git/tutorials/syncing/git-push">pushed to the central repository</a> for backup&#x2F;collaboration. But, instead of branching off of <code>main</code>, <code>feature</code> branches use <code>develop</code>as their parent branch. When a feature is complete, it gets <a href="https://www.atlassian.com/git/tutorials/using-branches/git-merge">merged back into develop</a>. Features should never interact directly with <code>main</code>.</p><p><img src="https://wac-cdn.atlassian.com/dam/jcr:34c86360-8dea-4be4-92f7-6597d4d5bfae/02%20Feature%20branches.svg?cdnVersion=116" alt="Git flow workflow - Feature Branches"></p><p>Note that <code>feature</code> branches combined with the <code>develop</code> branch is, for all intents and purposes, the Feature Branch Workflow. But, the Gitflow workflow doesnâ€™t stop there.</p><p><code>Feature</code> branches are generally created off to the latest <code>develop</code>branch.</p><h3 id="Creating-a-feature-branch"><a href="#Creating-a-feature-branch" class="headerlink" title="Creating a feature branch"></a>Creating a feature branch</h3><p>Without the git-flow extensions:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout develop<br>git checkout -b feature_branch<br></code></pre></td></tr></table></figure><p>When using the git-flow extension:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git flow feature start feature_branch<br></code></pre></td></tr></table></figure><p>Continue your work and use Git like you normally would.</p><h3 id="Finishing-a-feature-branch"><a href="#Finishing-a-feature-branch" class="headerlink" title="Finishing a feature branch"></a>Finishing a feature branch</h3><p>When youâ€™re done with the development work on the feature, the next step is to merge the <code>feature_branch</code> into <code>develop</code>.</p><p>Without the git-flow extensions:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">git checkout develop<br>git merge feature_branch<br></code></pre></td></tr></table></figure><p>Using the git-flow extensions:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git flow feature finish feature_branch<br></code></pre></td></tr></table></figure><h2 id="Release-branches"><a href="#Release-branches" class="headerlink" title="Release branches"></a>Release branches</h2><p><img src="https://wac-cdn.atlassian.com/dam/jcr:8f00f1a4-ef2d-498a-a2c6-8020bb97902f/03%20Release%20branches.svg?cdnVersion=116" alt="Git Flow Workflow - Release Branches"></p><p>Once <code>develop</code> has acquired enough features for a release (or a predetermined release date is approaching), you fork a <code>release</code>branch off of <code>develop</code>. Creating this branch starts the next release cycle, so no new features can be added after this pointâ€”only bug fixes, documentation generation, and other release-oriented tasks should go in this branch. Once itâ€™s ready to ship, the <code>release</code> branch gets merged into <code>main</code> and tagged with a version number. In addition, it should be merged back into <code>develop</code>, which may have progressed since the release was initiated.</p><p>Using a dedicated branch to prepare releases makes it possible for one team to polish the current release while another team continues working on features for the next release. It also creates well-defined phases of development (e.g., itâ€™s easy to say, â€œThis week weâ€™re preparing for version 4.0,â€ and to actually see it in the structure of the repository).</p><p>Making <code>release</code> branches is another straightforward branching operation. Like <code>feature</code> branches, <code>release</code> branches are based on the <code>develop</code> branch. A new <code>release</code> branch can be created using the following methods.</p><p>Without the git-flow extensions:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout develop<br>git checkout -b release/0.1.0<br></code></pre></td></tr></table></figure><p>When using the git-flow extensions:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git flow release start 0.1.0<br>Switched to a new branch <span class="hljs-string">&#x27;release/0.1.0&#x27;</span><br></code></pre></td></tr></table></figure><p>Once the release is ready to ship, it will get merged it into <code>main</code> and <code>develop</code>, then the <code>release</code> branch will be deleted. Itâ€™s important to merge back into <code>develop</code> because critical updates may have been added to the <code>release</code> branch and they need to be accessible to new features. If your organization stresses code review, this would be an ideal place for a pull request.</p><p>To finish a <code>release</code> branch, use the following methods:</p><p>Without the git-flow extensions:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout main<br>git merge release/0.1.0<br></code></pre></td></tr></table></figure><p>Or with the git-flow extension:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git flow release finish <span class="hljs-string">&#x27;0.1.0&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="Hotfix-branches"><a href="#Hotfix-branches" class="headerlink" title="Hotfix branches"></a>Hotfix branches</h2><p><img src="https://wac-cdn.atlassian.com/dam/jcr:cc0b526e-adb7-4d45-874e-9bcea9898b4a/04%20Hotfix%20branches.svg?cdnVersion=116" alt="Git flow workflow - Hotfix Branches"></p><p>Maintenance or <code>â€œhotfixâ€</code> branches are used to quickly patch production releases. <code>Hotfix</code> branches are a lot like <code>release</code>branches and <code>feature</code> branches except theyâ€™re based on <code>main</code> instead of <code>develop</code>. This is the only branch that should fork directly off of <code>main</code>. As soon as the fix is complete, it should be merged into both <code>main</code> and <code>develop</code> (or the current <code>release</code>branch), and <code>main</code> should be tagged with an updated version number.</p><p>Having a dedicated line of development for bug fixes lets your team address issues without interrupting the rest of the workflow or waiting for the next release cycle. You can think of maintenance branches as ad hoc <code>release</code> branches that work directly with <code>main</code>. A <code>hotfix</code> branch can be created using the following methods:</p><p>Without the git-flow extensions:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout main<br>git checkout -b hotfix_branch<br></code></pre></td></tr></table></figure><p>When using the git-flow extensions: </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git flow hotfix start hotfix_branch<br></code></pre></td></tr></table></figure><p>Similar to finishing a <code>release</code> branch, a <code>hotfix</code> branch gets merged into both <code>main</code> and <code>develop.</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout main<br>git merge hotfix_branch<br>git checkout develop<br>git merge hotfix_branch<br>git branch -D hotfix_branch<br></code></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">$ git flow hotfix finish hotfix_branch<br></code></pre></td></tr></table></figure><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>A complete example demonstrating a Feature Branch Flow is as follows. Assuming we have a repo setup with a <code>main</code> branch.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout maingit checkout -b develop<br>git checkout -b feature_branch<br><span class="hljs-comment"># work happens on feature branch</span><br>git checkout develop<br>git merge feature_branch<br>git checkout main<br>git merge develop<br>git branch -d feature_branch<br></code></pre></td></tr></table></figure><p>In addition to the <code>feature</code> and <code>release</code> flow, a <code>hotfix</code> example is as follows:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">git checkout main<br>git checkout -b hotfix_branch<br><span class="hljs-comment"># work is done commits are added to the hotfix_branchgit checkout develop</span><br>git merge hotfix_branch<br>git checkout main<br>git merge hotfix_branch<br></code></pre></td></tr></table></figure><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Here we discussed the Gitflow Workflow. Gitflow is one of many styles of <a href="https://www.atlassian.com/git/tutorials/comparing-workflows">Git workflows</a> you and your team can utilize.</p><p>Some key takeaways to know about Gitflow are:</p><ul><li>The workflow is great for a release-based software workflow.</li><li>Gitflow offers a dedicated channel for hotfixes to production.</li></ul><p>The overall flow of Gitflow is:</p><ol><li>A <code>develop</code> branch is created from <code>main</code></li><li>A <code>release</code> branch is created from <code>develop</code></li><li><code>Feature</code> branches are created from <code>develop</code></li><li>When a <code>feature</code> is complete it is merged into the <code>develop</code> branch</li><li>When the <code>release</code> branch is done it is merged into <code>develop</code>and <code>main</code></li><li>If an issue in <code>main</code> is detected a <code>hotfix</code> branch is created from <code>main</code></li><li>Once the <code>hotfix</code> is complete it is merged to both <code>develop</code>and <code>main</code></li></ol>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åˆ‡æ¢Gitè´¦å·</title>
    <link href="/2022/04/05/Git/%E5%88%87%E6%8D%A2Git%E8%B4%A6%E5%8F%B7/"/>
    <url>/2022/04/05/Git/%E5%88%87%E6%8D%A2Git%E8%B4%A6%E5%8F%B7/</url>
    
    <content type="html"><![CDATA[<h2 id="å¼€å¯ssh-agentæœåŠ¡"><a href="#å¼€å¯ssh-agentæœåŠ¡" class="headerlink" title="å¼€å¯ssh-agentæœåŠ¡"></a>å¼€å¯ssh-agentæœåŠ¡</h2><figure class="highlight shell"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs shell">eval &quot;$(ssh-agent -s)&quot;<br></code></pre></td></tr></table></figure><h2 id="æŠŠåˆšåˆšç”Ÿæˆçš„ssh-keyåŠ å…¥åˆ°ssh-agentä¸­"><a href="#æŠŠåˆšåˆšç”Ÿæˆçš„ssh-keyåŠ å…¥åˆ°ssh-agentä¸­" class="headerlink" title="æŠŠåˆšåˆšç”Ÿæˆçš„ssh keyåŠ å…¥åˆ°ssh-agentä¸­"></a>æŠŠåˆšåˆšç”Ÿæˆçš„ssh keyåŠ å…¥åˆ°ssh-agentä¸­</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh-add ~/.ssh/id_rsa_zjm<br></code></pre></td></tr></table></figure><h2 id="æµ‹è¯•è´¦å·æ›´æ¢æ˜¯å¦æˆåŠŸ"><a href="#æµ‹è¯•è´¦å·æ›´æ¢æ˜¯å¦æˆåŠŸ" class="headerlink" title="æµ‹è¯•è´¦å·æ›´æ¢æ˜¯å¦æˆåŠŸ"></a>æµ‹è¯•è´¦å·æ›´æ¢æ˜¯å¦æˆåŠŸ</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh git@github.com<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>matplotlib</title>
    <link href="/2022/04/05/Python%E7%BB%98%E5%9B%BE/matplotlib/"/>
    <url>/2022/04/05/Python%E7%BB%98%E5%9B%BE/matplotlib/</url>
    
    <content type="html"><![CDATA[<h1 id="barç»˜å›¾å¹¶ä¸”åŠ ä¸Šæ•°å­—"><a href="#barç»˜å›¾å¹¶ä¸”åŠ ä¸Šæ•°å­—" class="headerlink" title="barç»˜å›¾å¹¶ä¸”åŠ ä¸Šæ•°å­—"></a>barç»˜å›¾å¹¶ä¸”åŠ ä¸Šæ•°å­—</h1><figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">plotBar</span>(<span class="hljs-params">name, y_label, title, file_name</span>):<br>data_group = data.groupby([name, <span class="hljs-string">&#x27;emd_lable2&#x27;</span>]).size().unstack(level=<span class="hljs-number">1</span>)<br>x = np.arange(<span class="hljs-built_in">len</span>(data_group.index))  <span class="hljs-comment"># the label locations</span><br>width = <span class="hljs-number">0.35</span>  <span class="hljs-comment"># the width of the bars</span><br><br>fig, ax = plt.subplots()<br>rects1 = ax.bar(x - width/<span class="hljs-number">2</span>, data_group[<span class="hljs-number">0</span>], width, label=<span class="hljs-string">&#x27;æœªä»˜è´¹&#x27;</span>)<br>rects2 = ax.bar(x + width/<span class="hljs-number">2</span>, data_group[<span class="hljs-number">1</span>], width, label=<span class="hljs-string">&#x27;ä»˜è´¹&#x27;</span>)<br><br><span class="hljs-comment"># Add some text for labels, title and custom x-axis tick labels, etc.</span><br>  <span class="hljs-comment"># y_labelæ­£å¸¸æƒ…å†µä¸‹éƒ½æ˜¯â€œäººæ•°â€</span><br>ax.set_ylabel(y_label)<br>ax.set_title(<span class="hljs-string">&quot;ä¸åŒ&#123;&#125;ä»˜è´¹æƒ…å†µ&quot;</span>.<span class="hljs-built_in">format</span>(title))<br>ax.set_xticks(x, data_group.index)<br><br>ax.bar_label(rects1, padding=<span class="hljs-number">3</span>)<br>ax.bar_label(rects2, padding=<span class="hljs-number">3</span>)<br><br>fig.tight_layout()<br><br><span class="hljs-comment"># æ˜¾ç¤ºlabel</span><br>plt.legend()<br><br>plt.show()<br>fig.savefig(file_name)<br></code></pre></td></tr></table></figure><h1 id="è·å–å½“å‰å›¾ç‰‡çš„ç”»å¸ƒå¹¶ä¸‹è½½åˆ°æœ¬åœ°"><a href="#è·å–å½“å‰å›¾ç‰‡çš„ç”»å¸ƒå¹¶ä¸‹è½½åˆ°æœ¬åœ°" class="headerlink" title="è·å–å½“å‰å›¾ç‰‡çš„ç”»å¸ƒå¹¶ä¸‹è½½åˆ°æœ¬åœ°"></a>è·å–å½“å‰å›¾ç‰‡çš„ç”»å¸ƒå¹¶ä¸‹è½½åˆ°æœ¬åœ°</h1><p>AxesSubplotå¦‚ä½•ä¿å­˜æˆå›¾ç‰‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">fig = AxesSubplot.get_figure()<br>fig.savefig(<span class="hljs-string">&quot;output.png&quot;</span>)<br></code></pre></td></tr></table></figure><h1 id="æ›´æ”¹å›¾ç‰‡çš„å¤§å°ä»¥åŠæ ¼å¼"><a href="#æ›´æ”¹å›¾ç‰‡çš„å¤§å°ä»¥åŠæ ¼å¼" class="headerlink" title="æ›´æ”¹å›¾ç‰‡çš„å¤§å°ä»¥åŠæ ¼å¼"></a>æ›´æ”¹å›¾ç‰‡çš„å¤§å°ä»¥åŠæ ¼å¼</h1><h2 id="æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•ï¼ˆå¼€å¤´ç»Ÿä¸€å¤„ç†ï¼‰"><a href="#æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•ï¼ˆå¼€å¤´ç»Ÿä¸€å¤„ç†ï¼‰" class="headerlink" title="æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•ï¼ˆå¼€å¤´ç»Ÿä¸€å¤„ç†ï¼‰"></a>æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•ï¼ˆå¼€å¤´ç»Ÿä¸€å¤„ç†ï¼‰</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><br><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>%matplotlib inline<br><span class="hljs-comment">#from matplotlib.font_manager import FontManager</span><br><br><span class="hljs-comment">#fm = FontManager()</span><br><span class="hljs-comment">#fonts = set(f.name for f in fm.ttflist)</span><br>config = &#123;<br>    <span class="hljs-string">&quot;font.family&quot;</span>: <span class="hljs-string">&#x27;serif&#x27;</span>,<br>    <span class="hljs-string">&quot;font.serif&quot;</span>: [<span class="hljs-string">&#x27;Songti SC&#x27;</span>],<br>    <span class="hljs-string">&quot;font.size&quot;</span>: <span class="hljs-number">18</span>,<br>    <span class="hljs-string">&quot;font.sans-serif&quot;</span>: [<span class="hljs-string">&#x27;&#x27;</span>],<br>    <span class="hljs-string">&quot;figure.figsize&quot;</span>: (<span class="hljs-number">16</span>,<span class="hljs-number">9</span>),<br>    <span class="hljs-string">&quot;mathtext.fontset&quot;</span>: <span class="hljs-string">&#x27;stix&#x27;</span>,<br>&#125;<br>plt.rcParams.update(config)<br></code></pre></td></tr></table></figure><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><ol><li>åˆå§‹åŒ–æœŸé—´åœ¨ <code>figure()</code> æ–¹æ³•ä¸­è®¾ç½® <code>figsize</code></li><li>è®¾ç½® <code>rcParams</code> æ¥æ›´æ”¹ Matplotlib ä¸­å›¾å½¢çš„å¤§å°</li><li><code>set_figheight()</code> <a href="https://www.delftstack.com/zh/howto/matplotlib/how-to-change-the-size-and-format-of-a-figure-in-matplotlib/#set_figheight-%E5%92%8C-set_figwidth-%E4%B8%80%E8%B5%B7%E8%AE%BE%E7%BD%AE-matplotlib-%E5%9B%BE%E5%BD%A2%E5%A4%A7%E5%B0%8F">å’Œ</a> <code>set_figwidth()</code> ä¸€èµ·è®¾ç½® Matplotlib å›¾å½¢å¤§å°</li><li><code>set_size_inches()</code> æ–¹æ³•æ¥æ›´æ”¹ Matplotlib å›¾å½¢å¤§å°</li><li>åœ¨ Matplotlib ä¸­æ›´æ”¹å›¾å½¢æ ¼å¼</li></ol><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>set_figheight()</code> å’Œ <code>set_figwidth()</code> å’Œ <code>set_size_inches()</code> æ–¹æ³•æ¥æ›´æ”¹ Matplotlib ä¸­çš„å›¾å½¢å¤§å°ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡åœ¨ <code>figure()</code> æ–¹æ³•å’Œ <code>rcParams</code> ä¸­è®¾ç½® <code>figsize</code> æ¥æ”¹å˜ Matplotlib ä¸­çš„å›¾å½¢å¤§å°ã€‚åŒæ ·ï¼Œè¦æ›´æ”¹å›¾å½¢æ ¼å¼ï¼Œæˆ‘ä»¬åªéœ€åœ¨ <code>savefig()</code> æ–¹æ³•ä¸­æ›´æ”¹å›¾åƒæ–‡ä»¶çš„æ‰©å±•åã€‚</p><h2 id="åˆå§‹åŒ–æœŸé—´åœ¨-figure-æ–¹æ³•ä¸­è®¾ç½®-figsize"><a href="#åˆå§‹åŒ–æœŸé—´åœ¨-figure-æ–¹æ³•ä¸­è®¾ç½®-figsize" class="headerlink" title="åˆå§‹åŒ–æœŸé—´åœ¨ figure() æ–¹æ³•ä¸­è®¾ç½® figsize"></a>åˆå§‹åŒ–æœŸé—´åœ¨ <code>figure()</code> æ–¹æ³•ä¸­è®¾ç½® <code>figsize</code></h2><p>æˆ‘ä»¬å¯ä»¥åœ¨åˆå§‹åŒ–æœŸé—´é€šè¿‡ <code>figure()</code> æ–¹æ³•è®¾ç½® <code>figsize</code> å‚æ•°çš„å€¼ï¼Œè¯¥å‚æ•°ä»¥è‹±å¯¸ä¸ºå•ä½æŒ‡å®šå›¾å½¢çš„å®½åº¦å’Œé«˜åº¦ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>x = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0.5</span>)<br>m = <span class="hljs-number">1</span><br>c = <span class="hljs-number">2</span><br>y = m*x + c<br><br>plt.figure(figsize=(<span class="hljs-number">6</span>,<span class="hljs-number">4</span>))<br>plt.plot(x, y)<br>plt.title(<span class="hljs-string">&quot;y=mx+c&quot;</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;x-axis&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;y-axis&#x27;</span>)<br><br>plt.show()<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><p><img src="https://www.delftstack.com/img/Matplotlib/set%20figsize%20using%20figsize%20parameter.png" alt="https://www.delftstack.com/img/Matplotlib/set figsize using figsize parameter.png"></p><p><code>figsize</code> å‚æ•°çš„é»˜è®¤å€¼ä¸º <code>[6.4ï¼Œ4.8]</code>ã€‚</p><h2 id="è®¾ç½®-rcParams-æ¥æ›´æ”¹-Matplotlib-ä¸­å›¾å½¢çš„å¤§å°"><a href="#è®¾ç½®-rcParams-æ¥æ›´æ”¹-Matplotlib-ä¸­å›¾å½¢çš„å¤§å°" class="headerlink" title="è®¾ç½® rcParams æ¥æ›´æ”¹ Matplotlib ä¸­å›¾å½¢çš„å¤§å°"></a>è®¾ç½® <code>rcParams</code> æ¥æ›´æ”¹ <code>Matplotlib</code> ä¸­å›¾å½¢çš„å¤§å°</h2><p>æˆ‘ä»¬å¯ä»¥æ›´æ”¹å­˜å‚¨åœ¨ <code>matplotlib.rcParams</code> å­—å…¸ä¸­çš„é»˜è®¤ <code>figure.figsize</code> å€¼ï¼Œä»¥æ›´æ”¹ Matplotlib ä¸­çš„å›¾å½¢å¤§å°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>x = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>,<span class="hljs-number">20</span>)<br>m = <span class="hljs-number">1</span><br>c = <span class="hljs-number">2</span><br>y = m*x + c<br><br>plt.rcParams[<span class="hljs-string">&quot;figure.figsize&quot;</span>] = (<span class="hljs-number">8</span>, <span class="hljs-number">6</span>)<br>plt.plot(x, y)<br>plt.title(<span class="hljs-string">&quot;y=mx+c&quot;</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;x-axis&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;y-axis&#x27;</span>)<br><br>plt.show()<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><p><img src="https://www.delftstack.com/img/Matplotlib/set%20figsize%20using%20rc%20parameter.png" alt="https://www.delftstack.com/img/Matplotlib/set figsize using rc parameter.png"></p><h2 id="set-figheight-å’Œ-set-figwidth-ä¸€èµ·è®¾ç½®-Matplotlib-å›¾å½¢å¤§å°"><a href="#set-figheight-å’Œ-set-figwidth-ä¸€èµ·è®¾ç½®-Matplotlib-å›¾å½¢å¤§å°" class="headerlink" title="set_figheight() å’Œ set_figwidth() ä¸€èµ·è®¾ç½® Matplotlib å›¾å½¢å¤§å°"></a><code>set_figheight()</code> å’Œ <code>set_figwidth()</code> ä¸€èµ·è®¾ç½® Matplotlib å›¾å½¢å¤§å°</h2><p>å¦‚æœå·²ç»åˆ›å»ºäº†å›¾å½¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>set_figheight()</code> å’Œ <code>set_figwidth()</code> æ–¹æ³•æ¥ç¡®å®šå›¾å½¢çš„å¤§å°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>x = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>,<span class="hljs-number">20</span>)<br>m = <span class="hljs-number">1</span><br>c = <span class="hljs-number">2</span><br>y = m*x + c<br><br>fig = plt.figure()<br>plt.plot(x, y)<br>plt.title(<span class="hljs-string">&quot;y=mx+c&quot;</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;x-axis&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;y-axis&#x27;</span>)<br>fig.set_figheight(<span class="hljs-number">6</span>)<br>fig.set_figwidth(<span class="hljs-number">8</span>)<br><br>plt.show()<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><p><img src="https://www.delftstack.com/img/Matplotlib/set%20figsize%20using%20set%20figsize%20using%20set_figheight%20and%20set_figwidth.png" alt="https://www.delftstack.com/img/Matplotlib/set figsize using set figsize using set_figheight and set_figwidth.png"></p><p>è¿™é‡Œï¼Œ<code>set_figheight()</code> æ–¹æ³•è®¾ç½®å›¾å½¢çš„é«˜åº¦ï¼Œè€Œ <code>set_figwidth()</code> æ–¹æ³•è®¾ç½®å›¾å½¢çš„å®½åº¦ã€‚</p><h2 id="set-size-inches-æ–¹æ³•æ¥æ›´æ”¹-Matplotlib-å›¾å½¢å¤§å°"><a href="#set-size-inches-æ–¹æ³•æ¥æ›´æ”¹-Matplotlib-å›¾å½¢å¤§å°" class="headerlink" title="set_size_inches() æ–¹æ³•æ¥æ›´æ”¹ Matplotlib å›¾å½¢å¤§å°"></a><code>set_size_inches()</code> æ–¹æ³•æ¥æ›´æ”¹ Matplotlib å›¾å½¢å¤§å°</h2><p>åˆ›å»ºå›¾å½¢åï¼Œæ­¤æ–¹æ³•è¿˜å¯ä»¥è®¾ç½®å›¾å½¢å¤§å°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>x = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>,<span class="hljs-number">20</span>)<br>m = <span class="hljs-number">1</span><br>c = <span class="hljs-number">2</span><br>y = m*x + c<br><br>fig = plt.figure()<br>plt.plot(x, y)<br>plt.title(<span class="hljs-string">&quot;y=mx+c&quot;</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;x-axis&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;y-axis&#x27;</span>)<br>fig.set_size_inches(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>)<br><br>plt.show()<br></code></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><p><img src="https://www.delftstack.com/img/Matplotlib/set%20figsize%20using%20set%20figsize%20using%20set_size_inches.png" alt="https://www.delftstack.com/img/Matplotlib/set figsize using set figsize using set_size_inches.png"></p><p>åœ¨è¿™é‡Œï¼Œä¼ é€’ç»™ <code>set_size_inches()</code> æ–¹æ³•çš„å‚æ•°åˆ†åˆ«è¡¨ç¤ºå›¾å½¢çš„å®½åº¦å’Œé«˜åº¦ï¼ˆä»¥è‹±å¯¸ä¸ºå•ä½ï¼‰ã€‚</p><h2 id="åœ¨-Matplotlib-ä¸­æ›´æ”¹å›¾å½¢æ ¼å¼"><a href="#åœ¨-Matplotlib-ä¸­æ›´æ”¹å›¾å½¢æ ¼å¼" class="headerlink" title="åœ¨ Matplotlib ä¸­æ›´æ”¹å›¾å½¢æ ¼å¼"></a>åœ¨ Matplotlib ä¸­æ›´æ”¹å›¾å½¢æ ¼å¼</h2><p>è¦æ›´æ”¹å›¾å½¢æ ¼å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>savefig()</code> æ–¹æ³•æ›´æ”¹å›¾åƒæ–‡ä»¶çš„æ‰©å±•åã€‚æˆ‘ä»¬å¯ä»¥å°†å›¾ä¿å­˜ä¸ºä¸åŒçš„æ ¼å¼ï¼Œä¾‹å¦‚ pngï¼Œjpgï¼Œsvgï¼Œpdf ç­‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>x = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>,<span class="hljs-number">20</span>)<br>m = <span class="hljs-number">1</span><br>c = <span class="hljs-number">2</span><br>y = m*x + c<br><br>fig = plt.figure()<br>plt.plot(x, y)<br>plt.title(<span class="hljs-string">&quot;y=mx+c&quot;</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;x-axis&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;y-axis&#x27;</span>)<br>fig.set_size_inches(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>)<br><br>plt.savefig(<span class="hljs-string">&quot;Figure saved in jpg format.jpg&quot;</span>)<br></code></pre></td></tr></table></figure><p>è¿™ä¼šå°†å›¾å½¢ä¿å­˜ä¸º jpg æ ¼å¼ã€‚</p><h1 id="Pythonç¼–å†™å‡½æ•°æ£€æŸ¥æ•°å€¼å‹ç‰¹å¾é¡¹å¼‚å¸¸çŠ¶æ€"><a href="#Pythonç¼–å†™å‡½æ•°æ£€æŸ¥æ•°å€¼å‹ç‰¹å¾é¡¹å¼‚å¸¸çŠ¶æ€" class="headerlink" title="Pythonç¼–å†™å‡½æ•°æ£€æŸ¥æ•°å€¼å‹ç‰¹å¾é¡¹å¼‚å¸¸çŠ¶æ€"></a>Pythonç¼–å†™å‡½æ•°æ£€æŸ¥æ•°å€¼å‹ç‰¹å¾é¡¹å¼‚å¸¸çŠ¶æ€</h1><h2 id="å¼•å…¥åŒ…"><a href="#å¼•å…¥åŒ…" class="headerlink" title="å¼•å…¥åŒ…"></a>å¼•å…¥åŒ…</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>%matplotlib inline<br><span class="hljs-comment">#from matplotlib.font_manager import FontManager</span><br><br><span class="hljs-comment">#fm = FontManager()</span><br><span class="hljs-comment">#fonts = set(f.name for f in fm.ttflist)</span><br>config = &#123;<br>    <span class="hljs-string">&quot;font.family&quot;</span>: <span class="hljs-string">&#x27;serif&#x27;</span>,<br>    <span class="hljs-string">&quot;font.serif&quot;</span>: [<span class="hljs-string">&#x27;Songti SC&#x27;</span>],<br>    <span class="hljs-string">&quot;font.size&quot;</span>: <span class="hljs-number">15</span>,<br>    <span class="hljs-string">&quot;font.sans-serif&quot;</span>: [<span class="hljs-string">&#x27;&#x27;</span>],<br>    <span class="hljs-string">&quot;figure.figsize&quot;</span>: (<span class="hljs-number">12</span>,<span class="hljs-number">7</span>),<br>    <span class="hljs-string">&quot;mathtext.fontset&quot;</span>: <span class="hljs-string">&#x27;stix&#x27;</span>,<br>&#125;<br>plt.rcParams.update(config)<br></code></pre></td></tr></table></figure><h2 id="ç¼–å†™å‡½æ•°"><a href="#ç¼–å†™å‡½æ•°" class="headerlink" title="ç¼–å†™å‡½æ•°"></a>ç¼–å†™å‡½æ•°</h2><p><strong>æ­¤å¤„è¿™ä¸ªdataæ˜¯ä¸ªDataframe</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">checkOut</span>(<span class="hljs-params">column_name</span>):<br>    <br>    ax1 = plt.subplot(<span class="hljs-number">221</span>)<br>    bp = ax1.boxplot(data[column_name])<br>    ax1.set_title(<span class="hljs-string">&#x27;åˆ é™¤å¼‚å¸¸å€¼å‰&#x27;</span>)<br>    lower_whisker = [item.get_ydata()[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> bp[<span class="hljs-string">&#x27;whiskers&#x27;</span>]][<span class="hljs-number">0</span>]<br>    upper_whisker = [item.get_ydata()[<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> bp[<span class="hljs-string">&#x27;whiskers&#x27;</span>]][<span class="hljs-number">1</span>]<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä¸Šè¾¹ç¼˜ï¼š&quot;</span>, upper_whisker)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä¸‹è¾¹ç¼˜ï¼š&quot;</span>, lower_whisker)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;éå¼‚å¸¸èŒƒå›´ï¼š&quot;</span>, [lower_whisker,upper_whisker])<br>    <br>    <span class="hljs-comment">##### å¯»æ‰¾å¼‚å¸¸å€¼ #####</span><br>    outlier = data[(data[column_name] &gt; upper_whisker) | (data[column_name] &lt; lower_whisker)][column_name]<br>    <span class="hljs-comment">##### åˆ é™¤å¼‚å¸¸å€¼ ######</span><br>    not_outlier = data[(data[column_name] &lt;= upper_whisker) &amp; (data[column_name] &gt;= lower_whisker)][column_name]<br>    ax2 = plt.subplot(<span class="hljs-number">222</span>)<br>    <span class="hljs-comment">##### é‡æ–°æ£€æŸ¥æ˜¯å¦è¿˜æœ‰å¼‚å¸¸å€¼ #####</span><br>    ax2.boxplot(not_outlier)<br>    ax2.set_title(<span class="hljs-string">&#x27;åˆ é™¤å¼‚å¸¸å€¼å&#x27;</span>)<br>    <br>    ax3 = plt.subplot(<span class="hljs-number">212</span>)<br>    ax3 = sns.distplot(not_outlier, bins=<span class="hljs-number">100</span>, color=<span class="hljs-string">&#x27;r&#x27;</span>)<br>    <br>    plt.savefig(<span class="hljs-string">&#x27;&#123;&#125;å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†&#x27;</span>.<span class="hljs-built_in">format</span>(column_name)) <span class="hljs-comment"># ä¿å­˜å›¾ç‰‡ æ³¨æ„ä¸€å®šè¦å…ˆè¿è¡Œè¿™ä¸€è¡Œåœ¨åšplt.showç”»å¸ƒæ˜¾ç¤ºï¼Œå¦åˆ™ç”»å¸ƒä¼šæ˜¯ç©ºçš„</span><br>    plt.show()<br></code></pre></td></tr></table></figure><h2 id="æ•ˆæœå¦‚ä¸‹"><a href="#æ•ˆæœå¦‚ä¸‹" class="headerlink" title="æ•ˆæœå¦‚ä¸‹"></a>æ•ˆæœå¦‚ä¸‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">checkOut(<span class="hljs-string">&#x27;pax_fcny&#x27;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/pax_fcny%E5%BC%82%E5%B8%B8%E5%80%BC%E6%A3%80%E6%B5%8B%E4%BB%A5%E5%8F%8A%E5%A4%84%E7%90%86.png" alt="pax_fcnyå¼‚å¸¸å€¼æ£€æµ‹ä»¥åŠå¤„ç†"></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>matplotlib</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¾®ä¿¡å°ç¨‹åº</title>
    <link href="/2022/04/05/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    <url>/2022/04/05/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºä¹‹é¡µé¢æ‹¦æˆªå™¨"><a href="#å¾®ä¿¡å°ç¨‹åºä¹‹é¡µé¢æ‹¦æˆªå™¨" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºä¹‹é¡µé¢æ‹¦æˆªå™¨"></a>å¾®ä¿¡å°ç¨‹åºä¹‹é¡µé¢æ‹¦æˆªå™¨</h1><h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h3><ol><li>å°ç¨‹åºæœ‰52ä¸ªé¡µé¢ï¼Œå…¶ä¸­13ä¸ªé¡µé¢æ— éœ€ä»»ä½•èº«ä»½ï¼Œå¦å¤–39ä¸ªé¡µé¢éœ€è¦ç³»ç»Ÿè§’è‰²ã€‚å¯¹äºè¿™39ä¸ªé¡µé¢ï¼Œå¦‚æœå¾®ä¿¡ç”¨æˆ·æ²¡æœ‰ç³»ç»Ÿè§’è‰²ï¼Œåˆ™è·³è½¬åˆ°ç™»å½•é¡µã€‚</li><li>æ˜¯å¦æœ‰ç³»ç»Ÿè§’è‰²ä¿¡æ¯éœ€è¦é€šè¿‡å¼‚æ­¥è¯·æ±‚æ¥è·å–ã€‚</li></ol><h3 id="éœ€æ±‚åˆ†æ-amp-å®ç°"><a href="#éœ€æ±‚åˆ†æ-amp-å®ç°" class="headerlink" title="éœ€æ±‚åˆ†æ&amp;å®ç°"></a>éœ€æ±‚åˆ†æ&amp;å®ç°</h3><p>å¯¹éœ€æ±‚è¿›è¡ŒæŠ½è±¡ï¼Œå…¶å®è¦çš„å°±æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå¯¹å°ç¨‹åºé¡µé¢çš„è®¿é—®è¿›è¡Œè¿‡æ»¤ï¼Œç¬¦åˆæ¡ä»¶çš„é€šè¿‡ï¼Œä¸ç¬¦åˆæ¡ä»¶è¿›è¡Œå…¶ä»–å¤„ç†ã€‚</p><p>ä½¿ç”¨è¿‡phpçš„laravelæ¡†æ¶çš„ç«¥é‹ï¼Œè‚¯å®šä¸€ä¸‹å­å°±è”æƒ³åˆ°äº†laravelæ¡†æ¶çš„httpä¸­é—´ä»¶:<br><code>HTTP ä¸­é—´ä»¶æä¾›ä¸€ä¸ªæ–¹ä¾¿çš„æœºåˆ¶æ¥è¿‡æ»¤è¿›å…¥åº”ç”¨ç¨‹åºçš„ HTTP è¯·æ±‚ï¼Œä¾‹å¦‚ï¼ŒLaravel é»˜è®¤åŒ…å«äº†ä¸€ä¸ªä¸­é—´ä»¶æ¥æ£€éªŒç”¨æˆ·èº«ä»½éªŒè¯ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ç»è¿‡èº«ä»½éªŒè¯ï¼Œä¸­é—´ä»¶ä¼šå°†ç”¨æˆ·å¯¼å‘ç™»å½•é¡µé¢ï¼Œç„¶è€Œï¼Œå¦‚æœç”¨æˆ·é€šè¿‡èº«ä»½éªŒè¯ï¼Œä¸­é—´ä»¶å°†ä¼šå…è®¸è¿™ä¸ªè¯·æ±‚è¿›ä¸€æ­¥ç»§ç»­å‰è¿›ã€‚å½“ç„¶ï¼Œé™¤äº†èº«ä»½éªŒè¯ä¹‹å¤–ï¼Œä¸­é—´ä»¶ä¹Ÿå¯ä»¥è¢«ç”¨æ¥æ‰§è¡Œå„å¼å„æ ·çš„ä»»åŠ¡ï¼ŒCORS ä¸­é—´ä»¶è´Ÿè´£æ›¿æ‰€æœ‰å³å°†ç¦»å¼€ç¨‹åºçš„å“åº”åŠ å…¥é€‚å½“çš„å“åº”å¤´ï¼Œä¸€ä¸ªæ—¥å¿—ä¸­é—´ä»¶å¯ä»¥è®°å½•æ‰€æœ‰ä¼ å…¥åº”ç”¨ç¨‹åºçš„è¯·æ±‚ã€‚</code></p><p>ä»¤äººå¿§æ¡‘çš„æ˜¯ï¼Œå¾®ä¿¡å°ç¨‹åºå¹¶æ²¡æœ‰æä¾›é’ˆå¯¹Pageå®ä¾‹çš„ä¸­é—´ä»¶æœºåˆ¶ã€‚æ‰€ä»¥åªèƒ½ä»Pageå®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸå¤„ä¸‹æ‰‹ã€‚</p><p><img src="https://segmentfault.com/img/remote/1460000011044376" alt="mina-lifecycle.png" title="mina-lifecycle.png"></p><p>å¯¹äºonLoad,ä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼›å¯¹äºonShow,æ¯æ¬¡æ‰“å¼€é¡µé¢(æ¯”å¦‚å°ç¨‹åºä»åå°è½¬åˆ°å‰å°)éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ã€‚</p><p>åœ¨onLoadæˆ–è€…onShowé’©å­å‡½æ•°é‡Œï¼Œå¯¹ç”¨æˆ·èº«ä»½è¿›è¡Œæ ¡éªŒï¼Œé€šè¿‡ååˆ™æ‹‰å–è¯¥é¡µé¢éœ€è¦çš„æ•°æ®ï¼Œå¦åˆ™è·³è½¬åˆ°ç™»å½•é¡µã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//orderDetail.js</span><br><span class="hljs-attr">onShow</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> that = <span class="hljs-variable language_">this</span>;<br>    <span class="hljs-comment">//èº«ä»½æ ¡éªŒ</span><br>    service.<span class="hljs-title function_">identityCheck</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          <span class="hljs-comment">//è·³è½¬åˆ°ç™»å½•é¡µ</span><br>          wx.<span class="hljs-title function_">redirectTo</span>(&#123;<br>            <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/pages/common/login/login&quot;</span><br>          &#125;);<br>        &#125;, <span class="hljs-function">() =&gt;</span> &#123;    <br>          <span class="hljs-comment">//è·å–é¡µé¢æ•°æ®ç­‰ç­‰ </span><br>          that.<span class="hljs-title function_">getDetail</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">orderId</span>);<br>          ...<br>        &#125;<br>   );<br>  &#125;,<br></code></pre></td></tr></table></figure><p>ä¸è¿‡ï¼Œæ¯ä¸ªé¡µé¢éƒ½è¦è¿™æ ·å†™ï¼Œé‡å¤ä»£ç å¥½å¤šå•Šï¼Œä¾µå…¥æ€§ä¹Ÿå¼ºã€‚ä¸å¦‚ç”¨è£…é¥°å‡½æ•°ï¼ˆé«˜å¤§ä¸Šçš„è¯´æ³•æ˜¯è£…é¥°è€…æ¨¡å¼ï¼‰æ¥åŒ…è£…ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//filter.js</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">identityFilter</span>(<span class="hljs-params">pageObj</span>)&#123;<br>    <span class="hljs-keyword">if</span>(pageObj.<span class="hljs-property">onShow</span>)&#123;<br>        <span class="hljs-keyword">let</span> _onShow = pageObj.<span class="hljs-property">onShow</span>;<br>        pageObj.<span class="hljs-property">onShow</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            service.<span class="hljs-title function_">identityCheck</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>                <span class="hljs-comment">//è·³è½¬åˆ°ç™»å½•é¡µ</span><br>                wx.<span class="hljs-title function_">redirectTo</span>(&#123;<br>                    <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/pages/common/login/login&quot;</span><br>                &#125;);<br>            &#125;,<span class="hljs-function">()=&gt;</span>&#123;<br>                <span class="hljs-comment">//è·å–é¡µé¢å®ä¾‹ï¼Œé˜²æ­¢thisåŠ«æŒ</span><br>                <span class="hljs-keyword">let</span> currentInstance = <span class="hljs-title function_">getPageInstance</span>();<br>                _onShow.<span class="hljs-title function_">call</span>(currentInstance);<br>            &#125;);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> pageObj;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getPageInstance</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">var</span> pages = <span class="hljs-title function_">getCurrentPages</span>();<br>    <span class="hljs-keyword">return</span>  pages[pages.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-built_in">exports</span>.<span class="hljs-property">identityFilter</span> = identityFilter;<br></code></pre></td></tr></table></figure><p><code>filter.js</code>ç”¨ä»¥æä¾›è¿‡æ»¤å™¨æ–¹æ³•ï¼Œé™¤äº†ç°æœ‰çš„ç”¨æˆ·èº«ä»½æ‹¦æˆªï¼Œåç»­å¦‚æœéœ€è¦å…¶ä»–æ‹¦æˆªï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶å¢åŠ ã€‚ç„¶åï¼Œåœ¨éœ€è¦ç”¨æˆ·èº«ä»½æ‹¦æˆªçš„å°ç¨‹åºé¡µé¢ä»£ç é‡Œï¼Œç”¨<code>filter.identityFilter</code>å¤„ç†ä¸€ä¸‹å°±å¯ä»¥äº†:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//orderDetail.js</span><br><span class="hljs-keyword">let</span> filter = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;filter.js&#x27;</span>);<br><span class="hljs-title class_">Page</span>(filter.<span class="hljs-title function_">identityFilter</span>(&#123;<br>    ...<br>    <span class="hljs-attr">onShow</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-comment">//è·å–é¡µé¢æ•°æ®ç­‰ç­‰</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDetail</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">orderId</span>);<br>        <span class="hljs-comment">//...</span><br>    &#125;,<br>    ...<br>&#125;));<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨Promiseè¿›è¡Œä¼˜åŒ–"><a href="#ä½¿ç”¨Promiseè¿›è¡Œä¼˜åŒ–" class="headerlink" title="ä½¿ç”¨Promiseè¿›è¡Œä¼˜åŒ–"></a>ä½¿ç”¨Promiseè¿›è¡Œä¼˜åŒ–</h3><p>ä¸Šé¢çš„å®ç°ä¸­ï¼Œæ¯æ¬¡è®¿é—®é¡µé¢ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡è·å–ç”¨æˆ·èº«ä»½çš„æ–¹æ³•ï¼ˆå°±æ˜¯ä¸Šé¢ä»£ç é‡Œçš„<code>service. identityCheck</code> ï¼‰ã€‚å…¶å®æ²¡æœ‰å¿…è¦ï¼Œåœ¨å°ç¨‹åºå¯åŠ¨çš„æ—¶å€™è·å–ä¸€æ¬¡å°±è¡Œäº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¾åœ¨app.jsçš„onLaunchæ–¹æ³•é‡Œæ‰§è¡Œã€‚</p><p>æ¯ä¸ªå°ç¨‹åºé¡µé¢å®ä¾‹åŒ–æ—¶ï¼Œä¸€èˆ¬ä¹Ÿä¼šæ‰§è¡Œå¼‚æ­¥æ–¹æ³•ï¼Œç”¨æ¥è·å–é¡µé¢éœ€è¦çš„æ•°æ®ã€‚å…³é”®åœ¨äºï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯ï¼Œ<strong>é¡µé¢çš„å¼‚æ­¥æ–¹æ³•</strong> å¿…é¡»åœ¨ <strong>è·å–ç”¨æˆ·èº«ä»½çš„å¼‚æ­¥è¯·æ±‚</strong> ä¹‹åæ‰§è¡Œã€‚</p><p>æ¯‹å®¹ç½®ç–‘ï¼ŒPromiseæœ€æ“…é•¿å¤„ç†å¼‚æ­¥è¯·æ±‚çš„æ‰§è¡Œé¡ºåºäº†ã€‚ä¸»å­ï¼Œå¿«æ”¾ä»£ç ç²—æ¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//app.js</span><br><span class="hljs-title class_">App</span>(&#123;<br>    <span class="hljs-attr">onLaunch</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">resolve,reject</span>)&#123;<br>            service.<span class="hljs-title function_">identityCheck</span>(resolve,reject);<br>        &#125;);<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">globalData</span>.<span class="hljs-property">promise</span> = p; <br>    &#125;,<br>    ...<br>    <span class="hljs-attr">globalData</span>: &#123;<br>        <span class="hljs-attr">promise</span>:<span class="hljs-literal">null</span>,<br>    &#125;   <br>&#125;);<br><br><span class="hljs-comment">//filter.js</span><br><span class="hljs-keyword">const</span> appData = <span class="hljs-title function_">getApp</span>().<span class="hljs-property">globalData</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">identityFilter</span>(<span class="hljs-params">pageObj</span>)&#123;<br>    <span class="hljs-keyword">if</span>(pageObj.<span class="hljs-property">onShow</span>)&#123;<br>        <span class="hljs-keyword">let</span> _onShow = pageObj.<span class="hljs-property">onShow</span>;<br>        pageObj.<span class="hljs-property">onShow</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-comment">//æ”¹åŠ¨ç‚¹</span><br>            appData.<span class="hljs-property">promise</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>                <span class="hljs-comment">//è·³è½¬åˆ°ç™»å½•é¡µ</span><br>                wx.<span class="hljs-title function_">redirectTo</span>(&#123;<br>                    <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/pages/common/login/login&quot;</span><br>                &#125;);<br>            &#125;,<span class="hljs-function">()=&gt;</span>&#123;<br>                <span class="hljs-comment">//è·å–é¡µé¢å®ä¾‹ï¼Œé˜²æ­¢thisåŠ«æŒ</span><br>                <span class="hljs-keyword">let</span> currentInstance = <span class="hljs-title function_">getPageInstance</span>();<br>                _onShow.<span class="hljs-title function_">call</span>(currentInstance);<br>            &#125;);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> pageObj;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>åŸºæœ¬å®ç°äº†å°ç¨‹åºé¡µé¢çš„ç”¨æˆ·èº«ä»½æ‹¦æˆªå™¨ï¼Œä½†æ˜¯æ¯”èµ·laravelçš„httpä¸­é—´ä»¶è¿˜æ˜¯é€Šè‰²ä¸€äº›ï¼š</p><ol><li>éœ€è¦å¯¹æ¯ä¸ªé¡µé¢ä»£ç åŒ…è£…ä¸€å±‚ã€‚</li><li>å³ä½¿ç”¨æˆ·èº«ä»½æ ¡éªŒä¸é€šè¿‡ï¼Œå°ç¨‹åºä¹Ÿå¹¶ä¸ä¼šé˜»å¡é¡µé¢çš„æ¸²æŸ“ã€‚å‡å¦‚è·å–ç”¨æˆ·èº«ä»½çš„å¼‚æ­¥æ–¹æ³•ä¸€åˆ†é’Ÿæ‰æ‰§è¡Œå®Œï¼Œå°ç¨‹åºé¡µé¢è¿˜æ˜¯ä¼šå±•ç¤ºå‡ºæ¥ï¼Œä¸€åˆ†é’Ÿä¹‹åæ‰è·³è½¬åˆ°ç™»å½•é¡µã€‚éœ€è¦è‡ªå·±å¢åŠ é€»è¾‘ï¼Œæ¯”å¦‚åœ¨è¿™ä¸€åˆ†é’Ÿå†…ï¼Œé¡µé¢å±•ç¤ºç©ºç™½å†…å®¹ã€‚</li></ol><p>å—¯ï¼Œå¯¹å°ç¨‹åºçš„æ–°ç‰¹æ€§ä¿æŒå…³æ³¨ï¼Œåé¢çœ‹çœ‹æ€ä¹ˆæ”¹è¿›~</p><h1 id="è§£å†³å¾®ä¿¡å°ç¨‹åºbackground-attachment-fixed-åœ¨çœŸæœºä¸Šæ— æ³•ç”Ÿæ•ˆ"><a href="#è§£å†³å¾®ä¿¡å°ç¨‹åºbackground-attachment-fixed-åœ¨çœŸæœºä¸Šæ— æ³•ç”Ÿæ•ˆ" class="headerlink" title="è§£å†³å¾®ä¿¡å°ç¨‹åºbackground-attachment: fixed;åœ¨çœŸæœºä¸Šæ— æ³•ç”Ÿæ•ˆ"></a>è§£å†³å¾®ä¿¡å°ç¨‹åº<code>background-attachment: fixed;</code>åœ¨çœŸæœºä¸Šæ— æ³•ç”Ÿæ•ˆ</h1><p>æ•´ä¸ªé¡µé¢å¤–åŒ…ä¸€ä¸ª<code>view</code><br>å¯¹è¯¥<code>view</code>è®¾ç½®æ ·å¼å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.all</span> &#123;<br><span class="hljs-attribute">background-size</span>: cover;<br><span class="hljs-attribute">background-position</span>: center;<br><span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;<br><span class="hljs-attribute">overflow</span>: auto;<br><span class="hljs-attribute">background-repeat</span>: no-repeat;<br><span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202202121406661.jpg</span>);<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦ç»™æ•´ä¸ªèƒŒæ™¯å¢åŠ èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ&#x2F;é®ç½©å¯ä»¥é€šè¿‡<code>::after</code>ä¼ªå…ƒç´ ï¼Œå³å¦‚ä¸‹æ–¹å¼</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.all</span><span class="hljs-selector-pseudo">::after</span>&#123;<br><span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br><span class="hljs-attribute">position</span>: absolute;<br><span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<br><span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;<br><span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;<br><span class="hljs-attribute">overflow</span>: auto;<br><span class="hljs-attribute">background</span>: inherit;<br><span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">5px</span>);<br><span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-attribute">z-index</span>: <span class="hljs-number">0</span>;<br><span class="hljs-attribute">background-color</span>: aliceblue;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="å…¨å±€ä¿®æ”¹Pageå¯¹è±¡"><a href="#å…¨å±€ä¿®æ”¹Pageå¯¹è±¡" class="headerlink" title="å…¨å±€ä¿®æ”¹Pageå¯¹è±¡"></a>å…¨å±€ä¿®æ”¹Pageå¯¹è±¡</h1><p>åœ¨app.jsé¡¶éƒ¨å¢åŠ å¦‚ä¸‹ä»£ç </p><blockquote><p>å¯ç”¨ä½œé¡µé¢æ‹¦æˆª&#x2F;æˆ–è€…ç»™æ¯ä¸ªé¡µé¢è®¾ç½®ç»Ÿä¸€çš„é™„åŠ å‡½æ•°</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js">(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br><span class="hljs-comment">// è®¾ç½®éœ€è¦æ‹¦æˆªçš„é¡µé¢</span><br><span class="hljs-keyword">const</span> checkRouterPageList = [<span class="hljs-string">&#x27;pages/explore/explore&#x27;</span>]<br><span class="hljs-comment">// å°ç¨‹åºåŸæ¥çš„Pageæ–¹æ³•</span><br><span class="hljs-keyword">let</span> originalPage = <span class="hljs-title class_">Page</span>;<br><span class="hljs-comment">// æˆ‘ä»¬è‡ªå®šä¹‰çš„Pageæ–¹æ³•</span><br><span class="hljs-title class_">Page</span> = <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;<br><span class="hljs-keyword">let</span> originalLoadMethod = config.<span class="hljs-property">onLoad</span>;<br>config.<span class="hljs-property">onLoad</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;<br><span class="hljs-keyword">let</span> currentPageUrl = <span class="hljs-title function_">getPageUrl</span>()<br><span class="hljs-keyword">if</span> (checkRouterPageList.<span class="hljs-title function_">indexOf</span>(currentPageUrl)) &#123;<br><span class="hljs-comment">// æœªç™»å½•æ—¶è¿›è¡Œæ‹¦æˆª</span><br><span class="hljs-comment">// wx.switchTab(&#123;</span><br><span class="hljs-comment">// url: &#x27;/pages/myinfo/myinfo&#x27;,</span><br><span class="hljs-comment">// &#125;)</span><br>&#125;<br><span class="hljs-keyword">if</span> (originalLoadMethod) &#123;<br>originalLoadMethod.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, e)<br>&#125;<br>&#125;<br><span class="hljs-comment">// todo åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç»™é…ç½®å¯¹è±¡è¿›è¡ŒåŠ å·¥</span><br><span class="hljs-comment">// å°†é…ç½®å¯¹è±¡ç»§ç»­æƒ³ä¸‹ä¼ é€’ç»™å°ç¨‹åºåŸæ¥çš„Pageæ–¹æ³•</span><br><span class="hljs-title function_">originalPage</span>(config);<br>&#125;<br>&#125;)();<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å‰ç«¯</tag>
      
      <tag>å°ç¨‹åº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mitmproxy</title>
    <link href="/2022/04/05/%E7%88%AC%E8%99%AB/mitmproxy/"/>
    <url>/2022/04/05/%E7%88%AC%E8%99%AB/mitmproxy/</url>
    
    <content type="html"><![CDATA[<h1 id="å·¥å…·ï¼šmitmproxy"><a href="#å·¥å…·ï¼šmitmproxy" class="headerlink" title="å·¥å…·ï¼šmitmproxy"></a>å·¥å…·ï¼šmitmproxy</h1><blockquote><p>å®˜ç½‘åœ°å€ï¼š<a href="https://mitmproxy.org/">https://mitmproxy.org</a></p></blockquote><h1 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h1><h2 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1.å®‰è£…"></a>1.å®‰è£…</h2><p><strong>MACï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs shell">brew install mitmproxy<br></code></pre></td></tr></table></figure><p><strong>MAC&#x2F;WINDOWS&#x2F;LINUX</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install mitmproxy<br></code></pre></td></tr></table></figure><h2 id="2-å¼€å¯ç›‘æµ‹"><a href="#2-å¼€å¯ç›‘æµ‹" class="headerlink" title="2.å¼€å¯ç›‘æµ‹"></a>2.å¼€å¯ç›‘æµ‹</h2><p>å¼€å¯mitmproxyçš„è®¾å¤‡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mitmproxy -p ç«¯å£å·<br></code></pre></td></tr></table></figure><p>æœ‰ä¸‰ç§æ–¹å¼å¯ä»¥å¼€å¯mitmproxyç›‘æµ‹</p><ul><li><strong>mitmproxy</strong> ç»ˆç«¯å¯äº¤äº’ç•Œé¢</li><li><strong>mitmweb</strong> æµè§ˆå™¨ç‰ˆGUIå¯äº¤äº’ç•Œé¢</li><li><strong>mitmdump</strong> ç»ˆç«¯è¾“å‡ºï¼ˆä¸å¯äº¤äº’ï¼‰<h2 id="3-ç½‘ç»œç¯å¢ƒé…ç½®"><a href="#3-ç½‘ç»œç¯å¢ƒé…ç½®" class="headerlink" title="3.ç½‘ç»œç¯å¢ƒé…ç½®"></a>3.ç½‘ç»œç¯å¢ƒé…ç½®</h2><blockquote><p>è¢«ç›‘æµ‹çš„è®¾å¤‡ï¼ˆä¸€èˆ¬æ˜¯ä½ çš„æ‰‹æœºï¼‰å’Œå¼€å¯mitmproxyçš„è®¾å¤‡ï¼ˆä¸€èˆ¬æ˜¯ç”µè„‘ï¼‰è¦åœ¨åŒä¸€ç‰‡å±€åŸŸç½‘å†…ã€‚</p></blockquote></li></ul><p>æ‰‹æœºè¿›å…¥å±€åŸŸç½‘åï¼ˆå¯ä»¥é€šè¿‡è¿æ¥çƒ­ç‚¹ï¼‰å ï¼Œåœ¨çƒ­ç‚¹æ¨¡å—é‡Œå¼€å¯è‡ªå®šä¹‰ä»£ç†ï¼Œç«¯å£å·æŒ‡å®šåŒå¼€å¯mitmproxyæœåŠ¡æ—¶ç¡®å®šçš„ç«¯å£å·ã€‚</p><p><strong>æ‰‹æœºï¼ˆæ­¤å¤„IOSä¸¾ä¾‹ï¼‰å…·ä½“æ“ä½œï¼š</strong><br>Settings&#x3D;&gt;WLAN&#x3D;&gt;å±€åŸŸç½‘ç½‘ç»œï¼ˆä¸€èˆ¬ä¹Ÿå°±æ˜¯ä½ çš„çƒ­ç‚¹ï¼‰å³ä¾§æ„Ÿå¹å·&#x3D;&gt;Configure Proxy&#x3D;&gt;Manaulï¼ˆå¡«å…¥ä½ å¼€å¯mitmproxyç›‘æµ‹æœåŠ¡çš„è®¾å¤‡çš„ipä»¥åŠç«¯å£å·ï¼‰</p><p>æ­¤æ—¶è®¿é—®ä»»ä½•ç«™ç‚¹ç”±äºæ²¡æœ‰è¯ä¹¦ï¼Œéƒ½ä¼šæ˜¾ç¤ºè¯ä¹¦ä¸å¯ä¿¡ä»»<br>æ¥ä¸‹æ¥è®¿é—®(<a href="http://mitm.it/">http://mitm.it</a>) ä¸‹è½½é…ç½®æ–‡ä»¶ï¼ˆæ­¤å¤„ä¸€å®šè¦å…ˆè¿›å…¥å¼€å¯mitmproxyçš„è®¾å¤‡æ‰€åœ¨å±€åŸŸç½‘å¹¶ä¸”è®¾ç½®å¥½ä»£ç†åæ‰å¯ä»¥æ­£å¸¸è®¿é—®è¿™ä¸ªç«™ç‚¹ï¼ï¼‰ã€‚</p><p>åœ¨è®¾ç½®é‡Œä¸‹è½½è¯ä¹¦<br><strong>Settings&#x3D;&gt;General&#x3D;&gt;VPN&amp;DeviceManagement&#x3D;&gt;mitmproxy&#x3D;&gt;Install</strong></p><p>å¯ç”¨è¯ä¹¦ï¼ˆæ³¨æ„ï¼Œä¸‹è½½è¯ä¹¦è¿˜ä¸å¤Ÿï¼ä¸€å®šè¦å¼€å¯ï¼ï¼‰<br><strong>Settings&#x3D;&gt;General&#x3D;&gt;About&#x3D;&gt;Certificate Trust Settings&#x3D;&gt;å¼€å¯mitmproxy</strong></p><p>ä¹‹åè®¿é—®ç½‘ç«™å°±ä¼šæ­£å¸¸ï¼ŒåŒæ—¶ç”µè„‘ç»ˆç«¯ä¹Ÿå¯ä»¥çœ‹åˆ°è¯·æ±‚<br>å¦‚æœè¦é’ˆå¯¹ä¸åŒè¯·æ±‚åšä¸åŒå¤„ç†&#x2F;è®°å½•æ—¥å¿—ï¼Œåˆ™å¯ä»¥é€šè¿‡pythonè„šæœ¬çš„æ–¹å¼</p><p><strong>è„šæœ¬èŒƒä¾‹ï¼š</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#addon.py</span><br><br><span class="hljs-keyword">from</span> mitmproxy <span class="hljs-keyword">import</span> http<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">flow: http.HTTPFlow</span>):<br>    <span class="hljs-comment"># redirect to different host</span><br>    <span class="hljs-keyword">if</span> flow.request.pretty_host == <span class="hljs-string">&quot;example.com&quot;</span>:<br>        flow.request.host = <span class="hljs-string">&quot;mitmproxy.org&quot;</span><br>    <span class="hljs-comment"># answer from proxy</span><br>    <span class="hljs-keyword">elif</span> flow.request.path.endswith(<span class="hljs-string">&quot;/brew&quot;</span>):<br>    flow.response = http.HTTPResponse.make(<br>            <span class="hljs-number">418</span>, **b**<span class="hljs-string">&quot;I&#x27;m a teapot&quot;</span>,<br>        )<br></code></pre></td></tr></table></figure><p>å¯åŠ¨æ–¹å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mitmproxy -s ./app.py<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>çˆ¬è™«</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Django</title>
    <link href="/2022/04/05/Server/Django/index/"/>
    <url>/2022/04/05/Server/Django/index/</url>
    
    <content type="html"><![CDATA[<h2 id="å®˜æ–¹æ–‡æ¡£ï¼ˆå«æ•™ç¨‹ï¼‰"><a href="#å®˜æ–¹æ–‡æ¡£ï¼ˆå«æ•™ç¨‹ï¼‰" class="headerlink" title="å®˜æ–¹æ–‡æ¡£ï¼ˆå«æ•™ç¨‹ï¼‰"></a>å®˜æ–¹æ–‡æ¡£ï¼ˆå«æ•™ç¨‹ï¼‰</h2><p><a href="https://www.djangoproject.com/">Django</a></p><p><a href="https://www.django-rest-framework.org/">Home - Django REST framework</a></p><h2 id="åŸºæœ¬æ“ä½œï¼ˆç»ˆç«¯ä¸­æ‰§è¡Œï¼‰"><a href="#åŸºæœ¬æ“ä½œï¼ˆç»ˆç«¯ä¸­æ‰§è¡Œï¼‰" class="headerlink" title="åŸºæœ¬æ“ä½œï¼ˆç»ˆç«¯ä¸­æ‰§è¡Œï¼‰"></a>åŸºæœ¬æ“ä½œï¼ˆç»ˆç«¯ä¸­æ‰§è¡Œï¼‰</h2><p>æ–°å»ºä¸€ä¸ªDjangoé¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">django-admin startproject mysite<br></code></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªæ¥å£ç»„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">django-admin startapp test_app<br></code></pre></td></tr></table></figure><p>å¯åŠ¨Djangoé¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python manage.py runserver<br></code></pre></td></tr></table></figure><p>åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">python manage.py createsuperuser<br></code></pre></td></tr></table></figure><h2 id="rest-framework"><a href="#rest-framework" class="headerlink" title="rest_framework"></a>rest_framework</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">INSTALLED_APPS = [<br><span class="hljs-string">&#x27;rest_framework&#x27;</span>, <span class="hljs-comment">#å¢åŠ è¿™ä¸€è¡Œ</span><br>    <span class="hljs-string">&#x27;django.contrib.admin&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.auth&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.contenttypes&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.staticfiles&#x27;</span>,<br>]<br></code></pre></td></tr></table></figure><h2 id="è§£å†³æ—¶åŒºé—®é¢˜"><a href="#è§£å†³æ—¶åŒºé—®é¢˜" class="headerlink" title="è§£å†³æ—¶åŒºé—®é¢˜"></a>è§£å†³æ—¶åŒºé—®é¢˜</h2><p>åœ¨<code>settings.py</code>ä¸­ä¿®æ”¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">TIME_ZONE = <span class="hljs-string">&#x27;Asia/Shanghai&#x27;</span> <span class="hljs-comment">#æ—¶åŒºæ”¹æˆä¸Šæµ·</span><br><span class="hljs-comment"># USE_TZ = True #è¿™è¡Œæ³¨é‡Š</span><br></code></pre></td></tr></table></figure><h2 id="è§£å†³è·¨åŸŸ"><a href="#è§£å†³è·¨åŸŸ" class="headerlink" title="è§£å†³è·¨åŸŸ"></a>è§£å†³è·¨åŸŸ</h2><p>åœ¨<code>settings.py</code>ä¸­ä¿®æ”¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">INSTALLED_APPS = [<br>    <span class="hljs-string">&#x27;django.contrib.admin&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.auth&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.contenttypes&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.staticfiles&#x27;</span>,<br>    <span class="hljs-string">&#x27;corsheaders&#x27;</span>,  <span class="hljs-comment"># è¿™é‡Œå¢åŠ å…è®¸è·¨åŸŸè¯·æ±‚å¤´é…ç½®</span><br>]<br><br>MIDDLEWARE = [<br><span class="hljs-comment">#ä¸­é—´ä»¶ä¿®æ”¹æˆå¦‚ä¸‹</span><br>    <span class="hljs-string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;corsheaders.middleware.CorsMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,<br>]<br></code></pre></td></tr></table></figure><h2 id="Djangoé»˜è®¤æ ·å¼ä¸å¥½çœ‹"><a href="#Djangoé»˜è®¤æ ·å¼ä¸å¥½çœ‹" class="headerlink" title="Djangoé»˜è®¤æ ·å¼ä¸å¥½çœ‹"></a>Djangoé»˜è®¤æ ·å¼ä¸å¥½çœ‹</h2><p>åœ¨<code>settings.py</code>ä¸­ä¿®æ”¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">INSTALLED_APPS = [<br>    <span class="hljs-string">&#x27;simpleui&#x27;</span>, <span class="hljs-comment">#å¢åŠ è¿™ä¸€è¡Œ</span><br>    <span class="hljs-string">&#x27;mall.apps.MallConfig&#x27;</span>,<br>    <span class="hljs-string">&#x27;rest_framework&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.admin&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.auth&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.contenttypes&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.sessions&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.messages&#x27;</span>,<br>    <span class="hljs-string">&#x27;django.contrib.staticfiles&#x27;</span>,<br>    <span class="hljs-string">&#x27;corsheaders&#x27;</span>,  <span class="hljs-comment"># è¿™é‡Œå¢åŠ å…è®¸è·¨åŸŸè¯·æ±‚å¤´é…ç½®</span><br>]<br></code></pre></td></tr></table></figure><aside> ğŸ’¡ simpleuiçš„ä¸€äº›åŸºæœ¬é…ç½®â¬‡ï¸ï¼Œåœ¨`settings.py`ä¸­å¢åŠ </aside><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å»æ‰é»˜è®¤Logoæˆ–æ¢æˆè‡ªå·±Logoé“¾æ¥</span><br>SIMPLEUI_LOGO = <span class="hljs-string">&#x27;&lt;https://cdn.jsdelivr.net/gh/Alndaly/imgsrc/img/202109211712667.png&gt;&#x27;</span><br><span class="hljs-comment"># é»˜è®¤è¯­è¨€æ¢æˆä¸­æ–‡</span><br>LANGUAGE_CODE = <span class="hljs-string">&#x27;zh-hans&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="Djangoçš„æ—¶é—´è¿”å›ä¸­é—´å¸¦T"><a href="#Djangoçš„æ—¶é—´è¿”å›ä¸­é—´å¸¦T" class="headerlink" title="Djangoçš„æ—¶é—´è¿”å›ä¸­é—´å¸¦T"></a>Djangoçš„æ—¶é—´è¿”å›ä¸­é—´å¸¦<code>T</code></h2><p><code>settings.py</code>ä¸­å¢åŠ å¦‚ä¸‹é…ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">REST_FRAMEWORK = &#123;<br>    <span class="hljs-string">&#x27;DATETIME_FORMAT&#x27;</span>: <span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>,<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>django</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginxè½¬å‘</title>
    <link href="/2022/04/05/Server/Nginx/Nginx%E8%BD%AC%E5%8F%91/"/>
    <url>/2022/04/05/Server/Nginx/Nginx%E8%BD%AC%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Location æ˜¯ Nginx ä¸­ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„é…ç½®ï¼Œè¿™ç¯‡é‡ç‚¹è®²è§£ä¸€ä¸‹ Location çš„é…ç½®é—®é¢˜ä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹ã€‚</p><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>å…³äº Locationï¼Œä¸¾ä¸ªç®€å•çš„é…ç½®ä¾‹å­ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">http</span> &#123;<br>  <span class="hljs-section">server</span> &#123;<br>      <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span> www.yayujs.com;<br>    <span class="hljs-section">location</span> / &#123;<br>      <span class="hljs-attribute">root</span> /home/www/ts/;<br>      <span class="hljs-attribute">index</span> index.html;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¤§è‡´çš„æ„æ€æ˜¯ï¼Œå½“ä½ è®¿é—®Â <code>www.yayujs.com</code>Â çš„Â <code>80</code>Â ç«¯å£çš„æ—¶å€™ï¼Œè¿”å›Â <code>/home/www/ts/index.html</code>Â æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹ Location çš„å…·ä½“è¯­æ³•ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">[ = | ~ | ~* | ^~ ] uri</span> &#123; ... &#125;<br></code></pre></td></tr></table></figure><p>é‡ç‚¹çœ‹æ–¹æ‹¬å·ä¸­çš„Â <code>[ = | ~ | ~* | ^~ ]</code>ï¼Œå…¶ä¸­Â <code>|</code>Â åˆ†éš”çš„å†…å®¹è¡¨ç¤ºä½ å¯èƒ½ä¼šç”¨åˆ°çš„è¯­æ³•ï¼Œå…¶ä¸­ï¼š</p><ul><li><code>=</code>Â è¡¨ç¤ºç²¾ç¡®åŒ¹é…ï¼Œæ¯”å¦‚ï¼š</li></ul><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">= /test</span> &#123;<br>  return <span class="hljs-number">200</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>&#125;<br><br><span class="hljs-comment"># /test ok</span><br><span class="hljs-comment"># /test/ not ok</span><br><span class="hljs-comment"># /test2 not ok</span><br><span class="hljs-comment"># /test/2 not ok</span><br></code></pre></td></tr></table></figure><ul><li><code>~</code>Â è¡¨ç¤ºåŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…ï¼Œæ¯”å¦‚ï¼š</li></ul><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">~ ^/test</span>$ &#123;<br>  [ configuration ]<br>&#125;<br><br><span class="hljs-comment"># /test ok</span><br><span class="hljs-comment"># /Test not ok</span><br><span class="hljs-comment"># /test/ not ok</span><br><span class="hljs-comment"># /test2 not ok</span><br></code></pre></td></tr></table></figure><ul><li><code>~*</code>Â è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…</li></ul><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">~* ^/test</span>$ &#123;<br>[ configuration ]<br>&#125;<br><br><span class="hljs-comment"># /test ok</span><br><span class="hljs-comment"># /Test ok</span><br><span class="hljs-comment"># /test/ not ok</span><br><span class="hljs-comment"># /test2 not ok</span><br></code></pre></td></tr></table></figure><ul><li><code>^~</code>Â è¡¨ç¤º uri ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´</li></ul><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">^~ /images</span>/ &#123;<br>[ configuration ]<br>&#125;<br><br><span class="hljs-comment"># /images/1.gif ok</span><br></code></pre></td></tr></table></figure><p>è€Œå½“ä½ ä¸ä½¿ç”¨è¿™äº›è¯­æ³•çš„æ—¶å€™ï¼Œåªå†™ uri çš„æ—¶å€™ï¼š</p><p><code>/</code>Â è¡¨ç¤ºé€šç”¨åŒ¹é…ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">/ &#123;</span><br><span class="hljs-title">[ configuration</span> ]<br>&#125;<br><br><span class="hljs-comment"># /index.html ok</span><br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">location</span> <span class="hljs-title">/test</span> &#123;<br>    [ configuration ]<br>&#125;<br><br><span class="hljs-comment"># /test ok</span><br><span class="hljs-comment"># /test2 ok</span><br><span class="hljs-comment"># /test/ ok</span><br></code></pre></td></tr></table></figure><h2 id="åŒ¹é…é¡ºåº"><a href="#åŒ¹é…é¡ºåº" class="headerlink" title="åŒ¹é…é¡ºåº"></a>åŒ¹é…é¡ºåº</h2><p>å½“å­˜åœ¨å¤šä¸ª location çš„æ—¶å€™ï¼Œä»–ä»¬çš„åŒ¹é…é¡ºåºå¼•ç”¨Â <a href="https://link.juejin.cn/?target=http://nginx.org/en/docs/http/ngx_http_core_module.html%23location">Nginx å®˜æ–¹æ–‡æ¡£</a>å°±æ˜¯ï¼š</p><blockquote><p>A location can either be defined by a prefix string, or by a regular expression. Regular expressions are specified with the preceding â€œ<del>*â€ modifier (for case-insensitive matching), or the â€œ</del>â€ modifier (for case-sensitive matching). To find location matching a given request, nginx first checks locations defined using the prefix strings (prefix locations). Among them, the location with the longest matching prefix is selected and remembered. Then regular expressions are checked, in the order of their appearance in the configuration file. The search of regular expressions terminates on the first match, and the corresponding configuration is used. If no match with a regular expression is found then the configuration of the prefix location remembered earlier is used.</p></blockquote><blockquote><p>If the longest matching prefix location has the â€œ^~â€ modifier then regular expressions are not checked.</p></blockquote><blockquote><p>Also, using the â€œ&#x3D;â€ modifier it is possible to define an exact match of URI and location. If an exact match is found, the search terminates. For example, if a â€œ&#x2F;â€ request happens frequently, defining â€œlocation &#x3D; &#x2F;â€ will speed up the processing of these requests, as search terminates right after the first comparison. Such a location cannot obviously contain nested locations.</p></blockquote><p>ç¿»è¯‘æ•´ç†åå°±æ˜¯ï¼š</p><p>location çš„å®šä¹‰åˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li>å‰ç¼€å­—ç¬¦ä¸²ï¼ˆprefix stringï¼‰</li><li>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆregular expressionï¼‰ï¼Œå…·ä½“ä¸ºå‰é¢å¸¦Â <code>~*</code>Â å’ŒÂ <code>~</code>Â ä¿®é¥°ç¬¦çš„</li></ul><p>è€ŒåŒ¹é… location çš„é¡ºåºä¸ºï¼š</p><ol><li>æ£€æŸ¥ä½¿ç”¨å‰ç¼€å­—ç¬¦ä¸²çš„ locationsï¼Œåœ¨ä½¿ç”¨å‰ç¼€å­—ç¬¦ä¸²çš„ locations ä¸­é€‰æ‹©æœ€é•¿åŒ¹é…çš„ï¼Œå¹¶å°†ç»“æœè¿›è¡Œå‚¨å­˜</li><li>å¦‚æœç¬¦åˆå¸¦æœ‰Â <code>=</code>Â ä¿®é¥°ç¬¦çš„ URIï¼Œåˆ™ç«‹åˆ»åœæ­¢åŒ¹é…</li><li>å¦‚æœç¬¦åˆå¸¦æœ‰Â <code>^~</code>Â ä¿®é¥°ç¬¦çš„ URIï¼Œåˆ™ä¹Ÿç«‹åˆ»åœæ­¢åŒ¹é…ã€‚</li><li>ç„¶åæŒ‰ç…§å®šä¹‰æ–‡ä»¶çš„é¡ºåºï¼Œæ£€æŸ¥æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…åˆ°å°±åœæ­¢</li><li>å½“æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä¸åˆ°çš„æ—¶å€™ï¼Œä½¿ç”¨ä¹‹å‰å‚¨å­˜çš„å‰ç¼€å­—ç¬¦ä¸²</li></ol><p>å†æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼š</p><p>åœ¨é¡ºåºä¸Šï¼Œå‰ç¼€å­—ç¬¦ä¸²é¡ºåºä¸é‡è¦ï¼ŒæŒ‰ç…§åŒ¹é…é•¿åº¦æ¥ç¡®å®šï¼Œæ­£åˆ™è¡¨è¾¾å¼åˆ™æŒ‰ç…§å®šä¹‰é¡ºåºã€‚</p><p>åœ¨ä¼˜å…ˆçº§ä¸Šï¼Œ<code>=</code>Â ä¿®é¥°ç¬¦æœ€é«˜ï¼Œ<code>^~</code>Â æ¬¡ä¹‹ï¼Œå†è€…æ˜¯æ­£åˆ™ï¼Œæœ€åæ˜¯å‰ç¼€å­—ç¬¦ä¸²åŒ¹é…ã€‚</p><p>æˆ‘ä»¬ä¸¾å‡ ä¸ªç®€å•çš„ä¾‹å­å¤ä¹ ä¸‹ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">server &#123;<br>    <span class="hljs-keyword">location</span> <span class="hljs-title">/doc</span> &#123;<br>        [ configuration A ]<br>    &#125;<br>    <span class="hljs-keyword">location</span> <span class="hljs-title">/docu</span> &#123;<br>        [ configuration B ]<br>    &#125;<br>&#125;<br><br><span class="hljs-comment"># è¯·æ±‚ /document ä½¿ç”¨ configuration B</span><br><span class="hljs-comment"># è™½ç„¶ /doc ä¹Ÿèƒ½åŒ¹é…åˆ°ï¼Œä½†åœ¨é¡ºåºä¸Šï¼Œå‰ç¼€å­—ç¬¦ä¸²é¡ºåºä¸é‡è¦ï¼ŒæŒ‰ç…§åŒ¹é…é•¿åº¦æ¥ç¡®å®š</span><br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">server &#123;<br>    <span class="hljs-keyword">location</span> <span class="hljs-title">~ ^/doc</span> &#123;<br>        [ configuration A ]<br>    &#125;<br>    <span class="hljs-keyword">location</span> <span class="hljs-title">~ ^/docu</span> &#123;<br>        [ configuration B ]<br>    &#125;<br>&#125;<br><br><span class="hljs-comment"># è¯·æ±‚ /document ä½¿ç”¨ configuration A</span><br><span class="hljs-comment"># è™½ç„¶ ~ ^/docu ä¹Ÿèƒ½åŒ¹é…åˆ°ï¼Œä½†æ­£åˆ™è¡¨è¾¾å¼åˆ™æŒ‰ç…§å®šä¹‰é¡ºåº</span><br>å¤åˆ¶ä»£ç <br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">server &#123;<br>    <span class="hljs-keyword">location</span> <span class="hljs-title">^~ /doc</span> &#123;<br>        [ configuration A ]<br>    &#125;<br>    <span class="hljs-keyword">location</span> <span class="hljs-title">~ ^/docu</span> &#123;<br>        [ configuration B ]<br>    &#125;<br>&#125;<br><br><span class="hljs-comment"># è¯·æ±‚ /document ä½¿ç”¨ configuration A</span><br><span class="hljs-comment"># è™½ç„¶ ~ ^/docu ä¹Ÿèƒ½åŒ¹é…åˆ°ï¼Œä½† ^~ çš„ä¼˜å…ˆçº§æ›´é«˜</span><br></code></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">server &#123;<br>    <span class="hljs-keyword">location</span> <span class="hljs-title">/document</span> &#123;<br>        [ configuration A ]<br>    &#125;<br>    <span class="hljs-keyword">location</span> <span class="hljs-title">~ ^/docu</span> &#123;<br>        [ configuration B ]<br>    &#125;<br>&#125;<br><br><span class="hljs-comment"># è¯·æ±‚ /document ä½¿ç”¨ configuration B</span><br><span class="hljs-comment"># è™½ç„¶ /document ä¹Ÿèƒ½åŒ¹é…åˆ°ï¼Œä½†æ­£åˆ™çš„ä¼˜å…ˆçº§æ›´é«˜</span><br>å¤åˆ¶ä»£ç <br></code></pre></td></tr></table></figure><h2 id="root-ä¸-alias-çš„åŒºåˆ«"><a href="#root-ä¸-alias-çš„åŒºåˆ«" class="headerlink" title="root ä¸ alias çš„åŒºåˆ«"></a>root ä¸ alias çš„åŒºåˆ«</h2><p>å½“æˆ‘ä»¬è¿™æ ·è®¾ç½®Â <code>root</code>Â çš„æ—¶å€™ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">location <span class="hljs-regexp">/i/</span> &#123;<br>    root <span class="hljs-regexp">/data/</span>w3;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“è¯·æ±‚Â <code>/i/top.gif</code>Â ï¼Œ<code>/data/w3/i/top.gif</code>Â ä¼šè¢«è¿”å›ã€‚</p><p>å½“æˆ‘ä»¬è¿™æ ·è®¾ç½®Â <code>alias</code>Â çš„æ—¶å€™ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">location <span class="hljs-regexp">/i/</span> &#123;<br>    alias <span class="hljs-regexp">/data/</span>w3<span class="hljs-regexp">/images/</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“è¯·æ±‚Â <code>/i/top.gif</code>Â ï¼Œ<code>/data/w3/images/top.gif</code>Â ä¼šè¢«è¿”å›ã€‚</p><p>ä¹ä¸€çœ‹ä¸¤è€…å¾ˆåƒï¼Œä½†ç»†ä¸€çœ‹ï¼Œå°±èƒ½çœ‹å‡ºä¸¤è€…çš„åŒºåˆ«ï¼Œroot æ˜¯ç›´æ¥æ‹¼æ¥Â <code>root</code>Â +Â <code>location</code>Â è€Œ alias æ˜¯ç”¨Â <code>alias</code>Â æ›¿æ¢Â <code>location</code>ï¼Œæ‰€ä»¥ root ä¸­æœ€åçš„è·¯å¾„é‡Œæœ‰Â <code>/i/</code>ï¼Œè€Œ alias ä¸­æœ€åçš„è·¯å¾„é‡Œæ²¡æœ‰Â Â <code>/i/</code>Â ã€‚</p><p>æ‰€ä»¥å¦‚æœä½ è¿™æ ·ä½¿ç”¨ allias å®šä¹‰ä¸€ä¸ªè·¯å¾„ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">location <span class="hljs-regexp">/images/</span> &#123;<br>    alias <span class="hljs-regexp">/data/</span>w3<span class="hljs-regexp">/images/</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å…¶å®ä½¿ç”¨ root ä¼šæ›´å¥½ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">location <span class="hljs-regexp">/images/</span> &#123;<br>    root <span class="hljs-regexp">/data/</span>w3;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="server-å’Œ-location-ä¸­çš„-root"><a href="#server-å’Œ-location-ä¸­çš„-root" class="headerlink" title="server å’Œ location ä¸­çš„ root"></a>server å’Œ location ä¸­çš„ root</h2><p>server å’Œ location ä¸­éƒ½å¯ä»¥ä½¿ç”¨ rootï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">http &#123;<br>  server &#123;<br>      listen <span class="hljs-number">80</span>;<br>    server_name www.yayujs.com;<br>    root <span class="hljs-regexp">/home/</span>www<span class="hljs-regexp">/website/</span>;<br>    location / &#123;<br>      root <span class="hljs-regexp">/home/</span>www<span class="hljs-regexp">/ts/</span>;<br>      index index.html;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸¤è€…éƒ½å‡ºç°ï¼Œæ˜¯æ€æ ·çš„ä¼˜å…ˆçº§å‘¢ï¼Ÿ</p><p>ç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯å°±è¿‘åŸåˆ™ï¼Œå¦‚æœ location ä¸­èƒ½åŒ¹é…åˆ°ï¼Œå°±æ˜¯ç”¨ location ä¸­çš„ root é…ç½®ï¼Œå¿½ç•¥ server ä¸­çš„ rootï¼Œå½“ location ä¸­åŒ¹é…ä¸åˆ°çš„æ—¶å€™ï¼Œåˆ™ä½¿ç”¨ server ä¸­çš„ root é…ç½®ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginxè¯¦è§£</title>
    <link href="/2022/04/05/Server/Nginx/Nginx%E8%AF%A6%E8%A7%A3/"/>
    <url>/2022/04/05/Server/Nginx/Nginx%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>Nginxè”åˆåˆ›å§‹äººå®‰å¾·é²Â·é˜¿åˆ—å…‹è°¢å¤«ï¼ˆAndrew Alexeevï¼‰æ›¾è¯´ï¼šNginxæ˜¯ä¸ºå¯¹Apacheæ€§èƒ½ä¸æ»¡æ„çš„äººè€Œæ„å»ºçš„ã€‚éšç€Internetéœ€æ±‚çš„å˜åŒ–ï¼ŒWebæœåŠ¡å™¨çš„å·¥ä½œä¹Ÿåœ¨å˜åŒ–ã€‚Nginxçš„æ„å»ºæ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´æœ‰æ•ˆç‡ï¼Œæ›´å¯æ‰©å±•ï¼Œæ›´å®‰å…¨ï¼Œæ›´å¼ºå¤§ã€‚</p><p>æœ¬æ–‡æä¾›äº†Nginxçš„åŸºæœ¬æ¦‚å¿µåŠçŸ¥è¯†ã€‚ä»¥å¼€å‘è€…å¿…å¤‡çš„NginxåŸºç¡€çŸ¥è¯†ä¸ºä¸»ï¼Œç½—åˆ—äº†ä¸€äº›Nginxæ•™ç¨‹ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚<strong>å…è´¹Nginxå­¦ä¹ èµ„æ–™è§æ–‡æœ«ï¼</strong></p><p><strong>Nginxçš„äº§ç”Ÿ</strong></p><p>Nginx åŒ Apache ä¸€æ ·éƒ½æ˜¯ä¸€ç§ Web æœåŠ¡å™¨ã€‚åŸºäº REST æ¶æ„é£æ ¼ï¼Œä»¥ç»Ÿä¸€èµ„æºæè¿°ç¬¦ï¼ˆUniform Resources Identifierï¼‰URI æˆ–è€…ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼ˆUniform Resources Locatorï¼‰URL ä½œä¸ºæ²Ÿé€šä¾æ®ï¼Œé€šè¿‡ HTTP åè®®æä¾›å„ç§ç½‘ç»œæœåŠ¡ã€‚</p><p>ç„¶è€Œï¼Œè¿™äº›æœåŠ¡å™¨åœ¨è®¾è®¡ä¹‹åˆå—åˆ°å½“æ—¶ç¯å¢ƒçš„å±€é™ï¼Œä¾‹å¦‚å½“æ—¶çš„ç”¨æˆ·è§„æ¨¡ï¼Œç½‘ç»œå¸¦å®½ï¼Œäº§å“ç‰¹ç‚¹ç­‰å±€é™å¹¶ä¸”å„è‡ªçš„å®šä½å’Œå‘å±•éƒ½ä¸å°½ç›¸åŒã€‚è¿™ä¹Ÿä½¿å¾—å„ä¸ª Web æœåŠ¡å™¨æœ‰ç€å„è‡ªé²œæ˜çš„ç‰¹ç‚¹ã€‚</p><p>Apache çš„å‘å±•æ—¶æœŸå¾ˆé•¿ï¼Œè€Œä¸”æ˜¯æ¯«æ— äº‰è®®çš„ä¸–ç•Œç¬¬ä¸€å¤§æœåŠ¡å™¨ã€‚å®ƒæœ‰ç€å¾ˆå¤šä¼˜ç‚¹ï¼šç¨³å®šã€å¼€æºã€è·¨å¹³å°ç­‰ç­‰ã€‚</p><p>å®ƒå‡ºç°çš„æ—¶é—´å¤ªé•¿äº†ï¼Œå®ƒå…´èµ·çš„å¹´ä»£ï¼Œäº’è”ç½‘äº§ä¸šè¿œè¿œæ¯”ä¸ä¸Šç°åœ¨ã€‚æ‰€ä»¥å®ƒè¢«è®¾è®¡ä¸ºä¸€ä¸ªé‡é‡çº§çš„ã€‚</p><p>å®ƒä¸æ”¯æŒé«˜å¹¶å‘çš„æœåŠ¡å™¨ã€‚åœ¨ Apache ä¸Šè¿è¡Œæ•°ä»¥ä¸‡è®¡çš„å¹¶å‘è®¿é—®ï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨æ¶ˆè€—å¤§é‡å†…å­˜ã€‚</p><p>æ“ä½œç³»ç»Ÿå¯¹å…¶è¿›è¡Œè¿›ç¨‹æˆ–çº¿ç¨‹é—´çš„åˆ‡æ¢ä¹Ÿæ¶ˆè€—äº†å¤§é‡çš„ CPU èµ„æºï¼Œå¯¼è‡´ HTTP è¯·æ±‚çš„å¹³å‡å“åº”é€Ÿåº¦é™ä½ã€‚</p><p>è¿™äº›éƒ½å†³å®šäº† Apache ä¸å¯èƒ½æˆä¸ºé«˜æ€§èƒ½ Web æœåŠ¡å™¨ï¼Œè½»é‡çº§é«˜å¹¶å‘æœåŠ¡å™¨ Nginx å°±åº”è¿è€Œç”Ÿäº†ã€‚</p><p>ä¿„ç½—æ–¯çš„å·¥ç¨‹å¸ˆ Igor Sysoevï¼Œä»–åœ¨ä¸º Rambler Media å·¥ä½œæœŸé—´ï¼Œä½¿ç”¨ C è¯­è¨€å¼€å‘äº† Nginxã€‚</p><p>Nginx ä½œä¸º Web æœåŠ¡å™¨ä¸€ç›´ä¸º Rambler Media æä¾›å‡ºè‰²è€Œåˆç¨³å®šçš„æœåŠ¡ã€‚ç„¶åå‘¢ï¼ŒIgor Sysoev å°† Nginx ä»£ç å¼€æºï¼Œå¹¶ä¸”èµ‹äºˆè‡ªç”±è½¯ä»¶è®¸å¯è¯ã€‚</p><p><strong>ç”±äºä»¥ä¸‹è¿™å‡ ç‚¹ï¼Œæ‰€ä»¥ï¼ŒNginx ç«äº†ï¼š</strong></p><ul><li>Nginx ä½¿ç”¨åŸºäºäº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œä½¿å¾—å…¶å¯ä»¥æ”¯æŒæ•°ä»¥ç™¾ä¸‡çº§åˆ«çš„ TCP è¿æ¥ã€‚</li><li>é«˜åº¦çš„æ¨¡å—åŒ–å’Œè‡ªç”±è½¯ä»¶è®¸å¯è¯ä½¿å¾—ç¬¬ä¸‰æ–¹æ¨¡å—å±‚å‡ºä¸ç©·ï¼ˆè¿™æ˜¯ä¸ªå¼€æºçš„æ—¶ä»£å•Šï¼‰ã€‚</li><li>Nginx æ˜¯ä¸€ä¸ªè·¨å¹³å°æœåŠ¡å™¨ï¼Œå¯ä»¥è¿è¡Œåœ¨ Linuxã€Windowsã€FreeBSDã€Solarisã€AIXã€Mac OS ç­‰æ“ä½œç³»ç»Ÿä¸Šã€‚</li><li>è¿™äº›ä¼˜ç§€çš„è®¾è®¡å¸¦æ¥çš„æå¤§çš„ç¨³å®šæ€§ã€‚</li></ul><h2 id="Nginx-åŸºæœ¬æ¦‚å¿µ"><a href="#Nginx-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="NginxÂ åŸºæœ¬æ¦‚å¿µ"></a><strong>NginxÂ åŸºæœ¬æ¦‚å¿µ</strong></h2><h3 id="æ­£å‘ä»£ç†ä¸åå‘ä»£ç†"><a href="#æ­£å‘ä»£ç†ä¸åå‘ä»£ç†" class="headerlink" title="æ­£å‘ä»£ç†ä¸åå‘ä»£ç†"></a>æ­£å‘ä»£ç†ä¸åå‘ä»£ç†</h3><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œé¦–å…ˆå…ˆæ¥äº†è§£ä¸€ä¸‹ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œnginxæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åå‘ä»£ç†æœåŠ¡å™¨é‚£ä¹ˆä»€ä¹ˆæ˜¯åå‘ä»£ç†å‘¢ï¼Ÿ</p><p>ä»£ç†æ˜¯åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´å‡è®¾çš„ä¸€å±‚æœåŠ¡å™¨ï¼Œä»£ç†å°†æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚å¹¶å°†å®ƒè½¬å‘ç»™æœåŠ¡å™¨ï¼Œç„¶åå°†æœåŠ¡ç«¯çš„å“åº”è½¬å‘ç»™å®¢æˆ·ç«¯ã€‚</p><p>ä¸ç®¡æ˜¯æ­£å‘ä»£ç†è¿˜æ˜¯åå‘ä»£ç†ï¼Œå®ç°çš„éƒ½æ˜¯ä¸Šé¢çš„åŠŸèƒ½ã€‚</p><p>å¦‚æœä½ å¯¹OSI ä¸ƒå±‚æ¨¡å‹ä¸ TCP&#x2F;IP å››å±‚æ¨¡å‹ä¸æ˜¯å¾ˆç†Ÿæ‚‰å¯ä»¥å†å›é¡¾ä¸‹</p><blockquote><p>æ­£å‘ä»£ç†</p></blockquote><p>æ­£å‘ä»£ç†ï¼ˆforwardï¼‰æ„æ€æ˜¯ä¸€ä¸ªä½äºå®¢æˆ·ç«¯å’ŒåŸå§‹æœåŠ¡å™¨ (origin server) ä¹‹é—´çš„æœåŠ¡å™¨ï¼Œä¸ºäº†ä»åŸå§‹æœåŠ¡å™¨å–å¾—å†…å®¹ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€ä¸€ä¸ªè¯·æ±‚å¹¶æŒ‡å®šç›®æ ‡ (åŸå§‹æœåŠ¡å™¨)ï¼Œç„¶åä»£ç†å‘åŸå§‹æœåŠ¡å™¨è½¬äº¤è¯·æ±‚å¹¶å°†è·å¾—çš„å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>æ­£å‘ä»£ç†æ˜¯ä¸ºæˆ‘ä»¬æœåŠ¡çš„ï¼Œå³ä¸ºå®¢æˆ·ç«¯æœåŠ¡çš„ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ ¹æ®æ­£å‘ä»£ç†è®¿é—®åˆ°å®ƒæœ¬èº«æ— æ³•è®¿é—®åˆ°çš„æœåŠ¡å™¨èµ„æºã€‚</p><p>æ­£å‘ä»£ç†å¯¹æˆ‘ä»¬æ˜¯é€æ˜çš„ï¼Œå¯¹æœåŠ¡ç«¯æ˜¯éé€æ˜çš„ï¼Œå³æœåŠ¡ç«¯å¹¶ä¸çŸ¥é“è‡ªå·±æ”¶åˆ°çš„æ˜¯æ¥è‡ªä»£ç†çš„è®¿é—®è¿˜æ˜¯æ¥è‡ªçœŸå®å®¢æˆ·ç«¯çš„è®¿é—®ã€‚</p><blockquote><p>åå‘ä»£ç†</p></blockquote><p>åå‘ä»£ç†ï¼ˆReverse Proxyï¼‰æ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å— internet ä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™ internet ä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ã€‚</p><p>åå‘ä»£ç†æ˜¯ä¸ºæœåŠ¡ç«¯æœåŠ¡çš„ï¼Œåå‘ä»£ç†å¯ä»¥å¸®åŠ©æœåŠ¡å™¨æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¸®åŠ©æœåŠ¡å™¨åšè¯·æ±‚è½¬å‘ï¼Œè´Ÿè½½å‡è¡¡ç­‰ã€‚</p><p>åå‘ä»£ç†å¯¹æœåŠ¡ç«¯æ˜¯é€æ˜çš„ï¼Œå¯¹æˆ‘ä»¬æ˜¯éé€æ˜çš„ï¼Œå³æˆ‘ä»¬å¹¶ä¸çŸ¥é“è‡ªå·±è®¿é—®çš„æ˜¯ä»£ç†æœåŠ¡å™¨ï¼Œè€ŒæœåŠ¡å™¨çŸ¥é“åå‘ä»£ç†åœ¨ä¸ºä»–æœåŠ¡ã€‚</p><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><p>å¦‚æœè¯·æ±‚æ•°è¿‡å¤§ï¼Œå•ä¸ªæœåŠ¡å™¨è§£å†³ä¸äº†ï¼Œæˆ‘ä»¬å¢åŠ æœåŠ¡å™¨çš„æ•°é‡ï¼Œç„¶åå°†è¯·æ±‚åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†åŸå…ˆè¯·æ±‚é›†ä¸­åˆ°å•ä¸ªæœåŠ¡å™¨çš„æƒ…å†µæ”¹ä¸ºè¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°±æ˜¯è´Ÿè½½å‡è¡¡ã€‚</p><p>Upstream æŒ‡å®šåç«¯æœåŠ¡å™¨åœ°å€åˆ—è¡¨ï¼Œåœ¨ server ä¸­æ‹¦æˆªå“åº”è¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ° Upstream ä¸­é…ç½®çš„æœåŠ¡å™¨åˆ—è¡¨ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> balanceServer &#123;    <br><span class="hljs-attribute">server</span> <span class="hljs-number">10.1.22.33:12345</span>;    <br><span class="hljs-attribute">server</span> <span class="hljs-number">10.1.22.34:12345</span>;<br>    <span class="hljs-attribute">server</span> <span class="hljs-number">10.1.22.35:12345</span>;<br>&#125;<br><span class="hljs-section">server</span> &#123;    <br><span class="hljs-attribute">server_name</span>  fe.server.com;    <br><span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>;    <br><span class="hljs-section">location</span> /api &#123;       <br><span class="hljs-attribute">proxy_pass</span> &lt;http://balanceServer&gt;;  <br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„é…ç½®åªæ˜¯æŒ‡å®šäº† nginx éœ€è¦è½¬å‘çš„æœåŠ¡ç«¯åˆ—è¡¨ï¼Œå¹¶æ²¡æœ‰æŒ‡å®šåˆ†é…ç­–ç•¥ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹é‡‡ç”¨çš„æ˜¯è½®è¯¢ç­–ç•¥ï¼Œå°†æ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚è½®è¯¢åˆ†é…ç»™æœåŠ¡ç«¯ã€‚è¿™ç§ç­–ç•¥æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ï¼Œä½†æ˜¯å¦‚æœå…¶ä¸­æŸä¸€å°æœåŠ¡å™¨å‹åŠ›å¤ªå¤§ï¼Œå‡ºç°å»¶è¿Ÿï¼Œä¼šå½±å“æ‰€æœ‰åˆ†é…åœ¨è¿™å°æœåŠ¡å™¨ä¸‹çš„ç”¨æˆ·ã€‚</p><p><strong>Nginxæ”¯æŒçš„è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³•æ–¹å¼å¦‚ä¸‹ï¼š</strong></p><p><strong>weightè½®è¯¢(é»˜è®¤ï¼Œå¸¸ç”¨)ï¼š</strong>æ¥æ”¶åˆ°çš„è¯·æ±‚æŒ‰ç…§æƒé‡åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå³ä½¿åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼ŒæŸä¸€å°åç«¯æœåŠ¡å™¨å®•æœºï¼ŒNginxä¼šè‡ªåŠ¨å°†è¯¥æœåŠ¡å™¨å‰”é™¤å‡ºé˜Ÿåˆ—ï¼Œè¯·æ±‚å—ç†æƒ…å†µä¸ä¼šå—åˆ°ä»»ä½•å½±å“ã€‚è¿™ç§æ–¹å¼ä¸‹ï¼Œå¯ä»¥ç»™ä¸åŒçš„åç«¯æœåŠ¡å™¨è®¾ç½®ä¸€ä¸ªæƒé‡å€¼(weight)ï¼Œç”¨äºè°ƒæ•´ä¸åŒçš„æœåŠ¡å™¨ä¸Šè¯·æ±‚çš„åˆ†é…ç‡ï¼›æƒé‡æ•°æ®è¶Šå¤§ï¼Œè¢«åˆ†é…åˆ°è¯·æ±‚çš„å‡ ç‡è¶Šå¤§ï¼›è¯¥æƒé‡å€¼ï¼Œä¸»è¦æ˜¯é’ˆå¯¹å®é™…å·¥ä½œç¯å¢ƒä¸­ä¸åŒçš„åç«¯æœåŠ¡å™¨ç¡¬ä»¶é…ç½®è¿›è¡Œè°ƒæ•´çš„ã€‚ip_hashï¼ˆå¸¸ç”¨ï¼‰ï¼šæ¯ä¸ªè¯·æ±‚æŒ‰ç…§å‘èµ·å®¢æˆ·ç«¯çš„ipçš„hashç»“æœè¿›è¡ŒåŒ¹é…ï¼Œè¿™æ ·çš„ç®—æ³•ä¸‹ä¸€ä¸ªå›ºå®šipåœ°å€çš„å®¢æˆ·ç«¯æ€»ä¼šè®¿é—®åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œè¿™ä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†é›†ç¾¤éƒ¨ç½²ç¯å¢ƒä¸‹sessionå…±äº«çš„é—®é¢˜ã€‚</p><p><strong>fairï¼š</strong>æ™ºèƒ½è°ƒæ•´è°ƒåº¦ç®—æ³•ï¼ŒåŠ¨æ€çš„æ ¹æ®åç«¯æœåŠ¡å™¨çš„è¯·æ±‚å¤„ç†åˆ°å“åº”çš„æ—¶é—´è¿›è¡Œå‡è¡¡åˆ†é…ï¼Œå“åº”æ—¶é—´çŸ­å¤„ç†æ•ˆç‡é«˜çš„æœåŠ¡å™¨åˆ†é…åˆ°è¯·æ±‚çš„æ¦‚ç‡é«˜ï¼Œå“åº”æ—¶é—´é•¿å¤„ç†æ•ˆç‡ä½çš„æœåŠ¡å™¨åˆ†é…åˆ°çš„è¯·æ±‚å°‘ï¼›ç»“åˆäº†å‰ä¸¤è€…çš„ä¼˜ç‚¹çš„ä¸€ç§è°ƒåº¦ç®—æ³•ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯Nginxé»˜è®¤ä¸æ”¯æŒfairç®—æ³•ï¼Œå¦‚æœè¦ä½¿ç”¨è¿™ç§è°ƒåº¦ç®—æ³•ï¼Œè¯·å®‰è£…upstream_fairæ¨¡å—ã€‚url_hashï¼šæŒ‰ç…§è®¿é—®çš„urlçš„hashç»“æœåˆ†é…è¯·æ±‚ï¼Œæ¯ä¸ªè¯·æ±‚çš„urlä¼šæŒ‡å‘åç«¯å›ºå®šçš„æŸä¸ªæœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨Nginxä½œä¸ºé™æ€æœåŠ¡å™¨çš„æƒ…å†µä¸‹æé«˜ç¼“å­˜æ•ˆç‡ã€‚åŒæ ·è¦æ³¨æ„Nginxé»˜è®¤ä¸æ”¯æŒè¿™ç§è°ƒåº¦ç®—æ³•ï¼Œè¦ä½¿ç”¨çš„è¯éœ€è¦å®‰è£…Nginxçš„hashè½¯ä»¶åŒ…ã€‚</p><h3 id="åŠ¨é™åˆ†ç¦»"><a href="#åŠ¨é™åˆ†ç¦»" class="headerlink" title="åŠ¨é™åˆ†ç¦»"></a>åŠ¨é™åˆ†ç¦»</h3><p>ä¸ºäº†åŠ å¿«æœåŠ¡å™¨çš„è§£æé€Ÿåº¦ï¼Œå¯ä»¥æŠŠåŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢äº¤ç»™ä¸åŒçš„æœåŠ¡å™¨æ¥è§£æï¼ŒåŠ å¿«è§£æé€Ÿåº¦ï¼Œé™ä½åŸæ¥å•ä¸ªæœåŠ¡å™¨çš„å‹åŠ›ã€‚</p><h3 id="Nginxå¸¸ç”¨å‘½ä»¤"><a href="#Nginxå¸¸ç”¨å‘½ä»¤" class="headerlink" title="Nginxå¸¸ç”¨å‘½ä»¤"></a>Nginxå¸¸ç”¨å‘½ä»¤</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-comment"># å¿«é€Ÿå…³é—­Nginxï¼Œå¯èƒ½ä¸ä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œå¹¶è¿…é€Ÿç»ˆæ­¢webæœåŠ¡</span><br>nginx -s stop<br><span class="hljs-comment"># å¹³ç¨³å…³é—­Nginxï¼Œä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œæœ‰å®‰æ’çš„ç»“æŸwebæœåŠ¡</span><br>nginx -s quit<br><span class="hljs-comment"># å› æ”¹å˜äº†Nginxç›¸å…³é…ç½®ï¼Œéœ€è¦é‡æ–°åŠ è½½é…ç½®è€Œé‡è½½</span><br>nginx -s reload<br><span class="hljs-comment"># é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶</span><br>nginx -s reopen<br><span class="hljs-comment"># ä¸º Nginx æŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¥ä»£æ›¿ç¼ºçœçš„</span><br>nginx -c filename<br><span class="hljs-comment"># ä¸è¿è¡Œï¼Œè€Œä»…ä»…æµ‹è¯•é…ç½®æ–‡ä»¶ã€‚nginx å°†æ£€æŸ¥é…ç½®æ–‡ä»¶çš„è¯­æ³•çš„æ­£ç¡®æ€§ï¼Œå¹¶å°è¯•æ‰“å¼€é…ç½®æ–‡ä»¶ä¸­æ‰€å¼•ç”¨åˆ°çš„æ–‡ä»¶</span><br>nginx -t<br><span class="hljs-comment">#  æ˜¾ç¤º nginx çš„ç‰ˆæœ¬</span><br>nginx -v<br><span class="hljs-comment"># æ˜¾ç¤º nginx çš„ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å’Œé…ç½®å‚æ•°</span><br>nginx -V<br><span class="hljs-comment"># æ ¼å¼æ¢æ˜¾ç¤º nginx é…ç½®å‚æ•°2&gt;&amp;1 </span><br>nginx -V |<span class="hljs-string"> xargs -n12&gt;&amp;1 </span><br><span class="hljs-string">nginx -V </span>|<span class="hljs-string"> xargs -n1 </span>|<span class="hljs-string"> grep lua</span><br></code></pre></td></tr></table></figure><p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©Nginx</strong></p><p>Nginxæ˜¯ä¸€æ¬¾è‡ªç”±çš„ã€å¼€æºçš„ã€é«˜æ€§èƒ½çš„HTTPæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼›åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªIMAPã€POP3ã€SMTPä»£ç†æœåŠ¡å™¨ï¼›Nginxå¯ä»¥ä½œä¸ºä¸€ä¸ªHTTPæœåŠ¡å™¨è¿›è¡Œç½‘ç«™çš„å‘å¸ƒå¤„ç†ï¼Œå¦å¤–Nginxå¯ä»¥ä½œä¸ºåå‘ä»£ç†è¿›è¡Œè´Ÿè½½å‡è¡¡çš„å®ç°ã€‚åœ¨Nginxç½‘ç«™ä¸Šï¼Œå…¶åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li>HTTPå’ŒHTTPSï¼ˆTLS &#x2F; SSL &#x2F; SNIï¼‰</li><li>è¶…å¿«é€Ÿçš„WebæœåŠ¡å™¨ç”¨äºé™æ€å†…å®¹</li><li>FastCGIï¼ŒWSGIï¼ŒSCGIç”¨äºåŠ¨æ€å†…å®¹</li><li>å…·æœ‰è´Ÿè½½å¹³è¡¡å’Œç¼“å­˜åŠŸèƒ½çš„åŠ é€ŸWebä»£ç†</li><li>ä¸é—´æ–­å®æ—¶äºŒè¿›åˆ¶å‡çº§å’Œé…ç½®</li><li>å‹ç¼©å’Œå†…å®¹è¿‡æ»¤å™¨</li><li>è™šæ‹Ÿä¸»æœº</li><li>FLVå’ŒMP4çš„åª’ä½“æµ</li><li>å¸¦å®½å’Œè¿æ¥ç­–ç•¥</li><li>å…¨é¢çš„è®¿é—®æ§åˆ¶</li><li>è‡ªå®šä¹‰æ—¥å¿—</li><li>åµŒå…¥å¼è„šæœ¬</li><li>å¸¦æœ‰TLSçš„SMTP &#x2F; IMAP &#x2F; POP3çš„é‚®ä»¶ä»£ç†</li><li>é€»è¾‘ï¼Œçµæ´»ï¼Œå¯æ‰©å±•çš„é…ç½®</li><li>åœ¨Linuxï¼ŒFreeBSDï¼ŒMac OS Xï¼ŒSolariså’ŒWindowsä¸Šè¿è¡Œ</li></ul><h2 id="Nginxæœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š"><a href="#Nginxæœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š" class="headerlink" title="Nginxæœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š"></a><strong>Nginxæœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š</strong></h2><h3 id="IOå¤šè·¯å¤ç”¨epollï¼ˆIOå¤ç”¨ï¼‰"><a href="#IOå¤šè·¯å¤ç”¨epollï¼ˆIOå¤ç”¨ï¼‰" class="headerlink" title="IOå¤šè·¯å¤ç”¨epollï¼ˆIOå¤ç”¨ï¼‰"></a>IOå¤šè·¯å¤ç”¨epollï¼ˆIOå¤ç”¨ï¼‰</h3><p>å¦‚ä½•ç†è§£å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­å§ï¼</p><p>æœ‰Aã€Bã€Cä¸‰ä¸ªè€å¸ˆï¼Œä»–ä»¬éƒ½é‡åˆ°ä¸€ä¸ªéš¾é¢˜ï¼Œè¦å¸®åŠ©ä¸€ä¸ªç­çº§çš„å­¦ç”Ÿè§£å†³è¯¾å ‚ä½œä¸šã€‚è€å¸ˆAé‡‡ç”¨ä»ç¬¬ä¸€æ’å¼€å§‹ä¸€ä¸ªå­¦ç”Ÿä¸€ä¸ªå­¦ç”Ÿè½®æµè§£ç­”çš„æ–¹å¼å»å›ç­”é—®é¢˜ï¼Œè€å¸ˆAæµªè´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œå¹¶ä¸”æœ‰çš„å­¦ç”Ÿä½œä¸šè¿˜æ²¡æœ‰å®Œæˆå‘¢ï¼Œè€å¸ˆå°±æ¥äº†ï¼Œååå¤å¤æ•ˆç‡ææ…¢ã€‚è€å¸ˆBæ˜¯ä¸€ä¸ªå¿è€…ï¼Œä»–å‘ç°è€å¸ˆAçš„æ–¹æ³•è¡Œä¸é€šï¼Œäºæ˜¯ä»–ä½¿ç”¨äº†å½±åˆ†èº«æœ¯ï¼Œåˆ†èº«å‡ºå¥½å‡ ä¸ªè‡ªå·±åŒä¸€æ—¶é—´å»å¸®å¥½å‡ ä¸ªåŒå­¦å›ç­”é—®é¢˜ï¼Œæœ€åè¿˜æ²¡å›ç­”å®Œï¼Œè€å¸ˆBæ¶ˆè€—å…‰äº†èƒ½é‡ç´¯å€’äº†ã€‚</p><p>è€å¸ˆCæ¯”è¾ƒç²¾æ˜ï¼Œä»–å‘Šè¯‰å­¦ç”Ÿï¼Œè°å®Œæˆäº†ä½œä¸šä¸¾æ‰‹ï¼Œæœ‰ä¸¾æ‰‹çš„åŒå­¦ä»–æ‰å»æŒ‡å¯¼é—®é¢˜ï¼Œä»–è®©å­¦ç”Ÿä¸»åŠ¨å‘å£°ï¼Œåˆ†å¼€äº†â€œå¹¶å‘â€ã€‚</p><p>è¿™ä¸ªè€å¸ˆCå°±æ˜¯Nginxã€‚</p><h3 id="è½»é‡çº§"><a href="#è½»é‡çº§" class="headerlink" title="è½»é‡çº§"></a>è½»é‡çº§</h3><ul><li>åŠŸèƒ½æ¨¡å—å°‘ - Nginxä»…ä¿ç•™äº†HTTPéœ€è¦çš„æ¨¡å—ï¼Œå…¶ä»–éƒ½ç”¨æ’ä»¶çš„æ–¹å¼ï¼Œåå¤©æ·»åŠ </li><li>ä»£ç æ¨¡å—åŒ– - æ›´é€‚åˆäºŒæ¬¡å¼€å‘ï¼Œå¦‚é˜¿é‡Œå·´å·´Tengine</li></ul><h3 id="CPUäº²å’Œ"><a href="#CPUäº²å’Œ" class="headerlink" title="CPUäº²å’Œ"></a>CPUäº²å’Œ</h3><p>æŠŠCPUæ ¸å¿ƒå’ŒNginxå·¥ä½œè¿›ç¨‹ç»‘å®šï¼ŒæŠŠæ¯ä¸ªworkerè¿›ç¨‹å›ºå®šåœ¨ä¸€ä¸ªCPUä¸Šæ‰§è¡Œï¼Œå‡å°‘åˆ‡æ¢CPUçš„cache missï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</p><p><strong>Nginxé…ç½®</strong></p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-section">#æ‰“å¼€ä¸»é…ç½®æ–‡ä»¶ï¼Œè‹¥ä½ æ˜¯ç”¨lnmpç¯å¢ƒå®‰è£…vim /usr/local/nginx/conf/nginx.conf</span><br><span class="hljs-section">----------------------------------------</span><br>user #è®¾ç½®nginxæœåŠ¡çš„ç³»ç»Ÿä½¿ç”¨ç”¨æˆ·<br>worker<span class="hljs-emphasis">_processes #å·¥ä½œè¿›ç¨‹æ•° ä¸€èˆ¬æƒ…å†µä¸CPUæ ¸æ•°ä¿æŒä¸€è‡´</span><br><span class="hljs-emphasis">error_log #nginxçš„é”™è¯¯æ—¥å¿—</span><br><span class="hljs-emphasis">pid #nginxå¯åŠ¨æ—¶çš„pid</span><br><span class="hljs-emphasis">events &#123;    </span><br><span class="hljs-emphasis">worker_</span>connections#æ¯ä¸ªè¿›ç¨‹å…è®¸æœ€å¤§è¿æ¥æ•°    <br><span class="hljs-code">use#nginxä½¿ç”¨çš„å†…æ ¸æ¨¡å‹</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨ nginx çš„ http æœåŠ¡ï¼Œåœ¨é…ç½®æ–‡ä»¶ nginx.conf ä¸­çš„ http åŒºåŸŸå†…ï¼Œé…ç½®æ— æ•°ä¸ª server ï¼Œæ¯ä¸€ä¸ª server å¯¹åº”è¿™ä¸€ä¸ªè™šæ‹Ÿä¸»æœºæˆ–è€…åŸŸåã€‚</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">http &#123;<br>    <span class="hljs-string">...</span> <span class="hljs-string">...</span>        <span class="hljs-comment">#åé¢å†è¯¦ç»†ä»‹ç» http é…ç½®é¡¹ç›®    </span><br>server &#123;        <br>listen 80                          <span class="hljs-comment">#ç›‘å¬ç«¯å£;        </span><br>server_name localhost              <span class="hljs-comment">#åœ°å€        </span><br>location / &#123;                       <span class="hljs-comment">#è®¿é—®é¦–é¡µè·¯å¾„            </span><br>root <span class="hljs-string">/xxx/xxx/index.html</span>       <span class="hljs-comment">#é»˜è®¤ç›®å½•            </span><br>index index.html index.htm     <span class="hljs-comment">#é»˜è®¤æ–‡ä»¶        </span><br>&#125;        <br>error_page  500 504   <span class="hljs-string">/50x.html</span>    <span class="hljs-comment">#å½“å‡ºç°ä»¥ä¸ŠçŠ¶æ€ç æ—¶ä»æ–°å®šä¹‰åˆ°50x.html        </span><br>location = <span class="hljs-string">/50x.html</span> &#123;             <span class="hljs-comment">#å½“è®¿é—®50x.htmlæ—¶            </span><br>root <span class="hljs-string">/xxx/xxx/html</span>             <span class="hljs-comment">#50x.html é¡µé¢æ‰€åœ¨ä½ç½®        </span><br>&#125;    <br>&#125;    <br>server &#123;        <br><span class="hljs-string">...</span> <span class="hljs-string">...</span>    <br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ª server å¯ä»¥å‡ºç°å¤šä¸ª location ï¼Œæˆ‘ä»¬å¯¹ä¸åŒçš„è®¿é—®è·¯å¾„è¿›è¡Œä¸åŒæƒ…å†µçš„é…ç½®ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ http çš„é…ç½®è¯¦æƒ…</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs clean">http &#123;    <br>sendfile  on#é«˜æ•ˆä¼ è¾“æ–‡ä»¶çš„æ¨¡å¼ ä¸€å®šè¦å¼€å¯    keepalive_timeout   <span class="hljs-number">65</span>#å®¢æˆ·ç«¯æœåŠ¡ç«¯è¯·æ±‚è¶…æ—¶æ—¶é—´    log_format  main   XXX#å®šä¹‰æ—¥å¿—æ ¼å¼ ä»£å·ä¸ºmain    access_log  /usr/local/access.log  main#æ—¥å¿—ä¿å­˜åœ°å€ æ ¼å¼ä»£ç  main<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nginxè½¬å‘åä¼šé»˜è®¤ä¼šè‡ªåŠ¨å»æ‰è¯·æ±‚å¤´ä¸­å¸¦æœ‰ä¸‹åˆ’çº¿çš„å‚æ•°</title>
    <link href="/2022/04/05/Server/Nginx/Nginx/"/>
    <url>/2022/04/05/Server/Nginx/Nginx/</url>
    
    <content type="html"><![CDATA[<h2 id="Nginxè½¬å‘åä¼šé»˜è®¤ä¼šè‡ªåŠ¨å»æ‰è¯·æ±‚å¤´ä¸­å¸¦æœ‰ä¸‹åˆ’çº¿çš„å‚æ•°"><a href="#Nginxè½¬å‘åä¼šé»˜è®¤ä¼šè‡ªåŠ¨å»æ‰è¯·æ±‚å¤´ä¸­å¸¦æœ‰ä¸‹åˆ’çº¿çš„å‚æ•°" class="headerlink" title="Nginxè½¬å‘åä¼šé»˜è®¤ä¼šè‡ªåŠ¨å»æ‰è¯·æ±‚å¤´ä¸­å¸¦æœ‰ä¸‹åˆ’çº¿çš„å‚æ•°"></a>Nginxè½¬å‘åä¼šé»˜è®¤ä¼šè‡ªåŠ¨å»æ‰è¯·æ±‚å¤´ä¸­å¸¦æœ‰ä¸‹åˆ’çº¿çš„å‚æ•°</h2><p>è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š</p><p>åœ¨nginxé‡Œçš„nginx.confé…ç½®æ–‡ä»¶ä¸­çš„httpéƒ¨åˆ†ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><blockquote><p>è®°å¾—å¸¦ä¸Šç»“å°¾çš„åˆ†å·ï¼</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs conf">underscores_in_headers on; ï¼ˆé»˜è®¤ underscores_in_headers ä¸ºoffï¼‰<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200716093635506.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-å¼€å§‹</title>
    <link href="/2022/04/05/Vim/ch01_starting_vim/"/>
    <url>/2022/04/05/Vim/ch01_starting_vim/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬1ç« -VIMèµ·æ­¥"><a href="#ç¬¬1ç« -VIMèµ·æ­¥" class="headerlink" title="ç¬¬1ç«  VIMèµ·æ­¥"></a>ç¬¬1ç«  VIMèµ·æ­¥</h1><p>åœ¨æœ¬ç« ï¼Œæ‚¨å°†äº†è§£ä»ç»ˆç«¯å¯åŠ¨Vimçš„å‡ ç§ä¸åŒæ–¹æ³•ã€‚æˆ‘å†™è¿™æœ¬æ•™ç¨‹æ—¶ä½¿ç”¨çš„Vimç‰ˆæœ¬æ˜¯8.2ã€‚å¦‚æœæ‚¨ä½¿ç”¨Neovimæˆ–è€ç‰ˆæœ¬çš„Vimï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ–¹æ³•æ˜¯é€šç”¨çš„ï¼Œä½†æ³¨æ„ä¸ªåˆ«å‘½ä»¤å¯èƒ½æ— æ•ˆã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æˆ‘ä¸ä¼šç»™å‡ºåœ¨æŸå°ç‰¹å®šæœºå™¨ä¸Šå®‰è£…Vimçš„è¯¦ç»†æŒ‡ä»¤ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œå¤§éƒ¨åˆ†Unix-basedç”µè„‘åº”è¯¥é¢„è£…äº†Vimã€‚å¦‚æœæ²¡æœ‰ï¼Œå¤§éƒ¨åˆ†å‘è¡Œç‰ˆä¹Ÿåº”è¯¥æœ‰å…³äºå¦‚ä½•å®‰è£…Vimçš„æŒ‡ä»¤ã€‚</p><p>ä»Vimçš„å®˜æ–¹ç½‘ç«™æˆ–å®˜æ–¹ä»“åº“å¯ä»¥è·å¾—ä¸‹è½½é“¾æ¥ï¼š</p><ul><li><a href="https://www.vim.org/download.php">Vim å®˜ç½‘</a></li><li><a href="https://github.com/vim/vim">Vim å®˜æ–¹ä»“åº“</a></li><li><a href="https://hub.fastgit.org/vim/vim">Vim å®˜æ–¹ä»“åº“é•œåƒ</a></li></ul><h2 id="Vimå‘½ä»¤"><a href="#Vimå‘½ä»¤" class="headerlink" title="Vimå‘½ä»¤"></a>Vimå‘½ä»¤</h2><p>å½“æ‚¨å®‰è£…å¥½Vimåï¼Œåœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">vim<br></code></pre></td></tr></table></figure><p>æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªä»‹ç»ç•Œé¢ã€‚è¿™å°±æ˜¯æ‚¨ç”¨æ¥å¤„ç†æ–‡æœ¬çš„å·¥ä½œåŒºã€‚ä¸åƒå…¶å®ƒå¤§éƒ¨åˆ†æ–‡æœ¬ç¼–è¾‘å™¨å’ŒIDEï¼ŒVimæ˜¯ä¸€ä¸ªæ¨¡å¼ç¼–è¾‘å™¨ã€‚å¦‚æœæ‚¨æƒ³è¾“å…¥â€helloâ€ï¼Œæ‚¨éœ€è¦ä½¿ç”¨â€™iâ€™å‘½ä»¤åˆ‡æ¢åˆ°æ’å…¥æ¨¡å¼ã€‚æŒ‰ä¸‹â€™ihello<Esc>â€˜å¯ä»¥åœ¨å·¥ä½œåŒºæ’å…¥æ–‡æœ¬â€helloâ€ã€‚</p><h2 id="é€€å‡ºVim"><a href="#é€€å‡ºVim" class="headerlink" title="é€€å‡ºVim"></a>é€€å‡ºVim</h2><p>æœ‰å¥½å‡ ç§ä¸åŒçš„æ–¹æ³•éƒ½å¯ä»¥é€€å‡ºVimã€‚ï¼ˆè¯‘è€…æ³¨ï¼šåœ¨stackflowè®ºå›ä¸Šï¼Œæœ‰ä¸ªè‘—åçš„é—®é¢˜â€œå¦‚ä½•é€€å‡ºVimâ€ï¼Œäº”å¹´æ¥ï¼Œæœ‰è¶…è¿‡100ä¸‡å¼€å‘è€…é‡åˆ°ç›¸åŒçš„é—®é¢˜ã€‚^_^ï¼Œè¿™ä»¶äº‹å·²ç»æˆä¸ºäº†å¼€å‘è€…ä¸­çš„ä¸€ä¸ªæ¢—ï¼‰ã€‚æœ€å¸¸ç”¨çš„é€€å‡ºæ–¹æ³•æ˜¯åœ¨Vimä¸­è¾“å…¥ï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:quit</span><br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥ä½¿ç”¨ç®€å†™<code>:q</code>ã€‚è¿™æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œæ¨¡å¼çš„å‘½ä»¤(command-line modeï¼šVimçš„å¦ä¸€ç§æ¨¡å¼)ã€‚å¦‚æœæ‚¨åœ¨æ™®é€šæ¨¡å¼è¾“å…¥<code>:</code>ï¼Œå…‰æ ‡å°†ç§»åŠ¨åˆ°å±å¹•åº•éƒ¨ï¼Œåœ¨è¿™é‡Œæ‚¨å¯ä»¥è¾“å…¥å‘½ä»¤ã€‚åœ¨åé¢çš„ç¬¬15ç« ï¼Œæ‚¨ä¼šå­¦åˆ°å…³äºå‘½ä»¤è¡Œæ¨¡å¼æ›´å¤šä¿¡æ¯ã€‚å¦‚æœæ‚¨å¤„äºæ’å…¥æ¨¡å¼ï¼ŒæŒ‰ä¸‹<code>:</code>å°†ä¼šåœ¨å±å¹•ä¸Šç›´æ¥æ˜¾ç¤ºâ€:â€(å†’å·)ã€‚å› æ­¤ï¼Œæ‚¨éœ€è¦æŒ‰ä¸‹<code>&lt;Esc&gt;</code>é”®åˆ‡æ¢å›æ™®é€šæ¨¡å¼ã€‚é¡ºå¸¦è¯´ä¸€ä¸‹ï¼Œåœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¹Ÿå¯ä»¥é€šè¿‡æŒ‰<code>&lt;Esc&gt;</code>é”®åˆ‡æ¢å›æ™®é€šæ¨¡å¼ã€‚æ‚¨å°†ä¼šæ³¨æ„åˆ°ï¼Œåœ¨Vimçš„å¥½å‡ ç§æ¨¡å¼ä¸‹éƒ½å¯ä»¥é€šè¿‡æŒ‰<code>&lt;Esc&gt;</code>é”®åˆ‡å›æ™®é€šæ¨¡å¼ã€‚</p><h2 id="ä¿å­˜æ–‡ä»¶"><a href="#ä¿å­˜æ–‡ä»¶" class="headerlink" title="ä¿å­˜æ–‡ä»¶"></a>ä¿å­˜æ–‡ä»¶</h2><p>è‹¥è¦ä¿å­˜æ‚¨çš„ä¿®æ”¹ï¼Œåœ¨Vimä¸­è¾“å…¥ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">:<span class="hljs-built_in">write</span><br></code></pre></td></tr></table></figure><p>æ‚¨ä¹Ÿå¯ä»¥è¾“å…¥ç®€å†™â€™:wâ€™ã€‚å¦‚æœè¿™æ˜¯ä¸€ä¸ªæ–°å»ºçš„æ–‡ä»¶ï¼Œæ‚¨å¿…é¡»ç»™å‡ºæ–‡ä»¶åæ‰èƒ½ä¿å­˜ã€‚ä¸‹é¢çš„å‘½ä»¤ä½¿æ–‡ä»¶ä¿å­˜ä¸ºåä¸ºâ€™file.txtâ€™çš„æ–‡ä»¶ï¼Œåœ¨Vimå‘½ä»¤è¡Œè¿è¡Œï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">:w <span class="hljs-built_in">file</span>.txt<br></code></pre></td></tr></table></figure><p>å¦‚æœæƒ³ä¿å­˜å¹¶é€€å‡ºï¼Œå¯ä»¥å°†â€™:wâ€™å’Œâ€™:qâ€™å‘½ä»¤è”èµ·æ¥ï¼Œåœ¨Vimå‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:wq</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæƒ³ä¸ä¿å­˜ä¿®æ”¹è€Œå¼ºåˆ¶é€€å‡ºï¼Œå¯ä»¥åœ¨â€™:qâ€™å‘½ä»¤ååŠ â€™!â€™ï¼ˆå¹å·ï¼‰,åœ¨Vimå‘½ä»¤è¡Œä¸­ï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:q!</span><br></code></pre></td></tr></table></figure><h2 id="å¸®åŠ©"><a href="#å¸®åŠ©" class="headerlink" title="å¸®åŠ©"></a>å¸®åŠ©</h2><p>åœ¨æœ¬æŒ‡å—å…¨æ–‡ä¸­ï¼Œæˆ‘å°†å‘æ‚¨æåŠå¥½å‡ ç§Vimçš„å¸®åŠ©é¡µé¢ã€‚æ‚¨å¯ä»¥é€šè¿‡è¾“å…¥<code>:help &#123;å‘½ä»¤&#125;</code>(<code>:h</code>æ˜¯ç®€å†™)è¿›å…¥ç›¸å…³å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£ã€‚å¯ä»¥å‘<code>:h</code>å‘½ä»¤ä¼ é€’ä¸»é¢˜ã€å‘½ä»¤åä½œä¸ºå‚æ•°ã€‚æ¯”å¦‚ï¼Œå¦‚æœæƒ³æŸ¥è¯¢é€€å‡ºVimçš„æ–¹æ³•ï¼Œåœ¨vimä¸­è¾“å…¥ï¼š</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cos">:<span class="hljs-keyword">h</span> <span class="hljs-keyword">write</span>-<span class="hljs-keyword">quit</span><br></code></pre></td></tr></table></figure><p>æˆ‘æ˜¯æ€ä¹ˆçŸ¥é“åº”è¯¥æœç´¢â€write-quitâ€è¿™ä¸ªå…³é”®è¯çš„å‘¢ï¼Ÿå®é™…ä¸Šæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œæˆ‘ä»…ä»…åªæ˜¯è¾“å…¥â€™:h quitâ€™ï¼Œç„¶åæŒ‰<code>&lt;Tab&gt;</code>ã€‚Vimä¼šè‡ªåŠ¨æ˜¾ç¤ºç›¸å…³è”çš„å…³é”®è¯ä¾›ç”¨æˆ·é€‰æ‹©ã€‚å¦‚æœæ‚¨éœ€è¦æŸ¥è¯¢ä¸€äº›ä¿¡æ¯ï¼Œåªéœ€è¦è¾“å…¥<code>:h</code>åæ¥å…³é”®è¯ï¼Œç„¶åæŒ‰<code>&lt;Tab&gt;</code>ã€‚</p><h2 id="æ‰“å¼€æ–‡ä»¶"><a href="#æ‰“å¼€æ–‡ä»¶" class="headerlink" title="æ‰“å¼€æ–‡ä»¶"></a>æ‰“å¼€æ–‡ä»¶</h2><p>å¦‚æœæƒ³åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨Vimæ‰“å¼€åä¸º(â€˜hello1.txtâ€™)ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim hello1.txt<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä¸€æ¬¡æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œåœ¨ç»ˆç«¯ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim hello1.txt hello2.txt hello3.txt<br></code></pre></td></tr></table></figure><p>Vimä¼šåœ¨ä¸åŒçš„buffersä¸­æ‰“å¼€â€™hello1.txtâ€™ï¼Œâ€™hello2.txtâ€™ï¼Œâ€™hello3.txtâ€™ã€‚åœ¨ä¸‹ä¸€ç« æ‚¨å°†å­¦åˆ°å…³äºbuffersçš„çŸ¥è¯†ã€‚</p><h2 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h2><p>æ‚¨å¯ä»¥åœ¨ç»ˆç«¯ä¸­å‘<code>vim</code>å‘½ä»¤ä¼ é€’å‚æ•°ã€‚  </p><p>å¦‚æœæƒ³æŸ¥çœ‹Vimçš„å½“å‰ç‰ˆæœ¬ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim --version<br></code></pre></td></tr></table></figure><p>ç»ˆç«¯ä¸­å°†æ˜¾ç¤ºæ‚¨å½“å‰Vimçš„ç‰ˆæœ¬å’Œæ‰€æœ‰æ”¯æŒçš„ç‰¹æ€§ï¼Œâ€™+â€™è¡¨ç¤ºæ”¯æŒçš„ç‰¹æ€§ï¼Œâ€™-â€˜è¡¨ç¤ºä¸æ”¯æŒçš„ç‰¹æ€§ã€‚æœ¬æ•™ç¨‹ä¸­çš„ä¸€äº›æ“ä½œéœ€è¦æ‚¨çš„Vimæ”¯æŒç‰¹å®šçš„ç‰¹æ€§ã€‚æ¯”å¦‚ï¼Œåœ¨åé¢çš„ç« èŠ‚ä¸­æåˆ°å¯ä»¥ä½¿ç”¨<code>:history</code>æŸ¥çœ‹Vimçš„å‘½ä»¤è¡Œå†å²è®°å½•ã€‚æ‚¨çš„Vimå¿…é¡»åŒ…å«<code>+cmdline_history</code>è¿™ä¸€ç‰¹æ€§ï¼Œè¿™æ¡å‘½ä»¤æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚æœæ‚¨é€šè¿‡ä¸»æµçš„å®‰è£…æºä¸‹è½½Vimçš„è¯ï¼Œæ‚¨å®‰è£…çš„Vimæ˜¯æ”¯æŒæ‰€æœ‰ç‰¹æ€§çš„ï¼Œ</p><p>æ‚¨åœ¨ç»ˆç«¯é‡Œåšçš„å¾ˆå¤šäº‹æƒ…éƒ½å¯ä»¥åœ¨Vimå†…éƒ¨å®ç°ã€‚æ¯”å¦‚ï¼Œåœ¨Vimç¨‹åºä¸­ä¹Ÿå¯ä»¥æŸ¥çœ‹å½“å‰Vimç‰ˆæœ¬ï¼Œæ‚¨å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œåœ¨Vimä¸­è¾“å…¥ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">:<span class="hljs-built_in">version</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æƒ³æ‰“å¼€<code>hello.txt</code>æ–‡ä»¶åè¿…é€Ÿæ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œæ‚¨å¯ä»¥å‘<code>vim</code>ä¼ é€’ä¸€ä¸ª<code>+&#123;cmd&#125;</code>é€‰é¡¹ã€‚</p><p>åœ¨Vimä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>:s</code>å‘½ä»¤ï¼ˆ<code>substitue</code>çš„ç¼©å†™ï¼‰æ›¿æ¢æ–‡æœ¬ã€‚å¦‚æœæ‚¨æƒ³æ‰“å¼€<code>hello.txt</code>åç«‹å³å°†æ‰€æœ‰çš„â€pancakeâ€æ›¿æ¢æˆâ€bagelâ€ï¼Œåœ¨ç»ˆç«¯ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim +%s/pancake/bagel/g hello.txt<br></code></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤å¯ä»¥è¢«å åŠ ï¼Œåœ¨ç»ˆç«¯ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim +%s/pancake/bagel/g +%s/bagel/egg/g +%s/egg/donut/g hello.txt<br></code></pre></td></tr></table></figure><p>Vimä¼šå°†æ‰€æœ‰â€pancakeâ€ å®ä¾‹æ›¿æ¢ä¸ºâ€bagelâ€ï¼Œç„¶åå°†æ‰€æœ‰â€bagelâ€æ›¿æ¢ä¸ºâ€eggâ€ï¼Œç„¶åå°†æ‰€æœ‰â€eggâ€æ›¿æ¢ä¸ºâ€donutâ€ï¼ˆåœ¨åé¢çš„ç« èŠ‚ä¸­æ‚¨å°†å­¦åˆ°å¦‚ä½•æ›¿æ¢ï¼‰ã€‚</p><p>æ‚¨åŒæ ·å¯ä»¥ä½¿ç”¨<code>c</code>æ ‡å¿—æ¥ä»£æ›¿<code>+</code>è¯­æ³•ï¼Œåœ¨ç»ˆç«¯ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim -c %s/pancake/bagel/g hello.txt<br>vim -c %s/pancake/bagel/g -c %s/bagel/egg/g -c %s/egg/donut/g hello.txt<br></code></pre></td></tr></table></figure><h2 id="æ‰“å¼€å¤šä¸ªçª—å£"><a href="#æ‰“å¼€å¤šä¸ªçª—å£" class="headerlink" title="æ‰“å¼€å¤šä¸ªçª—å£"></a>æ‰“å¼€å¤šä¸ªçª—å£</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨<code>o</code>å’Œ<code>O</code>é€‰é¡¹ä½¿Vimæ‰“å¼€ååˆ†åˆ«æ˜¾ç¤ºä¸ºæ°´å¹³æˆ–å‚ç›´åˆ†å‰²çš„çª—å£ã€‚</p><p>è‹¥æƒ³å°†Vimæ‰“å¼€ä¸º2ä¸ªæ°´å¹³åˆ†å‰²çš„çª—å£ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim -o2<br></code></pre></td></tr></table></figure><p>è‹¥æƒ³å°†Vimæ‰“å¼€ä¸º5ä¸ªæ°´å¹³åˆ†å‰²çš„çª—å£ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim -o5<br></code></pre></td></tr></table></figure><p>è‹¥æƒ³å°†Vimæ‰“å¼€ä¸º5ä¸ªæ°´å¹³åˆ†å‰²çš„çª—å£ï¼Œå¹¶ä½¿å‰ä¸¤ä¸ªçª—å£æ˜¾ç¤º<code>hello1.txt</code>å’Œ<code>hello2.txt</code>çš„å†…å®¹ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim -o5 hello1.txt hello2.txt<br></code></pre></td></tr></table></figure><p>è‹¥æƒ³å°†Vimæ‰“å¼€ä¸º2ä¸ªå‚ç›´åˆ†å‰²çš„çª—å£ã€5ä¸ªå‚ç›´åˆ†å‰²çš„çª—å£ã€5ä¸ªå‚ç›´åˆ†å‰²çª—å£å¹¶æ˜¾ç¤º2ä¸ªæ–‡ä»¶ï¼Œåœ¨ç»ˆç«¯ä¸­åˆ†åˆ«è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim -O<br>vim -O5<br>vim -O5 hello1.txt hello2.txt<br></code></pre></td></tr></table></figure><h2 id="æŒ‚èµ·"><a href="#æŒ‚èµ·" class="headerlink" title="æŒ‚èµ·"></a>æŒ‚èµ·</h2><p>å¦‚æœæ‚¨ç¼–è¾‘æ—¶æƒ³å°†VimæŒ‚èµ·ï¼Œæ‚¨å¯ä»¥æŒ‰ä¸‹<code>Ctrl-z</code>ã€‚åŒæ ·ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨<code>:stop</code>æˆ–<code>:suspend</code>å‘½ä»¤è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚è‹¥æƒ³ä»æŒ‚èµ·çŠ¶æ€è¿”å›ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œ<code>fg</code>å‘½ä»¤ã€‚</p><h2 id="èªæ˜çš„å¯åŠ¨Vim"><a href="#èªæ˜çš„å¯åŠ¨Vim" class="headerlink" title="èªæ˜çš„å¯åŠ¨Vim"></a>èªæ˜çš„å¯åŠ¨Vim</h2><p>æ‚¨å¯ä»¥å‘<code>vim</code>å‘½ä»¤ä¼ é€’ä¸åŒçš„é€‰é¡¹(option)å’Œæ ‡å¿—(flag)ï¼Œå°±åƒå…¶ä»–ç»ˆç«¯å‘½ä»¤ä¸€æ ·ã€‚å…¶ä¸­ä¸€ä¸ªé€‰é¡¹æ˜¯å‘½ä»¤è¡Œå‘½ä»¤ï¼ˆ<code>+&#123;cmd&#125;</code>æˆ–<code>-c cmd</code>ï¼‰ã€‚å½“æ‚¨è¯»å®Œæœ¬æ•™ç¨‹å­¦åˆ°æ›´å¤šå‘½ä»¤åï¼Œçœ‹çœ‹æ‚¨æ˜¯å¦èƒ½å°†ç›¸åº”å‘½ä»¤åº”ç”¨åˆ°Vimçš„å¯åŠ¨ä¸­ã€‚åŒæ ·ï¼Œä½œä¸ºä¸€ä¸ªç»ˆç«¯å‘½ä»¤ï¼Œæ‚¨å¯ä»¥å°†<code>vim</code>å‘½ä»¤å’Œå…¶ä»–ç»ˆç«¯å‘½ä»¤è”åˆèµ·æ¥ã€‚æ¯”å¦‚ï¼Œæ‚¨å¯ä»¥å°†<code>ls</code>å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°Vimä¸­ç¼–è¾‘ï¼Œå‘½ä»¤æ˜¯<code>ls -l | vim -</code>ã€‚</p><p>è‹¥è¦äº†è§£æ›´å¤šVimç»ˆç«¯å‘½ä»¤ï¼ŒæŸ¥çœ‹<code>man vim</code>ã€‚è‹¥è¦äº†è§£æ›´å¤šå…³äºVimç¼–è¾‘å™¨çš„çŸ¥è¯†ï¼Œç»§ç»­é˜…è¯»æœ¬æ•™ç¨‹ï¼Œå¤šä½¿ç”¨<code>:help</code>å‘½ä»¤ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-ç¼“å†²åŒº(Buffers)ï¼Œçª—å£(Windows)å’Œé€‰é¡¹å¡(Tabs)</title>
    <link href="/2022/04/05/Vim/ch02_buffers_windows_tabs/"/>
    <url>/2022/04/05/Vim/ch02_buffers_windows_tabs/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬2ç« -ç¼“å†²åŒº-Buffers-ï¼Œçª—å£-Windows-å’Œé€‰é¡¹å¡-Tabs"><a href="#ç¬¬2ç« -ç¼“å†²åŒº-Buffers-ï¼Œçª—å£-Windows-å’Œé€‰é¡¹å¡-Tabs" class="headerlink" title="ç¬¬2ç«  ç¼“å†²åŒº(Buffers)ï¼Œçª—å£(Windows)å’Œé€‰é¡¹å¡(Tabs)"></a>ç¬¬2ç«  ç¼“å†²åŒº(Buffers)ï¼Œçª—å£(Windows)å’Œé€‰é¡¹å¡(Tabs)</h1><p>(è¯‘è€…æ³¨ï¼šåœ¨Vimä¸­ï¼ŒBuffersç¼“å†²åŒºï¼ŒWindowsçª—å£ï¼ŒTabsé€‰é¡¹å¡æ˜¯ä¸“æœ‰åè¯ã€‚ä¸ºé€‚åº”ä¸åŒè¯»è€…çš„ç¿»è¯‘ä¹ æƒ¯ï¼Œç¡®ä¿æ²¡æœ‰æ­§ä¹‰ï¼Œæœ¬æ–‡å°†ä¸å¯¹Buffersã€Windowsã€Tabsè¿™ä¸‰ä¸ªè¯è¿›è¡Œç¿»è¯‘)ã€‚  </p><p>å¦‚æœæ‚¨ä½¿ç”¨è¿‡ç°ä»£æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ‚¨å¾ˆå¯èƒ½å¯¹Windowså’Œtabsè¿™ä¸¤ä¸ªæ¦‚å¿µæ˜¯éå¸¸ç†Ÿæ‚‰çš„ã€‚ä½†Vimä½¿ç”¨äº†ä¸‰ä¸ªå…³äºæ˜¾ç¤ºæ–¹é¢çš„æŠ½è±¡æ¦‚å¿µï¼šbuffers, windows, è¿˜æœ‰tabsã€‚åœ¨æœ¬ç« ï¼Œæˆ‘å°†å‘æ‚¨è§£é‡Šä»€ä¹ˆæ˜¯buffers, windowså’Œtabsï¼Œä»¥åŠå®ƒä»¬åœ¨Vimä¸­å¦‚ä½•å·¥ä½œã€‚</p><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®ä¿æ‚¨çš„vimrcæ–‡ä»¶ä¸­å¼€å¯äº†<code>set hidden</code>é€‰é¡¹ã€‚è‹¥æ²¡æœ‰é…ç½®è¯¥é€‰é¡¹ï¼Œå½“æ‚¨æƒ³åˆ‡æ¢bufferä¸”å½“å‰bufferæ²¡æœ‰ä¿å­˜æ—¶ï¼ŒVimå°†æç¤ºæ‚¨ä¿å­˜æ–‡ä»¶ï¼ˆå¦‚æœæ‚¨æƒ³å¿«é€Ÿåˆ‡æ¢ï¼Œæ‚¨ä¸ä¼šæƒ³è¦è¿™ä¸ªæç¤ºï¼‰ã€‚æˆ‘ç›®å‰è¿˜æ²¡æœ‰è®²vimrcï¼Œå¦‚æœæ‚¨æ²¡æœ‰vimrcé…ç½®æ–‡ä»¶ï¼Œé‚£å°±åˆ›å»ºä¸€ä¸ªã€‚å®ƒé€šå¸¸ä½äºæ ¹ç›®å½•ä¸‹ï¼Œåå­—å«<code>.vimrc</code>ã€‚æˆ‘çš„vimrcä½äº<code>~/.vimrc</code>ã€‚è¦æŸ¥çœ‹æ‚¨è‡ªå·±çš„vimrcæ–‡ä»¶åº”è¯¥æ”¾ç½®åœ¨å“ªï¼Œå¯ä»¥åœ¨Vimå‘½ä»¤æ¨¡å¼ä¸­è¾“å…¥<code>:h vimrc</code>ã€‚åœ¨vimrcæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">set</span> <span class="hljs-keyword">hidden</span><br></code></pre></td></tr></table></figure><p>ä¿å­˜å¥½vimrcæ–‡ä»¶ï¼Œç„¶åæ¿€æ´»å®ƒ(åœ¨vimrcæ–‡ä»¶ä¸­è¿è¡Œ<code>:source %</code>)ã€‚</p><h2 id="Buffers"><a href="#Buffers" class="headerlink" title="Buffers"></a>Buffers</h2><p><em>buffer</em>åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>bufferå°±æ˜¯å†…å­˜ä¸­çš„ä¸€å—ç©ºé—´ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œå†™å…¥æˆ–ç¼–è¾‘æ–‡æœ¬ã€‚å½“æ‚¨åœ¨Vimä¸­æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶çš„æ•°æ®å°±ä¸ä¸€ä¸ªbufferç»‘å®šã€‚å½“æ‚¨åœ¨Vimä¸­æ‰“å¼€3ä¸ªæ–‡ä»¶ï¼Œæ‚¨å°±æœ‰3ä¸ªbuffersã€‚</p><p>åˆ›å»ºä¸¤ä¸ªå¯ä½¿ç”¨çš„ç©ºæ–‡ä»¶ï¼Œåˆ†åˆ«åä¸º<code>file1.js</code>å’Œ<code>file2.js</code>ï¼ˆå¦‚æœå¯èƒ½ï¼Œå°½é‡ä½¿ç”¨Vimæ¥åˆ›å»ºï¼‰ã€‚åœ¨ç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim file1.js<br></code></pre></td></tr></table></figure><p>è¿™æ—¶æ‚¨çœ‹åˆ°çš„æ˜¯<code>file1.js</code>çš„ <em>buffer</em> ã€‚æ¯å½“æ‚¨æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶ï¼ŒVimæ€»æ˜¯ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„bufferã€‚</p><p>é€€å‡ºVimã€‚è¿™ä¸€æ¬¡ï¼Œæ‰“å¼€ä¸¤ä¸ªæ–°æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim file1.js file2.js<br></code></pre></td></tr></table></figure><p>Vimå½“å‰æ˜¾ç¤ºçš„æ˜¯<code>file1.js</code>çš„bufferï¼Œä½†å®ƒå®é™…ä¸Šåˆ›å»ºäº†ä¸¤ä¸ªbuffersï¼š<code>file1.js</code>bufferå’Œ<code>file2.js</code>bufferã€‚è¿è¡Œ<code>:buffers</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„buffersï¼ˆå¦å¤–ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨<code>:ls</code>å’Œ<code>:files</code>å‘½ä»¤ï¼‰ã€‚æ‚¨åº”è¯¥ä¼š <em>åŒæ—¶</em> çœ‹åˆ°åˆ—å‡ºæ¥çš„<code>file1.js</code>å’Œ<code>file2.js</code>ã€‚è¿è¡Œ<code>vim file1 file2 file3 ... filen</code>åˆ›å»ºnä¸ªbuffersã€‚æ¯ä¸€æ¬¡æ‚¨æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶ï¼ŒVimå°±ä¸ºè¿™ä¸ªæ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„bufferã€‚</p><p>è¦éå†æ‰€æœ‰buffersï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p><ul><li><code>:bnext</code> åˆ‡æ¢è‡³ä¸‹ä¸€ä¸ªbufferï¼ˆ<code>:bprevious</code>åˆ‡æ¢è‡³å‰ä¸€ä¸ªbufferï¼‰ã€‚</li><li><code>:buffer</code> + æ–‡ä»¶åã€‚ï¼ˆæŒ‰ä¸‹<code>&lt;Tab&gt;</code>é”®Vimä¼šè‡ªåŠ¨è¡¥å…¨æ–‡ä»¶åï¼‰ã€‚ </li><li><code>:buffer</code> + <code>n</code>, næ˜¯bufferçš„ç¼–å·ã€‚æ¯”å¦‚ï¼Œè¾“å…¥<code>:buffer 2</code>å°†ä½¿æ‚¨åˆ‡æ¢åˆ°buffer #2ã€‚</li><li>æŒ‰ä¸‹<code>Ctrl-O</code>å°†è·³è½¬è‡³è·³è½¬åˆ—è¡¨ä¸­æ—§çš„ä½ç½®ï¼Œå¯¹åº”çš„ï¼ŒæŒ‰ä¸‹<code>Ctrl-I</code>å°†è·³è½¬è‡³è·³è½¬åˆ—è¡¨ä¸­æ–°çš„ä½ç½®ã€‚è¿™å¹¶ä¸æ˜¯å±äºbufferçš„ç‰¹æœ‰æ–¹æ³•ï¼Œä½†å®ƒå¯ä»¥ç”¨æ¥åœ¨ä¸åŒçš„buffersä¸­è·³è½¬ã€‚æˆ‘å°†åœ¨ç¬¬5ç« è¯¦ç»†è®²è¿°å…³äºè·³è½¬çš„çŸ¥è¯†ã€‚</li><li>æŒ‰ä¸‹<code>Ctrl-^</code>è·³è½¬è‡³å…ˆå‰ç¼–è¾‘è¿‡çš„bufferã€‚</li></ul><p>ä¸€æ—¦Vimåˆ›å»ºäº†ä¸€ä¸ªbufferï¼Œå®ƒå°†ä¿ç•™åœ¨æ‚¨çš„buffersåˆ—è¡¨ä¸­ã€‚è‹¥æƒ³åˆ é™¤å®ƒï¼Œæ‚¨å¯ä»¥è¾“å…¥<code>:bdelete</code>ã€‚è¿™æ¡å‘½ä»¤ä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªbufferç¼–å·ï¼ˆ<code>:bdlete 3</code>å°†åˆ é™¤buffer #3ï¼‰æˆ–ä¸€ä¸ªæ–‡ä»¶åï¼ˆ<code>:bdelete</code>ç„¶åæŒ‰<code>&lt;Tab&gt;</code>è‡ªåŠ¨è¡¥å…¨æ–‡ä»¶åï¼‰ã€‚</p><p>æˆ‘å­¦ä¹ bufferæ—¶æœ€å›°éš¾çš„äº‹æƒ…å°±æ˜¯ç†è§£bufferå¦‚ä½•å·¥ä½œï¼Œå› ä¸ºæˆ‘å½“æ—¶çš„æ€ç»´å·²ç»ä¹ æƒ¯äº†ä½¿ç”¨ä¸»æµæ–‡æœ¬ç¼–è¾‘å™¨æ—¶å…³äºçª—å£çš„æ¦‚å¿µã€‚è¦ç†è§£bufferï¼Œå¯ä»¥æ‰“ä¸ªå¾ˆå¥½çš„æ¯”æ–¹ï¼Œå°±æ˜¯æ‰“ç‰Œçš„æ¡Œé¢ã€‚å¦‚æœæ‚¨æœ‰2ä¸ªbuffersï¼Œå°±åƒæ‚¨æœ‰ä¸€å ç‰Œï¼ˆ2å¼ ï¼‰ã€‚æ‚¨åªèƒ½çœ‹è§é¡¶éƒ¨çš„ç‰Œï¼Œè™½ç„¶æ‚¨çŸ¥é“åœ¨å®ƒä¸‹é¢è¿˜æœ‰å…¶ä»–çš„ç‰Œã€‚å¦‚æœæ‚¨çœ‹è§<code>file1.js</code>bufferï¼Œé‚£ä¹ˆ<code>file1.js</code>å°±æ˜¯é¡¶éƒ¨çš„ç‰Œã€‚è™½ç„¶æ‚¨çœ‹ä¸åˆ°å…¶ä»–çš„ç‰Œ<code>file2.js</code>ï¼Œä½†å®ƒå®é™…ä¸Šå°±åœ¨é‚£ã€‚å¦‚æœæ‚¨åˆ‡æ¢buffersåˆ°<code>file2.js</code>ï¼Œé‚£ä¹ˆ<code>file2.js</code>è¿™å¼ ç‰Œå°±æ¢åˆ°äº†é¡¶éƒ¨ï¼Œè€Œ<code>file1.js</code>å°±æ¢åˆ°äº†åº•éƒ¨ã€‚</p><p>å¦‚æœæ‚¨ä»¥å‰æ²¡æœ‰ç”¨è¿‡Vimï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„æ¦‚å¿µã€‚èŠ±ä¸Šå‡ åˆ†é’Ÿç†è§£ä¸€ä¸‹ã€‚</p><h2 id="é€€å‡ºVim"><a href="#é€€å‡ºVim" class="headerlink" title="é€€å‡ºVim"></a>é€€å‡ºVim</h2><p>é¡ºå¸¦è¯´ä¸€å¥ï¼Œå¦‚æœæ‚¨å·²ç»æ‰“å¼€äº†å¤šä¸ªbuffersï¼Œæ‚¨å¯ä»¥ä½¿ç”¨quit -allæ¥å…³é—­æ‰€æœ‰çš„buffersï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:qall</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æƒ³å…³é—­æ‰€æœ‰buffersä½†ä¸ä¿å­˜ï¼Œä»…éœ€è¦åœ¨åé¢åŠ <code>!</code>ï¼ˆå¹å·ï¼‰å°±è¡Œäº†ï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:qall!</span><br></code></pre></td></tr></table></figure><p>è‹¥è¦ä¿å­˜æ‰€æœ‰buffersç„¶åé€€å‡ºï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:wqall</span><br></code></pre></td></tr></table></figure><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><p>ä¸€ä¸ªwindowå°±æ˜¯åœ¨bufferä¸Šçš„ä¸€ä¸ªè§†å£ã€‚å¦‚æœæ‚¨ä½¿ç”¨è¿‡ä¸»æµçš„ç¼–è¾‘å™¨ï¼ŒWindowsè¿™ä¸ªæ¦‚å¿µåº”è¯¥å¾ˆç†Ÿæ‚‰ã€‚å¤§éƒ¨åˆ†æ–‡æœ¬ç¼–è¾‘å™¨å…·æœ‰æ˜¾ç¤ºå¤šä¸ªçª—å£çš„èƒ½åŠ›ã€‚åœ¨Vimä¸­ï¼Œæ‚¨åŒæ ·å¯ä»¥æ‹¥æœ‰å¤šä¸ªçª—å£ã€‚</p><p>è®©æˆ‘ä»¬ä»ç»ˆç«¯å†æ¬¡æ‰“å¼€<code>file1.js</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim file1.js<br></code></pre></td></tr></table></figure><p>å…ˆå‰æˆ‘è¯´è¿‡ï¼Œæ‚¨çœ‹åˆ°çš„æ˜¯<code>file1.js</code>çš„bufferã€‚ä½†è¿™ä¸ªè¯´æ³•å¹¶ä¸å®Œæ•´ï¼Œç°åœ¨è¿™å¥è¯å¾—æ›´æ­£ä¸€ä¸‹ï¼Œæ‚¨çœ‹åˆ°çš„æ˜¯<code>file1.js </code>çš„bufferé€šè¿‡ <strong>ä¸€ä¸ªçª—å£</strong> æ˜¾ç¤ºå‡ºæ¥ã€‚çª—å£å°±æ˜¯æ‚¨æŸ¥çœ‹çš„bufferæ‰€ä½¿ç”¨çš„è§†å£ã€‚</p><p>å…ˆä¸å¿™æ€¥ç€é€€å‡ºVimï¼Œåœ¨Vimä¸­è¿è¡Œï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">:<span class="hljs-built_in">split</span> file2.js<br></code></pre></td></tr></table></figure><p>ç°åœ¨æ‚¨çœ‹åˆ°çš„æ˜¯ä¸¤ä¸ªbuffersé€šè¿‡ <strong>ä¸¤ä¸ªçª—å£</strong> æ˜¾ç¤ºå‡ºæ¥ã€‚ä¸Šé¢çš„çª—å£æ˜¾ç¤ºçš„æ˜¯<code>file2.js</code>çš„bufferã€‚è€Œä¸‹é¢çš„çª—å£æ˜¾ç¤ºçš„æ˜¯<code>file1.js</code>çš„bufferã€‚</p><p>å¦‚æœæ‚¨æƒ³åœ¨çª—å£ä¹‹é—´å¯¼èˆªï¼Œä½¿ç”¨è¿™äº›å¿«æ·é”®ï¼š</p><figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tp">Ctrl-<span class="hljs-keyword">W</span> H    ç§»åŠ¨å…‰æ ‡åˆ°å·¦è¾¹çš„çª—å£<br>Ctrl-<span class="hljs-keyword">W</span> J    ç§»åŠ¨å…‰æ ‡åˆ°ä¸‹é¢çš„çª—å£<br>Ctrl-<span class="hljs-keyword">W</span> K    ç§»åŠ¨å…‰æ ‡åˆ°ä¸Šé¢çš„çª—å£<br>Ctrl-<span class="hljs-keyword">W</span> L    ç§»åŠ¨å…‰æ ‡åˆ°å³è¾¹çš„çª—å£<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œåœ¨Vimä¸­è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:vsplit</span> file3.js<br></code></pre></td></tr></table></figure><p>æ‚¨ç°åœ¨çœ‹åˆ°çš„æ˜¯ä¸‰ä¸ªçª—å£æ˜¾ç¤ºä¸‰ä¸ªbuffersã€‚ä¸€ä¸ªçª—å£æ˜¾ç¤º<code>file3.js</code>çš„bufferï¼Œä¸€ä¸ªçª—å£æ˜¾ç¤º<code>file2.js</code>çš„bufferï¼Œè¿˜æœ‰ä¸€ä¸ªçª—å£æ˜¾ç¤º<code>file1.js</code>çš„bufferã€‚</p><p>æ‚¨å¯ä»¥ä½¿å¤šä¸ªçª—å£æ˜¾ç¤ºåŒä¸€ä¸ªbufferã€‚å½“å…‰æ ‡ä½äºå·¦ä¸Šæ–¹çª—å£æ—¶ï¼Œè¾“å…¥ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">:<span class="hljs-built_in">buffer</span> file2.js<br></code></pre></td></tr></table></figure><p>ç°åœ¨ä¸¤ä¸ªçª—å£æ˜¾ç¤ºçš„éƒ½æ˜¯<code>file2.js</code>çš„bufferã€‚å¦‚æœæ‚¨ç°åœ¨åœ¨è¿™ä¸¤ä¸ªçª—å£ä¸­çš„æŸä¸€ä¸ªè¾“å…¥å†…å®¹ï¼Œæ‚¨ä¼šçœ‹åˆ°æ‰€æœ‰æ˜¾ç¤º<code>file2.js</code>bufferçš„çª—å£éƒ½åœ¨å®æ—¶æ›´æ–°ã€‚</p><p>è¦å…³é—­å½“å‰çš„çª—å£ï¼Œæ‚¨å¯ä»¥æŒ‰<code>Ctrl-W C</code>æˆ–è¾“å…¥<code>:quit</code>ã€‚å½“æ‚¨å…³é—­ä¸€ä¸ªçª—å£åï¼Œbuffersä»ç„¶ä¼šåœ¨åˆ—è¡¨ä¸­ã€‚ï¼ˆå¯ä»¥è¿è¡Œ<code>:buffers</code>æ¥ç¡®è®¤è¿™ä¸€ç‚¹ï¼‰ã€‚</p><p>è¿™é‡Œæœ‰ä¸€äº›æ™®é€šæ¨¡å¼ä¸‹å…³äºçª—å£çš„å‘½ä»¤ï¼š</p><figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tp">Ctrl-<span class="hljs-keyword">W</span> V    æ‰“å¼€ä¸€ä¸ªæ–°çš„å‚ç›´åˆ†å‰²çš„çª—å£<br>Ctrl-<span class="hljs-keyword">W</span> S    æ‰“å¼€ä¸€ä¸ªæ–°çš„æ°´å¹³åˆ†å‰²çš„çª—å£<br>Ctrl-<span class="hljs-keyword">W</span> C    å…³é—­ä¸€ä¸ªçª—å£<br>Ctrl-<span class="hljs-keyword">W</span> O    é™¤äº†å½“å‰çª—å£ï¼Œå…³é—­æ‰€æœ‰å…¶ä»–çš„çª—å£<br></code></pre></td></tr></table></figure><p>å¦å¤–ï¼Œä¸‹é¢çš„åˆ—è¡¨åˆ—å‡ºäº†ä¸€äº›æœ‰ç”¨çš„å…³äºwindowsçš„å‘½ä»¤è¡Œå‘½ä»¤</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tcl">:vsplit <span class="hljs-keyword">filename</span>    å‚ç›´åˆ†å‰²å½“å‰çª—å£ï¼Œå¹¶åœ¨æ–°çª—å£ä¸­æ‰“å¼€åä¸º<span class="hljs-keyword">filename</span>çš„æ–‡ä»¶ã€‚<br>:<span class="hljs-keyword">split</span> <span class="hljs-keyword">filename</span>     æ°´å¹³åˆ†å‰²å½“å‰çª—å£ï¼Œå¹¶åœ¨æ–°çª—å£ä¸­æ‰“å¼€åä¸º<span class="hljs-keyword">filename</span>çš„æ–‡ä»¶ã€‚<br>:new <span class="hljs-keyword">filename</span>       åˆ›å»ºä¸€ä¸ªæ–°çª—å£å¹¶æ‰“å¼€åä¸º<span class="hljs-keyword">filename</span>çš„æ–‡ä»¶ã€‚<br></code></pre></td></tr></table></figure><p>èŠ±ä¸€ç‚¹æ—¶é—´ç†è§£ä¸Šé¢çš„çŸ¥è¯†ã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹å¸®åŠ©<code>:h window</code>ã€‚</p><h2 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h2><p>Tabså°±æ˜¯windowsçš„é›†åˆã€‚å®ƒå°±åƒçª—å£çš„å¸ƒå±€ã€‚åœ¨å¤§éƒ¨åˆ†çš„ç°ä»£æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆè¿˜æœ‰ç°ä»£äº’è”ç½‘æµè§ˆå™¨ï¼‰ä¸­ï¼Œä¸€ä¸ªtabæ„å‘³ç€æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶&#x2F;é¡µé¢ï¼Œå½“æ‚¨å…³é—­æ ‡ç­¾ï¼Œç›¸åº”çš„æ–‡ä»¶&#x2F;é¡µé¢å°±æ¶ˆå¤±äº†ã€‚ä½†åœ¨Vimä¸­ï¼Œtabå¹¶ä¸è¡¨ç¤ºæ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶ã€‚å½“æ‚¨åœ¨Vimä¸­å…³é—­ä¸€ä¸ªtabï¼Œæ‚¨å¹¶ä¸æ˜¯å…³é—­ä¸€ä¸ªæ–‡ä»¶ã€‚æ‚¨ä»…ä»…å…³é—­äº†çª—å£å¸ƒå±€ã€‚æ–‡ä»¶çš„æ•°æ®ä¾ç„¶å­˜å‚¨åœ¨å†…å­˜ä¸­çš„buffersä¸­ã€‚</p><p>è®©æˆ‘ä»¬è¿è¡Œå‡ ä¸ªå‘½ä»¤çœ‹çœ‹Vimä¸­tabsçš„åŠŸèƒ½ã€‚æ‰“å¼€<code>file1.js</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim file1.js<br></code></pre></td></tr></table></figure><p>è‹¥è¦åœ¨æ–°tabä¸­æ‰“å¼€<code>file2.js</code>ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:tabnew</span> file2.js<br></code></pre></td></tr></table></figure><p>å½“ç„¶æ‚¨å¯ä»¥æŒ‰<code>&lt;Tab&gt;</code>è®©Vimè‡ªåŠ¨è¡¥å…¨ <em>æ–°tab</em> ä¸­å°†è¦æ‰“å¼€çš„æ–‡ä»¶åï¼ˆå•°å—¦å‡ å¥ï¼Œè¯·ç†è§£ä½œè€…çš„å¹½é»˜ ï¼‰ã€‚</p><p>ä¸‹é¢çš„åˆ—è¡¨åˆ—å‡ºäº†ä¸€äº›æœ‰ç”¨çš„å…³äºtabå¯¼èˆªçš„å‘½ä»¤ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">tabnew</span> <span class="hljs-keyword">file</span>.txt    åœ¨<span class="hljs-keyword">tab</span>ä¸­æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶<br>:<span class="hljs-keyword">tabclose</span>           å…³é—­å½“å‰<span class="hljs-keyword">tab</span><br>:<span class="hljs-keyword">tabnext</span>            åˆ‡æ¢è‡³ä¸‹ä¸€ä¸ª<span class="hljs-keyword">tab</span><br>:<span class="hljs-keyword">tabprevious</span>        åˆ‡æ¢è‡³å‰ä¸€ä¸ª<span class="hljs-keyword">tab</span><br>:<span class="hljs-keyword">tablast</span>            åˆ‡æ¢è‡³æœ€åä¸€ä¸ª<span class="hljs-keyword">tab</span><br>:<span class="hljs-keyword">tabfirst</span>           åˆ‡æ¢è‡³ç¬¬ä¸€ä¸ª<span class="hljs-keyword">tab</span><br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥è¾“å…¥<code>gt</code>åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µï¼ˆå¯¹åº”çš„ï¼Œå¯ä»¥ç”¨<code>gT</code>åˆ‡æ¢åˆ°å‰ä¸€ä¸ªæ ‡ç­¾é¡µï¼‰ã€‚æ‚¨ä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªæ•°å­—ä½œä¸ºå‚æ•°ç»™<code>gt</code>ï¼Œè¿™ä¸ªæ•°å­—æ˜¯tabçš„ç¼–å·ã€‚è‹¥æƒ³åˆ‡æ¢åˆ°ç¬¬3ä¸ªtabï¼Œè¾“å…¥<code>3gt</code>ã€‚</p><p>æ‹¥æœ‰å¤šä¸ªtabsçš„å¥½å¤„æ˜¯ï¼Œæ‚¨å¯ä»¥åœ¨ä¸åŒçš„tabä¸­ä½¿ç”¨ä¸åŒçš„çª—å£å¸ƒå±€ã€‚ä¹Ÿè®¸ï¼Œæ‚¨æƒ³è®©æ‚¨çš„ç¬¬1ä¸ªtabåŒ…å«3ä¸ªå‚ç›´åˆ†å‰²çš„çª—å£ï¼Œç„¶åè®©ç¬¬2ä¸ªtabä¸ºæ°´å¹³åˆ†å‰²å’Œå‚ç›´åˆ†å‰²æ··åˆçš„çª—å£å¸ƒå±€ã€‚tabæ˜¯å®Œæˆè¿™ä»¶å·¥ä½œçš„å®Œç¾å·¥å…·!</p><p>è‹¥æƒ³è®©Vimå¯åŠ¨æ—¶å°±åŒ…å«å¤šä¸ªtabsï¼Œæ‚¨å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim -p file1.js file2.js file3.js<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ç»´ç§»åŠ¨"><a href="#ä¸‰ç»´ç§»åŠ¨" class="headerlink" title="ä¸‰ç»´ç§»åŠ¨"></a>ä¸‰ç»´ç§»åŠ¨</h2><p>åœ¨windowsä¹‹é—´ç§»åŠ¨å°±åƒåœ¨ç¬›å¡å°”åæ ‡ç³»çš„äºŒç»´å¹³é¢ä¸Šæ²¿ç€X-Yè½´ç§»åŠ¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code>Ctrl-W H/J/K/L</code>ç§»åŠ¨åˆ°ä¸Šé¢ã€å³ä¾§ã€ä¸‹é¢ã€ä»¥åŠå·¦ä¾§çš„çª—å£ã€‚</p><p>åœ¨bufferä¹‹é—´ç§»åŠ¨å°±åƒåœ¨ç¬›å¡å°”åæ ‡ç³»çš„Zè½´ä¸Šç©¿æ¢­ã€‚æƒ³è±¡æ‚¨çš„bufferæ–‡ä»¶åœ¨Zè½´ä¸Šå‘ˆçº¿æ€§æ’åˆ—ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>:bnext</code>å’Œ<code>bprevious</code>åœ¨Zè½´ä¸Šä¸€æ¬¡ä¸€ä¸ªbufferåœ°éå†ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨<code>:buffer æ–‡ä»¶å/bufferç¼–å·</code>åœ¨Zè½´ä¸Šè·³è½¬åˆ°ä»»æ„åæ ‡ã€‚</p><p>ç»“åˆwindowå’Œbufferçš„ç§»åŠ¨ï¼Œæ‚¨å¯ä»¥åœ¨ <em>ä¸‰ç»´ç©ºé—´</em> ä¸­ç§»åŠ¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨windowå¯¼èˆªå‘½ä»¤ç§»åŠ¨åˆ°ä¸Šé¢ã€å³ä¾§ã€ä¸‹é¢ã€æˆ–å·¦ä¾§çš„çª—å£ï¼ˆX-Yå¹³é¢å¯¼èˆªï¼‰ã€‚å› ä¸ºæ¯ä¸ªwindowéƒ½å¯èƒ½åŒ…å«äº†å¤šä¸ªbuffersï¼Œæ‚¨å¯ä»¥ä½¿ç”¨bufferç§»åŠ¨å‘½ä»¤å‘å‰ã€å‘åç§»åŠ¨ï¼ˆZè½´å¯¼èˆªï¼‰ã€‚</p><h2 id="ç”¨èªæ˜çš„æ–¹æ³•ä½¿ç”¨Buffersã€Windowsã€ä»¥åŠTabs"><a href="#ç”¨èªæ˜çš„æ–¹æ³•ä½¿ç”¨Buffersã€Windowsã€ä»¥åŠTabs" class="headerlink" title="ç”¨èªæ˜çš„æ–¹æ³•ä½¿ç”¨Buffersã€Windowsã€ä»¥åŠTabs"></a>ç”¨èªæ˜çš„æ–¹æ³•ä½¿ç”¨Buffersã€Windowsã€ä»¥åŠTabs</h2><p>æ‚¨å·²ç»å­¦ä¹ äº†ä»€ä¹ˆæ˜¯buffersã€windowsã€ä»¥åŠtabsï¼Œä¹Ÿå­¦ä¹ äº†å®ƒä»¬å¦‚ä½•åœ¨Vimä¸­å·¥ä½œã€‚ç°åœ¨æ‚¨å¯¹å®ƒä»¬æœ‰äº†æ›´å¥½åœ°ç†è§£ï¼Œæ‚¨å¯ä»¥æŠŠå®ƒä»¬ç”¨åœ¨æ‚¨è‡ªå·±çš„å·¥ä½œæµç¨‹ä¸­ã€‚</p><p>æ¯ä¸ªäººéƒ½æœ‰ä¸åŒçš„å·¥ä½œæµç¨‹ï¼Œä»¥ä¸‹ç¤ºä¾‹æ˜¯æˆ‘çš„å·¥ä½œæµç¨‹ï¼š</p><ul><li>é¦–å…ˆï¼Œå¯¹äºæŸä¸ªç‰¹å®šä»»åŠ¡ï¼Œæˆ‘å…ˆä½¿ç”¨bufferså­˜å‚¨æ‰€æœ‰éœ€è¦çš„æ–‡ä»¶ã€‚Vimå°±ç®—æ‰“å¼€å¾ˆå¤šbufferï¼Œé€Ÿåº¦ä¸€èˆ¬ä¹Ÿä¸ä¼šå‡æ…¢ã€‚å¦å¤–æ‰“å¼€å¤šä¸ªbufferså¹¶ä¸ä¼šä½¿æˆ‘çš„å±å¹•å˜å¾—æ‹¥æŒ¤ã€‚æˆ‘å§‹ç»ˆåªä¼šçœ‹åˆ°1ä¸ªbufferï¼ˆå‡è®¾æˆ‘åªæœ‰1ä¸ªwindowï¼‰ï¼Œè¿™å¯ä»¥è®©æˆ‘æ³¨æ„åŠ›é›†ä¸­åœ¨1ä¸ªå±å¹•ä¸Šã€‚å½“æˆ‘éœ€è¦ä½¿ç”¨å…¶ä»–æ–‡ä»¶æ—¶ï¼Œå¯ä»¥å¿«é€Ÿåˆ‡æ¢è‡³å¯¹åº”æ–‡ä»¶çš„bufferã€‚</li><li>å½“æ¯”å¯¹æ–‡ä»¶ã€è¯»æ–‡æ¡£ã€æˆ–è¿½è¸ªä»£ç æµæ—¶ï¼Œæˆ‘ä½¿ç”¨å¤šçª—å£æ¥ä¸€æ¬¡æŸ¥çœ‹å¤šä¸ªbuffersã€‚æˆ‘å°½é‡ä¿æŒå±å¹•ä¸Šçš„çª—å£æ•°ä¸è¶…è¿‡3ä¸ªï¼Œå› ä¸ºè¶…è¿‡3ä¸ªå±å¹•å°†å˜å¾—æ‹¥æŒ¤ï¼ˆæˆ‘ä½¿ç”¨çš„æ˜¯å°å‹ç¬”è®°æœ¬ï¼‰ã€‚å½“ç›¸åº”å·¥ä½œå®Œæˆåï¼Œæˆ‘å°±å…³æ‰å¤šä½™çš„çª—å£ã€‚çª—å£è¶Šå°‘å¯ä»¥ä½¿æ³¨æ„åŠ›æ›´é›†ä¸­ã€‚</li><li>æˆ‘ä½¿ç”¨<a href="https://github.com/tmux/tmux/wiki">tmux</a>windowsæ¥ä»£æ›¿tabsã€‚é€šå¸¸ä¸€æ¬¡ä½¿ç”¨å¤šä¸ªtmuxçª—å£ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªtmuxçª—å£ç”¨æ¥å†™å®¢æˆ·ç«¯ä»£ç ï¼Œä¸€ä¸ªç”¨æ¥å†™åå°ä»£ç ã€‚</li></ul><p>ç”±äºç¼–è¾‘é£æ ¼ä¸åŒï¼Œæˆ‘çš„å·¥ä½œæµç¨‹å¯èƒ½å’Œæ‚¨çš„å·¥ä½œæµç¨‹ä¸åŒï¼Œè¿™æ²¡å…³ç³»ã€‚æ‚¨å¯ä»¥åœ¨å®è·µä¸­å»æ¢ç´¢é€‚åˆæ‚¨è‡ªå·±å·¥ä½œæµç¨‹çš„ç¼–ç é£æ ¼ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-è¯­æ³•</title>
    <link href="/2022/04/05/Vim/ch04_vim_grammar/"/>
    <url>/2022/04/05/Vim/ch04_vim_grammar/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬04ç« -Vim-è¯­æ³•"><a href="#ç¬¬04ç« -Vim-è¯­æ³•" class="headerlink" title="ç¬¬04ç«  Vim è¯­æ³•"></a>ç¬¬04ç«  Vim è¯­æ³•</h1><p>åˆšæ¥è§¦Vimæ—¶å¾ˆå®¹æ˜“è¢«Vimè®¸å¤šå¤æ‚çš„å‘½ä»¤å“åˆ°ï¼Œå¦‚æœä½ çœ‹åˆ°ä¸€ä¸ªVimçš„ç”¨æˆ·ä½¿ç”¨<code>gUfV</code>æˆ–<code>1GdG</code>ï¼Œä½ å¯èƒ½ä¸èƒ½ç«‹åˆ»æƒ³åˆ°è¿™äº›å‘½ä»¤æ˜¯åœ¨åšä»€ä¹ˆã€‚è¿™ä¸€ç« ä¸­ï¼Œæˆ‘å°†æŠŠVimå‘½ä»¤çš„ç»“æ„æ‹†åˆ†æˆä¸€ä¸ªç®€å•çš„è¯­æ³•è§„åˆ™è¿›è¡Œè®²è§£ã€‚</p><p>è¿™ä¸€ç« å°†æ˜¯æœ¬ä¹¦ä¸­æœ€é‡è¦çš„ä¸€ç« ï¼Œä¸€æ—¦ä½ ç†è§£äº†Vimå‘½ä»¤çš„è¯­æ³•ç»“æ„ï¼Œä½ å°†èƒ½å¤Ÿå’ŒVimâ€è¯´è¯â€ã€‚æ³¨æ„ï¼Œåœ¨è¿™ä¸€ç« ä¸­å½“æˆ‘è®¨è®ºVimè¯­è¨€æ—¶ï¼Œæˆ‘è®¨è®ºå¹¶ä¸æ˜¯<br>Vimscript(Vimè‡ªå¸¦çš„æ’ä»¶ç¼–å†™å’Œè‡ªå®šä¹‰è®¾ç½®çš„è¯­è¨€)ï¼Œè¿™é‡Œæˆ‘è®¨è®ºçš„æ˜¯Vimä¸­normalæ¨¡å¼çš„ä¸‹çš„å‘½ä»¤çš„é€šç”¨è§„åˆ™ã€‚</p><h2 id="å¦‚ä½•å­¦ä¹ ä¸€é—¨è¯­è¨€"><a href="#å¦‚ä½•å­¦ä¹ ä¸€é—¨è¯­è¨€" class="headerlink" title="å¦‚ä½•å­¦ä¹ ä¸€é—¨è¯­è¨€"></a>å¦‚ä½•å­¦ä¹ ä¸€é—¨è¯­è¨€</h2><p>æˆ‘å¹¶ä¸æ˜¯ä¸€ä¸ªè‹±è¯­ä¸ºæ¯è¯­çš„äººï¼Œå½“æˆ‘13å²ç§»æ°‘åˆ°ç¾å›½æ—¶æˆ‘å­¦ä¹ çš„è‹±è¯­ï¼Œæˆ‘ä¼šé€šè¿‡åšä¸‰ä»¶äº‹æƒ…å»ºç«‹æˆ‘çš„è¯­è¨€èƒ½åŠ›ï¼š</p><ol><li>å­¦ä¹ è¯­æ³•è§„åˆ™</li><li>æ‰©å±•æˆ‘çš„è¯æ±‡é‡</li><li>ç»ƒä¹ ï¼Œç»ƒä¹ ï¼Œç»ƒä¹ </li></ol><p>åŒæ ·çš„ï¼Œä¸ºäº†è¯´å¥½Vimè¯­è¨€ï¼Œä½ éœ€è¦å­¦ä¹ è¯­æ³•è§„åˆ™ï¼Œå¢åŠ è¯æ±‡é‡ï¼Œå¹¶ä¸”ä¸æ–­ç»ƒä¹ ç›´åˆ°ä½ å¯ä»¥æŠŠæ‰§è¡Œå‘½ä»¤å˜æˆè‚Œè‚‰è®°å¿†ã€‚</p><h2 id="è¯­æ³•è§„åˆ™"><a href="#è¯­æ³•è§„åˆ™" class="headerlink" title="è¯­æ³•è§„åˆ™"></a>è¯­æ³•è§„åˆ™</h2><p>ä½ åªéœ€è¦çŸ¥é“ä¸€ä¸ªVimè¯­è¨€çš„è¯­æ³•è§„åˆ™ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">verb</span> + noun <span class="hljs-comment"># åŠ¨è¯ + åè¯</span><br></code></pre></td></tr></table></figure><p>è¿™å°±ç±»ä¼¼ä¸åœ¨è‹±è¯­ä¸­çš„ç¥ˆä½¿å¥ï¼š</p><ul><li>â€œEat(verb) a donut(noun)â€</li><li>â€œKick(verb) a ball(noun)â€</li><li>â€œLearn(verb) the Vim Editor(noun)â€</li></ul><p>ç°åœ¨ä½ éœ€è¦çš„å°±æ˜¯ç”¨Vimä¸­åŸºæœ¬çš„åŠ¨è¯å’Œåå­—æ¥å»ºç«‹ä½ çš„è¯æ±‡è¡¨</p><h2 id="åè¯-åŠ¨ä½œ-Motion"><a href="#åè¯-åŠ¨ä½œ-Motion" class="headerlink" title="åè¯(åŠ¨ä½œ Motion)"></a>åè¯(åŠ¨ä½œ Motion)</h2><p>æˆ‘ä»¬è¿™é‡Œå°† <strong>åŠ¨ä½œ Motion</strong> ä½œä¸ºåè¯ï¼Œ <strong>åŠ¨ä½œMotion</strong>ç”¨æ¥åœ¨Vimä¸­åˆ°å¤„ç§»åŠ¨ã€‚ä¸‹é¢åˆ—å‡ºäº†ä¸€äº›å¸¸è§çš„<strong>åŠ¨ä½œ</strong>çš„ä¾‹å­ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">h</span>å·¦<br>jä¸‹<br>kä¸Š<br>lå³<br>wå‘å‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´<br>&#125;è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ®µè½<br><span class="hljs-variable">$</span>è·³è½¬åˆ°å½“å‰è¡Œçš„æœ«å°¾<br></code></pre></td></tr></table></figure><p>åœ¨ä¹‹åçš„ç« èŠ‚ä½ å°†å­¦ä¹ æ›´å¤šçš„å…³äº<strong>åŠ¨ä½œ</strong>çš„å†…å®¹ï¼Œæ‰€ä»¥å¦‚æœä½ ä¸ç†è§£ä¸Šé¢è¿™äº›<strong>åŠ¨ä½œ</strong>ä¹Ÿä¸å¿…æ‹…å¿ƒã€‚</p><h2 id="åŠ¨è¯-æ“ä½œç¬¦-Operator"><a href="#åŠ¨è¯-æ“ä½œç¬¦-Operator" class="headerlink" title="åŠ¨è¯(æ“ä½œç¬¦ Operator)"></a>åŠ¨è¯(æ“ä½œç¬¦ Operator)</h2><p>æ ¹æ®<code>:h operator</code>ï¼ŒVimå…±æœ‰16ä¸ª<strong>æ“ä½œç¬¦</strong>ï¼Œç„¶è€Œæ ¹æ®æˆ‘çš„ç»éªŒï¼Œå­¦ä¹ è¿™3ä¸ª<strong>æ“ä½œç¬¦</strong>åœ¨80%çš„æƒ…å†µä¸‹å°±å·²ç»å¤Ÿç”¨äº†</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">y</span><span class="hljs-function"><span class="hljs-title">yank</span>(å¤åˆ¶)</span><br><span class="hljs-variable">d</span><span class="hljs-function"><span class="hljs-title">delete</span>(åˆ é™¤)</span><br><span class="hljs-variable">c</span><span class="hljs-variable">change</span> åˆ é™¤æ–‡æœ¬ï¼Œå°†åˆ é™¤çš„æ–‡æœ¬å­˜åˆ°å¯„å­˜å™¨ä¸­ï¼Œè¿›å…¥æ’å…¥æ¨¡å¼<br></code></pre></td></tr></table></figure><p>é¡ºå¸¦è¯´ä¸€å¥ï¼Œå½“ä½ yankä¸€æ®µæ–‡æœ¬åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>p</code>å°†å®ƒç²˜è´´åˆ°å…‰æ ‡åï¼Œæˆ–ä½¿ç”¨<code>P</code>ç²˜è´´åˆ°å…‰æ ‡å‰ã€‚</p><h2 id="åŠ¨è¯ï¼ˆæ“ä½œç¬¦-Operatorï¼‰å’Œåè¯ï¼ˆåŠ¨ä½œ-motionsï¼‰çš„ç»“åˆ"><a href="#åŠ¨è¯ï¼ˆæ“ä½œç¬¦-Operatorï¼‰å’Œåè¯ï¼ˆåŠ¨ä½œ-motionsï¼‰çš„ç»“åˆ" class="headerlink" title="åŠ¨è¯ï¼ˆæ“ä½œç¬¦ Operatorï¼‰å’Œåè¯ï¼ˆåŠ¨ä½œ motionsï¼‰çš„ç»“åˆ"></a>åŠ¨è¯ï¼ˆæ“ä½œç¬¦ Operatorï¼‰å’Œåè¯ï¼ˆåŠ¨ä½œ motionsï¼‰çš„ç»“åˆ</h2><p>ç°åœ¨ä½ å·²ç»çŸ¥é“äº†åŸºæœ¬çš„åŠ¨è¯å’Œåè¯ï¼Œæˆ‘ä»¬æ¥ç”¨ä¸€ä¸‹æˆ‘ä»¬çš„è¯­æ³•è§„åˆ™ï¼ŒåŠ¨è¯å’Œåè¯çš„ç»“åˆï¼å‡è®¾ä½ æœ‰ä¸‹é¢è¿™æ®µæ–‡æœ¬ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> learn = <span class="hljs-string">&quot;Vim&quot;</span>;<br></code></pre></td></tr></table></figure><ul><li>å¤åˆ¶å½“å‰ä½ç½®åˆ°è¡Œå°¾çš„æ‰€æœ‰å†…å®¹ï¼š<code>y$</code></li><li>åˆ é™¤å½“å‰ä½ç½®åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ï¼š<code>dw</code></li><li>ä¿®æ”¹å½“å‰ä½ç½®åˆ°è¿™ä¸ªæ®µè½çš„ç»“å°¾ï¼š<code>c&#125;</code></li></ul><p><strong>åŠ¨ä½œ motions</strong>ä¹Ÿæ¥å—æ•°å­—ä½œä¸ºå‚æ•°(è¿™ä¸ªéƒ¨åˆ†æˆ‘å°†åœ¨ä¸‹ä¸ªç« èŠ‚å±•å¼€)ï¼Œå¦‚æœä½ éœ€è¦å‘ä¸Šç§»åŠ¨3è¡Œï¼Œä½ å¯ä»¥ç”¨<code>3k</code>ä»£æ›¿æŒ‰3æ¬¡<code>k</code>ï¼Œæ•°å­—å¯åº”ç”¨åœ¨Vimè¯­æ³•ä¸­ã€‚</p><ul><li>å‘å·¦æ‹·è´2ä¸ªå­—ç¬¦ï¼š<code>y2h</code></li><li>åˆ é™¤åä¸¤ä¸ªå•è¯ï¼š<code>d2w</code></li><li>ä¿®æ”¹åé¢ä¸¤è¡Œï¼š<code>c2j</code></li></ul><p>ç›®å‰ï¼Œä½ ä¹Ÿè®¸éœ€è¦æƒ³å¾ˆä¹…æ‰èƒ½å®Œæˆä¸€ä¸ªç®€å•çš„å‘½ä»¤ï¼Œä¸è¿‡æˆ‘åˆšå¼€å§‹æ—¶ä¹Ÿæ˜¯è¿™æ ·ï¼Œæˆ‘ä¹Ÿç»å†è¿‡ç±»ä¼¼çš„æŒ£æ‰çš„é˜¶æ®µä½†æ˜¯ä¸ä¹…æˆ‘çš„é€Ÿåº¦å°±å¿«äº†èµ·æ¥ï¼Œä½ ä¹Ÿä¸€æ ·ã€‚å”¯ä¸€é€”å¾„å°±æ˜¯é‡å¤ã€é‡å¤å†é‡å¤ã€‚</p><p>ä½œä¸ºè¡¥å……ï¼Œè¡Œçº§çš„ <strong>æ“ä½œç¬¦ operations</strong> (ä½œç”¨åœ¨æ•´è¡Œä¸­çš„æ“ä½œç¬¦)åœ¨æ–‡æœ¬ç¼–è¾‘ä¸­å’Œå…¶ä»–çš„ <strong>æ“ä½œç¬¦</strong> ä¸€æ ·ï¼ŒVimå…è®¸ä½ é€šè¿‡æŒ‰ä¸¤æ¬¡ <strong>æ“ä½œç¬¦</strong>ä½¿å®ƒæ‰§è¡Œè¡Œçº§çš„æ“ä½œï¼Œä¾‹å¦‚<code>dd</code>ï¼Œ<code>yy</code>ï¼Œ<code>cc</code>æ¥æ‰§è¡Œåˆ é™¤ï¼Œå¤åˆ¶æˆ–ä¿®æ”¹æ•´ä¸ªè¡Œã€‚æ‚¨å¯ä»¥ä½¿ç”¨å…¶ä»–operationsè¯•ä¸€ä¸‹ï¼ˆæ¯”å¦‚<code>gUgU</code>ï¼‰ã€‚</p><p>666!ä»è¿™å¯ä»¥çœ‹å‡ºVimå‘½ä»¤çš„ä¸€ç§æ‰§è¡Œæ¨¡å¼ã€‚ä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢è¿˜æ²¡æœ‰ç»“æŸï¼ŒVimæœ‰å¦ä¸€ç§ç±»å‹çš„åè¯ï¼šæ–‡æœ¬å¯¹è±¡(text object)</p><h2 id="æ›´å¤šåè¯-æ–‡æœ¬å¯¹è±¡-Text-Objects"><a href="#æ›´å¤šåè¯-æ–‡æœ¬å¯¹è±¡-Text-Objects" class="headerlink" title="æ›´å¤šåè¯(æ–‡æœ¬å¯¹è±¡ Text Objects)"></a>æ›´å¤šåè¯(æ–‡æœ¬å¯¹è±¡ Text Objects)</h2><p>æƒ³è±¡ä¸€ä¸‹ä½ ç°åœ¨æ­£åœ¨æŸä¸ªè¢«æ‹¬å·åŒ…å›´çš„æ–‡æœ¬ä¸­ä¾‹å¦‚<code>(hello Vim)</code>ï¼Œä½ ç°åœ¨æƒ³è¦åˆ æ‰æ‹¬å·ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œä½ ä¼šæ€æ ·å¿«é€Ÿçš„å®Œæˆå®ƒï¼Ÿæ˜¯å¦æœ‰ä¸€ç§æ–¹æ³•èƒ½å¤ŸæŠŠæ‹¬å·ä¸­å†…å®¹ä½œä¸ºæ•´ä½“åˆ é™¤å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯æœ‰çš„ã€‚æ–‡æœ¬é€šå¸¸æ˜¯ç»“æ„åŒ–çš„ï¼Œç‰¹åˆ«æ˜¯ä»£ç ä¸­ï¼Œæ–‡æœ¬ç»å¸¸è¢«æ”¾ç½®åœ¨å°æ‹¬å·ã€ä¸­æ‹¬å·ã€å¤§æ‹¬å·ã€å¼•å·ç­‰å½“ä¸­ã€‚Vimæä¾›äº†ä¸€ç§å¤„ç†è¿™ç§ç»“æ„çš„æ–‡æœ¬å¯¹è±¡çš„æ–¹æ³•ã€‚</p><p>æ–‡æœ¬å¯¹è±¡å¯ä»¥è¢« <strong>æ“ä½œç¬¦ operations</strong> ä½¿ç”¨ï¼Œè¿™é‡Œæœ‰ä¸¤ç±»æ–‡æœ¬å¯¹è±¡ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">i</span> + <span class="hljs-selector-tag">object</span>  å†…éƒ¨æ–‡æœ¬å¯¹è±¡<br><span class="hljs-selector-tag">a</span> + <span class="hljs-selector-tag">object</span>  å¤–éƒ¨æ–‡æœ¬å¯¹è±¡<br></code></pre></td></tr></table></figure><p><strong>å†…éƒ¨æ–‡æœ¬å¯¹è±¡</strong>é€‰ä¸­çš„éƒ¨åˆ†ä¸åŒ…å«åŒ…å›´æ–‡æœ¬å¯¹è±¡çš„ç©ºç™½æˆ–æ‹¬å·ç­‰ï¼Œ<strong>å¤–éƒ¨æ–‡æœ¬å¯¹è±¡</strong>åˆ™åŒ…æ‹¬äº†åŒ…å›´å†…å®¹çš„ç©ºç™½æˆ–æ‹¬å·ç­‰å¯¹è±¡ã€‚å¤–éƒ¨å¯¹è±¡æ€»æ˜¯æ¯”å†…éƒ¨å¯¹è±¡é€‰ä¸­çš„å†…å®¹æ›´å¤šã€‚å¦‚æœä½ çš„å…‰æ ‡ä½äºä¸€å¯¹æ‹¬å·å†…éƒ¨ï¼Œä¾‹å¦‚<code>(hello Vim)</code>ä¸­ï¼š</p><ul><li>åˆ é™¤æ‹¬å·å†…éƒ¨çš„å†…å®¹ä½†ä¿ç•™æ‹¬å·ï¼š<code>di(</code></li><li>åˆ é™¤æ‹¬å·ä»¥åŠå†…éƒ¨çš„å†…å®¹ï¼š<code>da(</code></li></ul><p>è®©æˆ‘ä»¬çœ‹ä¸€äº›åˆ«çš„ä¾‹å­ï¼Œå‡è®¾ä½ æœ‰è¿™æ ·ä¸€æ®µJavascriptçš„å‡½æ•°ï¼Œä½ çš„å…‰æ ‡åœç•™åœ¨â€Helloâ€ä¸­çš„â€Hâ€ä¸Šï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> hello = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello Vim&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åˆ é™¤æ•´ä¸ªâ€Hello Vimâ€ï¼š<code>di(</code></li><li>åˆ é™¤æ•´ä¸ªå‡½æ•°(è¢«{}åŒ…å«)ï¼š<code>di&#123;</code></li><li>åˆ é™¤â€Helloâ€è¿™ä¸ªè¯ï¼š<code>diw</code></li></ul><p>æ–‡æœ¬å¯¹è±¡å¾ˆå¼ºå¤§å› ä¸ºä½ å¯ä»¥åœ¨åŒä¸€ä¸ªä½ç½®æŒ‡å‘ä¸åŒçš„å†…å®¹ï¼Œå¯ä»¥åˆ é™¤ä¸€å¯¹å°æ‹¬å·ä¸­çš„æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯å½“å‰å¤§æ‹¬å·ä¸­çš„å‡½æ•°ä½“ï¼Œä¹Ÿå¯ä»¥æ˜¯å½“å‰å•è¯ã€‚è¿™ä¸€ç‚¹ä¹Ÿå¾ˆå¥½è®°å¿†ï¼Œå½“ä½ çœ‹åˆ°<code>di(</code>ï¼Œ<code>di&#123;</code>å’Œ<code>diw</code>æ—¶ï¼Œä½ ä¹Ÿå¯ä»¥å¾ˆå¥½çš„æ„è¯†åˆ°ä»–ä»¬è¡¨ç¤ºçš„æ˜¯ä»€ä¹ˆï¼šå°æ‹¬å·ï¼Œå¤§æ‹¬å·ï¼Œå•è¯ã€‚</p><p>è®©æˆ‘ä»¬æ¥çœ‹æœ€åä¸€ä¸ªä¾‹å­ã€‚å‡è®¾ä½ æœ‰è¿™æ ·ä¸€äº›htmlçš„æ ‡ç­¾çš„æ–‡æœ¬ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Header1<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Paragraph1<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Paragraph2<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä½ çš„å…‰æ ‡ä½äºâ€Header1â€æ–‡æœ¬ä¸Šï¼š</p><ul><li>åˆ é™¤â€Header1â€ï¼š<code>dit</code></li><li>åˆ é™¤<code>&lt;h1&gt;Header1&lt;/h1&gt;</code>ï¼š<code>dat</code></li></ul><p>å¦‚æœä½ çš„å…‰æ ‡åœ¨â€divâ€æ–‡æœ¬ä¸Šï¼š</p><ul><li>åˆ é™¤<code>h1</code>å’Œæ‰€æœ‰<code>p</code>æ ‡ç­¾çš„è¡Œï¼š<code>dit</code></li><li>åˆ é™¤æ‰€æœ‰æ–‡æœ¬ï¼š<code>dat</code></li><li>åˆ é™¤â€divâ€ï¼š<code>di&lt;</code></li></ul><p>ä¸‹é¢åˆ—ä¸¾çš„ä¸€äº›é€šå¸¸è§åˆ°çš„æ–‡æœ¬å¯¹è±¡ï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs 1c">w     ä¸€ä¸ªå•è¯<br>p     ä¸€ä¸ªæ®µè½<br>s     ä¸€ä¸ªå¥å­<br>(æˆ–)  ä¸€å¯¹()<br>&#123;æˆ–&#125;  ä¸€å¯¹&#123;&#125;<br>[æˆ–]  ä¸€å¯¹[]<br>&lt;æˆ–&gt;  ä¸€å¯¹&lt;&gt;<br>t     XMLæ ‡ç­¾<br><span class="hljs-string">&quot;     ä¸€å¯¹&quot;&quot;</span><br>&#x27;     ä¸€å¯¹&#x27;&#x27;<br>`     ä¸€å¯¹``<br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥é€šè¿‡<code>:h text-objects</code>äº†è§£æ›´å¤š</p><h2 id="ç»“åˆæ€§å’Œè¯­æ³•"><a href="#ç»“åˆæ€§å’Œè¯­æ³•" class="headerlink" title="ç»“åˆæ€§å’Œè¯­æ³•"></a>ç»“åˆæ€§å’Œè¯­æ³•</h2><p>åœ¨å­¦ä¹ Vimçš„è¯­æ³•ä¹‹åï¼Œè®©æˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹Vimä¸­çš„ç»“åˆæ€§ä»¥åŠä¸ºä»€ä¹ˆåœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½ã€‚</p><p>ç»“åˆæ€§æ„å‘³ç€ä½ æœ‰å¾ˆå¤šå¯ä»¥ç»„åˆèµ·æ¥å®Œæˆæ›´å¤æ‚å‘½ä»¤çš„æ™®é€šå‘½ä»¤ï¼Œå°±åƒä½ åœ¨ç¼–ç¨‹ä¸­å¯ä»¥é€šè¿‡ä¸€äº›ç®€å•çš„æŠ½è±¡å»ºç«‹æ›´å¤æ‚çš„æŠ½è±¡ï¼Œåœ¨Vimä¸­ä½ å¯ä»¥é€šè¿‡ç®€å•çš„å‘½ä»¤çš„ç»„åˆæ‰§è¡Œæ›´å¤æ‚çš„å‘½ä»¤ã€‚Vimè¯­æ³•æ­£æ˜¯Vimä¸­å‘½ä»¤çš„å¯ç»“åˆæ€§çš„ä½“ç°ã€‚</p><p>Vimçš„ç»“åˆæ€§æœ€å¼ºå¤§ä¹‹å¤„ä½“ç°åœ¨å®ƒå’Œå¤–éƒ¨ç¨‹åºç»“åˆæ—¶ï¼ŒVimæœ‰ä¸€ä¸ª <strong>è¿‡æ»¤æ“ä½œç¬¦</strong><code>!</code>å¯ä»¥ç”¨å¤–éƒ¨ç¨‹åºè¿‡æ»¤æˆ‘ä»¬çš„æ–‡æœ¬ã€‚å‡è®¾ä½ æœ‰ä¸‹é¢è¿™æ®µæ··ä¹±çš„æ–‡æœ¬å¹¶ä¸”ä½ æƒ³æŠŠå®ƒç”¨tabæ ¼å¼åŒ–çš„æ›´å¥½çœ‹çš„ä¸€äº›ï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coq">Id|<span class="hljs-type">Name</span>|<span class="hljs-type">Cuteness</span><br><span class="hljs-number">01</span>|<span class="hljs-type">Puppy</span>|<span class="hljs-type">Very</span><br><span class="hljs-number">02</span>|<span class="hljs-type">Kitten</span>|<span class="hljs-type">Ok</span><br><span class="hljs-number">03</span>|<span class="hljs-type">Bunny</span>|<span class="hljs-type">Ok</span><br></code></pre></td></tr></table></figure><p>è¿™ä»¶äº‹æƒ…é€šè¿‡Vimå‘½ä»¤ä¸å¤ªå®¹æ˜“å®Œæˆï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡ç»ˆç«¯æä¾›çš„å‘½ä»¤<code>column</code>å¾ˆå¿«çš„å®Œæˆå®ƒï¼Œå½“ä½ çš„å…‰æ ‡ä½äºâ€Idâ€ä¸Šæ—¶ï¼Œè¿è¡Œ<code>!&#125;column -t -s &quot;|&quot;</code>ï¼Œä½ çš„æ–‡æœ¬å°±å˜å¾—æ•´é½äº†è®¸å¤šï¼š</p><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs fsharp">Id  Name    Cuteness<br><span class="hljs-number">01</span>  Puppy   Very<br><span class="hljs-number">02</span>  Kitten  <span class="hljs-literal">Ok</span><br><span class="hljs-number">03</span>  Bunny   <span class="hljs-literal">Ok</span><br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹ä¸Šé¢é‚£æ¡å‘½ä»¤ï¼ŒåŠ¨è¯æ˜¯<code>!</code>(<strong>è¿‡æ»¤æ“ä½œç¬¦</strong>)ï¼Œåè¯æ˜¯<code>&#125;</code>(åˆ°ä¸‹ä¸€ä¸ªæ®µè½)ã€‚<strong>è¿‡æ»¤æ“ä½œç¬¦</strong><code>!</code>æ¥å—ç»ˆç«¯å‘½ä»¤ä½œä¸ºå¦ä¸€ä¸ªå‚æ•°ï¼Œå› æ­¤æˆ‘æŠŠ<code>column -t -s &quot;|&quot;</code>ä¼ ç»™å®ƒã€‚æˆ‘ä¸æƒ³è¯¦ç»†æè¿°<code>column</code>æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä½†æ˜¯æ€»ä¹‹å®ƒæ ¼å¼åŒ–äº†æ–‡æœ¬ã€‚</p><p>å‡è®¾ä½ ä¸æ­¢æƒ³æ ¼å¼åŒ–ä½ çš„æ–‡æœ¬ï¼Œè¿˜æƒ³åªå±•ç¤º<code>Ok</code>ç»“å°¾çš„è¡Œï¼Œä½ çŸ¥é“<code>awk</code>å‘½ä»¤å¯ä»¥åšè¿™ä»¶äº‹æƒ…ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">!&#125;column -t -s <span class="hljs-string">&quot;|&quot;</span> | awk <span class="hljs-string">&#x27;NR &gt; 1 &amp;&amp; /Ok/&#123;print <span class="hljs-subst">$0</span>&#125;&#x27;</span><br></code></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">02 </span> Kitten  Ok<br><span class="hljs-symbol">03 </span> Bunny   Ok<br></code></pre></td></tr></table></figure><p>666ï¼ç®¡é“ç«Ÿç„¶åœ¨Vimä¸­ä¹Ÿèƒ½èµ·ä½œç”¨ã€‚</p><p>è¿™å°±æ˜¯Vimçš„ç»“åˆæ€§çš„å¼ºå¤§ä¹‹å¤„ã€‚ä½ çŸ¥é“çš„åŠ¨è¯ <strong>æ“ä½œç¬¦</strong>ï¼Œåè¯ <strong>åŠ¨ä½œ</strong>ï¼Œç»ˆç«¯å‘½ä»¤è¶Šå¤šï¼Œä½ ç»„å»ºå¤æ‚æ“ä½œçš„èƒ½åŠ›æˆå€å¢é•¿ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œå‡è®¾ä½ åªçŸ¥é“å››ä¸ª<strong>åŠ¨ä½œ</strong>ï¼š<code>w, $, &#125;, G</code>å’Œåˆ é™¤æ“ä½œç¬¦(<code>d</code>)ï¼Œä½ å¯ä»¥åš8ä»¶äº‹ï¼šæŒ‰å››ç§æ–¹å¼ç§»åŠ¨(<code>w, $, &#125;, G</code>)å’Œåˆ é™¤4ç§æ–‡æœ¬å¯¹è±¡(<code>dw, d$, d&#125;, dG</code>)ã€‚å¦‚æœæœ‰ä¸€å¤©ä½ å­¦ä¹ äº†å°å†™å˜å¤§å†™çš„<strong>æ“ä½œç¬¦</strong>(<code>gU</code>)ï¼Œä½ çš„Vimå·¥å…·ç®±ä¸­å¤šçš„ä¸æ˜¯1ç§å·¥å…·ï¼Œè€Œæ˜¯4ç§ï¼š<code>gUw, gU$, gU&#125;, gUG</code>ã€‚ç°åœ¨ä½ çš„Vimå·¥å…·ç®±ä¸­å°±æœ‰12ç§å·¥å…·äº†ã€‚å¦‚æœä½ çŸ¥é“10ä¸ª<strong>åŠ¨ä½œ</strong>å’Œ5ä¸ª<strong>æ“ä½œç¬¦</strong>ï¼Œé‚£ä¹ˆä½ å°±æœ‰60ç§å·¥å…·(50ä¸ªæ“ä½œ+10ä¸ªç§»åŠ¨)ã€‚å¦å¤–ï¼Œè¡Œå·åŠ¨ä½œ(<code>nG</code>)ç»™ä½ äº†<code>n</code>ç§<strong>åŠ¨ä½œ</strong>ï¼Œå…¶ä¸­<code>n</code>æ˜¯ä½ æ–‡ä»¶ä¸­çš„è¡Œæ•°(ä¾‹å¦‚å‰å¾€ç¬¬5è¡Œï¼Œ<code>5G</code>)ã€‚æœç´¢åŠ¨ä½œ(<code>/</code>)å®é™…ä¸Šç»™ä½ å¸¦æ¥æ— é™æ•°é‡çš„<strong>åŠ¨ä½œ</strong>å› ä¸ºä½ å¯ä»¥æœç´¢ä»»ä½•å†…å®¹ã€‚ä½ çŸ¥é“å¤šå°‘ç»ˆç«¯å‘½ä»¤ï¼Œå¤–éƒ¨å‘½ä»¤æ“ä½œç¬¦(<code>!</code>)å°±ç»™ä½ äº†å¤šå°‘ç§è¿‡æ»¤å·¥å…·ã€‚ä½¿ç”¨Vimè¿™ç§èƒ½å¤Ÿç»„åˆçš„å·¥å…·ï¼Œæ‰€æœ‰ä½ çŸ¥é“çš„ä¸œè¥¿éƒ½å¯ä»¥è¢«ä¸²èµ·æ¥å®Œæˆæ›´å¤æ‚çš„æ“ä½œã€‚ä½ çŸ¥é“çš„è¶Šå¤šï¼Œä½ å°±è¶Šå¼ºå¤§ã€‚</p><p>è¿™ç§å…·æœ‰ç»“åˆæ€§çš„è¡Œä¸ºä¹Ÿæ­£ç¬¦åˆUnixçš„å“²å­¦ï¼š<em>ä¸€ä¸ªå‘½ä»¤åšå¥½ä¸€ä»¶äº‹</em>ã€‚<strong>åŠ¨ä½œ</strong>åªéœ€è¦åšä¸€ä»¶äº‹ï¼šå‰å¾€Xã€‚<strong>æ“ä½œç¬¦</strong>åªéœ€è¦åšä¸€ä»¶äº‹ï¼šå®ŒæˆYã€‚é€šè¿‡ç»“åˆä¸€ä¸ª<strong>æ“ä½œç¬¦</strong>å’Œä¸€ä¸ª<strong>åŠ¨ä½œ</strong>ï¼Œä½ å°±è·å¾—äº†YXï¼šåœ¨Xä¸Šå®ŒæˆYã€‚</p><p>ç”šè‡³ï¼Œ<strong>åŠ¨ä½œ</strong>å’Œ<strong>æ“ä½œç¬¦</strong>éƒ½æ˜¯å¯æ‹“å±•çš„ï¼Œä½ å¯ä»¥è‡ªå·±åˆ›é€ <strong>åŠ¨ä½œ</strong>å’Œ<strong>æ“ä½œç¬¦</strong>å»ä¸°å¯Œä½ çš„Vimå·¥å…·ç®±ï¼Œ<a href="https://github.com/kana/vim-textobj-user"><code>Vim-textobj-user</code></a>æ’ä»¶å…è®¸ä½ åˆ›å»ºè‡ªå·±çš„æ–‡æœ¬å¯¹è±¡ï¼ŒåŒæ—¶åŒ…å«æœ‰<a href="https://github.com/kana/vim-textobj-user/wiki">ä¸€ç³»åˆ—å®šä¹‰å¥½çš„æ–‡æœ¬å¯¹è±¡</a>ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœä½ ä¸çŸ¥é“æˆ‘åˆšæ‰ä½¿ç”¨çš„<code>column</code>å’Œ<code>awk</code>å‘½ä»¤ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œé‡è¦çš„æ˜¯Vimå¯ä»¥å’Œç»ˆç«¯å‘½ä»¤å¾ˆå¥½çš„ç»“åˆèµ·æ¥ã€‚</p><h2 id="èªæ˜åœ°å­¦ä¹ è¯­æ³•"><a href="#èªæ˜åœ°å­¦ä¹ è¯­æ³•" class="headerlink" title="èªæ˜åœ°å­¦ä¹ è¯­æ³•"></a>èªæ˜åœ°å­¦ä¹ è¯­æ³•</h2><p>ä½ åˆšåˆšå­¦å®ŒVimå”¯ä¸€çš„è¯­æ³•è§„åˆ™ï¼š</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">verb + <span class="hljs-built_in">noun</span><br></code></pre></td></tr></table></figure><p>æˆ‘å­¦Vimä¸­æœ€å¤§çš„â€AHA momentâ€ä¹‹ä¸€æ˜¯å½“æˆ‘åˆšå­¦å®Œå¤§å†™å‘½ä»¤(<code>gU</code>)æ—¶ï¼Œæƒ³è¦æŠŠä¸€ä¸ªå•è¯å˜æˆå¤§å†™ï¼Œæˆ‘æœ¬èƒ½çš„è¿è¡Œäº†<code>gUiW</code>ï¼Œå®ƒå±…ç„¶æˆåŠŸäº†ï¼Œæˆ‘å…‰æ ‡æ‰€åœ¨çš„å•è¯éƒ½å¤§å†™äº†ã€‚æˆ‘æ­£æ˜¯ä»é‚£æ˜¯å¼€å§‹ç†è§£Vimçš„ã€‚æˆ‘å¸Œæœ›ä½ ä¹Ÿä¼šåœ¨ä¸ä¹…ä¹‹åæœ‰ä½ è‡ªå·±çš„â€AHA momentâ€ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰çš„è¯ã€‚</p><p>è¿™ä¸€ç« çš„ç›®æ ‡æ˜¯å‘ä½ å±•ç°Vimä¸­çš„<code>verb+noun</code>æ¨¡å¼ï¼Œå› æ­¤ä¹‹åä½ å°±å¯ä»¥åƒå­¦ä¹ ä¸€é—¨æ–°çš„è¯­è¨€ä¸€æ ·æ¸è¿›çš„å­¦ä¹ Vimè€Œä¸æ˜¯æ­»è®°æ¯ä¸ªå‘½ä»¤çš„ç»„åˆã€‚</p><p>å­¦ä¹ è¿™ç§æ¨¡å¼å¹¶ä¸”ç†è§£å…¶ä¸­çš„å«ä¹‰ï¼Œè¿™æ˜¯èªæ˜çš„å­¦ä¹ æ–¹å¼ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-è¾“å…¥æ¨¡å¼</title>
    <link href="/2022/04/05/Vim/ch06_insert_mode/"/>
    <url>/2022/04/05/Vim/ch06_insert_mode/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬06ç« -è¾“å…¥æ¨¡å¼"><a href="#ç¬¬06ç« -è¾“å…¥æ¨¡å¼" class="headerlink" title="ç¬¬06ç«  è¾“å…¥æ¨¡å¼"></a>ç¬¬06ç«  è¾“å…¥æ¨¡å¼</h1><p>è¾“å…¥æ¨¡å¼æ˜¯å¤§éƒ¨åˆ†æ–‡æœ¬ç¼–è¾‘å™¨çš„é»˜è®¤æ¨¡å¼ï¼Œåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œæ‰€æ•²å³æ‰€å¾—ã€‚</p><p>å°½ç®¡å¦‚æ­¤ï¼Œè¿™å¹¶ä¸ä»£è¡¨è¾“å…¥æ¨¡å¼æ²¡ä»€ä¹ˆå¥½å­¦çš„ã€‚Vimçš„è¾“å…¥æ¨¡å¼åŒ…å«è®¸å¤šæœ‰ç”¨åŠŸèƒ½ã€‚åœ¨è¿™ä¸€ç« èŠ‚ä¸­ï¼Œä½ å°†èƒ½å¤Ÿå­¦åˆ°å¦‚ä½•åˆ©ç”¨Vimè¾“å…¥æ¨¡å¼ä¸­çš„ç‰¹æ€§æ¥æå‡ä½ çš„è¾“å…¥æ•ˆç‡ã€‚</p><h2 id="è¿›å…¥è¾“å…¥æ¨¡å¼çš„æ–¹æ³•"><a href="#è¿›å…¥è¾“å…¥æ¨¡å¼çš„æ–¹æ³•" class="headerlink" title="è¿›å…¥è¾“å…¥æ¨¡å¼çš„æ–¹æ³•"></a>è¿›å…¥è¾“å…¥æ¨¡å¼çš„æ–¹æ³•</h2><p>æˆ‘ä»¬æœ‰å¾ˆå¤šæ–¹å¼ä»æ™®é€šæ¨¡å¼è¿›å…¥è¾“å…¥æ¨¡å¼ï¼Œä¸‹é¢åˆ—ä¸¾å‡ºäº†å…¶ä¸­çš„ä¸€äº›æ–¹æ³•ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">i</span>    ä»å…‰æ ‡ä¹‹å‰çš„ä½ç½®å¼€å§‹è¾“å…¥æ–‡æœ¬<br><span class="hljs-selector-tag">I</span>    ä»å½“å‰è¡Œç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ä¹‹å‰çš„ä½ç½®ä¹‹å‰å¼€å§‹è¾“å…¥æ–‡æœ¬<br><span class="hljs-selector-tag">a</span>    åœ¨å…‰æ ‡ä¹‹åçš„ä½ç½®è¿½åŠ æ–‡æœ¬<br><span class="hljs-selector-tag">A</span>    åœ¨å½“å‰è¡Œçš„æœ«å°¾è¿½åŠ æ–‡æœ¬<br>o    åœ¨å…‰æ ‡ä½ç½®ä¸‹æ–¹æ–°èµ·ä¸€è¡Œå¹¶å¼€å§‹è¾“å…¥æ–‡æœ¬<br>O    åœ¨å…‰æ ‡ä½ç½®çš„ä¸Šæ–¹æ–°èµ·ä¸€è¡Œå¹¶å¼€å§‹è¾“å…¥æ–‡æœ¬<br>s    åˆ é™¤å½“å‰å…‰æ ‡ä½ç½®çš„å­—ç¬¦å¹¶å¼€å§‹è¾“å…¥æ–‡æœ¬<br>S    åˆ é™¤å½“å‰è¡Œå¹¶å¼€å§‹è¾“å…¥æ–‡æœ¬<br>gi   ä»å½“å‰ç¼“å†²åŒºä¸Šæ¬¡ç»“æŸè¾“å…¥æ¨¡å¼çš„åœ°æ–¹å¼€å§‹è¾“å…¥æ–‡æœ¬<br>gI   åœ¨å½“å‰è¡Œçš„ç¬¬ä¸€åˆ—çš„ä½ç½®å¼€å§‹è¾“å…¥æ–‡æœ¬<br></code></pre></td></tr></table></figure><p>å€¼å¾—æ³¨æ„çš„æ˜¯è¿™äº›å‘½ä»¤çš„å°å†™&#x2F;å¤§å†™æ¨¡å¼ï¼Œæ¯ä¸€ä¸ªå°å†™å‘½ä»¤éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„å¤§å†™å‘½ä»¤ã€‚å¦‚æœä½ æ˜¯åˆå­¦è€…ï¼Œä¸ç”¨æ‹…å¿ƒè®°ä¸ä½ä»¥ä¸Šæ•´ä¸ªå‘½ä»¤åˆ—è¡¨ï¼Œå¯ä»¥ä» <code>i</code> å’Œ <code>a</code>ä¸¤æ¡å‘½ä»¤å¼€å§‹ï¼Œè¿™ä¸¤æ¡å‘½ä»¤è¶³å¤Ÿåœ¨å…¥é—¨é˜¶æ®µä½¿ç”¨äº†ï¼Œä¹‹åå†é€æ¸åœ°æŒæ¡æ›´å¤šå…¶ä»–çš„å‘½ä»¤ã€‚</p><h2 id="é€€å‡ºè¾“å…¥æ¨¡å¼çš„æ–¹æ³•"><a href="#é€€å‡ºè¾“å…¥æ¨¡å¼çš„æ–¹æ³•" class="headerlink" title="é€€å‡ºè¾“å…¥æ¨¡å¼çš„æ–¹æ³•"></a>é€€å‡ºè¾“å…¥æ¨¡å¼çš„æ–¹æ³•</h2><p>ä¸‹é¢åˆ—å‡ºäº†ä¸€äº›ä»è¾“å…¥æ¨¡å¼é€€å‡ºåˆ°æ™®é€šæ¨¡å¼çš„æ–¹æ³•ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">esc</span>&gt;</span>     é€€å‡ºè¾“å…¥æ¨¡å¼è¿›å…¥æ™®é€šæ¨¡å¼<br>Ctrl-[    é€€å‡ºè¾“å…¥æ¨¡å¼è¿›å…¥æ™®é€šæ¨¡å¼<br>Ctrl-c    ä¸ Ctrl-[ å’Œ <span class="hljs-tag">&lt;<span class="hljs-name">esc</span>&gt;</span>åŠŸèƒ½ç›¸åŒ, ä½†æ˜¯ä¸æ£€æŸ¥ç¼©å†™<br></code></pre></td></tr></table></figure><p>æˆ‘å‘ç°<code> esc</code>é”®åœ¨é”®ç›˜ä¸Šå¤ªè¿œäº†ï¼Œå¾ˆéš¾å¤Ÿåˆ°ï¼Œæ‰€ä»¥æˆ‘åœ¨æˆ‘çš„æœºå™¨ä¸Šå°†<code> caps lock</code> æ˜ å°„æˆäº†<code>esc</code>é”®ã€‚ å¦‚æœä½ æœç´¢Bill Joyï¼ˆViçš„ä½œè€…ï¼‰çš„ADM-3A é”®ç›˜ï¼Œ ä½ ä¼šå‘ç°<code>esc</code>é”®å¹¶ä¸æ˜¯åƒç°åœ¨æµè¡Œçš„é”®ç›˜å¸ƒå±€ä¸€æ ·åœ¨é”®ç›˜çš„æœ€å·¦ä¸Šæ–¹ï¼Œè€Œæ˜¯åœ¨<code>q</code>é”®çš„å·¦è¾¹ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºå°†<code>caps lock</code> æ˜ å°„æˆ<code>esc</code>é”®æ˜¯åˆç†çš„ã€‚</p><p>å¦ä¸€ä¸ªVimç”¨æˆ·ä¸­å¸¸è§çš„ä¹ æƒ¯æ˜¯ç”¨ä»¥ä¸‹çš„é…ç½®æ–¹æ³•åœ¨è¾“å…¥æ¨¡å¼ä¸­æŠŠ<code>esc</code>æ˜ å°„åˆ°<code>jj</code>æˆ–è€…<code>jk</code>ã€‚</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">inoremap</span> jj <span class="hljs-symbol">&lt;esc&gt;</span><br><span class="hljs-keyword">inoremap</span> jk <span class="hljs-symbol">&lt;esc&gt;</span><br></code></pre></td></tr></table></figure><h2 id="é‡å¤è¾“å…¥æ¨¡å¼"><a href="#é‡å¤è¾“å…¥æ¨¡å¼" class="headerlink" title="é‡å¤è¾“å…¥æ¨¡å¼"></a>é‡å¤è¾“å…¥æ¨¡å¼</h2><p>ä½ å¯ä»¥åœ¨è¿›å…¥è¾“å…¥æ¨¡å¼ä¹‹å‰ä¼ é€’ä¸€ä¸ªè®¡æ•°å‚æ•°. æ¯”å¦‚ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-number">10i</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä½ è¾“å…¥â€œhello world!â€ç„¶åé€€å‡ºè¾“å…¥æ¨¡å¼ï¼Œ Vimå°†é‡å¤è¿™æ®µæ–‡æœ¬10æ¬¡ã€‚è¿™ä¸ªæ–¹æ³•å¯¹ä»»æ„ä¸€ç§è¿›å…¥è¾“å…¥æ¨¡å¼çš„æ–¹å¼éƒ½æœ‰æ•ˆï¼ˆå¦‚ï¼š<code>10I</code>, <code>11a</code>, <code>12o</code>ï¼‰</p><h2 id="åœ¨è¾“å…¥æ¨¡å¼ä¸­åˆ é™¤å¤§å—æ–‡æœ¬"><a href="#åœ¨è¾“å…¥æ¨¡å¼ä¸­åˆ é™¤å¤§å—æ–‡æœ¬" class="headerlink" title="åœ¨è¾“å…¥æ¨¡å¼ä¸­åˆ é™¤å¤§å—æ–‡æœ¬"></a>åœ¨è¾“å…¥æ¨¡å¼ä¸­åˆ é™¤å¤§å—æ–‡æœ¬</h2><p>å½“ä½ è¾“å…¥è¿‡ç¨‹ä¸­å‡ºç°ä¸€äº›è¾“å…¥é”™è¯¯æ—¶ï¼Œä¸€ç›´é‡å¤åœ°ç”¨<code>backspace</code>æ¥åˆ é™¤çš„è¯ä¼šéå¸¸åœ°ç¹çã€‚æ›´ä¸ºåˆç†çš„åšæ³•æ˜¯åˆ‡æ¢åˆ°æ™®é€šæ¨¡å¼å¹¶ä½¿ç”¨<code>d</code>æ¥åˆ é™¤é”™è¯¯ã€‚æˆ–è€…ï¼Œä½ èƒ½ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨è¾“å…¥æ¨¡å¼ä¸‹å°±åˆ é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">Ctrl-h    åˆ é™¤ä¸€ä¸ªå­—ç¬¦<br>Ctrl-w    åˆ é™¤ä¸€ä¸ªå•è¯<br>Ctrl-u    åˆ é™¤ä¸€æ•´è¡Œ<br></code></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œè¿™äº›å¿«æ·é”®ä¹Ÿæ”¯æŒåœ¨ å‘½ä»¤è¡Œæ¨¡å¼ å’Œ Exæ¨¡å¼ ä¸­ä½¿ç”¨ï¼ˆå‘½ä»¤è¡Œæ¨¡å¼å’ŒExæ¨¡å¼å°†ä¼šåœ¨ä¹‹åçš„ç« èŠ‚ä¸­ä»‹ç»ï¼‰</p><h2 id="ç”¨å¯„å­˜å™¨è¿›è¡Œè¾“å…¥"><a href="#ç”¨å¯„å­˜å™¨è¿›è¡Œè¾“å…¥" class="headerlink" title="ç”¨å¯„å­˜å™¨è¿›è¡Œè¾“å…¥"></a>ç”¨å¯„å­˜å™¨è¿›è¡Œè¾“å…¥</h2><p>å¯„å­˜å™¨å°±åƒæ˜¯å†…å­˜é‡Œçš„æš‚å­˜å™¨ä¸€æ ·ï¼Œå¯ä¾›å­˜å‚¨å’Œå–å‡ºæ–‡æœ¬ã€‚åœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å¿«æ·é”®<code>Ctrl-r</code>åŠ ä¸Šå¯„å­˜å™¨çš„æ ‡è¯†æ¥ä»ä»»ä½•æœ‰æ ‡è¯†çš„å¯„å­˜å™¨è¾“å…¥æ–‡æœ¬ã€‚æœ‰å¾ˆå¤šæ ‡è¯†å¯ä¾›ä½¿ç”¨ï¼Œä½†æ˜¯åœ¨è¿™ä¸€ç« èŠ‚ä¸­ä½ åªéœ€è¦çŸ¥é“ä»¥ï¼ˆa-z)å‘½åçš„å¯„å­˜å™¨æ˜¯å¯ä»¥ä½¿ç”¨çš„å°±è¶³å¤Ÿäº†ã€‚</p><p>è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ä¸­å±•ç¤ºå¯„å­˜å™¨çš„ç”¨æ³•ï¼Œé¦–å…ˆä½ éœ€è¦å¤åˆ¶ä¸€ä¸ªå•è¯åˆ°å¯„å­˜å™¨aä¸­ï¼Œè¿™ä¸€æ­¥å¯ä»¥ç”¨ä»¥ä¸‹è¿™æ¡å‘½ä»¤æ¥å®Œæˆï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;ayiw</span><br></code></pre></td></tr></table></figure><ul><li><code>&quot;a</code> å‘Šè¯‰Vimä½ ä¸‹ä¸€ä¸ªåŠ¨ä½œçš„ç›®æ ‡åœ°å€æ˜¯å¯„å­˜å™¨a</li><li><code>yiw</code> å¤åˆ¶ä¸€ä¸ªå†…è¯ï¼ˆinner wordï¼‰ï¼Œå¯ä»¥å›é¡¾Vimè¯­æ³•ç« èŠ‚æŸ¥çœ‹å…·ä½“è¯­æ³•ã€‚</li></ul><p>ç°åœ¨å¯„å­˜å™¨aå­˜æ”¾ç€ä½ åˆšå¤åˆ¶çš„å•è¯ã€‚åœ¨è¾“å…¥æ¨¡å¼ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹çš„å¿«æ·é”®æ¥ç²˜è´´å­˜æ”¾åœ¨å¯„å­˜å™¨aä¸­æ–‡æœ¬ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">Ctrl-r <span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure><p>Vimä¸­å­˜åœ¨å¾ˆå¤šç§ç±»å‹çš„å¯„å­˜å™¨ï¼Œæˆ‘ä¼šåœ¨åé¢çš„ç« èŠ‚ä¸­ä»‹ç»æ›´å¤šä»–ä»¬çš„ç»†èŠ‚ã€‚</p><h2 id="é¡µé¢æ»šåŠ¨"><a href="#é¡µé¢æ»šåŠ¨" class="headerlink" title="é¡µé¢æ»šåŠ¨"></a>é¡µé¢æ»šåŠ¨</h2><p>ä½ çŸ¥é“åœ¨è¾“å…¥æ¨¡å¼ä¸­ä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œé¡µé¢æ»šåŠ¨çš„å—ï¼Ÿåœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨å¿«æ·é”®<code>Ctrl-x</code>è¿›å…¥<code>Ctrl-x</code>å­æ¨¡å¼ï¼Œä½ å¯ä»¥è¿›è¡Œä¸€äº›é¢å¤–æ“ä½œï¼Œé¡µé¢æ»šåŠ¨æ­£æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">Ctrl-<span class="hljs-keyword">x</span> Ctrl-y    å‘ä¸Šæ»šåŠ¨é¡µé¢<br>Ctrl-<span class="hljs-keyword">x</span> Ctrl-e    å‘ä¸‹æ»šåŠ¨é¡µé¢<br></code></pre></td></tr></table></figure><h2 id="è‡ªåŠ¨è¡¥å…¨"><a href="#è‡ªåŠ¨è¡¥å…¨" class="headerlink" title="è‡ªåŠ¨è¡¥å…¨"></a>è‡ªåŠ¨è¡¥å…¨</h2><p>Vimåœ¨è¿›å…¥<code>Ctrl-x</code>å­æ¨¡å¼åï¼ˆå’Œé¡µé¢æ»šåŠ¨ä¸€æ ·ï¼‰ï¼Œæœ‰ä¸€ä¸ªè‡ªå¸¦çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ã€‚å°½ç®¡å®ƒä¸å¦‚intellisenseæˆ–è€…å…¶ä»–çš„è¯­è¨€æœåŠ¡å™¨åè®®ï¼ˆLSPï¼‰ä¸€æ ·å¥½ç”¨ï¼Œä½†æ˜¯ä¹Ÿç®—æ˜¯ä¸€ä¸ªé”¦ä¸Šæ·»èŠ±çš„å†…ç½®åŠŸèƒ½äº†ã€‚</p><p>ä¸‹é¢åˆ—å‡ºäº†ä¸€äº›é€‚åˆå…¥é—¨æ—¶å­¦ä¹ çš„è‡ªåŠ¨è¡¥å…¨å‘½ä»¤ï¼š</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs llvm">Ctrl-<span class="hljs-keyword">x</span> Ctrl-l   è¡¥å…¨ä¸€æ•´è¡Œ<br>Ctrl-<span class="hljs-keyword">x</span> Ctrl-n   ä»å½“å‰æ–‡ä»¶ä¸­è¡¥å…¨æ–‡æœ¬<br>Ctrl-<span class="hljs-keyword">x</span> Ctrl-i   ä»å¼•ç”¨ï¼ˆincludeï¼‰çš„æ–‡ä»¶ä¸­è¡¥å…¨æ–‡æœ¬<br>Ctrl-<span class="hljs-keyword">x</span> Ctrl-f   è¡¥å…¨ä¸€ä¸ªæ–‡ä»¶å<br></code></pre></td></tr></table></figure><p>å½“ä½ å‡ºå‘è‡ªåŠ¨è¡¥å…¨æ—¶ï¼ŒVimä¼šæ˜¾ç¤ºä¸€ä¸ªé€‰é¡¹å¼¹çª—ï¼Œå¯ä»¥ä½¿ç”¨<code>Ctrl-n</code>å’Œ<code>Ctrl-p</code>æ¥åˆ†åˆ«å‘ä¸Šå’Œå‘ä¸‹æµè§ˆé€‰é¡¹ã€‚</p><p>Vimä¹Ÿæä¾›äº†ä¸¤æ¡ä¸éœ€è¦è¿›å…¥<code>Ctrl-x</code>æ¨¡å¼å°±èƒ½ä½¿ç”¨çš„å‘½ä»¤ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">Ctrl-n             ä½¿ç”¨ä¸‹ä¸€ä¸ªåŒ¹é…çš„å•è¯è¿›è¡Œè¡¥å…¨<br>Ctrl-<span class="hljs-selector-tag">p</span>             ä½¿ç”¨ä¸Šä¸€ä¸ªåŒ¹é…çš„å•è¯è¿›è¡Œè¡¥å…¨<br></code></pre></td></tr></table></figure><p>é€šå¸¸Vimä¼šå…³æ³¨æ‰€æœ‰ç¼“å†²åŒºï¼ˆbufferï¼‰ä¸­çš„æ–‡æœ¬ä½œä¸ºè‡ªåŠ¨è¡¥å…¨çš„æ–‡æœ¬æ¥æºã€‚å¦‚æœä½ æ‰“å¼€äº†ä¸€ä¸ªç¼“å†²åŒºï¼Œå…¶ä¸­ä¸€è¡Œæ˜¯â€Chocolate donuts are the bestâ€ï¼š</p><ul><li>å½“ä½ è¾“å…¥â€Chocoâ€ç„¶åä½¿ç”¨å¿«æ·é”®<code>Ctrl-x Ctrl-l</code>ï¼Œ Vimä¼šè¿›è¡ŒåŒ¹é…å¹¶è¾“å‡ºè¿™ä¸€æ•´è¡Œçš„æ–‡æœ¬ã€‚</li><li>å½“ä½ è¾“å…¥â€Chocoâ€ç„¶åä½¿ç”¨å¿«æ·é”®<code>Ctrl-p</code>ï¼ŒVimä¼šè¿›è¡ŒåŒ¹é…å¹¶è¾“å‡ºâ€Chocolateâ€è¿™ä¸ªå•è¯ã€‚</li></ul><p>Vimçš„è‡ªåŠ¨è¡¥å…¨æ˜¯ä¸€ä¸ªç›¸å½“å¤§çš„è¯é¢˜ï¼Œä»¥ä¸Šåªæ˜¯å†°å±±ä¸€è§’ï¼Œæƒ³è¦è¿›ä¸€æ­¥å­¦ä¹ çš„è¯å¯ä»¥ä½¿ç”¨<code>:h ins-completion</code>å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹ã€‚</p><h2 id="æ‰§è¡Œæ™®é€šæ¨¡å¼ä¸‹çš„å‘½ä»¤"><a href="#æ‰§è¡Œæ™®é€šæ¨¡å¼ä¸‹çš„å‘½ä»¤" class="headerlink" title="æ‰§è¡Œæ™®é€šæ¨¡å¼ä¸‹çš„å‘½ä»¤"></a>æ‰§è¡Œæ™®é€šæ¨¡å¼ä¸‹çš„å‘½ä»¤</h2><p>ä½ çŸ¥é“Vimå¯ä»¥åœ¨è¾“å…¥æ¨¡å¼ä¸‹æ‰§è¡Œæ™®é€šæ¨¡å¼çš„å‘½ä»¤å—ï¼Ÿ</p><p>åœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œ å¦‚æœä½ æŒ‰ä¸‹<code>Ctrl-o</code>ï¼Œä½ å°±ä¼šè¿›å…¥åˆ°<code>insert-normal</code>ï¼ˆè¾“å…¥-æ™®é€šï¼‰å­æ¨¡å¼ã€‚å¦‚æœä½ å…³æ³¨ä¸€ä¸‹å·¦ä¸‹è§’çš„æ¨¡å¼æŒ‡ç¤ºå™¨ï¼Œé€šå¸¸ä½ å°†çœ‹åˆ°<code>-- INSERT --</code> ï¼Œä½†æ˜¯æŒ‰ä¸‹<code>Ctrl-o</code>åå°±ä¼šå˜ä¸º<code>-- (insert) --</code>ã€‚ åœ¨è¿™ä¸€æ¨¡å¼ä¸‹ï¼Œä½ å¯ä»¥æ‰§è¡Œä¸€æ¡æ™®é€šæ¨¡å¼çš„å‘½ä»¤ï¼Œæ¯”å¦‚ä½ å¯ä»¥åšä»¥ä¸‹è¿™äº›äº‹ï¼š</p><p><strong>è®¾ç½®å±…ä¸­ä»¥åŠè·³è½¬</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">Ctrl-o zz       å±…ä¸­çª—å£<br>Ctrl-o H<span class="hljs-regexp">/M/</span>L    è·³è½¬åˆ°çª—å£çš„é¡¶éƒ¨<span class="hljs-regexp">/ä¸­éƒ¨/</span>åº•éƒ¨<br>Ctrl-o <span class="hljs-string">&#x27;a       è·³è½¬åˆ°æ ‡å¿—&#x27;</span>aå¤„<br></code></pre></td></tr></table></figure><p><strong>é‡å¤æ–‡æœ¬</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Ctrl</span>-o <span class="hljs-number">100</span>ihello    è¾“å…¥ <span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-number">100</span> æ¬¡<br></code></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»ˆç«¯å‘½ä»¤</strong></p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">Ctrl-o !! curl https://google.com    è¿è¡Œcurlå‘½ä»¤<br>Ctrl-o !! pwd                        è¿è¡Œpwdå‘½ä»¤<br></code></pre></td></tr></table></figure><p><strong>å¿«é€Ÿåˆ é™¤</strong></p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">Ctrl</span><span class="hljs-operator">-</span><span class="hljs-variable">o</span> <span class="hljs-variable">dtz</span>    ä»å½“å‰ä½ç½®å¼€å§‹åˆ é™¤æ–‡æœ¬ï¼Œç›´åˆ°é‡åˆ°å­—æ¯<span class="hljs-string">&quot;z&quot;</span><br><span class="hljs-variable">Ctrl</span><span class="hljs-operator">-</span><span class="hljs-variable">o</span> <span class="hljs-built_in">D</span>      ä»å½“å‰ä½ç½®å¼€å§‹åˆ é™¤æ–‡æœ¬ï¼Œç›´åˆ°è¡Œæœ«<br></code></pre></td></tr></table></figure><h2 id="èªæ˜åœ°å­¦ä¹ è¾“å…¥æ¨¡å¼"><a href="#èªæ˜åœ°å­¦ä¹ è¾“å…¥æ¨¡å¼" class="headerlink" title="èªæ˜åœ°å­¦ä¹ è¾“å…¥æ¨¡å¼"></a>èªæ˜åœ°å­¦ä¹ è¾“å…¥æ¨¡å¼</h2><p>å¦‚æœä½ å’Œæˆ‘ä¸€æ ·æ˜¯ä»å…¶ä»–æ–‡æœ¬ç¼–è¾‘å™¨è½¬åˆ°Vimçš„ï¼Œä½ æˆ–è®¸ä¹Ÿä¼šè§‰å¾—ä¸€ç›´å¾…åœ¨è¾“å…¥æ¨¡å¼ä¸‹å¾ˆæœ‰è¯±æƒ‘åŠ›ï¼Œä½†æ˜¯æˆ‘å¼ºçƒˆåå¯¹ä½ åœ¨æ²¡æœ‰è¾“å…¥æ–‡æœ¬æ—¶ï¼Œå´ä»ç„¶å¾…åœ¨è¾“å…¥æ¨¡å¼ä¸‹ã€‚åº”è¯¥å…»æˆå½“ä½ çš„åŒæ‰‹æ²¡æœ‰åœ¨è¾“å…¥æ—¶ï¼Œå°±é€€å‡ºåˆ°æ™®é€šæ¨¡å¼çš„å¥½ä¹ æƒ¯ã€‚</p><p>å½“ä½ éœ€è¦è¿›è¡Œè¾“å…¥æ—¶ï¼Œå…ˆé—®é—®è‡ªå·±å°†è¦è¾“å…¥çš„æ–‡æœ¬æ˜¯å¦å·²ç»å­˜åœ¨ã€‚å¦‚æœå­˜åœ¨çš„è¯ï¼Œè¯•ç€å¤åˆ¶æˆ–è€…ç§»åŠ¨è¿™æ®µæ–‡æœ¬è€Œä¸æ˜¯æ‰‹åŠ¨è¾“å…¥å®ƒã€‚å†é—®é—®è‡ªå·±æ˜¯ä¸æ˜¯éå¾—è¿›å…¥è¾“å…¥æ¨¡å¼ï¼Œè¯•è¯•èƒ½ä¸èƒ½å°½å¯èƒ½åœ°ä½¿ç”¨è‡ªåŠ¨è¡¥å…¨æ¥è¿›è¡Œè¾“å…¥ã€‚å°½é‡é¿å…é‡å¤è¾“å…¥åŒä¸€ä¸ªå•è¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-ç‚¹å‘½ä»¤</title>
    <link href="/2022/04/05/Vim/ch07_the_dot_command/"/>
    <url>/2022/04/05/Vim/ch07_the_dot_command/</url>
    
    <content type="html"><![CDATA[<h1 id="ç‚¹å‘½ä»¤"><a href="#ç‚¹å‘½ä»¤" class="headerlink" title="ç‚¹å‘½ä»¤"></a>ç‚¹å‘½ä»¤</h1><p>åœ¨ç¼–è¾‘æ–‡æœ¬æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½åœ°é¿å…é‡å¤çš„åŠ¨ä½œã€‚åœ¨è¿™ä¸€ç« èŠ‚ä¸­ï¼Œä½ å°†ä¼šå­¦ä¹ å¦‚ä½•ä½¿ç”¨ç‚¹å‘½ä»¤æ¥é‡æ”¾ä¸Šä¸€ä¸ªä¿®æ”¹æ“ä½œã€‚ç‚¹å‘½ä»¤æ˜¯æœ€ç®€å•çš„å‘½ä»¤ï¼Œç„¶è€Œåˆæ˜¯å‡å°‘é‡å¤æ“ä½œæœ€ä¸ºæœ‰ç”¨çš„å‘½ä»¤ã€‚</p><h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><p>æ­£å¦‚è¿™ä¸ªå‘½ä»¤çš„åå­—ä¸€æ ·ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‰ä¸‹<code>.</code>é”®æ¥ä½¿ç”¨ç‚¹å‘½ä»¤ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœä½ æƒ³å°†ä¸‹é¢æ–‡æœ¬ä¸­çš„æ‰€æœ‰â€letâ€œæ›¿æ¢ä¸ºâ€constâ€ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs abnf">let one <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-comment">;</span><br>let two <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-comment">;</span><br>let three <span class="hljs-operator">=</span> <span class="hljs-string">&quot;3&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><ul><li>é¦–å…ˆï¼Œä½¿ç”¨<code>/let</code>æ¥è¿›è¡ŒåŒ¹é…ã€‚</li><li>æ¥ç€ï¼Œä½¿ç”¨<code>cwconst&lt;esc&gt;</code>æ¥å°†â€letâ€æ›¿æ¢æˆâ€constâ€ã€‚</li><li>ç¬¬ä¸‰æ­¥ï¼Œä½¿ç”¨<code>n</code>æ¥æ‰¾åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…çš„ä½ç½®ã€‚</li><li>æœ€åï¼Œä½¿ç”¨ç‚¹å‘½ä»¤(<code>.</code>)æ¥é‡å¤ä¹‹å‰çš„æ“ä½œã€‚</li><li>æŒç»­åœ°ä½¿ç”¨<code>n . n .</code>ç›´åˆ°æ¯ä¸€ä¸ªåŒ¹é…çš„è¯éƒ½è¢«æ›¿æ¢ã€‚</li></ul><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œç‚¹å‘½ä»¤é‡å¤çš„æ˜¯<code>cwconst&lt;esc&gt;</code>è¿™ä¸€ä¸²å‘½ä»¤ï¼Œå®ƒèƒ½å¤Ÿå¸®ä½ å°†éœ€è¦8æ¬¡è¾“å…¥çš„å‘½ä»¤ç®€åŒ–åˆ°åªéœ€è¦æ•²å‡»ä¸€æ¬¡é”®ç›˜ã€‚</p><h2 id="ä»€ä¹ˆæ‰ç®—æ˜¯ä¿®æ”¹æ“ä½œï¼Ÿ"><a href="#ä»€ä¹ˆæ‰ç®—æ˜¯ä¿®æ”¹æ“ä½œï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ‰ç®—æ˜¯ä¿®æ”¹æ“ä½œï¼Ÿ"></a>ä»€ä¹ˆæ‰ç®—æ˜¯ä¿®æ”¹æ“ä½œï¼Ÿ</h2><p>å¦‚æœä½ æŸ¥çœ‹ç‚¹å‘½ä»¤çš„å®šä¹‰çš„è¯(<code>:h .</code>),æ–‡æ¡£ä¸­è¯´ç‚¹å‘½ä»¤ä¼šé‡å¤ä¸Šä¸€ä¸ªä¿®æ”¹æ“ä½œï¼Œé‚£ä¹ˆä»€ä¹ˆæ‰ç®—æ˜¯ä¸€ä¸ªä¿®æ”¹æ“ä½œå‘¢ï¼Ÿ</p><p>å½“ä½ ä½¿ç”¨æ™®é€šæ¨¡å¼ä¸‹çš„å‘½ä»¤æ¥æ›´æ–°ï¼ˆæ·»åŠ ï¼Œä¿®æ”¹æˆ–è€…åˆ é™¤ï¼‰å½“å‰ç¼“å†²åŒºä¸­çš„å†…å®¹æ—¶ï¼Œä½ å°±æ˜¯åœ¨æ‰§è¡Œä¸€ä¸ªä¿®æ”¹æ“ä½œäº†ã€‚å…¶ä¸­çš„ä¾‹å¤–æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œå‘½ä»¤è¿›è¡Œçš„ä¿®æ”¹ï¼ˆä»¥<code>ï¼š</code>å¼€å¤´çš„å‘½ä»¤ï¼‰ï¼Œè¿™äº›å‘½ä»¤ä¸ç®—ä½œä¿®æ”¹æ“ä½œã€‚</p><p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œä½ çœ‹åˆ°çš„<code>cwconst&lt;esc&gt;</code>å°±æ˜¯ä¸€ä¸ªä¿®æ”¹æ“ä½œã€‚ç°åœ¨å‡è®¾ä½ æœ‰ä»¥ä¸‹è¿™ä¹ˆä¸€ä¸ªå¥å­ï¼š</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey"><span class="hljs-built_in">pancake,</span> potatoes, fruit-juice,<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥åˆ é™¤ä»è¿™è¡Œå¼€å§‹çš„ä½ç½®åˆ°ç¬¬ä¸€ä¸ªé€—å·å‡ºç°çš„ä½ç½®ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>df,</code>æ¥å®Œæˆè¿™ä¸ªæ“ä½œ,ä½¿ç”¨<code>.</code>æ¥é‡å¤ä¸¤æ¬¡ç›´åˆ°ä½ å°†æ•´ä¸ªå¥å­åˆ é™¤ã€‚</p><p>è®©æˆ‘ä»¬å†æ¥è¯•è¯•å¦ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey"><span class="hljs-built_in">pancake,</span> potatoes, fruit-juice,<br></code></pre></td></tr></table></figure><p>è¿™ä¸€æ¬¡ä½ åªéœ€è¦åˆ é™¤æ‰€æœ‰çš„é€—å·ï¼Œä¸åŒ…æ‹¬é€—å·å‰é¢çš„è¯ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>f,</code>æ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªé€—å·ï¼Œå†ä½¿ç”¨<code>x</code>æ¥åˆ é™¤å…‰æ ‡ä¸‹çš„å­—ç¬¦ã€‚ç„¶åä½¿ç”¨ç”¨<code>.</code>æ¥é‡å¤ä¸¤æ¬¡ï¼Œå¾ˆç®€å•å¯¹ä¸å¯¹ï¼Ÿç­‰ç­‰ï¼è¿™æ ·åšè¡Œä¸é€š(åªä¼šé‡å¤åˆ é™¤å…‰æ ‡ä¸‹çš„ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯åˆ é™¤é€—å·)ï¼ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ</p><p>åœ¨Vimé‡Œï¼Œä¿®æ”¹æ“ä½œæ˜¯ä¸åŒ…æ‹¬ç§»åŠ¨ï¼ˆmotionsï¼‰çš„ï¼Œå› ä¸ºç§»åŠ¨(motions)ä¸ä¼šæ›´æ–°ç¼“å†²åŒºçš„å†…å®¹ã€‚å½“ä½ è¿è¡Œ<code>f,x</code>ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨æ‰§è¡Œä¸¤ä¸ªç‹¬ç«‹çš„æ“ä½œï¼š<code>f,</code>å‘½ä»¤åªç§»åŠ¨å…‰æ ‡ï¼Œè€Œ<code>x</code>æ›´æ–°ç¼“å†²åŒºçš„å†…å®¹ï¼Œåªæœ‰åè€…ç®—ä½œä¿®æ”¹åŠ¨ä½œã€‚å’Œä¹‹å‰ä¾‹å­ä¸­çš„<code>df,</code>è¿›è¡Œä¸€ä¸‹å¯¹æ¯”çš„è¯ï¼Œä½ ä¼šå‘ç°<code>df,</code>ä¸­çš„<code>f,</code>å‘Šè¯‰åˆ é™¤æ“ä½œ<code>d</code>å“ªé‡Œéœ€è¦åˆ é™¤ï¼Œæ˜¯æ•´ä¸ªåˆ é™¤å‘½ä»¤<code>df,</code>çš„ä¸€éƒ¨åˆ†ã€‚</p><p>è®©æˆ‘ä»¬æƒ³æƒ³åŠæ³•å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚åœ¨ä½ è¿è¡Œ<code>f,</code>å¹¶æ‰§è¡Œ<code>x</code>æ¥åˆ é™¤ç¬¬ä¸€ä¸ªé€—å·åï¼Œä½¿ç”¨<code>;</code>æ¥ç»§ç»­åŒ¹é…<code>f</code>çš„ä¸‹ä¸€ä¸ªç›®æ ‡ï¼ˆä¸‹ä¸€ä¸ªé€—å·ï¼‰ã€‚ä¹‹åå†ä½¿ç”¨<code>.</code>æ¥é‡å¤ä¿®æ”¹æ“ä½œï¼Œåˆ é™¤å…‰æ ‡ä¸‹çš„å­—ç¬¦ã€‚é‡å¤<code>; . ; .</code>ç›´åˆ°æ‰€æœ‰çš„é€—å·éƒ½è¢«åˆ é™¤ã€‚å®Œæ•´çš„å‘½ä»¤å³ä¸º<code>f,x;.;.</code>ã€‚</p><p>å†æ¥è¯•è¯•ä¸‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pancake</span><br><span class="hljs-attribute">potatoes</span><br><span class="hljs-attribute">fruit-juice</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç»™æ¯ä¸€è¡Œçš„ç»“å°¾åŠ ä¸Šé€—å·ã€‚ä»ç¬¬ä¸€è¡Œå¼€å§‹ï¼Œæˆ‘ä»¬æ‰§è¡Œå‘½ä»¤<code>A,&lt;esc&gt;j</code>æ¥ç»™ç»“å°¾åŠ ä¸Šé€—å·å¹¶ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†<code>j</code>æ˜¯ä¸ç®—ä½œä¿®æ”¹æ“ä½œçš„ï¼Œåªæœ‰<code>A,</code>ç®—ä½œä¿®æ”¹æ“ä½œã€‚ä½ å¯ä»¥ä½¿ç”¨<code>j . j . </code>æ¥ç§»åŠ¨å¹¶é‡å¤ä¿®æ”¹æ“ä½œã€‚å®Œæ•´çš„å‘½ä»¤æ˜¯<code>A,&lt;esc&gt;j</code>ã€‚</p><p>ä»ä½ æŒ‰ä¸‹è¾“å…¥å‘½ä»¤ï¼ˆAï¼‰å¼€å§‹åˆ°ä½ é€€å‡ºè¾“å…¥æ¨¡å¼ï¼ˆ<esc>ï¼‰ä¹‹é—´çš„æ‰€æœ‰è¾“å…¥éƒ½ç®—ä½œæ˜¯ä¸€æ•´ä¸ªä¿®æ”¹æ“ä½œã€‚</p><h2 id="é‡å¤å¤šè¡Œä¿®æ”¹æ“ä½œ"><a href="#é‡å¤å¤šè¡Œä¿®æ”¹æ“ä½œ" class="headerlink" title="é‡å¤å¤šè¡Œä¿®æ”¹æ“ä½œ"></a>é‡å¤å¤šè¡Œä¿®æ”¹æ“ä½œ</h2><p>å‡è®¾ä½ æœ‰å¦‚ä¸‹çš„æ–‡æœ¬ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let one <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-comment">;</span><br>let two <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-comment">;</span><br>let three <span class="hljs-operator">=</span> <span class="hljs-string">&quot;3&quot;</span><span class="hljs-comment">;</span><br>const foo <span class="hljs-operator">=</span> <span class="hljs-string">&quot;bar&quot;</span><span class="hljs-comment">;</span><br>let four <span class="hljs-operator">=</span> <span class="hljs-string">&quot;4&quot;</span><span class="hljs-comment">;</span><br>let five <span class="hljs-operator">=</span> <span class="hljs-string">&quot;5&quot;</span><span class="hljs-comment">;</span><br>let six <span class="hljs-operator">=</span> <span class="hljs-string">&quot;6&quot;</span><span class="hljs-comment">;</span><br>let seven <span class="hljs-operator">=</span> <span class="hljs-string">&quot;7&quot;</span><span class="hljs-comment">;</span><br>let eight <span class="hljs-operator">=</span> <span class="hljs-string">&quot;8&quot;</span><span class="hljs-comment">;</span><br>let nine <span class="hljs-operator">=</span> <span class="hljs-string">&quot;9&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>ä½ çš„ç›®æ ‡æ˜¯åˆ é™¤é™¤äº†å«æœ‰â€fooâ€é‚£ä¸€è¡Œä»¥å¤–çš„æ‰€æœ‰è¡Œã€‚é¦–å…ˆï¼Œä½¿ç”¨<code>d2j</code>åˆ é™¤å‰ä¸‰è¡Œã€‚ä¹‹åè·³è¿‡â€fooâ€è¿™ä¸€è¡Œï¼Œåœ¨å…¶ä¸‹ä¸€è¡Œä½¿ç”¨ç‚¹å‘½ä»¤ä¸¤æ¬¡æ¥åˆ é™¤å‰©ä¸‹çš„å…­è¡Œã€‚å®Œæ•´çš„å‘½ä»¤æ˜¯<code>d2jj..</code>ã€‚</p><p>è¿™é‡Œçš„ä¿®æ”¹æ“ä½œæ˜¯<code>d2j</code>ï¼Œ<code>2j</code>ä¸æ˜¯ä¸€ä¸ªç§»åŠ¨(motion)æ“ä½œï¼Œè€Œæ˜¯æ•´ä¸ªåˆ é™¤å‘½ä»¤çš„ä¸€éƒ¨åˆ†ã€‚</p><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ä¸‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">zlet zzone <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-comment">;</span><br>zlet zztwo <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-comment">;</span><br>zlet zzthree <span class="hljs-operator">=</span> <span class="hljs-string">&quot;3&quot;</span><span class="hljs-comment">;</span><br>let four <span class="hljs-operator">=</span> <span class="hljs-string">&quot;4&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ é™¤æ‰€æœ‰çš„â€™zâ€™ã€‚ä»ç¬¬ä¸€è¡Œç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ï¼Œé¦–å…ˆï¼Œåœ¨å—å¯è§†åŒ–æ¨¡å¼ä¸‹ä½¿ç”¨<code>Ctrl-vjj</code>æ¥é€‰ä¸­å‰ä¸‰è¡Œçš„ç¬¬ä¸€ä¸ªâ€™zâ€™å­—æ¯ã€‚å¦‚æœä½ å¯¹å—å¯è§†åŒ–æ¨¡å¼ä¸ç†Ÿæ‚‰çš„è¯ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç« èŠ‚ä¸­è¿›è¡Œä»‹ç»ã€‚åœ¨é€‰ä¸­å‰ä¸‰è¡Œçš„ç¬¬ä¸€ä¸ªâ€™zâ€™åï¼Œä½¿ç”¨<code>d</code>æ¥åˆ é™¤å®ƒä»¬ã€‚æ¥ç€ç”¨<code>w</code>ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªzå­—æ¯ä¸Šï¼Œä½¿ç”¨<code>..</code>é‡å¤ä¸¤æ¬¡ä¹‹å‰é€‰ä¸­åŠ åˆ é™¤çš„åŠ¨ä½œã€‚å®Œæ•´çš„å‘½ä»¤ä¸º<code>Ctrl-vjjdw..</code>ã€‚</p><p>ä½ åˆ é™¤ä¸€åˆ—ä¸Šçš„ä¸‰ä¸ªâ€™zâ€˜çš„æ“ä½œ(<code>Ctrl-vjjd</code>)è¢«çœ‹åšä¸€æ•´ä¸ªä¿®æ”¹æ“ä½œã€‚å¯è§†åŒ–æ¨¡å¼ä¸­çš„é€‰æ‹©æ“ä½œå¯ä»¥ç”¨æ¥é€‰ä¸­å¤šè¡Œï¼Œä½œä¸ºä¿®æ”¹åŠ¨ä½œçš„ä¸€éƒ¨åˆ†ã€‚</p><h2 id="åœ¨ä¿®æ”¹ä¸­åŒ…å«ç§»åŠ¨æ“ä½œ"><a href="#åœ¨ä¿®æ”¹ä¸­åŒ…å«ç§»åŠ¨æ“ä½œ" class="headerlink" title="åœ¨ä¿®æ”¹ä¸­åŒ…å«ç§»åŠ¨æ“ä½œ"></a>åœ¨ä¿®æ”¹ä¸­åŒ…å«ç§»åŠ¨æ“ä½œ</h2><p>è®©æˆ‘ä»¬æ¥é‡æ–°å›é¡¾ä¸€ä¸‹æœ¬ç« ä¸­çš„ç¬¬ä¸€ä¸ªä¾‹å­ã€‚è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬ä½¿ç”¨äº†<code>/letcwconst&lt;esc&gt;</code>ç´§æ¥ç€<code>n . n .</code>å°†ä¸‹é¢çš„æ–‡æœ¬ä¸­çš„â€™letâ€™éƒ½æ›¿æ¢æˆäº†â€™constâ€™ã€‚</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let one <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-comment">;</span><br>let two <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-comment">;</span><br>let three <span class="hljs-operator">=</span> <span class="hljs-string">&quot;3&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>å…¶å®è¿˜æœ‰æ›´å¿«çš„æ–¹æ³•æ¥å®Œæˆæ•´ä¸ªæ“ä½œã€‚å½“ä½ ä½¿ç”¨<code>/let</code>æœç´¢åï¼Œæ‰§è¡Œ<code>cgnconst&lt;Esc&gt;</code>ï¼Œç„¶å<code>. . .</code>ã€‚</p><p><code>gn</code>æ˜¯ä¸€ä¸ªç§»åŠ¨å¹¶é€‰æ‹©çš„åŠ¨ä½œï¼Œå®ƒå‘å‰æœç´¢å’Œä¸Šä¸€ä¸ªæœç´¢çš„æ¨¡å¼ï¼ˆæœ¬ä¾‹ä¸­ä¸º<code>/let</code>ï¼‰åŒ¹é…çš„ä½ç½®ï¼Œå¹¶ä¸” <strong>è‡ªåŠ¨å¯¹åŒ¹é…çš„æ–‡æœ¬è¿›è¡Œå¯è§†åŒ–æ¨¡å¼ä¸‹çš„é€‰å–</strong>ã€‚æƒ³è¦å¯¹ä¸‹ä¸€ä¸ªåŒ¹é…çš„ä½ç½®è¿›è¡Œæ›¿æ¢çš„è¯ï¼Œä½ ä¸å†éœ€è¦å…ˆç§»åŠ¨åœ¨é‡å¤ä¿®æ”¹æ“ä½œï¼ˆ<code>n . n .</code>ï¼‰ï¼Œè€Œæ˜¯ç®€å•åœ°ä½¿ç”¨<code>. .</code>å°±èƒ½å®Œæˆã€‚ä½ ä¸éœ€è¦å†è¿›è¡Œç§»åŠ¨æ“ä½œäº†ï¼Œå› ä¸ºæ‰¾åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…çš„ä½ç½®å¹¶è¿›è¡Œé€‰ä¸­æˆä¸ºäº†ä¿®æ”¹æ“ä½œçš„ä¸€éƒ¨åˆ†äº†ã€‚</p><p>å½“ä½ åœ¨ç¼–è¾‘æ–‡æœ¬æ—¶ï¼Œåº”è¯¥æ—¶åˆ»å…³æ³¨åƒ<code>gn</code>å‘½ä»¤è¿™ç§èƒ½ä¸€ä¸‹å­åšå¥½å‡ ä»¶äº‹çš„ç§»åŠ¨æ“ä½œã€‚</p><blockquote><p>ï¼ˆè¯‘è€…åœ¨è¿™é‡Œç ”ç©¶äº†ä¸€ä¼šï¼Œå¹¶åšäº†ä¸å°‘å®éªŒï¼Œæ€»ç»“è§„å¾‹æ˜¯ï¼šå•ç‹¬çš„motion(ç¬¬4ç« ä¸­æ‰€è¯´çš„åè¯)ä¸ç®—ä¿®æ”¹æ“ä½œï¼Œè€Œopeartor(åŠ¨è¯)+motion(åè¯)æ—¶(è¯·å›é¡¾ç¬¬4ç« )ï¼Œmotionè¢«è§†ä¸ºä¸€ä¸ªå®Œæ•´çš„ä¿®æ”¹æ“ä½œä¸­çš„ä¸€éƒ¨åˆ†ã€‚å†çœ‹ä¸€ä¸ªä¾‹å­ï¼Œçœ‹çœ‹<code>/</code>å‘½ä»¤æ˜¯å¦‚ä½•è¢«åŒ…å«åœ¨ä¸€ä¸ªä¿®æ”¹æ“ä½œä¸­çš„ï¼š</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><br><span class="hljs-selector-tag">b</span><br>foo<br>c<br>d<br>foo<br>e<br>f<br></code></pre></td></tr></table></figure><blockquote><p>å‡è®¾ä½ çš„å…‰æ ‡åœ¨ç¬¬ä¸€è¡Œçš„aä¸Šï¼Œæ‰§è¡Œå‘½ä»¤<code>d/foo&lt;Esc&gt;</code>ï¼ŒVimä¼šåˆ é™¤a,bã€‚ç„¶å<code>.</code>ï¼ŒVimä¼šåˆ é™¤foo, c, dï¼Œå†æŒ‰<code>.</code>ï¼ŒVimä»€ä¹ˆä¹Ÿä¸åšï¼Œå› ä¸ºåé¢æ²¡æœ‰â€fooâ€äº†ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>/foo</code>æ˜¯ä¸€ä¸ªmotionï¼ˆåè¯ï¼‰ï¼Œæ˜¯Vimè¯­æ³•(åŠ¨è¯+åè¯ï¼šoperator + motion)çš„ä¸€éƒ¨åˆ†ï¼Œå‰é¢çš„<code>d</code>åˆ™æ˜¯åŠ¨è¯ã€‚<code>d/foo&lt;Esc&gt;</code>è¿™æ¡å‘½ä»¤çš„åŠŸèƒ½æ˜¯ï¼šä»å½“å‰å…‰æ ‡æ‰€åœ¨ä½ç½®å¼€å§‹åˆ é™¤ï¼Œç›´åˆ°é‡åˆ°â€fooâ€ä¸ºæ­¢ã€‚åé¢çš„ç‚¹å‘½ä»¤å°±é‡å¤è¿™ä¸ªåŠŸèƒ½ï¼Œç¬¬äºŒæ¬¡æŒ‰<code>.</code>ä¹‹æ‰€ä»¥Vimä»€ä¹ˆä¹Ÿä¸åšï¼Œæ˜¯å› ä¸ºæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…äº†ï¼Œæ‰€ä»¥è¿™æ¡å‘½ä»¤å°±å¤±æ•ˆäº†ã€‚</p></blockquote><h2 id="èªæ˜åœ°å­¦ä¹ ç‚¹å‘½ä»¤"><a href="#èªæ˜åœ°å­¦ä¹ ç‚¹å‘½ä»¤" class="headerlink" title="èªæ˜åœ°å­¦ä¹ ç‚¹å‘½ä»¤"></a>èªæ˜åœ°å­¦ä¹ ç‚¹å‘½ä»¤</h2><p>ç‚¹å‘½ä»¤çš„å¼ºå¤§ä¹‹å¤„åœ¨äºä½¿ç”¨ä»…ä»…1æ¬¡é”®ç›˜æ•²å‡»ä»£æ›¿å¥½å‡ æ¬¡æ•²å‡»ã€‚å¯¹äº<code>x</code>è¿™ç§åªéœ€ä¸€æ¬¡æ•²å‡»é”®ç›˜å°±èƒ½å®Œæˆçš„ä¿®æ”¹æ“ä½œæ¥è¯´ï¼Œç‚¹å‘½ä»¤æˆ–è®¸ä¸ä¼šå¸¦æ¥ä»€ä¹ˆæ”¶ç›Šã€‚ä½†æ˜¯å¦‚æœä½ çš„ä¸Šä¸€ä¸ªä¿®æ”¹æ“ä½œæ˜¯åƒ<code>cgnconst&lt;esc&gt;</code>è¿™ç§å¤æ‚å‘½ä»¤çš„è¯ï¼Œä½¿ç”¨ç‚¹å‘½ä»¤æ¥æ›¿ä»£å°±æœ‰éå¸¸å¯è§‚çš„æ”¶ç›Šäº†ã€‚</p><p>åœ¨è¿›è¡Œç¼–è¾‘æ—¶ï¼Œæ€è€ƒä¸€ä¸‹ä½ æ­£å°†è¿›è¡Œçš„æ“ä½œæ˜¯å¦æ˜¯å¯ä»¥é‡å¤çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘éœ€è¦åˆ é™¤æ¥ä¸‹æ¥çš„ä¸‰ä¸ªå•è¯ï¼Œæ˜¯ä½¿ç”¨<code>d3w</code>æ›´åˆ’ç®—ï¼Œè¿˜æ˜¯<code>dw</code>å†ä½¿ç”¨<code>.</code>ä¸¤æ¬¡æ›´åˆ’ç®—ï¼Ÿä¹‹åè¿˜ä¼šä¸ä¼šå†è¿›è¡Œåˆ é™¤æ“ä½œï¼Ÿå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œä½¿ç”¨<code>dw</code>å¥½å‡ æ¬¡ç¡®å®æ¯”<code>d3w</code>æ›´åŠ åˆç†ï¼Œå› ä¸º<code>dw</code>æ›´åŠ æœ‰å¤ç”¨æ€§ã€‚åœ¨ç¼–è¾‘æ—¶åº”è¯¥å…»æˆâ€œä¿®æ”¹æ“ä½œé©±åŠ¨â€çš„è§‚å¿µã€‚</p><p>ç‚¹å‘½ä»¤éå¸¸ç®€å•ä½†åˆåŠŸèƒ½å¼ºå¤§ï¼Œå¸®åŠ©ä½ å¼€å§‹è‡ªåŠ¨åŒ–å¤„ç†ç®€å•çš„ä»»åŠ¡ã€‚åœ¨åç»­çš„ç« èŠ‚ä¸­ï¼Œä½ å°†ä¼šå­¦ä¹ åˆ°å¦‚ä½•ä½¿ç”¨Vimçš„å®å‘½ä»¤æ¥è‡ªåŠ¨åŒ–å¤„ç†æ›´å¤šå¤æ‚çš„æ“ä½œã€‚ä½†æ˜¯é¦–å…ˆï¼Œè¿˜æ˜¯è®©æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨å¯„å­˜å™¨æ¥å­˜å–æ–‡æœ¬å§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-å¯„å­˜å™¨</title>
    <link href="/2022/04/05/Vim/ch08_registers/"/>
    <url>/2022/04/05/Vim/ch08_registers/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬08ç« -å¯„å­˜å™¨"><a href="#ç¬¬08ç« -å¯„å­˜å™¨" class="headerlink" title="ç¬¬08ç«  å¯„å­˜å™¨"></a>ç¬¬08ç«  å¯„å­˜å™¨</h1><p>å­¦ä¹ Vimä¸­çš„å¯„å­˜å™¨å°±åƒç¬¬ä¸€æ¬¡å­¦ä¹ çº¿æ€§ä»£æ•°ä¸€æ ·ï¼Œé™¤éä½ å­¦ä¹ äº†ä»–ä»¬ï¼Œå¦åˆ™ä½ ä¼šè§‰å¾—è‡ªå·±æ ¹æœ¬ä¸éœ€è¦å®ƒä»¬ã€‚</p><p>ä½ å¯èƒ½å·²ç»åœ¨å¤åˆ¶æˆ–åˆ é™¤æ–‡æœ¬å¹¶ç”¨<code>p</code>æˆ–<code>P</code>ç²˜è´´å®ƒä»¬åˆ°åˆ«å¤„çš„æ—¶å€™ä½¿ç”¨è¿‡Vimçš„å¯„å­˜å™¨äº†ã€‚ä½†æ˜¯ï¼Œä½ çŸ¥é“Vimæ€»å…±æœ‰10ç§ä¸åŒç±»å‹çš„å¯„å­˜å™¨å—ï¼Ÿå¦‚æœæ­£ç¡®åœ°ä½¿ç”¨Vimå¯„å­˜å™¨ï¼Œå°†å¸®åŠ©æ‚¨ä»é‡å¤çš„è¾“å…¥ä¸­è§£æ”¾å‡ºæ¥ã€‚</p><p>åœ¨è¿™ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä¼šä»‹ç»Vimçš„æ‰€æœ‰å¯„å­˜å™¨ç±»å‹ï¼Œä»¥åŠå¦‚ä½•æœ‰æ•ˆåœ°ä½¿ç”¨å®ƒä»¬ã€‚</p><h2 id="å¯„å­˜å™¨çš„10ç§ç±»å‹"><a href="#å¯„å­˜å™¨çš„10ç§ç±»å‹" class="headerlink" title="å¯„å­˜å™¨çš„10ç§ç±»å‹"></a>å¯„å­˜å™¨çš„10ç§ç±»å‹</h2><p>ä¸‹é¢æ˜¯Vimæ‰€æ‹¥æœ‰çš„10ç§å¯„å­˜å™¨ç±»å‹ï¼š</p><ol><li>åŒ¿åå¯„å­˜å™¨ï¼ˆ<code>&quot;&quot;</code>ï¼‰.</li><li>ç¼–å·å¯„å­˜å™¨(<code>&quot;0-9</code>).</li><li>å°åˆ é™¤å¯„å­˜å™¨ (<code>&quot;-</code>).</li><li>å‘½åå¯„å­˜å™¨ (<code>&quot;a-z</code>).</li><li>åªè¯»å¯„å­˜å™¨ (<code>&quot;:</code>, <code>&quot;.</code>, and <code>&quot;%</code>).</li><li>Bufferäº¤æ›¿æ–‡ä»¶å¯„å­˜å™¨ (<code>&quot;#</code>).</li><li>è¡¨è¾¾å¼å¯„å­˜å™¨ (<code>&quot;=</code>).</li><li>é€‰å–å’Œæ‹–æ”¾å¯„å­˜å™¨(<code>&quot;*</code> and <code>&quot;+</code>).</li><li>é»‘æ´å¯„å­˜å™¨ (<code>&quot;_</code>).</li><li>æœç´¢æ¨¡å¼å¯„å­˜å™¨ (<code>&quot;/</code>).</li></ol><h2 id="å¯„å­˜å™¨å‘½ä»¤"><a href="#å¯„å­˜å™¨å‘½ä»¤" class="headerlink" title="å¯„å­˜å™¨å‘½ä»¤"></a>å¯„å­˜å™¨å‘½ä»¤</h2><p>è¦ä½¿ç”¨å¯„å­˜å™¨ï¼Œæ‚¨å¿…é¡»å…ˆä½¿ç”¨å‘½ä»¤å°†å†…å®¹å­˜å‚¨åˆ°å¯„å­˜å™¨ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å­˜å€¼åˆ°å¯„å­˜å™¨ä¸­çš„æ“ä½œï¼š</p><figure class="highlight llvm"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs llvm">y    å¤åˆ¶<br><span class="hljs-keyword">c</span>    åˆ é™¤æ–‡æœ¬å¹¶è¿›å…¥è¾“å…¥æ¨¡å¼<br>d    åˆ é™¤æ–‡æœ¬<br></code></pre></td></tr></table></figure><p>å…¶å®è¿˜æœ‰æ›´å¤šçš„å¯„å­˜å™¨å†™å…¥æ“ä½œï¼ˆæ¯”å¦‚<code>s</code>æˆ–<code>x</code>ï¼‰ï¼Œä½†æ˜¯ä¸Šé¢åˆ—å‡ºçš„æ˜¯æœ€å¸¸ç”¨çš„ä¸€äº›ã€‚æ ¹æ®ç»éªŒçœ‹æ¥ï¼Œå¦‚æœä¸€ä¸ªæ“ä½œåˆ é™¤äº†æ–‡æœ¬ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½è¿™ä¸ªæ“ä½œå°†ç§»é™¤çš„æ–‡æœ¬å­˜å…¥å¯„å­˜å™¨ä¸­äº†ã€‚</p><p>æƒ³è¦ä»å¯„å­˜å™¨ä¸­å–å‡ºï¼ˆç²˜è´´ï¼‰æ–‡æœ¬ï¼Œä½ å¯ä»¥ç”¨ä»¥ä¸‹çš„å‘½ä»¤ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">p</span>    åœ¨å…‰æ ‡ä½ç½®ä¹‹åç²˜è´´æ–‡æœ¬<br><span class="hljs-selector-tag">P</span>    åœ¨å…‰æ ‡ä½ç½®ä¹‹å‰ç²˜è´´æ–‡æœ¬<br></code></pre></td></tr></table></figure><p><code>p</code>å’Œ<code>P</code>éƒ½å¯ä»¥æ¥å—è®¡æ•°å’Œä¸€ä¸ªå¯„å­˜å™¨æ ‡å¿—ä½œä¸ºå‚æ•°ã€‚æ¯”å¦‚ï¼Œæƒ³è¦æŠŠæœ€è¿‘å¤åˆ¶çš„æ–‡æœ¬ç²˜è´´10æ¬¡çš„è¯å¯ä»¥ç”¨<code>10p</code>ã€‚æƒ³ç²˜è´´å¯„å­˜å™¨â€aâ€ä¸­çš„æ–‡æœ¬ï¼Œå¯ä»¥ç”¨<code>&quot;ap</code>ã€‚æƒ³å°†å¯„å­˜å™¨â€œaâ€ä¸­çš„æ–‡æœ¬ç²˜è´´10æ¬¡çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨<code>10&quot;ap</code>ã€‚æ³¨æ„ï¼Œä»æŠ€æœ¯å±‚é¢è®²ï¼Œå‘½ä»¤<code>p</code>å®é™…ä¸Šè¡¨ç¤ºçš„æ˜¯â€putâ€(æ”¾ç½®)ï¼Œè€Œä¸æ˜¯â€pasteâ€(ç²˜è´´)ï¼Œä½¿ç”¨ç²˜è´´åªæ˜¯å› ä¸ºå®ƒæ›´ç¬¦åˆä¼ ç»Ÿä¹ æƒ¯ã€‚</p><p>ä»æŸä¸ªç‰¹å®šå¯„å­˜å™¨ä¸­è¯»å–æ–‡æœ¬çš„é€šç”¨è¯­æ³•æ˜¯<code>&quot;x</code>ï¼Œå…¶ä¸­<code>x</code>æ˜¯è¿™ä¸ªå¯„å­˜å™¨çš„æ ‡å¿—ã€‚</p><h2 id="åœ¨è¾“å…¥æ¨¡å¼ä¸­ä½¿ç”¨å¯„å­˜å™¨"><a href="#åœ¨è¾“å…¥æ¨¡å¼ä¸­ä½¿ç”¨å¯„å­˜å™¨" class="headerlink" title="åœ¨è¾“å…¥æ¨¡å¼ä¸­ä½¿ç”¨å¯„å­˜å™¨"></a>åœ¨è¾“å…¥æ¨¡å¼ä¸­ä½¿ç”¨å¯„å­˜å™¨</h2><p>åœ¨è¿™ä¸€ç« èŠ‚ä¸­ä½ å­¦åˆ°çš„ä¸œè¥¿åœ¨è¾“å…¥æ¨¡å¼ä¸­ä¹ŸåŒæ ·é€‚ç”¨ã€‚æƒ³è¦è·å–å¯„å­˜å™¨â€aâ€ä¸­çš„æ–‡æœ¬ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨<code>&quot;ap</code>æ¥è¿›è¡Œã€‚ä¸è¿‡å½“ä½ åœ¨è¾“å…¥æ¨¡å¼ä¸‹æ—¶ï¼Œä½ éœ€è¦è¿è¡Œ<code>Ctrl-r a</code>ã€‚åœ¨è¾“å…¥æ¨¡å¼ä¸‹ä½¿ç”¨å¯„å­˜å™¨çš„è¯­æ³•æ˜¯ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">Ctrl-r x</span><br></code></pre></td></tr></table></figure><p>å…¶ä¸­<code>x</code>æ˜¯å¯„å­˜å™¨æ ‡å¿—ã€‚æ—¢ç„¶ä½ ç°åœ¨å·²ç»çŸ¥é“å¦‚ä½•å­˜å‚¨å’Œè®¿é—®å¯„å­˜å™¨äº†ï¼Œè®©æˆ‘ä»¬å­¦ç‚¹æ›´æ·±å…¥çš„å§ã€‚</p><h2 id="åŒ¿åå¯„å­˜å™¨-quot-quot"><a href="#åŒ¿åå¯„å­˜å™¨-quot-quot" class="headerlink" title="åŒ¿åå¯„å­˜å™¨(&quot;&quot;)"></a>åŒ¿åå¯„å­˜å™¨(<code>&quot;&quot;</code>)</h2><p>æƒ³ä»åŒ¿åå¯„å­˜å™¨ä¸­è·å–æ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨<code>&quot;&quot;p</code>ã€‚ åŒ¿åå¯„å­˜å™¨é»˜è®¤å­˜å‚¨ç€ä½ æœ€è¿‘ä¸€æ¬¡å¤åˆ¶ï¼Œä¿®æ”¹æˆ–åˆ é™¤çš„æ–‡æœ¬ã€‚å¦‚æœå†è¿›è¡Œå¦ä¸€æ¬¡å¤åˆ¶ï¼Œä¿®æ”¹æˆ–åˆ é™¤ï¼ŒVimä¼šè‡ªåŠ¨æ›¿æ¢åŒ¿åå¯„å­˜å™¨ä¸­çš„æ–‡æœ¬ã€‚åŒ¿åå¯„å­˜å™¨å’Œç”µè„‘ä¸Šç²˜è´´æ¿çš„åŠŸèƒ½å¾ˆæ¥è¿‘ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>p</code>(æˆ–è€…<code>P</code>)æ˜¯å’ŒåŒ¿åå¯„å­˜å™¨ç›¸å…³è”çš„ï¼ˆä»ç°åœ¨èµ·æˆ‘å°†ä½¿ç”¨<code>p</code>è€Œä¸æ˜¯<code>&quot;&quot;p</code>æ¥æŒ‡ä»£åŒ¿åå¯„å­˜å™¨ï¼‰ã€‚</p><h2 id="ç¼–å·å¯„å­˜å™¨-quot-0-9"><a href="#ç¼–å·å¯„å­˜å™¨-quot-0-9" class="headerlink" title="ç¼–å·å¯„å­˜å™¨(&quot;0-9)"></a>ç¼–å·å¯„å­˜å™¨(<code>&quot;0-9</code>)</h2><p>ç¼–å·å¯„å­˜å™¨ä¼šè‡ªåŠ¨ä»¥å‡åºæ¥è¿›è¡Œå¡«å……ã€‚ä¸€å…±æœ‰ä¸¤ç§ä¸åŒçš„ç¼–å·å¯„å­˜å™¨ï¼šå¤åˆ¶å¯„å­˜å™¨(<code>0</code>)å’Œå…¶ä»–ç¼–å·å¯„å­˜å™¨(<code>1-9</code>)ã€‚è®©æˆ‘ä»¬å…ˆæ¥è®¨è®ºå¤åˆ¶å¯„å­˜å™¨ã€‚</p><h3 id="å¤åˆ¶å¯„å­˜å™¨-quot-0"><a href="#å¤åˆ¶å¯„å­˜å™¨-quot-0" class="headerlink" title="å¤åˆ¶å¯„å­˜å™¨ (&quot;0)"></a>å¤åˆ¶å¯„å­˜å™¨ (<code>&quot;0</code>)</h3><p>å¦‚æœä½ ä½¿ç”¨<code>yy</code>æ¥å¤åˆ¶ä¸€æ•´è¡Œæ–‡æœ¬ï¼Œäº‹å®ä¸ŠVimä¼šå°†æ–‡æœ¬å­˜æ”¾ä¸¤ä¸ªå¯„å­˜å™¨ä¸­ï¼š</p><ol><li>åŒ¿åå¯„å­˜å™¨ (<code>p</code>).</li><li>å¤åˆ¶å¯„å­˜å™¨ (<code>&quot;0p</code>).</li></ol><p>åœ¨ä½ åˆå¤åˆ¶å…¶ä»–ä¸åŒçš„æ–‡æœ¬åï¼ŒVimä¼šè‡ªåŠ¨æ›¿æ¢åŒ¿åå¯„å­˜å™¨å’Œå¤åˆ¶å¯„å­˜å™¨(<code>0</code>)ä¸­çš„å†…å®¹ã€‚å…¶ä»–çš„ä»»ä½•æ“ä½œéƒ½ä¸ä¼šè¢«å­˜æ”¾åœ¨<code>0</code>å·å¯„å­˜å™¨ä¸­ã€‚è¿™å¯ä»¥ä¸ºä½ æä¾›æ–¹ä¾¿ï¼Œå› ä¸ºé™¤éä½ å†è¿›è¡Œå¦ä¸€æ¬¡å¤åˆ¶ï¼Œå¦åˆ™ä½ å·²ç»å¤åˆ¶çš„å†…å®¹ä¼šä¸€ç›´åœ¨å¯„å­˜å™¨ä¸­ï¼Œæ— è®ºä½ è¿›è¡Œå¤šå°‘æ¬¡ä¿®æ”¹å’Œåˆ é™¤ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœä½ ï¼š</p><ol><li>å¤åˆ¶ä¸€æ•´è¡Œ (<code>yy</code>)</li><li>åˆ é™¤ä¸€æ•´è¡Œ(<code>dd</code>)</li><li>å†åˆ é™¤å¦ä¸€è¡Œ (<code>dd</code>)</li></ol><p>å¤åˆ¶å¯„å­˜å™¨ä¸­çš„æ–‡æœ¬ä»ç„¶æ˜¯ç¬¬ä¸€æ­¥ä¸­å¤åˆ¶çš„æ–‡æœ¬ã€‚</p><p>å¦‚æœä½ :</p><ol><li>å¤åˆ¶ä¸€æ•´è¡Œ (<code>yy</code>)</li><li>åˆ é™¤ä¸€æ•´è¡Œ (<code>dd</code>)</li><li>å¤åˆ¶å¦ä¸€è¡Œ (<code>yy</code>)</li></ol><p>å¤åˆ¶å¯„å­˜å™¨ä¸­çš„å†…å®¹åˆ™æ˜¯ç¬¬ä¸‰æ­¥ä¸­å¤åˆ¶çš„å†…å®¹ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œåœ¨è¾“å…¥æ¨¡å¼ä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>Ctrl-r 0</code>å¿«é€Ÿåœ°ç²˜è´´ä½ åˆšæ‰å¤åˆ¶çš„å†…å®¹ã€‚</p><h3 id="ç¼–å·å¯„å­˜å™¨-quot-1-9"><a href="#ç¼–å·å¯„å­˜å™¨-quot-1-9" class="headerlink" title="ç¼–å·å¯„å­˜å™¨ (&quot;1-9)"></a>ç¼–å·å¯„å­˜å™¨ (<code>&quot;1-9</code>)</h3><p>å½“ä½ ä¿®æ”¹æˆ–è€…åˆ é™¤è‡³å°‘ä¸€æ•´è¡Œçš„æ–‡æœ¬æ—¶ï¼Œè¿™éƒ¨åˆ†æ–‡æœ¬ä¼šæŒ‰æ—¶é—´é¡ºåºè¢«å­˜å‚¨åœ¨1-9å·ç¼–å·å¯„å­˜å™¨ä¸­ã€‚ï¼ˆç¼–å·è¶Šå°æ—¶é—´è·ç¦»è¶Šè¿‘ï¼‰</p><p>æ¯”å¦‚ï¼Œä½ æœ‰ä»¥ä¸‹è¿™äº›æ–‡æœ¬ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-built_in">line</span> <span class="hljs-literal">three</span><br><span class="hljs-built_in">line</span> <span class="hljs-literal">two</span><br><span class="hljs-built_in">line</span> <span class="hljs-literal">one</span><br></code></pre></td></tr></table></figure><p>å½“ä½ çš„å…‰æ ‡åœ¨æ–‡æœ¬â€œline threeâ€ä¸Šæ—¶,ä½¿ç”¨<code>dd</code>æ¥ä¸€è¡Œä¸€è¡Œåœ°åˆ é™¤è¿™äº›æ–‡æœ¬ã€‚åœ¨æ‰€æœ‰æ–‡æœ¬éƒ½å·²ç»åˆ é™¤åï¼Œ1å·å¯„å­˜å™¨ä¸­çš„å†…å®¹åº”è¯¥æ˜¯â€line oneâ€ï¼ˆæ—¶é—´ä¸Šæœ€è¿‘çš„æ–‡æœ¬ï¼‰ï¼Œ 2å·å¯„å­˜å™¨åˆ™åŒ…å«â€line twoâ€(æ—¶é—´ä¸Šç¬¬äºŒè¿‘çš„æ–‡æœ¬)ï¼Œ3å·å¯„å­˜å™¨ä¸­åˆ™åŒ…å«â€line threeâ€ï¼ˆæœ€æ—©åˆ é™¤çš„æ–‡æœ¬ï¼‰ã€‚æ™®é€šæ¨¡å¼ä¸‹å¯ä»¥ä½¿ç”¨<code>&quot;1p</code>æ¥è·å–1å·å¯„å­˜å™¨ä¸­çš„å†…å®¹ã€‚</p><p>ç¼–å·å¯„å­˜å™¨çš„ç¼–å·åœ¨ä½¿ç”¨ç‚¹å‘½ä»¤æ—¶ä¼šè‡ªåŠ¨å¢åŠ ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ çš„1å·ç¼–å·å¯„å­˜å™¨ï¼ˆ<code>&quot;1</code>ï¼‰ä¸­çš„å†…å®¹ä¸ºâ€line oneâ€ï¼Œ 2å·å¯„å­˜å™¨ï¼ˆ<code>&quot;2</code>ï¼‰ä¸ºâ€line twoâ€, ä¸‰å·å¯„å­˜å™¨ï¼ˆ<code>&quot;3</code>ï¼‰â€line threeâ€,ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æŠ€å·§æ¥è¿ç»­åœ°ç²˜è´´ä»–ä»¬ï¼š</p><ul><li>ä½¿ç”¨<code>&quot;1p</code>æ¥ç²˜è´´1å·å¯„å­˜å™¨ä¸­çš„å†…å®¹ã€‚</li><li>ä½¿ç”¨<code>.</code> (ç‚¹å‘½ä»¤)æ¥ç²˜è´´2å·å¯„å­˜å™¨ï¼ˆ<code>&quot;2</code>ï¼‰ä¸­çš„å†…å®¹ã€‚</li><li>ä½¿ç”¨<code>.</code> (ç‚¹å‘½ä»¤)æ¥ç²˜è´´3å·å¯„å­˜å™¨ï¼ˆ<code>&quot;3</code>ï¼‰ä¸­çš„å†…å®¹ã€‚</li></ul><p>åœ¨è¿ç»­åœ°ä½¿ç”¨ç‚¹å‘½ä»¤æ—¶ï¼ŒVimä¼šè‡ªåŠ¨çš„å¢åŠ ç¼–å·å¯„å­˜å™¨çš„ç¼–å·ã€‚è¿™ä¸ªæŠ€å·§å¯¹äºæ‰€æœ‰çš„ç¼–å·å¯„å­˜å™¨éƒ½é€‚ç”¨ã€‚å¦‚æœä½ ä»5å·å¯„å­˜å™¨å¼€å§‹(<code>&quot;5P</code>), ç‚¹å‘½ä»¤<code>.</code>ä¼šæ‰§è¡Œ<code>&quot;6P</code>,å†æ¬¡ä½¿ç”¨<code>.</code>åˆ™ä¼šæ‰§è¡Œ<code>&quot;7P</code>,ç­‰ç­‰ã€‚</p><p>å°å‹çš„åˆ é™¤æ¯”å¦‚å•è¯åˆ é™¤ï¼ˆ<code>dw</code>)æˆ–è€…å•è¯ä¿®æ”¹(<code>cw</code>)ä¸ä¼šè¢«å­˜å‚¨åœ¨ç¼–å·å¯„å­˜å™¨ä¸­ï¼Œå®ƒä»¬è¢«å­˜å‚¨åœ¨å°åˆ é™¤å¯„å­˜å™¨(<code>&quot;-</code>)ä¸­ï¼Œæˆ‘å°†åœ¨æ¥ä¸‹æ¥çš„ä¸€å°èŠ‚è®¨è®ºå°åˆ é™¤å¯„å­˜å™¨ã€‚</p><h2 id="å°åˆ é™¤å¯„å­˜å™¨-quot"><a href="#å°åˆ é™¤å¯„å­˜å™¨-quot" class="headerlink" title="å°åˆ é™¤å¯„å­˜å™¨(&quot;-)"></a>å°åˆ é™¤å¯„å­˜å™¨(<code>&quot;-</code>)</h2><p>ä¸è¶³ä¸€è¡Œçš„ä¿®æ”¹æˆ–è€…åˆ é™¤éƒ½ä¸ä¼šè¢«å­˜å‚¨åœ¨0-9å·ç¼–å·å¯„å­˜å™¨ä¸­ï¼Œè€Œæ˜¯ä¼šè¢«å­˜å‚¨åœ¨å°åˆ é™¤å¯„å­˜å™¨ (<code>&quot;-</code>)ä¸­ã€‚</p><p>æ¯”å¦‚:</p><ol><li>åˆ é™¤ä¸€ä¸ªå•è¯ (<code>diw</code>)</li><li>åˆ é™¤ä¸€è¡Œæ–‡æœ¬ (<code>dd</code>)</li><li>åˆ é™¤ä¸€è¡Œæ–‡æœ¬ (<code>dd</code>)</li></ol><p><code>&quot;-p</code> ä¼šç»™ä½ ç¬¬ä¸€æ­¥ä¸­åˆ é™¤çš„å•è¯ã€‚</p><p>å¦ä¸€ä¸ªä¾‹å­:</p><ol><li>åˆ é™¤ä¸€ä¸ªå•è¯(<code>diw</code>)</li><li>åˆ é™¤ä¸€è¡Œæ–‡æœ¬ (<code>dd</code>)</li><li>åˆ é™¤ä¸€ä¸ªå•è¯ (<code>diw</code>)</li></ol><p><code>&quot;-p</code> ä¼šç»™å‡ºç¬¬ä¸‰æ­¥ä¸­åˆ é™¤çš„å•è¯ã€‚ç±»ä¼¼åœ°, <code>&quot;1p</code> ä¼šç»™å‡ºç¬¬äºŒæ­¥ä¸­åˆ é™¤çš„ä¸€æ•´è¡Œæ–‡æœ¬ã€‚ä¸å¹¸çš„æ˜¯æˆ‘ä»¬æ²¡æœ‰åŠæ³•è·å–ç¬¬ä¸€æ­¥ä¸­åˆ é™¤çš„å•è¯ï¼Œå› ä¸ºå°åˆ é™¤å¯„å­˜å™¨åªèƒ½å­˜å‚¨ä¸€ä¸ªæ–‡æœ¬ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³ä¿å­˜ç¬¬ä¸€æ­¥ä¸­åˆ é™¤çš„æ–‡æœ¬ï¼Œä½ å¯ä»¥ä½¿ç”¨å‘½åå¯„å­˜å™¨æ¥å®Œæˆã€‚</p><h2 id="å‘½åå¯„å­˜å™¨-quot-a-z"><a href="#å‘½åå¯„å­˜å™¨-quot-a-z" class="headerlink" title="å‘½åå¯„å­˜å™¨ (&quot;a-z)"></a>å‘½åå¯„å­˜å™¨ (<code>&quot;a-z</code>)</h2><p>å‘½åå¯„å­˜å™¨æ˜¯Vimä¸­ç”¨æ³•æœ€ä¸°å¯Œçš„å¯„å­˜å™¨ã€‚a-zå‘½åå¯„å­˜å™¨å¯ä»¥å­˜å‚¨å¤åˆ¶çš„ï¼Œä¿®æ”¹çš„å’Œè¢«åˆ é™¤çš„æ–‡æœ¬ã€‚ä¸åƒä¹‹å‰ä»‹ç»çš„3ç§å¯„å­˜å™¨ä¸€æ ·ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨å°†æ–‡æœ¬å­˜å‚¨åˆ°å¯„å­˜å™¨ä¸­ï¼Œä½ éœ€è¦æ˜¾å¼åœ°å‘Šè¯‰Vimä½ è¦ä½¿ç”¨å‘½åå¯„å­˜å™¨ï¼Œä½ æ‹¥æœ‰å®Œæ•´çš„æ§åˆ¶æƒã€‚</p><p>ä¸ºäº†å¤åˆ¶ä¸€ä¸ªå•è¯åˆ°å¯„å­˜å™¨â€aâ€ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å‘½ä»¤<code>&quot;ayiw</code>ã€‚</p><ul><li><code>&quot;a</code>å‘Šè¯‰Vimä¸‹ä¸€ä¸ªåŠ¨ä½œï¼ˆåˆ é™¤&#x2F;ä¿®æ”¹&#x2F;å¤åˆ¶ï¼‰ä¼šè¢«å­˜å‚¨åœ¨å¯„å­˜å™¨â€aâ€ä¸­</li><li><code>yiw</code>å¤åˆ¶è¿™ä¸ªå•è¯</li></ul><p>ä¸ºäº†ä»å¯„å­˜å™¨â€aâ€ä¸­è·å–æ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤<code>&quot;ap</code>ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥26ä¸ªå­—æ¯å‘½åçš„å¯„å­˜å™¨æ¥å­˜å‚¨26ä¸ªä¸åŒçš„æ–‡æœ¬ã€‚</p><p>æœ‰æ—¶ä½ å¯èƒ½ä¼šæƒ³è¦å¾€å·²æœ‰å†…å®¹çš„å‘½åå¯„å­˜å™¨ä¸­ç»§ç»­æ·»åŠ å†…å®¹ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥è¿½åŠ æ–‡æœ¬è€Œä¸æ˜¯å…¨éƒ¨é‡æ¥ã€‚ä½ å¯ä»¥ä½¿ç”¨å¤§å†™ç‰ˆæœ¬çš„å‘½åå¯„å­˜å™¨æ¥è¿›è¡Œæ–‡æœ¬çš„è¿½åŠ ã€‚æ¯”å¦‚ï¼Œå‡è®¾ä½ çš„â€aâ€å¯„å­˜å™¨ä¸­å·²ç»å­˜æœ‰æ–‡æœ¬â€Helloâ€ï¼Œå¦‚æœä½ æƒ³ç»§ç»­æ·»åŠ â€worldâ€åˆ°å¯„å­˜å™¨â€aâ€ä¸­ï¼Œä½ å¯ä»¥å…ˆæ‰¾åˆ°æ–‡æœ¬â€worldâ€ç„¶åä½¿ç”¨<code>&quot;Aiw</code>æ¥è¿›è¡Œå¤åˆ¶,å³å¯å®Œæˆè¿½åŠ ã€‚</p><h2 id="åªè¯»å¯„å­˜å™¨-quot-quot-quot"><a href="#åªè¯»å¯„å­˜å™¨-quot-quot-quot" class="headerlink" title="åªè¯»å¯„å­˜å™¨(&quot;:, &quot;., &quot;%)"></a>åªè¯»å¯„å­˜å™¨(<code>&quot;:</code>, <code>&quot;.</code>, <code>&quot;%</code>)</h2><p>Vimæœ‰ä¸‰ä¸ªåªè¯»å¯„å­˜å™¨ï¼š<code>.</code>,<code>:</code>å’Œ<code>%</code>ï¼Œå®ƒä»¬çš„ç”¨æ³•éå¸¸ç®€å•ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">.    å­˜å‚¨ä¸Šä¸€ä¸ªè¾“å…¥çš„æ–‡æœ¬<br>:    å­˜å‚¨ä¸Šä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤<br>%    å­˜å‚¨å½“å‰æ–‡ä»¶çš„æ–‡ä»¶å<br></code></pre></td></tr></table></figure><p>å¦‚æœä½ å†™å…¥â€Hello Vimâ€,ä¹‹åå†è¿è¡Œ<code>&quot;.p</code>å°±ä¼šæ‰“å°å‡ºæ–‡æœ¬â€Hello Vimâ€ã€‚å¦‚æœä½ æƒ³è¦è·å¾—å½“å‰æ–‡ä»¶çš„æ–‡ä»¶åï¼Œå¯ä»¥è¿è¡Œå‘½ä»¤<code>&quot;%p</code>ã€‚å¦‚æœä½ è¿è¡Œå‘½ä»¤<code>:s/foo/bar/g</code>ï¼Œå†è¿è¡Œ<code>&quot;:p</code>çš„è¯åˆ™ä¼šæ‰“å°å‡ºæ–‡æœ¬â€s&#x2F;foo&#x2F;bar&#x2F;gâ€ã€‚</p><h2 id="Bufferäº¤æ›¿æ–‡ä»¶å¯„å­˜å™¨-quot"><a href="#Bufferäº¤æ›¿æ–‡ä»¶å¯„å­˜å™¨-quot" class="headerlink" title="Bufferäº¤æ›¿æ–‡ä»¶å¯„å­˜å™¨ (&quot;#)"></a>Bufferäº¤æ›¿æ–‡ä»¶å¯„å­˜å™¨ (<code>&quot;#</code>)</h2><p>åœ¨Vimä¸­ï¼Œ<code>#</code>é€šå¸¸ä»£è¡¨äº¤æ›¿æ–‡ä»¶ã€‚äº¤æ›¿æ–‡ä»¶æŒ‡çš„æ˜¯ä½ ä¸Šä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶ï¼Œæƒ³è¦æ’å…¥äº¤æ›¿æ–‡ä»¶çš„åå­—çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤<code>&quot;#p</code>ã€‚</p><h2 id="è¡¨è¾¾å¼å¯„å­˜å™¨-quot"><a href="#è¡¨è¾¾å¼å¯„å­˜å™¨-quot" class="headerlink" title="è¡¨è¾¾å¼å¯„å­˜å™¨ (&quot;=)"></a>è¡¨è¾¾å¼å¯„å­˜å™¨ (<code>&quot;=</code>)</h2><p>Vimæœ‰ä¸€ä¸ªè¡¨è¾¾å¼å¯„å­˜å™¨ï¼Œ<code>&quot;=</code>,ç”¨äºè®¡ç®—è¡¨è¾¾å¼çš„ç»“æœã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¡ç®—æ•°å­¦è¡¨è¾¾å¼<code>1+1</code>çš„å€¼ï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;=1+1&lt;Enter&gt;p</span><br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œä½ åœ¨å‘Šè¯‰Vimä½ æ­£åœ¨ä½¿ç”¨è¡¨è¾¾å¼å¯„å­˜å™¨<code>&quot;=</code>ï¼Œä½ çš„è¡¨è¾¾å¼æ˜¯ï¼ˆ<code>1+1</code>ï¼‰ï¼Œä½ è¿˜éœ€è¦è¾“å…¥<code>p</code>æ¥å¾—åˆ°ç»“æœã€‚æ­£å¦‚ä¹‹å‰æ‰€æåˆ°çš„ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è¾“å…¥æ¨¡å¼ä¸­è®¿é—®å¯„å­˜å™¨ã€‚æƒ³è¦åœ¨è¾“å…¥æ¨¡å¼ä¸­è®¡ç®—æ•°å­¦è¡¨è¾¾å¼çš„å€¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Ctrl</span>-r =<span class="hljs-number">1</span>+<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨<code>@</code>æ¥ä»ä»»ä½•å¯„å­˜å™¨ä¸­è·å–è¡¨è¾¾å¼å¹¶ç”¨è¡¨è¾¾å¼å¯„å­˜å™¨è®¡ç®—å…¶å€¼ã€‚å¦‚æœä½ å¸Œæœ›ä»å¯„å­˜å™¨â€aâ€ä¸­è·å–æ–‡æœ¬ï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;=@a</span><br></code></pre></td></tr></table></figure><p>ä¹‹åè¾“å…¥<code>&lt;enter&gt;</code>ï¼Œå†è¾“å…¥<code>p</code>ã€‚ç±»ä¼¼åœ°ï¼Œæƒ³åœ¨è¾“å…¥æ¨¡å¼ä¸­å¾—åˆ°å¯„å­˜å™¨â€aâ€ä¸­çš„å€¼å¯ä»¥ä½¿ç”¨ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">Ctrl-r</span> =@a<br></code></pre></td></tr></table></figure><p>è¡¨è¾¾å¼æ˜¯Vimä¸­éå¸¸å®å¤§çš„ä¸€ä¸ªè¯é¢˜ï¼Œæ‰€ä»¥æˆ‘åªä¼šåœ¨è¿™é‡Œä»‹ç»ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘å°†ä¼šåœ¨ä¹‹åçš„VimScriptç« èŠ‚ä¸­è¿›ä¸€æ­¥è®²è§£æ›´å¤šå…³äºè¡¨è¾¾å¼çš„ç»†èŠ‚ã€‚</p><h2 id="é€‰å–å’Œæ‹–æ”¾å¯„å­˜å™¨-quot-quot"><a href="#é€‰å–å’Œæ‹–æ”¾å¯„å­˜å™¨-quot-quot" class="headerlink" title="é€‰å–å’Œæ‹–æ”¾å¯„å­˜å™¨ (&quot;*, &quot;+)"></a>é€‰å–å’Œæ‹–æ”¾å¯„å­˜å™¨ (<code>&quot;*</code>, <code>&quot;+</code>)</h2><p>ä½ éš¾é“ä¸è§‰å¾—æœ‰äº›æ—¶å€™ä½ éœ€è¦ä»æŸäº›å¤–éƒ¨çš„ç¨‹åºä¸­å¤åˆ¶ä¸€äº›æ–‡æœ¬å¹¶ç²˜è´´åˆ°Vimä¸­å—ï¼Œæˆ–è€…åè¿‡æ¥æ“ä½œï¼Ÿæœ‰äº†Vimçš„é€‰å–å’Œæ‹–æ”¾å¯„å­˜å™¨ä½ å°±èƒ½åŠåˆ°ã€‚Vimæœ‰ä¸¤ä¸ªé€‰å–å¯„å­˜å™¨ï¼š<code>quotestar</code> (<code>&quot;*</code>) å’Œ <code>quoteplus</code> (<code>&quot;+</code>)ã€‚ä½ å¯ä»¥ç”¨å®ƒä»¬æ¥è®¿é—®ä»å¤–éƒ¨ç¨‹åºä¸­å¤åˆ¶çš„æ–‡æœ¬ã€‚</p><p>å¦‚æœä½ åœ¨è¿è¡Œä¸€ä¸ªå¤–éƒ¨ç¨‹åºï¼ˆæ¯”å¦‚Chromeæµè§ˆå™¨ï¼‰ï¼Œç„¶åä½ ä½¿ç”¨<code>Ctrl-c</code>(æˆ–è€…<code>Cmd-c</code>,å–å†³äºä½ çš„æ“ä½œç³»ç»Ÿ)å¤åˆ¶äº†ä¸€éƒ¨åˆ†æ–‡æœ¬ï¼Œé€šå¸¸ä½ æ˜¯æ²¡æœ‰åŠæ³•åœ¨Vimé‡Œä½¿ç”¨<code>p</code>æ¥ç²˜è´´è¿™éƒ¨åˆ†æ–‡æœ¬çš„ã€‚ä½†æ˜¯ï¼ŒVimçš„ä¸¤ä¸ªå¯„å­˜å™¨<code>&quot;+</code>å’Œ<code>&quot;*</code>éƒ½æ˜¯å’Œä½ ç³»ç»Ÿçš„ç²˜è´´æ¿ç›¸è¿æ¥çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥ä½¿ç”¨<code>&quot;+p</code>å’Œ<code>&quot;*p</code>æ¥ç²˜è´´è¿™äº›æ–‡æœ¬ã€‚åè¿‡æ¥ï¼Œå¦‚æœä½ ä½¿ç”¨<code>&quot;+yiw</code>æˆ–è€…<code>&quot;*yiw</code>åœ¨Vimä¸­å¤åˆ¶äº†ä¸€äº›æ–‡æœ¬ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>Ctrl-v</code>ï¼ˆæˆ–è€…<code>Cmd-v</code>ï¼‰ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•åªåœ¨ä½ çš„Vimå¼€å¯äº†<code>+clipboard</code>é€‰é¡¹æ—¶æ‰æœ‰ç”¨ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ<code>vim --version</code>æŸ¥çœ‹è¿™ä¸€é€‰é¡¹ã€‚å¦‚æœä½ çœ‹è§<code>-clipboard</code>çš„è¯ï¼Œåˆ™éœ€è¦å®‰è£…ä¸€ä¸‹æ”¯æŒVimç²˜è´´æ¿çš„é…ç½®ã€‚</p><p>ä½ ä¹Ÿè®¸ä¼šæƒ³å¦‚æœ<code>&quot;*</code>å’Œ<code>&quot;+</code>èƒ½åŠåˆ°çš„äº‹å®Œå…¨ç›¸åŒï¼Œé‚£ä¸ºä»€ä¹ˆViméœ€è¦ä¸¤ä¸ªä¸åŒçš„å¯„å­˜å™¨å‘¢ï¼Ÿä¸€äº›æœºå™¨ä½¿ç”¨çš„æ˜¯X11çª—å£ç³»ç»Ÿï¼Œè¿™ä¸€ç³»ç»Ÿæœ‰3ä¸ªç±»å‹çš„é€‰é¡¹ï¼šé¦–é€‰ï¼Œæ¬¡é€‰å’Œç²˜è´´æ¿ã€‚å¦‚æœä½ çš„æœºå™¨ä½¿ç”¨çš„æ˜¯X11çš„è¯,Vimä½¿ç”¨çš„æ˜¯<code>quotestar</code> (<code>&quot;*</code>)å¯„å­˜å™¨ä½œä¸ºX11çš„é¦–é€‰é€‰é¡¹ï¼Œå¹¶ä½¿ç”¨ <code>quoteplus</code> (<code>&quot;+</code>)ä½œä¸ºç²˜è´´æ¿é€‰é¡¹ã€‚è¿™åªåœ¨ä½ çš„Vimé…ç½®é‡Œå¼€å¯äº†<code>xterm_clipboard</code> é€‰é¡¹æ—¶æ‰æœ‰æ•ˆï¼ˆ<code>vim --version</code>ä¸­çš„<code>+xterm_clipboard</code>ï¼‰ã€‚å¦‚æœä½ çš„çš„Vimé…ç½®ä¸­æ²¡æœ‰ <code>xterm_clipboard</code>ä¹Ÿä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚è¿™åªæ˜¯æ„å‘³ç€<code>quotestar</code> å’Œ<code>quoteplus</code>ä¸¤ä¸ªå¯„å­˜å™¨æ˜¯å¯ä»¥äº’ç›¸æ›¿ä»£çš„ã€‚</p><p>æˆ‘å‘è§‰ä½¿ç”¨<code>=*p</code>æˆ–è€…<code>=+p</code>çš„è¯æ¯”è¾ƒéº»çƒ¦ï¼Œä¸ºäº†ä½¿Vimä»…ä½¿ç”¨<code>p</code>å°±èƒ½ç²˜è´´ä»å¤–éƒ¨ç¨‹åºå¤åˆ¶çš„æ–‡æœ¬ï¼Œä½ å¯ä»¥åœ¨ä½ çš„<code>vimrc</code>é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä¸‹é¢ä¸€è¡Œï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">set</span> <span class="hljs-attribute">clipboard</span>=unnamed<br></code></pre></td></tr></table></figure><p>ç°åœ¨å½“æˆ‘ä»å¤–éƒ¨ç¨‹åºä¸­å¤åˆ¶æ–‡æœ¬æ—¶ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨åŒ¿åå¯„å­˜å™¨<code>p</code>æ¥è¿›è¡Œç²˜è´´ã€‚æˆ‘ä¹Ÿå¯ä»¥åœ¨Vimä¸­å¤åˆ¶æ–‡æœ¬ååœ¨å¤–éƒ¨ç¨‹åºä¸­ä½¿ç”¨<code>Ctrl-v</code>æ¥ç²˜è´´ã€‚å¦‚æœä½ çš„Vimå¼€å¯äº† <code>+xterm_clipboard</code>è®¾ç½®ï¼Œä½ æˆ–è®¸ä¼šæƒ³åŒæ—¶ä¹Ÿä½¿ç”¨<code>unnamed</code>å’Œ<code>unnamedplus</code>çš„ç²˜è´´æ¿é€‰é¡¹ã€‚</p><h2 id="é»‘æ´å¯„å­˜å™¨-quot"><a href="#é»‘æ´å¯„å­˜å™¨-quot" class="headerlink" title="é»‘æ´å¯„å­˜å™¨ (&quot;_)"></a>é»‘æ´å¯„å­˜å™¨ (<code>&quot;_</code>)</h2><p>ä½ æ¯æ¬¡åˆ é™¤æˆ–ä¿®æ”¹æ–‡æœ¬çš„æ—¶å€™ï¼Œè¿™éƒ¨åˆ†æ–‡æœ¬éƒ½ä¼šè‡ªåŠ¨ä¿å­˜åœ¨Vimçš„å¯„å­˜å™¨ä¸­ã€‚æœ‰äº›æ—¶å€™ä½ å¹¶ä¸å¸Œæœ›æŠŠä»€ä¹ˆä¸œè¥¿éƒ½å¾€å¯„å­˜å™¨é‡Œå­˜ï¼Œè¿™è¯¥æ€ä¹ˆåŠåˆ°å‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥ä½¿ç”¨é»‘æ´å¯„å­˜å™¨ï¼ˆ<code>&quot;_</code>ï¼‰ã€‚æƒ³è¦åˆ é™¤ä¸€è¡Œå¹¶ä¸”ä¸å°†å…¶å­˜å‚¨åœ¨ä»»ä½•å¯„å­˜å™¨ä¸­æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>&quot;_dd</code>å‘½ä»¤.</p><p>å®ƒæ˜¯å’Œ <code>/dev/null</code> ç±»ä¼¼çš„å¯„å­˜å™¨ã€‚</p><h2 id="æœç´¢æ¨¡å¼å¯„å­˜å™¨-quot"><a href="#æœç´¢æ¨¡å¼å¯„å­˜å™¨-quot" class="headerlink" title="æœç´¢æ¨¡å¼å¯„å­˜å™¨ (&quot;/)"></a>æœç´¢æ¨¡å¼å¯„å­˜å™¨ (<code>&quot;/</code>)</h2><p>ä¸ºäº†ç²˜è´´ä½ çš„ä¸Šä¸€ä¸ªæœç´¢è¯¢é—®ï¼ˆ<code>/</code> æˆ– <code>?</code>ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨æœç´¢æ¨¡å¼å¯„å­˜å™¨(<code>&quot;/</code>)ã€‚ä½¿ç”¨å‘½ä»¤ <code>&quot;/p</code>å°±èƒ½ç²˜è´´ä¸Šä¸€ä¸ªæœç´¢çš„æ¡ç›®ã€‚</p><h2 id="æŸ¥çœ‹æ‰€æœ‰çš„å¯„å­˜å™¨"><a href="#æŸ¥çœ‹æ‰€æœ‰çš„å¯„å­˜å™¨" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰çš„å¯„å­˜å™¨"></a>æŸ¥çœ‹æ‰€æœ‰çš„å¯„å­˜å™¨</h2><p>ä½ å¯ä»¥ä½¿ç”¨<code>:register</code>å‘½ä»¤æ¥æŸ¥çœ‹ä½ çš„æ‰€æœ‰å¯„å­˜å™¨ã€‚å¦‚æœä½ åªæƒ³æŸ¥çœ‹â€aâ€,â€1â€å’Œâ€-â€œå¯„å­˜å™¨çš„å†…å®¹çš„è¯åˆ™å¯ä»¥ä½¿ç”¨å‘½ä»¤<code>:register a 1 -</code>ã€‚</p><p>æœ‰ä¸€ä¸ªVimçš„æ’ä»¶å«åš <a href="https://github.com/junegunn/vim-peekaboo">vim-peekaboo</a> ,å¯ä»¥è®©ä½ æŸ¥çœ‹åˆ°å¯„å­˜å™¨çš„å†…å®¹ï¼Œåœ¨æ™®é€šæ¨¡å¼ä¸‹è¾“å…¥<code>&quot;</code>æˆ–<code>@</code> å³å¯ï¼Œæˆ–è€…åœ¨è¾“å…¥æ¨¡å¼ä¸­è¾“å…¥<code>Ctrl-r</code>ã€‚æˆ‘å‘ç°è¿™ä¸ªæ’ä»¶ç›¸å½“çš„æœ‰ç”¨ï¼Œå› ä¸ºå¤§å¤šæ•°æ—¶å€™æˆ‘æ˜¯è®°ä¸ä½æˆ‘çš„å¯„å­˜å™¨ä¸­çš„å†…å®¹çš„ã€‚å€¼å¾—ä¸€è¯•ï¼</p><h2 id="æ‰§è¡Œå¯„å­˜å™¨"><a href="#æ‰§è¡Œå¯„å­˜å™¨" class="headerlink" title="æ‰§è¡Œå¯„å­˜å™¨"></a>æ‰§è¡Œå¯„å­˜å™¨</h2><p>å‘½åå¯„å­˜å™¨ä¸åªå¯ä»¥ç”¨æ¥å­˜æ”¾æ–‡æœ¬ï¼Œä½ è¿˜å¯ä»¥å€ŸåŠ©<code>@</code>æ¥æ‰§è¡Œå®å‘½ä»¤ã€‚æˆ‘ä¼šåœ¨ä¸‹ä¸€ç« èŠ‚ä¸­ä»‹ç»å®å‘½ä»¤ã€‚</p><p>æ³¨æ„ï¼Œå› ä¸ºå®å‘½ä»¤æ—¶å­˜å‚¨åœ¨Vimå¯„å­˜å™¨ä¸­çš„ï¼Œä½¿ç”¨å®æ—¶å¯èƒ½ä¼šè¦†ç›–å­˜å‚¨çš„å†…å®¹ã€‚å¦‚æœä½ å°†æ–‡æœ¬â€Hello Vimâ€å­˜æ”¾åœ¨å¯„å­˜å™¨â€aâ€ä¸­ï¼Œå¹¶ä¸”ä¹‹åä½ åœ¨åŒä¸€ä¸ªå¯„å­˜å™¨é‡Œè®°å½•äº†ä¸€ä¸ªå®å‘½ä»¤ (<code>qa&#123;macro-commands&#125;q</code>),é‚£ä¹ˆè¿™ä¸ªå®å‘½ä»¤å°†ä¼šè¦†ç›–ä¹‹å‰å­˜å‚¨çš„æ–‡æœ¬â€Hello Vimâ€ï¼ˆä½ å¯ä»¥ä½¿ç”¨<code>@a</code>æ¥æ‰§è¡Œå¯„å­˜å™¨ä¸­å­˜å‚¨çš„å®å‘½ä»¤ï¼‰ã€‚</p><h2 id="æ¸…é™¤å¯„å­˜å™¨"><a href="#æ¸…é™¤å¯„å­˜å™¨" class="headerlink" title="æ¸…é™¤å¯„å­˜å™¨"></a>æ¸…é™¤å¯„å­˜å™¨</h2><p>ä»æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦æ¥æ¸…é™¤ä»»ä½•å¯„å­˜å™¨ï¼Œå› ä¸ºä½ ä¸‹ä¸€ä¸ªä½¿ç”¨æ¥å­˜å‚¨æ–‡æœ¬çš„å¯„å­˜å™¨ä¼šè‡ªåŠ¨è¦†ç›–è¯¥å¯„å­˜å™¨ä¸­ä¹‹å‰çš„å†…å®¹ã€‚ç„¶è€Œï¼Œä½ å¯ä»¥é€šè¿‡è®°å½•ä¸€ä¸ªç©ºçš„å®å‘½ä»¤æ¥å¿«é€Ÿåœ°æ¸…é™¤ä»»ä½•å‘½åå¯„å­˜å™¨ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ è¿è¡Œ<code>qaq</code>ï¼ŒVimå°±ä¼šåœ¨å¯„å­˜å™¨â€aâ€ä¸­è®°å½•ä¸€ä¸ªç©ºçš„å®å‘½ä»¤ã€‚</p><p>è¿˜æœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯è¿è¡Œå‘½ä»¤<code>:call setreg(&#39;a&#39;,&#39;hello register a&#39;)</code>,å…¶ä¸­â€™aâ€™ä»£è¡¨çš„å°±æ˜¯å¯„å­˜å™¨â€aâ€ã€‚è€Œâ€hello register aâ€å°±æ˜¯ä½ æƒ³å­˜å‚¨çš„å†…å®¹ã€‚</p><p>è¿˜æœ‰ä¸€ç§æ¸…é™¤å¯„å­˜å™¨çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨è¡¨è¾¾å¼<code>:let @a = &#39;&#39;</code>æ¥å°†å¯„å­˜å™¨â€a çš„å€¼è®¾ä¸ºç©ºçš„å­—ç¬¦ä¸²ã€‚</p><h2 id="è·å–å¯„å­˜å™¨ä¸­çš„å†…å®¹"><a href="#è·å–å¯„å­˜å™¨ä¸­çš„å†…å®¹" class="headerlink" title="è·å–å¯„å­˜å™¨ä¸­çš„å†…å®¹"></a>è·å–å¯„å­˜å™¨ä¸­çš„å†…å®¹</h2><p>ä½ å¯ä»¥ä½¿ç”¨<code>:put</code>å‘½ä»¤æ¥ç²˜è´´ä»»ä½•å¯„å­˜å™¨çš„å†…å®¹ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ è¿è¡Œå‘½ä»¤<code>:put a</code>,Vimå°±ä¼šæ‰“å°å‡ºå¯„å­˜å™¨â€aâ€çš„å†…å®¹ï¼Œè¿™å’Œ<code>&quot;ap</code>éå¸¸åƒï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºåœ¨æ™®é€šæ¨¡å¼ä¸‹å‘½ä»¤<code>p</code>åœ¨å½“å‰å…‰æ ‡ä½ç½®ä¹‹åæ‰“å°å¯„å­˜å™¨çš„å†…å®¹ï¼Œè€Œ<code>:put</code>æ–°èµ·ä¸€è¡Œæ¥æ‰“å°å¯„å­˜å™¨çš„å†…å®¹ã€‚</p><p>å› ä¸º<code>:put</code>æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå‘½ä»¤ï¼Œæ‚¨å¯ä»¥ä¼ ä¸€ä¸ªåœ°å€ç»™å®ƒã€‚<code>:10put a</code>å°†ä¼šåœ¨å½“å‰å…‰æ ‡ä¸‹æ•°10è¡Œï¼Œç„¶åæ’å…¥æ–°è¡Œï¼Œå†…å®¹ä¸ºå¯„å­˜å™¨aä¸­çš„å†…å®¹ã€‚</p><p>ä¸€ä¸ªå¾ˆé…·çš„æŠ€å·§æ˜¯å°†é»‘æ´å¯„å­˜å™¨(<code>&quot;_</code>)ä¼ ç»™<code>:put</code>å‘½ä»¤ã€‚å› ä¸ºé»‘æ´å¯„å­˜å™¨ä¸ä¿å­˜ä»»ä½•å€¼ï¼Œ<code>:put _</code>å‘½ä»¤å°†æ’å…¥ä¸€ä¸ªæ–°çš„ç©ºç™½è¡Œã€‚æ‚¨å¯å°†è¿™ä¸ªä¸å…¨å±€å‘½ä»¤è”åˆèµ·æ¥ï¼Œæ’å…¥å¤šä¸ªç©ºè¡Œã€‚æ¯”å¦‚ï¼Œè¦åœ¨æ‰€æœ‰ä»¥æ–‡æœ¬â€endâ€ç»“å°¾çš„è¡Œä¸‹æ’å…¥ç©ºè¡Œï¼Œä½¿ç”¨<code>:g/end/put _</code>ã€‚åœ¨åé¢æ‚¨å°†äº†è§£å…³äºå…¨å±€å‘½ä»¤çš„çŸ¥è¯†ã€‚</p><h2 id="èªæ˜åœ°å­¦ä¹ å¯„å­˜å™¨"><a href="#èªæ˜åœ°å­¦ä¹ å¯„å­˜å™¨" class="headerlink" title="èªæ˜åœ°å­¦ä¹ å¯„å­˜å™¨"></a>èªæ˜åœ°å­¦ä¹ å¯„å­˜å™¨</h2><p>æ­å–œä½ æˆåŠŸåœ°åšæŒåˆ°äº†æœ€åï¼è¿™ä¸€ç« æœ‰éå¸¸å¤šçš„å†…å®¹éœ€è¦æ¶ˆåŒ–ã€‚å¦‚æœä½ æ„Ÿè§‰è¢«æ–°çš„çŸ¥è¯†æ·¹æ²¡ï¼Œä½ è¦çŸ¥é“ä½ å¹¶ä¸å­¤å•ï¼Œå½“æˆ‘æœ€åˆå¼€å§‹å­¦ä¹ Vimå¯„å­˜å™¨æ—¶ä¹Ÿæœ‰è¿™ç§æ„Ÿè§‰ã€‚</p><p>æˆ‘å¹¶ä¸è®¤ä¸ºä½ å¿…é¡»ç°åœ¨å°±è®°å¾—æ‰€æœ‰çš„çŸ¥è¯†ç‚¹ã€‚ä¸ºäº†æé«˜æˆ‘ä»¬çš„ç”Ÿäº§æ•ˆç‡ï¼Œä½ å¯ä»¥ä»ä½¿ç”¨ä»¥ä¸‹ä¸‰ç±»å¯„å­˜å™¨å¼€å§‹ï¼š</p><ol><li>åŒ¿åå¯„å­˜å™¨(<code>&quot;&quot;</code>).</li><li>å‘½åå¯„å­˜å™¨ (<code>&quot;a-z</code>).</li><li>ç¼–å·å¯„å­˜å™¨ (<code>&quot;0-9</code>).</li></ol><p>æ—¢ç„¶åŒ¿åå¯„å­˜å™¨æ˜¯é»˜è®¤å’Œ<code>p</code>æˆ–<code>P</code>ï¼Œä½ åªéœ€è¦å­¦ä¹ ä¸¤ä¸ªå¯„å­˜å™¨ï¼šå‘½åå¯„å­˜å™¨å’Œç¼–å·å¯„å­˜å™¨ã€‚ä¹‹åå¦‚æœä½ éœ€è¦ç”¨åˆ°å…¶ä»–çš„å¯„å­˜å™¨æ—¶ä½ å†é€æ¸åœ°å­¦ä¹ å…¶ä»–å¯„å­˜å™¨çš„ç”¨æ³•ï¼Œä¸ç”¨æ€¥ï¼Œæ…¢æ…¢æ¥ã€‚</p><p>æ™®é€šäººçš„çŸ­æœŸè®°å¿†éƒ½æ˜¯æœ‰æé™çš„ï¼Œå¤§æ¦‚æ¯æ¬¡åªèƒ½è®°ä½5-7ä¸ªä¿¡æ¯ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æˆ‘çš„æ—¥å¸¸ç¼–è¾‘ä¸­ï¼Œæˆ‘åªç”¨3åˆ°7ä¸ªå‘½åå¯„å­˜å™¨çš„åŸå› ï¼Œæˆ‘æ²¡æœ‰åŠæ³•è®°ä½æ•´æ•´26ä¸ªå¯„å­˜å™¨çš„å†…å®¹ã€‚æˆ‘é€šå¸¸ä»å¯„å­˜å™¨â€aâ€å¼€å§‹ç”¨ï¼Œä¹‹åç”¨å¯„å­˜å™¨â€bâ€,ä»¥å­—æ¯è¡¨å‡åºçš„é¡ºåºæ¥ä½¿ç”¨ã€‚å°è¯•ä¸€ä¸‹å„ç§æ–¹æ³•ï¼Œçœ‹çœ‹å“ªç§æœ€é€‚åˆä½ ã€‚</p><p>Vimå¯„å­˜å™¨éå¸¸å¼ºå¤§ï¼Œåˆç†ä½¿ç”¨çš„è¯èƒ½å¤Ÿé¿å…ä½ è¾“å…¥æ•°ä¸æ¸…çš„é‡å¤æ–‡æœ¬ã€‚ä½†æ˜¯ç°åœ¨ï¼Œæ˜¯æ—¶å€™å­¦ä¹ ä¸€ä¸‹å®å‘½ä»¤äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-å®å‘½ä»¤</title>
    <link href="/2022/04/05/Vim/ch09_macros/"/>
    <url>/2022/04/05/Vim/ch09_macros/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬09ç« -å®å‘½ä»¤"><a href="#ç¬¬09ç« -å®å‘½ä»¤" class="headerlink" title="ç¬¬09ç«  å®å‘½ä»¤"></a>ç¬¬09ç«  å®å‘½ä»¤</h1><p>åœ¨ç¼–è¾‘æ–‡ä»¶çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°æœ‰æ—¶å€™ä½ åœ¨åå¤åœ°åšä¸€äº›ç›¸åŒçš„åŠ¨ä½œã€‚å¦‚æœä½ ä»…åšä¸€æ¬¡ï¼Œå¹¶åœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨è¿™äº›åŠ¨ä½œå²‚ä¸æ˜¯ä¼šæ›´å¥½å—ã€‚é€šè¿‡ Vim çš„å®å‘½ä»¤ï¼Œä½ å¯ä»¥å°†ä¸€äº›åŠ¨ä½œè®°å½•åˆ° Vim å¯„å­˜å™¨ã€‚</p><p>åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†ä¼šå­¦ä¹ åˆ°å¦‚ä½•é€šè¿‡å®å‘½ä»¤è‡ªåŠ¨å®Œæˆä¸€äº›æ™®é€šçš„ä»»åŠ¡ï¼ˆå¦å¤–ï¼Œçœ‹ä½ çš„æ–‡ä»¶åœ¨è‡ªåŠ¨ç¼–è¾‘æ˜¯ä¸€ä»¶å¾ˆé…·çš„äº‹æƒ…ï¼‰ã€‚</p><h2 id="åŸºæœ¬å®å‘½ä»¤"><a href="#åŸºæœ¬å®å‘½ä»¤" class="headerlink" title="åŸºæœ¬å®å‘½ä»¤"></a>åŸºæœ¬å®å‘½ä»¤</h2><p>å®å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs perl">qa                     å¼€å§‹è®°å½•åŠ¨ä½œåˆ°å¯„å­˜å™¨ a<br><span class="hljs-string">q (while recording)</span>    åœæ­¢è®°å½•<br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨å°å†™å­—æ¯ ï¼ˆa-zï¼‰å»å­˜å‚¨å®å‘½ä»¤ã€‚å¹¶é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤å»è°ƒç”¨ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">@<span class="hljs-keyword">a</span>    Execute macro <span class="hljs-built_in">from</span> register <span class="hljs-keyword">a</span><br>@@    Execute <span class="hljs-keyword">the</span> <span class="hljs-keyword">last</span> executed macros<br></code></pre></td></tr></table></figure><p>å‡è®¾ä½ æœ‰å¦‚ä¸‹çš„æ–‡æœ¬ï¼Œä½ æ‰“ç®—å°†æ¯ä¸€è¡Œä¸­çš„æ‰€æœ‰å­—æ¯éƒ½å˜ä¸ºå¤§å†™ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hello</span><br><span class="hljs-attribute">vim</span><br><span class="hljs-attribute">macros</span><br><span class="hljs-attribute">are</span><br><span class="hljs-attribute">awesome</span><br></code></pre></td></tr></table></figure><p>å°†ä½ çš„å…‰æ ‡ç§»åŠ¨åˆ° â€œhelloâ€ æ çš„è¡Œé¦–ï¼Œå¹¶æ‰§è¡Œï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">qa0<span class="hljs-built_in">gU</span><span class="hljs-variable">$jq</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤çš„åˆ†è§£å¦‚ä¸‹ï¼š</p><ul><li><code>qa</code> å¼€å§‹è®°å½•ä¸€ä¸ªå®å®šä¹‰å¹¶å­˜å‚¨åœ¨ a å¯„å­˜å™¨ã€‚</li><li><code>0</code> ç§»åŠ¨åˆ°è¡Œé¦–ã€‚</li><li><code>gU$</code> å°†ä»å…‰æ ‡åˆ°è¡Œå°¾çš„å­—æ¯å˜ä¸ºå¤§å†™ã€‚</li><li><code>j</code> ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚</li><li><code>q</code> åœæ­¢è®°å½•ã€‚</li></ul><p>è°ƒç”¨ <code>@a</code> å»æ‰§è¡Œè¯¥å®å‘½ä»¤ã€‚å°±åƒå…¶ä»–çš„å®å‘½ä»¤ä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ºè¯¥å‘½ä»¤åŠ ä¸€ä¸ªè®¡æ•°ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥é€šè¿‡ <code>3@a</code> å»æ‰§è¡Œ <code>a</code> å‘½ä»¤3æ¬¡ã€‚ä½ ä¹Ÿå¯ä»¥æ‰§è¡Œ <code>3@@</code> å»æ‰§è¡Œä¸Šä¸€æ¬¡æ‰§è¡Œè¿‡çš„å®å‘½ä»¤3æ¬¡ã€‚</p><h2 id="å®‰å…¨ä¿æŠ¤"><a href="#å®‰å…¨ä¿æŠ¤" class="headerlink" title="å®‰å…¨ä¿æŠ¤"></a>å®‰å…¨ä¿æŠ¤</h2><p>åœ¨æ‰§è¡Œé‡åˆ°é”™è¯¯çš„æ—¶å€™ï¼Œå®å‘½ä»¤ä¼šè‡ªåŠ¨åœæ­¢ã€‚å‡å¦‚ä½ æœ‰å¦‚ä¸‹æ–‡æœ¬ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span>. chocolate donut<br><span class="hljs-selector-tag">b</span>. mochi donut<br>c. powdered sugar donut<br>d. plain donut<br></code></pre></td></tr></table></figure><p>ä½ æƒ³å°†æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªè¯å˜ä¸ºå¤§å†™ï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å®å‘½ä»¤ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">qa0W~jq<br></code></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤çš„åˆ†è§£å¦‚ä¸‹ï¼š</p><ul><li><code>qa</code> å¼€å§‹è®°å½•ä¸€ä¸ªå®å®šä¹‰å¹¶å­˜å‚¨åœ¨ a å¯„å­˜å™¨ã€‚</li><li><code>0</code> ç§»åŠ¨åˆ°è¡Œé¦–ã€‚</li><li><code>W</code> ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯ã€‚</li><li><code>~</code> å°†å…‰æ ‡é€‰ä¸­çš„å•è¯å˜ä¸ºå¤§å†™ã€‚</li><li><code>j</code> ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚</li><li><code>q</code> åœæ­¢è®°å½•ã€‚</li></ul><p>æˆ‘å–œæ¬¢å¯¹å®å‘½ä»¤è¿›è¡Œè¶…è¿‡æ‰€éœ€æ¬¡æ•°çš„è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘é€šå¸¸ä½¿ç”¨ <code>99@a</code> å‘½ä»¤å»æ‰§è¡Œè¯¥å®å‘½ä»¤99æ¬¡ã€‚ä½¿ç”¨è¯¥å‘½ä»¤ï¼ŒVimå¹¶ä¸ä¼šçœŸæ­£æ‰§è¡Œè¿™ä¸ªå®99æ¬¡ï¼Œå½“ Vim åˆ°è¾¾æœ€åä¸€è¡Œæ‰§è¡Œ<code>j</code>æ—¶ï¼Œå®ƒä¼šå‘ç°æ— æ³•å†å‘ä¸‹äº†ï¼Œç„¶åä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶ç»ˆæ­¢å®å‘½ä»¤çš„æ‰§è¡Œã€‚</p><p>å®é™…ä¸Šï¼Œé‡åˆ°é”™è¯¯è‡ªåŠ¨åœæ­¢è¿è¡Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ã€‚å¦åˆ™ï¼ŒVim ä¼šç»§ç»­æ‰§è¡Œè¯¥å‘½ä»¤99æ¬¡ï¼Œå°½ç®¡å®ƒå·²ç»æ‰§è¡Œåˆ°æœ€åä¸€è¡Œäº†ã€‚</p><h2 id="å‘½ä»¤è¡Œæ‰§è¡Œå®"><a href="#å‘½ä»¤è¡Œæ‰§è¡Œå®" class="headerlink" title="å‘½ä»¤è¡Œæ‰§è¡Œå®"></a>å‘½ä»¤è¡Œæ‰§è¡Œå®</h2><p>åœ¨æ­£å¸¸æ¨¡å¼æ‰§è¡Œ <code>@a</code> å¹¶ä¸æ˜¯å®å‘½ä»¤è°ƒç”¨çš„å”¯ä¸€æ–¹å¼ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ <code>ï¼šnormal @a</code> ã€‚<code>ï¼šnormal</code> ä¼šå°†ä»»ä½•ç”¨æˆ·æ·»åŠ çš„å‚æ•°ä½œä¸ºå‘½ä»¤å»æ‰§è¡Œã€‚ä¾‹å¦‚æ·»åŠ  <code>@a</code>ï¼Œå’Œåœ¨ normal mode æ‰§è¡Œ <code>@a</code> çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p><p><code>:normal</code> å‘½ä»¤ä¹Ÿæ”¯æŒèŒƒå›´å‚æ•°ã€‚ä½ å¯ä»¥åœ¨é€‰æ‹©çš„èŒƒå›´å†…å»æ‰§è¡Œå®å‘½ä»¤ã€‚å¦‚æœä½ åªæƒ³åœ¨ç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œæ‰§è¡Œå®å‘½ä»¤ï¼Œä½ å¯ä»¥æ‰§è¡Œ <code>ï¼š2,3 normal @a</code>ã€‚</p><h2 id="åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œå®å‘½ä»¤"><a href="#åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œå®å‘½ä»¤" class="headerlink" title="åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œå®å‘½ä»¤"></a>åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œå®å‘½ä»¤</h2><p>å‡å¦‚ä½ æœ‰å¤šä¸ª <code>.txt</code> æ–‡ä»¶ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶åŒ…å«ä¸åŒçš„å†…å®¹ã€‚å¹¶ä¸”ä½ åªæƒ³å°†åŒ…å«æœ‰ â€œdonutâ€ å•è¯çš„è¡Œçš„ç¬¬ä¸€ä¸ªå•è¯å˜ä¸ºå¤§å†™ã€‚å‡è®¾ï¼Œæ‚¨çš„å¯„å­˜å™¨aä¸­å­˜å‚¨çš„å†…å®¹æ˜¯<code>0W~j</code>(å°±æ˜¯å‰é¢ä¾‹å­ä¸­ç”¨åˆ°çš„å®å‘½ä»¤),é‚£ä¹ˆï¼Œæ‚¨è¯¥å¦‚ä½•å¿«é€Ÿå®Œæˆè¿™ä¸ªæ“ä½œå‘¢ï¼Ÿ</p><p>ç¬¬ä¸€ä¸ªæ–‡ä»¶:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment">## savory.txt</span><br>a. cheddar <span class="hljs-keyword">jalapeno </span>donut<br><span class="hljs-keyword">b. </span>mac n cheese donut<br>c. fried dumpling<br></code></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªæ–‡ä»¶:</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs clean">## sweet.txt<br>a. chocolate donut<br>b. chocolate pancake<br>c. powdered sugar donut<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸‰ä¸ªæ–‡ä»¶:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-comment">## plain.txt</span><br>a. wheat <span class="hljs-keyword">bread</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">b. </span>plain donut<br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥è¿™ä¹ˆåš:</p><ul><li><code>:args *.txt</code> æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ <code>.txt</code> æ–‡ä»¶ã€‚</li><li><code>:argdo g/donut/normal @a</code> åœ¨ <code>:args</code> ä¸­åŒ…å«çš„æ¯ä¸€ä¸ªæ–‡ä»¶é‡Œæ‰§è¡Œä¸€ä¸ªå…¨å±€å‘½ä»¤ <code>g/donut/normal @a</code>ã€‚</li><li><code>:argdo update</code> åœ¨ <code>:args</code> ä¸­åŒ…å«çš„æ¯ä¸€ä¸ªæ–‡ä»¶é‡Œæ‰§è¡Œ <code>update</code> å‘½ä»¤,ä¿å­˜ä¿®æ”¹åçš„å†…å®¹ã€‚</li></ul><p>ä¹Ÿè®¸ä½ å¯¹å…¨å±€å‘½ä»¤ <code>:g/donut/normal @a</code> ä¸æ˜¯å¾ˆäº†è§£ï¼Œè¯¥å‘½ä»¤ä¼šæ‰§è¡Œ <code>/donut/</code>æœç´¢å‘½ä»¤ï¼Œç„¶ååœ¨æ‰€æœ‰åŒ¹é…çš„è¡Œä¸­æ‰§è¡Œ<code>normal @a</code> å‘½ä»¤ã€‚æˆ‘ä¼šåœ¨åé¢çš„ç« èŠ‚ä¸­ä»‹ç»å…¨å±€å‘½ä»¤ã€‚</p><h2 id="é€’å½’æ‰§è¡Œå®å‘½ä»¤"><a href="#é€’å½’æ‰§è¡Œå®å‘½ä»¤" class="headerlink" title="é€’å½’æ‰§è¡Œå®å‘½ä»¤"></a>é€’å½’æ‰§è¡Œå®å‘½ä»¤</h2><p>ä½ å¯ä»¥é€’å½’åœ°æ‰§è¡Œå®å‘½ä»¤ï¼Œé€šè¿‡åœ¨è®°å½•å®å‘½ä»¤æ—¶è°ƒç”¨ç›¸åŒçš„å®å¯„å­˜å™¨æ¥å®ç°ã€‚å‡å¦‚ä½ æœ‰å¦‚ä¸‹æ–‡æœ¬ï¼Œä½ å¸Œæœ›æ”¹å˜ç¬¬ä¸€ä¸ªå•è¯çš„å¤§å°å†™ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span>. chocolate donut<br><span class="hljs-selector-tag">b</span>. mochi donut<br>c. powdered sugar donut<br>d. plain donut<br></code></pre></td></tr></table></figure><p>å¦‚ä¸‹å‘½ä»¤ä¼šé€’å½’åœ°æ‰§è¡Œ:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">qaqqa0W~<span class="hljs-symbol">j@</span>aq<br></code></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤çš„åˆ†è§£å¦‚ä¸‹ï¼š</p><ul><li><code>qaq</code> è®°å½•ä¸€ä¸ªç©ºç™½çš„å®å‘½ä»¤åˆ° â€œaâ€ ã€‚æŠŠå®å‘½ä»¤è®°å½•åœ¨ä¸€ä¸ªç©ºç™½çš„å‘½ä»¤ä¸­æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºä½ ä¸ä¼šæƒ³å°†è¯¥å‘½ä»¤åŒ…å«æœ‰ä»»ä½•å…¶ä»–çš„ä¸œè¥¿ã€‚</li><li><code>qa</code> å¼€å§‹å½•å…¥å®å‘½ä»¤åˆ°å¯„å­˜å™¨ â€œaâ€ã€‚</li><li><code>0</code> ç§»åŠ¨åˆ°è¡Œé¦–ã€‚</li><li><code>W</code> ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯ã€‚</li><li><code>~</code> æ”¹å˜å…‰æ ‡é€‰ä¸­çš„å•è¯çš„å¤§å°å†™ã€‚</li><li><code>j</code> ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚</li><li><code>@a</code> æ‰§è¡Œå®å‘½ä»¤ â€œaâ€ã€‚å½“ä½ è®°å½•è¯¥å®å‘½ä»¤æ—¶ï¼Œ<code>@a</code> åº”è¯¥æ˜¯ç©ºç™½çš„ï¼Œå› ä¸ºä½ åˆšåˆšè°ƒç”¨äº† <code>qaq</code>ã€‚</li><li><code>q</code> åœæ­¢è®°å½•ã€‚</li></ul><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è°ƒç”¨ <code>@a</code> æ¥æŸ¥çœ‹ Vim å¦‚ä½•é€’å½’çš„è°ƒç”¨è¯¥å®å‘½ä»¤ã€‚</p><p>å®å‘½ä»¤æ˜¯å¦‚ä½•çŸ¥é“ä½•æ—¶åœæ­¢å‘¢ï¼Ÿå½“å®æ‰§è¡Œåˆ°æœ€åä¸€è¡Œå¹¶å°è¯• <code>j</code> å‘½ä»¤æ—¶ï¼Œå‘ç°å·²ç»æ²¡æœ‰ä¸‹ä¸€è¡Œäº†ï¼Œå°±ä¼šåœæ­¢æ‰§è¡Œã€‚</p><h2 id="å¢æ·»ä¸€ä¸ªå·²çŸ¥å®"><a href="#å¢æ·»ä¸€ä¸ªå·²çŸ¥å®" class="headerlink" title="å¢æ·»ä¸€ä¸ªå·²çŸ¥å®"></a>å¢æ·»ä¸€ä¸ªå·²çŸ¥å®</h2><p>å¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªå·²ç»å½•åˆ¶å¥½çš„å®å®šä¹‰ä¸­æ·»åŠ æ›´å¤šçš„æ“ä½œï¼Œä¸å…¶é‡æ–°å½•å…¥å®ƒï¼Œä¸å¦‚é€‰æ‹©ä¿®æ”¹å®ƒã€‚åœ¨å¯„å­˜å™¨ä¸€ç« ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªå·²çŸ¥å¯„å­˜å™¨çš„å¤§å†™å­—æ¯æ¥æƒ³è¯¥å¯„å­˜å™¨ä¸­æ·»åŠ å†…å®¹ã€‚åŒæ ·çš„ï¼Œä¸ºäº†åœ¨å¯„å­˜å™¨â€aâ€ä¸­æ·»åŠ æ›´å¤šçš„æ“ä½œï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¤§å†™å­—æ¯â€Aâ€ã€‚</p><p>å‡è®¾å¯„å­˜å™¨aä¸­å·²ç»å­˜å‚¨äº†è¿™ä¸ªå®å‘½ä»¤:<code>qa0W~q</code>(è¯¥å®å‘½ä»¤å°†æŸè¡Œçš„ç¬¬äºŒä¸ªè¯ç»„çš„å¤´ä¸€ä¸ªå­—æ¯æ‰§è¡Œæ”¹å˜å¤§å°å†™æ“ä½œ)ï¼Œå‡è®¾ä½ æƒ³åœ¨è¿™ä¸ªåŸºç¡€ä¸Šæ·»åŠ ä¸€äº›æ“ä½œå‘½ä»¤åºåˆ—ï¼Œä½¿å¾—æ¯ä¸€è¡Œæœ«å°¾æ·»åŠ ä¸€ä¸ªå¥ç‚¹ï¼Œè¿è¡Œï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">qAA.<span class="hljs-tag">&lt;<span class="hljs-name">esc</span>&gt;</span>q<br></code></pre></td></tr></table></figure><p>åˆ†è§£å¦‚ä¸‹:</p><ul><li><code>qA</code> å¼€å§‹åœ¨å¯„å­˜å™¨ â€œAâ€ ä¸­è®°å½•å®å‘½ä»¤ã€‚</li><li><code>A.&lt;esc&gt;</code> åœ¨è¡Œçš„æœ«å°¾åŠ ä¸Šä¸€ä¸ªå¥ç‚¹(è¿™é‡Œçš„<code>A</code>æ˜¯è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œä¸è¦å’Œå®Aææ··æ·†)ï¼Œç„¶åé€€å‡ºæ’å…¥æ¨¡å¼ã€‚</li><li><code>q</code> åœæ­¢è®°å½•å®å‘½ä»¤ã€‚</li></ul><p>ç°åœ¨ï¼Œå½“ä½ æ‰§è¡Œ<code>@a</code>æ—¶ï¼Œå®ƒä¸ä»…å°†ç¬¬äºŒä¸ªè¯ç»„çš„é¦–å­—æ¯è½¬å˜å¤§å°å†™ï¼ŒåŒæ—¶è¿˜åœ¨è¡Œå°¾æ·»åŠ ä¸€ä¸ªå¥ç‚¹ã€‚</p><h2 id="ä¿®æ”¹ä¸€ä¸ªå·²çŸ¥å®"><a href="#ä¿®æ”¹ä¸€ä¸ªå·²çŸ¥å®" class="headerlink" title="ä¿®æ”¹ä¸€ä¸ªå·²çŸ¥å®"></a>ä¿®æ”¹ä¸€ä¸ªå·²çŸ¥å®</h2><p>å¦‚æœæƒ³åœ¨ä¸€ä¸ªå®çš„ä¸­é—´æ·»åŠ æ–°çš„æ“ä½œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p>å‡è®¾æ‚¨åœ¨å¯„å­˜å™¨aä¸­å·²ç»å­˜æœ‰ä¸€ä¸ªå®å‘½ä»¤<code>0W~A.&lt;Esc&gt;</code>ï¼Œå³æ”¹å˜é¦–å­—æ¯å¤§å°å†™ï¼Œå¹¶åœ¨è¡Œå°¾æ·»åŠ å¥å·ã€‚å¦‚æœæ‚¨æƒ³åœ¨æ”¹å˜é¦–å­—æ¯å¤§å°å†™å’Œè¡Œå°¾æ·»åŠ å¥å·ä¹‹é—´ï¼Œåœ¨å•è¯â€dountâ€å‰é¢åŠ å…¥â€deep friedâ€ã€‚ï¼ˆå› ä¸ºå”¯ä¸€æ¯”ç”œç”œåœˆå¥½çš„ä¸œè¥¿å°±æ˜¯ç‚¸ç”œç”œåœˆï¼‰ã€‚</p><p>æˆ‘ä¼šé‡æ–°ä½¿ç”¨ä¸Šä¸€èŠ‚ä½¿ç”¨è¿‡çš„æ–‡æœ¬:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span>. chocolate donut<br><span class="hljs-selector-tag">b</span>. mochi donut<br>c. powdered sugar donut<br>d. plain donut<br></code></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬é€šè¿‡ <code>:put a</code> è°ƒç”¨ä¸€ä¸ªå·²ç»å½•åˆ¶å¥½çš„å®å‘½ä»¤ï¼ˆå‡è®¾ä½ ä¸Šä¸€èŠ‚ä¸­ä¿å­˜åœ¨å¯„å­˜å™¨aä¸­çš„å®å‘½ä»¤è¿˜åœ¨ï¼‰ï¼š</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dns"><span class="hljs-number">0</span>W~<span class="hljs-keyword">A</span>.^[<br></code></pre></td></tr></table></figure><p><code>^[</code> æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¸è®°å¾—äº†å—ï¼Œä½ ä¹‹å‰æ‰§è¡Œè¿‡ <code>0W~A.&lt;esc&gt;</code>ã€‚ <code>^[</code> æ˜¯ Vim çš„ <strong>å†…éƒ¨æŒ‡ä»¤</strong>ï¼Œè¡¨ç¤º <code>&lt;esc&gt;</code>ã€‚é€šè¿‡è¿™äº›æŒ‡å®šçš„ç‰¹æ®Šé”®å€¼ç»„åˆï¼ŒVim çŸ¥é“è¿™äº›æ˜¯å†…éƒ¨ä»£ç çš„ä¸€äº›æ›¿ä»£ã€‚ä¸€äº›å¸¸è§çš„å†…éƒ¨æŒ‡ä»¤å…·æœ‰ç±»ä¼¼çš„æ›¿ä»£ï¼Œä¾‹å¦‚ <code>&lt;esc&gt;</code>ï¼Œ<code>&lt;backspace&gt;</code>ï¼Œ<code>&lt;enter&gt;</code>ã€‚è¿˜æœ‰ä¸€äº›å…¶ä»–çš„é”®å€¼ç»„åˆï¼Œä½†è¿™ä¸æ˜¯æœ¬ç« çš„å†…å®¹ã€‚</p><p>å›åˆ°å®å‘½ä»¤ï¼Œåœ¨æ”¹å˜å¤§å°å†™ä¹‹åçš„é”®åé¢ï¼ˆ<code>~</code>ï¼‰ï¼Œè®©æˆ‘ä»¬æ·»åŠ ï¼ˆ<code>$</code>ï¼‰æ¥ç§»åŠ¨å…‰æ ‡åˆ°è¡Œæœ«ï¼Œå›é€€ä¸€ä¸ªå•è¯ï¼ˆ<code>b</code>ï¼‰ï¼Œè¿›å…¥æ’å…¥æ¨¡å¼ï¼ˆ<code>i</code>ï¼‰ï¼Œè¾“å…¥â€deep fried â€œ ï¼ˆåˆ«å¿½ç•¥â€fried â€œåé¢çš„è¿™ä¸ªç©ºæ ¼ï¼‰ï¼Œä¹‹åé€€å‡ºæ’å…¥æ¨¡å¼ï¼ˆ<code>&lt;esc&gt;</code>ï¼‰ã€‚</p><p>å®Œæ•´çš„å‘½ä»¤å¦‚ä¸‹:</p><figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tp"><span class="hljs-number">0</span><span class="hljs-keyword">W</span>~<span class="hljs-variable">$bideep</span> fried &lt;esc&gt;A.^[<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒVim ä¸èƒ½ç†è§£ <code>&lt;esc&gt;</code>ã€‚æ‚¨ä¸èƒ½ä¾è‘«èŠ¦ç”»ç“¢è¾“å…¥â€<Esc>â€œï¼Œæ‰€ä»¥ä½ éœ€è¦å°†<code>&lt;Esc&gt;</code>å†™æˆå†…éƒ¨ä»£ç çš„å½¢å¼ã€‚åœ¨æ’å…¥æ¨¡å¼ï¼Œåœ¨æŒ‰ä¸‹<code>&lt;esc&gt;</code>åæŒ‰ä¸‹ <code>Ctrl-v</code>ï¼ŒVim ä¼šæ‰“å° <code>^[</code>ã€‚ <code>Ctrl-v</code> æ˜¯ä¸€ä¸ªæ’å…¥æ¨¡å¼çš„æ“ä½œç¬¦ï¼Œå¯ä»¥é€å­—åœ°æ’å…¥ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚ä½ çš„å®å‘½ä»¤åº”è¯¥å¦‚ä¸‹:</p><figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tp"><span class="hljs-number">0</span><span class="hljs-keyword">W</span>~<span class="hljs-variable">$bideep</span> fried ^[A.^[<br></code></pre></td></tr></table></figure><p>ä¸ºäº†åœ¨å¯„å­˜å™¨â€œaâ€ä¸­æ·»åŠ ä¿®æ”¹åçš„æŒ‡ä»¤ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ä¸€ä¸ªå·²çŸ¥å‘½åå¯„å­˜å™¨ä¸­æ·»åŠ ä¸€ä¸ªæ–°æ¡ç›®çš„æ–¹å¼æ¥å®ç°ã€‚åœ¨ä¸€è¡Œçš„è¡Œé¦–ï¼Œæ‰§è¡Œ <code>&quot;ay$</code>ï¼Œä½¿ç”¨å¯„å­˜å™¨ â€œaâ€æ¥å­˜å‚¨å¤åˆ¶çš„æ–‡æœ¬ã€‚</p><p>ç°åœ¨ï¼Œä½†ä½ æ‰§è¡Œ <code>@a</code> æ—¶ï¼Œä½ çš„å®å‘½ä»¤ä¼šè‡ªåŠ¨æ”¹å˜ç¬¬ä¸€ä¸ªå•è¯çš„å¤§å°å†™ï¼Œåœ¨â€donutâ€å‰é¢æ·»åŠ â€deep fried â€œï¼Œä¹‹ååœ¨è¡Œæœ«æ·»åŠ â€œ.â€ã€‚</p><p>å¦ä¸€ä¸ªä¿®æ”¹å®å‘½ä»¤çš„æ–¹å¼æ˜¯é€šè¿‡å‘½ä»¤è¡Œè¡¨è¾¾å¼ã€‚æ‰§è¡Œ <code>:let @a=&quot;</code>ï¼Œä¹‹åæ‰§è¡Œ <code>Ctrl-r Ctrl-r a</code>ï¼Œè¿™ä¼šå°†å¯„å­˜å™¨â€œaâ€çš„å‘½ä»¤é€å­—æ‰“å°å‡ºæ¥ã€‚æœ€åï¼Œåˆ«å¿˜è®°åœ¨é—­åˆçš„å¼•å·ï¼ˆ<code>&quot;</code>ï¼‰ã€‚å¦‚æœä½ å¸Œæœ›åœ¨ç¼–è¾‘å‘½ä»¤è¡Œè¡¨è¾¾å¼æ—¶æ’å…¥å†…éƒ¨ç æ¥ä½¿ç”¨ç‰¹å®šçš„å­—ç¬¦ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>Ctrl-v</code>ã€‚</p><h2 id="æ‹·è´å®"><a href="#æ‹·è´å®" class="headerlink" title="æ‹·è´å®"></a>æ‹·è´å®</h2><p>ä½ å¯ä»¥å¾ˆè½»æ¾çš„å°†ä¸€ä¸ªå¯„å­˜å™¨çš„å†…å®¹æ‹·è´åˆ°å¦ä¸€ä¸ªå¯„å­˜å™¨ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>:let @z = @a</code> å°†å¯„å­˜å™¨â€aâ€ ä¸­çš„å‘½ä»¤æ‹·è´åˆ°å¯„å­˜å™¨â€zâ€ã€‚ <code>@a</code> è¡¨ç¤ºå¯„å­˜å™¨â€œaâ€ä¸­å­˜å‚¨çš„å†…å®¹ï¼Œä½ ç°åœ¨æ‰§è¡Œ <code>@z</code>ï¼Œå°†ä¼šæ‰§è¡Œå’Œ <code>@a</code> ä¸€æ ·çš„æŒ‡ä»¤ã€‚</p><p>æˆ‘å‘ç°å¯¹å¸¸ç”¨çš„å®å‘½ä»¤åˆ›å»ºå†—ä½™æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚åœ¨æˆ‘çš„å·¥ä½œæµç¨‹ä¸­ï¼Œæˆ‘é€šå¸¸åœ¨å‰7ä¸ªå­—æ¯ï¼ˆa-gï¼‰ä¸Šåˆ›å»ºå®å‘½ä»¤ï¼Œå¹¶ä¸”æˆ‘ç»å¸¸ä¸åŠ æ€ç´¢åœ°æŠŠå®ƒä»¬æ›¿æ¢äº†ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘å°†å¾ˆæœ‰ç”¨çš„å®å‘½ä»¤ç§»åŠ¨åˆ°äº†å­—æ¯è¡¨çš„æœ«å°¾ï¼Œå°±ä¸ç”¨æ‹…å¿ƒæˆ‘åœ¨æ— æ„é—´æŠŠä»–ä»¬æ›¿æ¢äº†ã€‚</p><h2 id="ä¸²è¡Œå®å’Œå¹¶è¡Œå®"><a href="#ä¸²è¡Œå®å’Œå¹¶è¡Œå®" class="headerlink" title="ä¸²è¡Œå®å’Œå¹¶è¡Œå®"></a>ä¸²è¡Œå®å’Œå¹¶è¡Œå®</h2><p>Vim å¯ä»¥è¿ç»­å’ŒåŒæ—¶è¿è¡Œå®å‘½ä»¤ï¼Œå‡è®¾ä½ æœ‰å¦‚ä¸‹çš„æ–‡æœ¬ï¼š</p><figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs capnproto"><span class="hljs-keyword">import</span> &#123; FUNC1 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;library1&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; FUNC2 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;library2&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; FUNC3 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;library3&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; FUNC4 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;library4&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; FUNC5 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;library5&quot;</span>;<br></code></pre></td></tr></table></figure><p>å‡å¦‚ä½ å¸Œæœ›æŠŠæ‰€æœ‰çš„ â€œFUNCâ€ å­—ç¬¦å˜ä¸ºå°å†™ï¼Œé‚£ä¹ˆå®å‘½ä»¤ä¸ºå¦‚ä¸‹ï¼š</p><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fsharp"><span class="hljs-keyword">qa0f</span>&#123;<span class="hljs-keyword">gui</span>&#123;jq<br></code></pre></td></tr></table></figure><p>åˆ†è§£å¦‚ä¸‹ï¼š</p><ul><li><code>qa</code> å¼€å§‹è®°å½•å®å‘½ä»¤åˆ° â€œaâ€ å¯„å­˜å™¨ã€‚</li><li><code>0</code>ç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œã€‚</li><li><code>f&#123;</code> æŸ¥æ‰¾ç¬¬ä¸€ä¸ª â€œ{â€ å­—ç¬¦ã€‚</li><li><code>gui&#123;</code> æŠŠæ‹¬å·å†…çš„æ–‡æœ¬ï¼ˆ<code>i&#123;</code>ï¼‰å˜ä¸ºå°å†™ï¼ˆ<code>gu</code>ï¼‰ã€‚</li><li><code>j</code> ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚</li><li><code>q</code> åœæ­¢è®°å½•å®å‘½ä»¤ã€‚</li></ul><p>ç°åœ¨ï¼Œæ‰§è¡Œ <code>99@a</code> åœ¨å‰©ä½™çš„è¡Œä¿®æ”¹ã€‚ç„¶è€Œï¼Œå‡å¦‚åœ¨ä½ çš„æ–‡æœ¬é‡Œæœ‰å¦‚ä¸‹ import è¯­å¥ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</p><figure class="highlight capnproto"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs capnproto"><span class="hljs-keyword">import</span> &#123; FUNC1 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;library1&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; FUNC2 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;library2&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; FUNC3 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;library3&quot;</span>;<br><span class="hljs-keyword">import</span> foo <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;bar&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; FUNC4 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;library4&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; FUNC5 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;library5&quot;</span>;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>99@a</code>ï¼Œä¼šåªåœ¨å‰ä¸‰è¡Œæ‰§è¡Œã€‚è€Œæœ€åä¸¤è¡Œä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºåœ¨æ‰§è¡Œç¬¬å››è¡Œï¼ˆåŒ…å«â€œfooâ€ï¼‰æ—¶<code>f&#123;</code>å‘½ä»¤ä¼šé‡åˆ°é”™è¯¯è€Œåœæ­¢ï¼Œå½“å®ä¸²è¡Œæ‰§è¡Œæ—¶å°±ä¼šå‘ç”Ÿè¿™æ ·çš„æƒ…å†µã€‚å½“ç„¶ï¼Œä½ ä»ç„¶å¯ä»¥ç§»åŠ¨åˆ°åŒ…å«ï¼ˆâ€œFUNC4â€ï¼‰çš„ä¸€è¡Œï¼Œå¹¶é‡æ–°è°ƒç”¨è¯¥å‘½ä»¤ã€‚ä½†æ˜¯å‡å¦‚ä½ å¸Œæœ›ä»…è°ƒç”¨ä¸€æ¬¡å‘½ä»¤å°±å®Œæˆæ‰€æœ‰æ“ä½œå‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥å¹¶è¡Œåœ°æ‰§è¡Œå®å‘½ä»¤ã€‚</p><p>å¦‚æœ¬ç« å‰é¢æ‰€è¯´ï¼Œå¯ä»¥ä½¿ç”¨ <code>:normal</code> å»æ‰§è¡Œå®å‘½ä»¤ï¼Œï¼ˆä¾‹å¦‚ï¼š <code>:3,5 normal @a</code> ä¼šåœ¨ 3-5è¡Œæ‰§è¡Œ a å¯„å­˜å™¨ä¸­çš„å®å‘½ä»¤ï¼‰ã€‚å¦‚æœæ‰§è¡Œ <code>:1,$ normal @a</code>ï¼Œä¼šåœ¨æ‰€æœ‰é™¤äº†åŒ…å«æœ‰ â€œfooâ€ çš„è¡Œæ‰§è¡Œï¼Œè€Œä¸”å®ƒä¸ä¼šå‡ºé”™ã€‚</p><p>å°½ç®¡æœ¬è´¨ä¸Šæ¥è¯´ï¼ŒVim å¹¶ä¸æ˜¯åœ¨å¹¶è¡Œåœ°æ‰§è¡Œå®å‘½ä»¤ï¼Œä½†è¡¨é¢ä¸Šçœ‹ï¼Œå®ƒæ˜¯å¹¶è¡Œè¿è¡Œçš„ã€‚ Vim ä¼šç‹¬ç«‹åœ°åœ¨ä»ç¬¬ä¸€è¡Œå¼€å§‹ï¼ˆ<code>1,$</code>ï¼‰æ¯ä¸€è¡Œæ‰§è¡Œ <code>@a</code> ã€‚ç”±äº Vim ç‹¬ç«‹åœ°åœ¨æ¯ä¸€è¡Œæ‰§è¡Œå‘½ä»¤ï¼Œæ¯ä¸€è¡Œéƒ½ä¸ä¼šçŸ¥é“æœ‰ä¸€è¡Œï¼ˆåŒ…å«â€œfooâ€ï¼‰ä¼šé‡åˆ°æ‰§è¡Œé”™è¯¯ã€‚</p><h2 id="èªæ˜åœ°å­¦ä¹ å®å‘½ä»¤"><a href="#èªæ˜åœ°å­¦ä¹ å®å‘½ä»¤" class="headerlink" title="èªæ˜åœ°å­¦ä¹ å®å‘½ä»¤"></a>èªæ˜åœ°å­¦ä¹ å®å‘½ä»¤</h2><p>ä½ åœ¨ç¼–è¾‘å™¨é‡Œåšçš„å¾ˆå¤šäº‹éƒ½æ˜¯é‡å¤çš„ã€‚ä¸ºäº†æ›´å¥½åœ°ç¼–è¾‘æ–‡ä»¶ï¼Œè¯·ä¹äºå‘ç°è¿™äº›é‡å¤æ€§çš„è¡Œä¸ºã€‚æ‰§è¡Œå®å‘½ä»¤æˆ–è€…ç‚¹å‘½ä»¤ï¼Œè€Œä¸æ˜¯åšç›¸åŒçš„åŠ¨ä½œä¸¤æ¬¡ã€‚å‡ ä¹æ‰€æœ‰ä½ åœ¨ Vim æ‰€ä½œçš„äº‹æƒ…éƒ½å¯ä»¥å˜ä¸ºå®å‘½ä»¤ã€‚</p><p>åˆšå¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘å‘ç°å®å‘½ä»¤æ—¶å¾ˆæ£˜æ‰‹çš„ï¼Œä½†æ˜¯è¯·ä¸è¦æ”¾å¼ƒã€‚æœ‰äº†è¶³å¤Ÿçš„ç»ƒä¹ ï¼Œä½ å¯ä»¥æ‰¾åˆ°è¿™ç§æ–‡æœ¬è‡ªåŠ¨ç¼–è¾‘çš„å¿«ä¹ã€‚</p><p>ä½¿ç”¨æŸç§åŠ©è®°ç¬¦å»å¸®åŠ©ä½ è®°ä½å®å‘½ä»¤æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªåˆ›å»ºå‡½æ•°ï¼ˆfunctionï¼‰çš„å®å‘½ä»¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ â€œfâ€ å¯„å­˜å™¨å»å½•åˆ¶å®ƒ(<code>qf</code>)ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå®å‘½ä»¤å»æ“ä½œæ•°å­—ï¼Œé‚£ä¹ˆä½¿ç”¨å¯„å­˜å™¨ â€œnâ€ å»è®°ä½å®ƒæ˜¯å¾ˆå¥½çš„(<code>qn</code>)ã€‚ç”¨ä½ æƒ³æ‰§è¡Œçš„æ“ä½œæ—¶æƒ³èµ·çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç»™ä½ çš„å®å‘½ä»¤å‘½åã€‚å¦å¤–ï¼Œæˆ‘å‘ç° â€œqâ€ æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®å‘½ä»¤é»˜è®¤å¯„å­˜å™¨ï¼Œå› ä¸ºæ‰§è¡Œ <code>qq</code> å»è°ƒç”¨å®å‘½ä»¤æ˜¯å¾ˆå¿«é€Ÿè€Œç®€å•çš„ã€‚æœ€åï¼Œæˆ‘å–œæ¬¢æŒ‰ç…§å­—æ¯è¡¨çš„é¡ºåºå»æ·»åŠ æˆ‘çš„å®å‘½ä»¤ï¼Œä¾‹å¦‚ä» <code>qa</code> åˆ° <code>qb</code> å†åˆ° <code>qc</code>ã€‚</p><p>å»å¯»æ‰¾æœ€é€‚åˆä½ çš„æ–¹æ³•å§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-æ’¤é”€</title>
    <link href="/2022/04/05/Vim/ch10_undo/"/>
    <url>/2022/04/05/Vim/ch10_undo/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬10ç« -æ’¤é”€"><a href="#ç¬¬10ç« -æ’¤é”€" class="headerlink" title="ç¬¬10ç«  æ’¤é”€"></a>ç¬¬10ç«  æ’¤é”€</h1><p>æ‰€æœ‰äººéƒ½ä¼šçŠ¯å„ç§å„æ ·çš„è¾“å…¥é”™è¯¯ã€‚å› æ­¤å¯¹äºä»»ä½•ä¸€ä¸ªç°ä»£çš„è½¯ä»¶æ¥è¯´ï¼Œæ’¤é”€éƒ½æ˜¯ä¸€ä¸ªå¾ˆåŸºæœ¬çš„åŠŸèƒ½ã€‚ Vim çš„æ’¤é”€ç³»ç»Ÿä¸ä»…æ”¯æŒæ’¤é”€å’Œå–æ¶ˆæ’¤é”€ä»»ä½•ä¿®æ”¹ï¼Œè€Œä¸”æ”¯æŒå­˜å–ä¸åŒçš„æ–‡æœ¬å½¢æ€ï¼Œè®©ä½ èƒ½æ§åˆ¶ä½ è¾“å…¥çš„æ‰€æœ‰æ–‡æœ¬ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†ä¼šå­¦ä¼šå¦‚ä½•æ‰§è¡Œæ’¤é”€å’Œ å–æ¶ˆæ’¤é”€æ–‡æœ¬ï¼Œæµè§ˆæ’¤é”€åˆ†æ”¯ï¼Œåå¤æ’¤é”€, ä»¥åŠæµè§ˆæ”¹åŠ¨æ—¶é—´çº¿ã€‚ </p><h2 id="æ’¤é”€-undo-ï¼Œé‡åšå’Œè¡Œæ’¤é”€-UNDO"><a href="#æ’¤é”€-undo-ï¼Œé‡åšå’Œè¡Œæ’¤é”€-UNDO" class="headerlink" title="æ’¤é”€(undo)ï¼Œé‡åšå’Œè¡Œæ’¤é”€(UNDO)"></a>æ’¤é”€(undo)ï¼Œé‡åšå’Œè¡Œæ’¤é”€(UNDO)</h2><p>å¯¹äºä¸€ä¸ªåŸºæœ¬çš„ undo æ“ä½œï¼Œä½ å¯ä»¥æ‰§è¡Œ <code>u</code> æˆ–è€… <code>:undo</code>ã€‚</p><p>å‡è®¾ä½ æœ‰å¦‚ä¸‹æ–‡æœ¬(æ³¨æ„â€oneâ€ä¸‹é¢æœ‰ä¸€ä¸ªç©ºè¡Œ)ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">one</span><br><br></code></pre></td></tr></table></figure><p>ç„¶åæ·»åŠ å¦ä¸€ä¸ªæ–‡æœ¬ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä½ æ‰§è¡Œ <code>u</code>ï¼ŒVim ä¼šåˆ é™¤ â€œtwoâ€ã€‚</p><p>Vim æ˜¯å¦‚ä½•çŸ¥é“åº”è¯¥æ¢å¤å¤šå°‘ä¿®æ”¹å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼ŒVimæ¯æ¬¡ä»…æ¢å¤ä¸€æ¬¡ä¿®æ”¹ï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼äºç‚¹å‘½ä»¤çš„æ“ä½œï¼ˆå’Œ ç‚¹å‘½ä»¤ä¸åŒä¹‹å¤„åœ¨äºï¼Œå‘½ä»¤è¡Œå‘½ä»¤ä¹Ÿä¼šè¢«ç®—ä½œä¸€æ¬¡ä¿®æ”¹ï¼‰ã€‚</p><p>è¦å–æ¶ˆä¸Šä¸€æ¬¡çš„æ’¤é”€ï¼Œå¯ä»¥æ‰§è¡Œ <code>Ctrl-r</code> æˆ–è€… <code>:redo</code>ã€‚ä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“ä½ æ‰§è¡Œæ’¤é”€æ¥åˆ é™¤ â€œtwoâ€ ä»¥åï¼Œä½ å¯ä»¥æ‰§è¡Œ <code>Ctrl-r</code> æ¥æ¢å¤è¢«åˆ é™¤æ‰çš„æ–‡æœ¬ã€‚</p><p>Vim ä¹Ÿæœ‰å¦ä¸€ä¸ªå‘½ä»¤ <code>U</code> å¯ä»¥å®ç° è¡Œæ’¤é”€ (UNDO) çš„åŠŸèƒ½ï¼Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ä¼šæ’¤é”€æ‰€æœ‰æœ€æ–°çš„ä¿®æ”¹ã€‚</p><p>é‚£ä¹ˆï¼Œ<code>U</code> å’Œ <code>u</code> çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆï¼Œ<code>U</code> ä¼šåˆ é™¤ <em>æœ€è¿‘ä¿®æ”¹çš„è¡Œä¸­æ‰€æœ‰çš„</em> çš„ä¿®æ”¹ï¼Œè€Œ <code>u</code> ä¸€æ¬¡ä»…åˆ é™¤ä¸€æ¬¡ä¿®æ”¹ã€‚ å…¶æ¬¡ï¼Œæ‰§è¡Œ<code>u</code> ä¸ä¼šè¢«ç®—ä½œä¸€æ¬¡ä¿®æ”¹æ“ä½œï¼Œè€Œæ‰§è¡Œ <code>U</code> åˆ™ä¼šè¢«ç®—ä½œä¸€æ¬¡ä¿®æ”¹ã€‚</p><p>è®©æˆ‘ä»¬ä¼šçš„ä¹‹å‰çš„ä¾‹å­ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ç¬¬äºŒè¡Œçš„å†…å®¹ä¸º â€œthreeâ€ (<code>ciwthree&lt;esc&gt;</code>):</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">three</span><br></code></pre></td></tr></table></figure><p>å†æ¬¡ä¿®æ”¹ç¬¬äºŒè¡Œçš„ä¾‹å­ä¸º â€œfourâ€ (<code>ciwfour&lt;esc&gt;</code>):</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">four</span><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå¦‚æœä½ æŒ‰ä¸‹ <code>u</code>ï¼Œä½ ä¼šçœ‹åˆ° â€œthreeâ€ã€‚å¦‚æœä½ å†æ¬¡æŒ‰ä¸‹ <code>u</code>ï¼Œä½ ä¼šçœ‹åˆ° â€œtwoâ€ã€‚ç„¶è€Œï¼Œåœ¨ç¬¬äºŒè¡Œä»ä¸º â€œfourâ€ çš„æ—¶å€™ï¼Œå¦‚æœä½ æŒ‰ä¸‹ <code>U</code>ï¼Œä½ ä¼šçœ‹åˆ° </p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">one</span><br><br></code></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>U</code> ä¼šè·³è¿‡ä¸­é—´æ‰€æœ‰ä¿®æ”¹ï¼Œç›´æ¥æ¢å¤åˆ°æ–‡ä»¶æœ€åˆçš„çŠ¶æ€ï¼ˆç¬¬äºŒè¡Œä¸ºç©ºï¼‰ã€‚å¦å¤–ï¼Œç”±äº UNO å®é™…ä¸Šæ˜¯æ‰§è¡Œäº†ä¸€ä¸ªæ–°çš„ä¿®æ”¹ï¼Œå› æ­¤ä½ å¯ä»¥ UNDO æ‰§è¡Œè¿‡çš„ UNDOã€‚ æ‰§è¡Œ <code>U</code> å å†æ¬¡æ‰§è¡Œ <code>U</code> ä¼šæ’¤é”€ è‡ªå·±ã€‚å‡å¦‚ä½ è¿ç»­æ‰§è¡Œ <code>U</code>ï¼Œé‚£ä¹ˆä½ å°†çœ‹åˆ°ç¬¬äºŒè¡Œçš„æ–‡æœ¬ä¸åœåœ°å‡ºç°å’Œæ¶ˆå¤±ã€‚</p><p>å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘å‡ ä¹ä¸ä¼šä½¿ç”¨ <code>U</code>ï¼Œå› ä¸ºå¾ˆéš¾è®°ä½æ–‡æœ¬æœ€åˆçš„æ ·å­ã€‚ï¼ˆæˆ‘å‡ ä¹ä¸ä½¿ç”¨å®ƒï¼‰</p><p>Vim å¯ä»¥é€šè¿‡å˜é‡ <code>undolevels</code> æ¥é€‰æ‹©æœ€å¤šå¯æ‰§è¡Œ undo çš„æ¬¡æ•°ã€‚ä½ å¯ä»¥é€šè¿‡ <code>:echo &amp;undolevels</code> æ¥æŸ¥çœ‹å½“å‰çš„é…ç½®ã€‚æˆ‘ä¸€èˆ¬è®¾ç½®ä¸º 1000ã€‚å¦‚æœä½ ä¹Ÿæƒ³è®¾ç½®ä¸º 1000 çš„è¯ï¼Œä½ å¯ä»¥æ‰§è¡Œ <code>:set undolevels=1000</code>ã€‚ä¸ç”¨æ‹…å¿ƒï¼Œä½ å¯ä»¥è®¾ç½®å®ƒä¸ºä»»ä½•ä¸€ä¸ªä½ æƒ³è®¾ç½®çš„å€¼ã€‚</p><h2 id="æ–­ç‚¹æ’å…¥æ“ä½œ"><a href="#æ–­ç‚¹æ’å…¥æ“ä½œ" class="headerlink" title="æ–­ç‚¹æ’å…¥æ“ä½œ"></a>æ–­ç‚¹æ’å…¥æ“ä½œ</h2><p>åœ¨ä¸Šæ–‡ä¸­æˆ‘æåˆ°ï¼Œ<code>u</code> æ¯æ¬¡æ¢å¤ä¸€ä¸ªä¿®æ”¹ï¼Œç±»ä¼¼äºç‚¹å‘½ä»¤ã€‚åœ¨æ¯æ¬¡è¿›å…¥ æ’å…¥æ¨¡å¼å’Œé€€å‡ºæ’å…¥æ¨¡å¼ä¹‹é—´çš„ä»»ä½•ä¿®æ”¹éƒ½è¢«å®šä¹‰ä¸ºä¸€æ¬¡ä¿®æ”¹ã€‚</p><p>å¦‚æœä½ æ‰§è¡Œ <code>ione two three&lt;esc&gt;</code> ä¹‹åï¼ŒæŒ‰ä¸‹ <code>u</code>ï¼ŒVim ä¼šåŒæ—¶åˆ é™¤ â€œone two threeâ€ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ç¬”ä¿®æ”¹ã€‚å¦‚æœä½ æ¯æ¬¡åªè¾“å…¥è¾ƒçŸ­çš„æ–‡æœ¬ï¼Œé‚£è¿™æ˜¯å¯æ¥å—çš„ï¼›å¯å‡è®¾ä½ åœ¨ä¸€æ¬¡æ’å…¥æ¨¡å¼ä¸­è¾“å…¥äº†å¤§é‡çš„æ–‡æœ¬ï¼Œè€Œåé€€å‡ºäº†æ’å…¥æ¨¡å¼ï¼Œå¯å¾ˆå¿«ä½ æ„è¯†åˆ°è¿™ä¸­é—´æœ‰éƒ¨åˆ†é”™è¯¯ã€‚æ­¤æ—¶ï¼Œå¦‚æœä½ æŒ‰ä¸‹ <code>u</code>ï¼Œä½ ä¼šä¸¢å¤±ä¸Šä¸€æ¬¡è¾“å…¥çš„æ‰€æœ‰å†…å®¹ã€‚ å› æ­¤ï¼Œå‡è®¾ä½ æŒ‰ä¸‹ <code>u</code> åªåˆ é™¤ä½ ä¸Šä¸€æ¬¡è¾“å…¥çš„ä¸€éƒ¨åˆ†æ–‡æœ¬å²‚ä¸æ˜¯ä¼šæ›´å¥½ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œä½ å¯ä»¥æ‹†åˆ†å®ƒã€‚å½“ä½ åœ¨æ’å…¥æ¨¡å¼æ—¶ï¼ŒæŒ‰ä¸‹ <code>Ctrl-G u</code> ä¼šç”Ÿæˆä¸€ä¸ªæ–­ç‚¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ‰§è¡Œ <code>ione &lt;Ctrl-G u&gt;two &lt;Ctrl-G u&gt;three&lt;esc&gt;</code>ï¼Œä¹‹åä½ æŒ‰ä¸‹<code>u</code>ï¼Œä½ ä»…ä¼šå¤±å»æ–‡æœ¬ â€œthreeâ€ï¼Œå†æ¬¡æ‰§è¡Œ <code>u</code>ï¼Œä¼šåˆ é™¤ â€œtwoâ€ã€‚å½“ä½ æƒ³è¦è¾“å…¥ä¸€é•¿æ®µå†…å®¹æ—¶ï¼Œåº”è¯¥æœ‰é€‰æ‹©æ€§åœ°æ‰§è¡Œæ–­ç‚¹æ’å…¥æ“ä½œã€‚åœ¨æ¯ä¸€å¥è¯çš„æœ«å°¾ï¼Œä¸¤ä¸ªæ®µè½çš„ä¸­é—´ï¼Œæˆ–è€…æ¯ä¸€è¡Œä»£ç ç»“æŸæ—¶æ’å…¥æ–­ç‚¹æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œè¿™å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿä»é”™è¯¯ä¸­æ¢å¤å‡ºæ¥ã€‚</p><p>åœ¨æ’å…¥æ¨¡å¼ä¸­ï¼Œæ‰§è¡Œåˆ é™¤æ“ä½œæ—¶æ’å…¥æ–­ç‚¹ä¹Ÿéå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚é€šè¿‡ <code>Ctrl-W</code> åˆ é™¤å…‰æ ‡å‰çš„å•è¯æ—¶ï¼Œä»¥åŠ <code>Ctrl-U</code>åˆ é™¤å…‰æ ‡å‰çš„æ‰€æœ‰æ–‡æœ¬æ—¶ã€‚ä¸€ä¸ªæœ‹å‹å»ºè®®æˆ‘ä½¿ç”¨å¦‚ä¸‹çš„æ˜ å°„ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">inoremap</span> <span class="hljs-symbol">&lt;c-u&gt;</span> <span class="hljs-symbol">&lt;c-g&gt;</span><span class="hljs-keyword">u</span><span class="hljs-symbol">&lt;c-u&gt;</span><br><span class="hljs-keyword">inoremap</span> <span class="hljs-symbol">&lt;c-w&gt;</span> <span class="hljs-symbol">&lt;c-g&gt;</span><span class="hljs-keyword">u</span><span class="hljs-symbol">&lt;c-w&gt;</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°å‘½ä»¤ï¼Œä½ å¯ä»¥å¾ˆè½»æ¾åœ°æ¢å¤è¢«åˆ é™¤çš„æ–‡æœ¬ã€‚</p><h2 id="æ’¤é”€æ ‘"><a href="#æ’¤é”€æ ‘" class="headerlink" title="æ’¤é”€æ ‘"></a>æ’¤é”€æ ‘</h2><p>Vim å°†æ¯ä¸€æ¬¡ä¿®æ”¹å­˜å‚¨åœ¨ä¸€ä¸ªæ’¤é”€æ ‘ä¸­ã€‚ä½ æ‰“å¼€ä¸€ä¸ªç©ºç™½æ–‡ä»¶ï¼Œç„¶åæ·»åŠ ä¸€æ®µæ–°æ–‡æœ¬:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">one</span><br><br></code></pre></td></tr></table></figure><p>å†æ’å…¥ä¸€æ®µæ–°æ–‡æœ¬ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br></code></pre></td></tr></table></figure><p>undoä¸€æ¬¡:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">one</span><br><br></code></pre></td></tr></table></figure><p>æ’å…¥ä¸€æ®µä¸åŒçš„è¯ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">three</span><br></code></pre></td></tr></table></figure><p>å†æ¬¡ undo</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">one</span><br><br></code></pre></td></tr></table></figure><p>å†æ¬¡æ’å…¥å¦ä¸€æ®µè¯ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">four</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨å¦‚æœä½ æ‰§è¡Œ undo,æ‚¨å°†ä¸¢å¤±åˆšåˆšæ·»åŠ çš„æ–‡æœ¬ â€œfourâ€ :</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">one</span><br><br></code></pre></td></tr></table></figure><p>å¦‚æœä½ å†æ¬¡æ‰§è¡Œ undo æ“ä½œï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure><p>æ–‡æœ¬ â€œoneâ€ ä¹Ÿä¼šä¸¢å¤±ã€‚å¯¹äºå¤§éƒ¨åˆ†ç¼–è¾‘å™¨æ¥è¯´ï¼Œæ‰¾å›æ–‡æœ¬ â€œtwoâ€ å’Œ â€œthreeâ€ éƒ½æ˜¯ä¸å¯èƒ½çš„äº‹æƒ…ï¼Œä½†æ˜¯å¯¹äº Vim æ¥è¯´å´ä¸æ˜¯è¿™æ ·ã€‚æ‰§è¡Œ <code>g+</code>ï¼Œä½ ä¼šå¾—åˆ°ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">one</span><br><br></code></pre></td></tr></table></figure><p>å†æ¬¡æ‰§è¡Œ <code>g+</code> ï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸€ä½è€æœ‹å‹:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬ç»§ç»­æ‰§è¡Œ <code>g+</code>:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">three</span><br></code></pre></td></tr></table></figure><p>å†ä¸€æ¬¡æ‰§è¡Œ <code>g+</code> :</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">four</span><br></code></pre></td></tr></table></figure><p>åœ¨ Vim ä¸­ï¼Œä½ æ¯ä¸€æ¬¡æ‰§è¡Œ <code>u</code> å»åšä¸€æ¬¡ä¿®æ”¹æ—¶ï¼ŒViméƒ½ä¼šé€šè¿‡åˆ›å»ºä¸€ä¸ªâ€æ’¤é”€åˆ†æ”¯â€æ¥ä¿å­˜ä¹‹å‰çš„æ–‡æœ¬å†…å®¹ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä½ è¾“å…¥â€twoâ€å, æ‰§è¡Œ <code>u</code>ï¼Œç„¶åè¾“å…¥â€threeâ€ï¼Œä½ å°±åˆ›å»ºäº†ä¸€ä¸ªå¶å­åˆ†æ”¯,ä¿å­˜äº†å«æœ‰â€twoâ€çš„æ–‡æœ¬çŠ¶æ€ã€‚æ­¤æ—¶ï¼Œæ’¤é”€æ ‘å·²ç»åŒ…å«äº†è‡³å°‘ä¸¤ä¸ªå¶å­èŠ‚ç‚¹ï¼Œä¸»èŠ‚ç‚¹åŒ…å«æ–‡æœ¬â€threeâ€ï¼ˆæœ€æ–°ï¼‰ï¼Œè€Œå¦ä¸€undoåˆ†æ”¯èŠ‚ç‚¹åŒ…å«æ–‡æœ¬â€œtwoâ€ã€‚å‡å¦‚ä½ æ‰§è¡Œäº†å¦ä¸€æ¬¡æ’¤é”€æ“ä½œå¹¶ä¸”è¾“å…¥äº†â€fourâ€ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¼šç”Ÿæˆä¸‰ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªä¸»èŠ‚ç‚¹åŒ…å«æ–‡æœ¬â€fourâ€, ä»¥åŠå¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹åˆ†åˆ«å­˜å‚¨äº†â€threeâ€å’Œâ€twoâ€ã€‚</p><p>ä¸ºäº†åœ¨å‡ ä¸ªä¸åŒçš„èŠ‚ç‚¹çŠ¶æ€é—´è¿›è¡Œåˆ‡æ¢ï¼Œä½ å¯ä»¥æ‰§è¡Œ <code>g+</code> å»è·å–ä¸€ä¸ªè¾ƒæ–°çš„çŠ¶æ€ï¼Œä»¥åŠæ‰§è¡Œ <code>g-</code> å»è·å–ä¸€ä¸ªæ•™æ—§çš„çŠ¶æ€ã€‚ <code>u</code>ï¼Œ <code>Ctrl-R</code>ï¼Œ <code>g+</code>ï¼Œ å’Œ <code>g-</code> ä¹‹é—´çš„åŒºåˆ«æ˜¯ï¼Œ<code>u</code> and <code>Ctrl-R</code> åªå¯ä»¥åœ¨ <em>main</em> èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œè€Œ<code>g+</code> å’Œ <code>g-</code> å¯ä»¥åœ¨ <em>æ‰€æœ‰</em> èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚</p><p>Undo æ ‘å¹¶ä¸å¯ä»¥å¾ˆè½»æ¾åœ°å¯è§†åŒ–ã€‚æˆ‘å‘ç°ä¸€ä¸ªæ’ä»¶ <a href="https://github.com/simnalamburt/vim-mundo">vim-mundo</a> å¯¹äºç†è§£ undo æ ‘å¾ˆæœ‰å¸®åŠ©ã€‚èŠ±ç‚¹æ—¶é—´å»ä¸å®ƒç©è€å§ã€‚ </p><h2 id="ä¿å­˜æ’¤é”€è®°å½•"><a href="#ä¿å­˜æ’¤é”€è®°å½•" class="headerlink" title="ä¿å­˜æ’¤é”€è®°å½•"></a>ä¿å­˜æ’¤é”€è®°å½•</h2><p>å½“ä½ é€šè¿‡ Vim æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”ç«‹å³æŒ‰ä¸‹ <code>u</code>ï¼ŒVim å¾ˆå¯èƒ½ä¼šæ˜¾ç¤º â€œ<em>Already at oldest change</em>â€ çš„è­¦å‘Šã€‚ </p><p>è¦æƒ³ä»æœ€è¿‘çš„ä¸€æ¬¡ç¼–è¾‘å·¥ä½œä¸­ï¼ˆåœ¨vimå…³é—­æ–‡ä»¶å†æ‰“å¼€ï¼Œç®—åšä¸€æ¬¡æ–°çš„ç¼–è¾‘å·¥ä½œï¼‰ï¼Œåœ¨æ’¤é”€å†å²ä¸­å›æ»šï¼Œå¯ä»¥é€šè¿‡ <code>:wundo</code>å‘½ä»¤ä½¿Vim ä¿å­˜ä¸€ä»½ä½ çš„ undo å†å²è®°å½•ã€‚</p><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ <code>mynumbers.txt</code>. è¾“å…¥:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">one</span><br></code></pre></td></tr></table></figure><p>æ’å…¥å¦ä¸€è¡Œæ–‡ä»¶ (ç¡®ä¿ä½ è¦ä¹ˆé€€å‡ºå¹¶é‡æ–°è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œè¦ä¹ˆåˆ›å»ºäº†æ–­ç‚¹):</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br></code></pre></td></tr></table></figure><p>æ’å…¥æ–°çš„ä¸€è¡Œ:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br><span class="hljs-literal">three</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œåˆ›å»ºä½ çš„æ’¤é”€è®°å½•æ–‡ä»¶ã€‚ è¯­æ³•ä¸º <code>:wundo myundofile</code>ã€‚ å¦‚æœä½ éœ€è¦è¦†ç›–ä¸€ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶ï¼Œåœ¨ <code>wundo</code> ä¹‹åæ·»åŠ  <code>!</code>.</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:wundo!</span> mynumbers.undo<br></code></pre></td></tr></table></figure><p>é€€å‡º Vimã€‚</p><p>æ­¤æ—¶ï¼Œåœ¨ç›®å½•ä¸‹ï¼Œåº”è¯¥æœ‰<code>mynumbers.txt</code> å’Œ <code>mynumbers.undo</code> ä¸¤ä¸ªæ–‡ä»¶ã€‚å†æ¬¡æ‰“å¼€ <code>mynumbers.txt</code> æ–‡ä»¶å¹¶ä¸”æŒ‰ä¸‹ <code>u</code>ï¼Œè¿™æ˜¯æ²¡æœ‰å“åº”çš„ã€‚å› ä¸ºè‡ªæ‰“å¼€æ–‡ä»¶åï¼Œä½ æ²¡æœ‰æ‰§è¡Œä»»ä½•çš„ä¿®æ”¹ã€‚ç°åœ¨ï¼Œé€šè¿‡æ‰§è¡Œ <code>:rundo</code> æ¥åŠ è½½ undo å†å²ã€‚</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">rundo</span> mynumbers.<span class="hljs-keyword">undo</span><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå¦‚æœä½ æŒ‰ä¸‹ <code>u</code>ï¼ŒVim ä¼šåˆ é™¤ â€œthreeâ€ã€‚å†æ¬¡æŒ‰ä¸‹ <code>u</code>å¯ä»¥åˆ é™¤ â€œtwoâ€ã€‚è¿™å°±å¥½åƒä½ ä»æ¥æ²¡æœ‰å…³é—­è¿‡ Vim ä¸€æ ·ã€‚</p><p>å¦‚æœä½ æƒ³è¦è‡ªåŠ¨åŠ è½½ undo å†å²æ–‡ä»¶ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ä½ çš„ <code>.vimrc</code> æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">set</span> <span class="hljs-attribute">undodir</span>=~/.vim/undo_dir<br><span class="hljs-built_in">set</span> undofile<br></code></pre></td></tr></table></figure><p>æˆ‘è®¤ä¸ºå°†æ‰€æœ‰çš„ undo æ–‡ä»¶é›†ä¸­ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­æœ€å¥½ï¼Œä¾‹å¦‚åœ¨ <code>~/.vim</code> ç›®å½•ä¸‹ã€‚ <code>undo_dir</code> æ˜¯éšæ„çš„ã€‚ <code>set undofile</code> å‘Šè¯‰ Vim æ‰“å¼€ <code>undofile</code> è¿™ä¸ªç‰¹æ€§ï¼Œå› ä¸ºè¯¥ç‰¹æ€§é»˜è®¤æ˜¯å…³é—­çš„ã€‚ç°åœ¨ï¼Œæ— è®ºä½ ä½•æ—¶ä¿å­˜ï¼ŒVim éƒ½ä¼šè‡ªåŠ¨åˆ›å»ºå’Œä¿å­˜æ’¤é”€çš„å†å²è®°å½•ï¼ˆåœ¨ä½¿ç”¨<code>undo_dir</code>ç›®å½•å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»åˆ›å»ºäº†å®ƒï¼‰ã€‚</p><h2 id="æ—¶é—´æ—…è¡Œ"><a href="#æ—¶é—´æ—…è¡Œ" class="headerlink" title="æ—¶é—´æ—…è¡Œ"></a>æ—¶é—´æ—…è¡Œ</h2><p>æ˜¯è°è¯´æ—¶é—´æ—…è¡Œä¸å­˜åœ¨ã€‚ Vim å¯ä»¥é€šè¿‡ <code>:earlier</code> å‘½ä»¤å°†æ–‡æœ¬æ¢å¤ä¸ºä¹‹å‰çš„çŠ¶æ€ã€‚</p><p>å‡å¦‚æœ‰å¦‚ä¸‹æ–‡æœ¬:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">one</span><br><br></code></pre></td></tr></table></figure><p>ä¹‹åä½ è¾“å…¥äº†å¦ä¸€è¡Œ:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä½ è¾“å…¥ â€œtwoâ€ çš„æ—¶é—´å°‘äº10ç§’ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æ¢å¤åˆ° â€œtwoâ€ è¿˜æ²¡è¢«è¾“å…¥å‰çš„çŠ¶æ€:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:earlier</span> <span class="hljs-number">10</span>s<br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨ <code>:undolist</code> å»æŸ¥çœ‹ä¹‹å‰æ‰€åšçš„ä¿®æ”¹ã€‚ <code>:earlier</code> å¯ä»¥åŠ ä¸Šåˆ†é’Ÿ (<code>m</code>), å°æ—¶ (<code>h</code>), and å¤© (<code>d</code>) ä½œä¸ºå‚æ•°ã€‚ </p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:earlier</span> <span class="hljs-number">10</span>s    æ¢å¤åˆ°<span class="hljs-number">10</span>ç§’å‰çš„çŠ¶æ€<br><span class="hljs-symbol">:earlier</span> <span class="hljs-number">10</span>m    æ¢å¤åˆ°<span class="hljs-number">10</span>åˆ†é’Ÿå‰çš„çŠ¶æ€<br><span class="hljs-symbol">:earlier</span> <span class="hljs-number">10</span>h    æ¢å¤åˆ°<span class="hljs-number">10</span>å°æ—¶å‰çš„çŠ¶æ€<br><span class="hljs-symbol">:earlier</span> <span class="hljs-number">10</span>d    æ¢å¤åˆ°<span class="hljs-number">10</span>å¤©å‰çš„çŠ¶æ€<br><br></code></pre></td></tr></table></figure><p>å¦å¤–ï¼Œå®ƒåŒæ ·æ¥å—ä¸€ä¸ª<code>è®¡æ•°</code>ä½œä¸ºå‚æ•°ï¼Œå‘Šè¯‰vimæ¢å¤åˆ°è€çŠ¶æ€çš„æ¬¡æ•°ã€‚æ¯”å¦‚ï¼Œå¦‚æœè¿è¡Œ<code>:earlier 2</code>,Vimå°†æ¢å¤åˆ°2æ¬¡ä¿®æ”¹å‰çš„çŠ¶æ€ã€‚åŠŸèƒ½ç±»ä¼¼äºæ‰§è¡Œ<code>g-</code>ä¸¤æ¬¡ã€‚åŒæ ·ï¼Œä½ å¯ä»¥è¿è¡Œ<code>:earlier 10f</code>å‘½ä»¤å‘Šè¯‰vimæ¢å¤åˆ°10æ¬¡ä¿å­˜å‰çš„çŠ¶æ€ã€‚</p><p>è¿™äº›å‚æ•°åŒæ ·ä½œç”¨äº<code>:earlier</code>å‘½ä»¤çš„å¯¹åº”ç‰ˆæœ¬:<code>:later</code>ã€‚</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:later</span> <span class="hljs-number">10</span>s    æ¢å¤åˆ°<span class="hljs-number">10</span>ç§’åçš„çŠ¶æ€<br><span class="hljs-symbol">:later</span> <span class="hljs-number">10</span>m    æ¢å¤åˆ°<span class="hljs-number">10</span>åˆ†é’Ÿåçš„çŠ¶<br><span class="hljs-symbol">:later</span> <span class="hljs-number">10</span>h    æ¢å¤åˆ°<span class="hljs-number">10</span>å°æ—¶åçš„çŠ¶<br><span class="hljs-symbol">:later</span> <span class="hljs-number">10</span>d    æ¢å¤åˆ°<span class="hljs-number">10</span>å¤©åçš„çŠ¶æ€<br><span class="hljs-symbol">:later</span> <span class="hljs-number">10</span>     æ¢å¤åˆ°æ–°çŠ¶æ€<span class="hljs-number">10</span>æ¬¡<br><span class="hljs-symbol">:later</span> <span class="hljs-number">10</span>f    æ¢å¤åˆ°<span class="hljs-number">10</span>æ¬¡ä¿å­˜åçš„çŠ¶æ€<br></code></pre></td></tr></table></figure><h2 id="èªæ˜åœ°å­¦ä¹ æ’¤é”€æ“ä½œ"><a href="#èªæ˜åœ°å­¦ä¹ æ’¤é”€æ“ä½œ" class="headerlink" title="èªæ˜åœ°å­¦ä¹ æ’¤é”€æ“ä½œ"></a>èªæ˜åœ°å­¦ä¹ æ’¤é”€æ“ä½œ</h2><p><code>u</code> å’Œ <code>Ctrl-R</code> æ˜¯ä¸¤ä¸ªä¸å¯ç¼ºå°‘çš„ Vim å‚æ•°ã€‚è¯·å…ˆå­¦ä¼šå®ƒä»¬ã€‚åœ¨æˆ‘çš„å·¥ä½œæµä¸­ï¼Œæˆ‘å¹¶ä¸ä½¿ç”¨ UNDOï¼Œç„¶è€Œæˆ‘è®¤ä¸ºæ‰¿è®¤å®ƒå­˜åœ¨æ˜¯å¾ˆå¥½çš„ã€‚ä¸‹ä¸€æ­¥ï¼Œå­¦ä¼šå¦‚ä½•ä½¿ç”¨<code>:earlier</code> å’Œ <code>:later</code>ï¼Œä»¥åŠæ—¶é—´å‚æ•°ã€‚åœ¨è¿™ä¹‹åï¼Œè¯·èŠ±äº›æ—¶é—´ç†è§£ undo æ ‘ã€‚ æ’ä»¶ <a href="https://github.com/simnalamburt/vim-mundo">vim-mundo</a> å¯¹æˆ‘çš„å¸®åŠ©å¾ˆå¤§ã€‚å•ç‹¬è¾“å…¥æœ¬ç« ä¸­å±•ç¤ºçš„æ–‡æœ¬ï¼Œå¹¶ä¸”æŸ¥çœ‹æ’¤é”€æ ‘çš„æ¯ä¸€æ¬¡æ”¹å˜ã€‚ä¸€æ—¦ä½ æŒæ¡å®ƒï¼Œä½ çœ‹å¾…æ’¤é”€ç³»ç»Ÿçš„çœ¼å…‰ä¸€å®šä¸åŒã€‚</p><p>åœ¨æœ¬ç« ä¹‹å‰ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•åœ¨é¡¹ç›®å†…æŸ¥æ‰¾ä»»ä½•æ–‡æœ¬ï¼Œé…åˆæ’¤é”€ï¼Œä½ å¯ä»¥åœ¨æ—¶é—´ç»´åº¦ä¸ŠæŸ¥æ‰¾ä»»ä½•ä¸€ä¸ªæ–‡æœ¬ã€‚ä½ ç°åœ¨å¯ä»¥é€šè¿‡ä½ç½®å’Œå†™å…¥æ—¶é—´æ‰¾åˆ°ä»»ä½•ä¸€ä¸ªä½ æƒ³æ‰¾çš„æ–‡æœ¬ã€‚ä½ å·²ç»å¯¹ Vim æ— æ‰€ä¸èƒ½äº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-å¯è§†æ¨¡å¼</title>
    <link href="/2022/04/05/Vim/ch11_visual_mode/"/>
    <url>/2022/04/05/Vim/ch11_visual_mode/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬11ç« -å¯è§†æ¨¡å¼"><a href="#ç¬¬11ç« -å¯è§†æ¨¡å¼" class="headerlink" title="ç¬¬11ç«  å¯è§†æ¨¡å¼"></a>ç¬¬11ç«  å¯è§†æ¨¡å¼</h1><p>é«˜äº®æ˜¾ç¤ºæ–‡æœ¬å—å¹¶å¯¹å…¶è¿›è¡Œæ›´æ”¹ï¼Œæ˜¯å¾ˆå¤šæ–‡æœ¬ç¼–è¾‘å™¨ä¸­çš„å¸¸è§åŠŸèƒ½ã€‚ Vimä¹Ÿå¯ä»¥ä½¿ç”¨å¯è§†æ¨¡å¼å®ç°è¿™ä¸€åŠŸèƒ½ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨å¯è§†æ¨¡å¼æ¥æœ‰æ•ˆåœ°å¤„ç†æ–‡æœ¬å—ã€‚</p><h2 id="ä¸‰ç§å¯è§†æ¨¡å¼"><a href="#ä¸‰ç§å¯è§†æ¨¡å¼" class="headerlink" title="ä¸‰ç§å¯è§†æ¨¡å¼"></a>ä¸‰ç§å¯è§†æ¨¡å¼</h2><p>Vimæœ‰ä¸‰ç§å¯è§†æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">v</span>         é€å­—ç¬¦å¯è§†æ¨¡å¼<br>V         é€è¡Œå¯è§†æ¨¡å¼<br>Ctrl-v    é€å—å¯è§†æ¨¡å¼<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æœ‰ä¸‹åˆ—æ–‡å­—ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br><span class="hljs-literal">three</span><br></code></pre></td></tr></table></figure><p>é€å­—ç¬¦å¯è§†æ¨¡å¼ç”¨äºé€‰æ‹©å•ä¸ªå­—ç¬¦ã€‚åœ¨ç¬¬ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ŠæŒ‰<code>v</code>ã€‚ç„¶åä½¿ç”¨<code>j</code>è·³è½¬è‡³ä¸‹ä¸€è¡Œã€‚å®ƒé«˜äº®æ˜¾ç¤ºä»â€oneâ€åˆ°å…‰æ ‡ä½ç½®çš„æ‰€æœ‰æ–‡æœ¬ã€‚ç°åœ¨ï¼Œå¦‚æœæ‚¨æŒ‰<code>gU</code>ï¼ŒVimå°†é«˜äº®æ˜¾ç¤ºçš„å­—ç¬¦è½¬ä¸ºå¤§å†™ã€‚</p><p>é€è¡Œå¯è§†æ¨¡å¼é€‚ç”¨äºæ•´è¡Œã€‚æŒ‰<code>V</code>å¹¶è§‚çœ‹Vimé€‰æ‹©å…‰æ ‡çš„æ‰€åœ¨è¡Œã€‚å°±åƒé€å­—ç¬¦å¯è§†æ¨¡å¼ä¸€æ ·ï¼Œå¦‚æœæ‚¨è¿è¡Œ<code>gU</code>ï¼ŒVimå°†é«˜äº®æ˜¾ç¤ºçš„å­—ç¬¦è½¬ä¸ºå¤§å†™ã€‚</p><p>é€å—å¯è§†æ¨¡å¼é€‚ç”¨äºè¡Œå’Œåˆ—ã€‚ä¸å…¶ä»–ä¸¤ç§æ¨¡å¼ç›¸æ¯”ï¼Œå®ƒä¸ºæ‚¨æä¾›äº†æ›´å¤§çš„ç§»åŠ¨è‡ªç”±åº¦ã€‚æŒ‰<code>Ctrl-V</code>ï¼ŒVimåƒé€å­—ç¬¦å¯è§†æ¨¡å¼ä¸€æ ·é«˜äº®æ˜¾ç¤ºå…‰æ ‡ä¸‹çš„å­—ç¬¦ï¼Œä½†å‘ä¸‹ç§»åŠ¨æ—¶ï¼Œé™¤éå…‰æ ‡å·²ç»åœ¨è¡Œå°¾ï¼Œå¦åˆ™ä¸ä¼šé«˜äº®æ˜¾ç¤ºå…‰æ ‡ä¸Šæ–¹çš„æ•´è¡Œï¼Œå®ƒè·³è½¬è‡³ä¸‹ä¸€è¡Œæ—¶é«˜äº®æ˜¾ç¤ºå°½å¯èƒ½å°‘çš„å­—ç¬¦ã€‚å°è¯•ç”¨<code>h/j/k/l</code>ç§»åŠ¨ï¼Œå¹¶è§‚å¯Ÿå…‰æ ‡çš„ç§»åŠ¨ã€‚</p><p>åœ¨Vimçª—å£çš„å·¦ä¸‹æ–¹ï¼Œæ‚¨ä¼šçœ‹åˆ°æ˜¾ç¤º<code>-- VISUAL --</code>ï¼Œ<code>-- VISUAL LINE --</code>æˆ–<code>-- VISUAL BLOCK --</code>ä»¥æç¤ºæ‚¨æ‰€å¤„çš„å¯è§†æ¨¡å¼ã€‚</p><p>å½“æ‚¨å¤„äºå¯è§†æ¨¡å¼æ—¶ï¼Œå¯ä»¥é€šè¿‡æŒ‰<code>v</code>ï¼Œ<code>V</code>æˆ–<code>Ctrl-V</code>é”®åˆ‡æ¢åˆ°å¦ä¸€ç§å¯è§†æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å¤„äºé€è¡Œå¯è§†æ¨¡å¼ï¼Œå¹¶ä¸”æƒ³è¦åˆ‡æ¢ä¸ºé€å—å¯è§†æ¨¡å¼ï¼Œè¯·è¿è¡Œ<code>Ctrl-V</code>ã€‚è¯•è¯•å§ï¼</p><p>æœ‰ä¸‰ç§é€€å‡ºå¯è§†æ¨¡å¼çš„æ–¹æ³•ï¼š<code>esc</code>ï¼Œ<code>Ctrl-C</code>å’Œä¸å½“å‰å¯è§†æ¨¡å¼ç›¸åŒçš„é”®ã€‚åè€…çš„æ„æ€æ˜¯ï¼Œå¦‚æœæ‚¨å½“å‰å¤„äºé€è¡Œå¯è§†æ¨¡å¼(<code>V</code>)ï¼Œåˆ™å¯ä»¥é€šè¿‡å†æ¬¡æŒ‰<code>V</code>é€€å‡ºå®ƒã€‚å¦‚æœæ‚¨å¤„äºå­—ç¬¦å¯è§†æ¨¡å¼ï¼Œåˆ™å¯ä»¥é€šè¿‡æŒ‰<code>v</code>é€€å‡ºå®ƒã€‚å¦‚æœæ‚¨å¤„äºé€å—å¯è§†æ¨¡å¼ï¼Œè¯·æŒ‰<code>Ctrl-V</code>ã€‚</p><p>å®é™…ä¸Šï¼Œè¿˜æœ‰å¦ä¸€ç§è¿›å…¥å¯è§†æ¨¡å¼çš„æ–¹å¼ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">gv</span>    è½¬åˆ°ä¸Šä¸€ä¸ªå¯è§†æ¨¡å¼<br></code></pre></td></tr></table></figure><p>å®ƒå°†åœ¨ä¸ä¸Šæ¬¡ç›¸åŒçš„é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬å—ä¸Šå¯åŠ¨ç›¸åŒçš„å¯è§†æ¨¡å¼ã€‚</p><h2 id="å¯è§†æ¨¡å¼å¯¼èˆª"><a href="#å¯è§†æ¨¡å¼å¯¼èˆª" class="headerlink" title="å¯è§†æ¨¡å¼å¯¼èˆª"></a>å¯è§†æ¨¡å¼å¯¼èˆª</h2><p>åœ¨å¯è§†æ¨¡å¼ä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨VimåŠ¨ä½œ(motion)æ‰©å±•é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬å—ã€‚</p><p>è®©æˆ‘ä»¬ä½¿ç”¨ä¹‹å‰ä½¿ç”¨çš„ç›¸åŒæ–‡æœ¬ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br><span class="hljs-literal">three</span><br></code></pre></td></tr></table></figure><p>è¿™æ¬¡è®©æˆ‘ä»¬ä»â€twoâ€è¡Œå¼€å§‹ã€‚æŒ‰<code>v</code>è¿›å…¥å­—ç¬¦å¯è§†æ¨¡å¼(è¿™é‡Œçš„æ–¹æ‹¬å·<code>[]</code>è¡¨ç¤ºé«˜äº®æ˜¾ç¤ºçš„å­—ç¬¦)ï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">one<br><span class="hljs-string">[t]</span>wo<br>three<br></code></pre></td></tr></table></figure><p>æŒ‰<code>j</code>ï¼ŒVimå°†é«˜äº®æ˜¾ç¤ºä»â€twoâ€è¡Œåˆ°â€threeâ€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æ‰€æœ‰æ–‡æœ¬ã€‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">one</span><br>[<span class="hljs-keyword">two</span><br>t]hree<br></code></pre></td></tr></table></figure><p>å‡è®¾æ‚¨åˆšåˆšæ„è¯†åˆ°è¿˜éœ€è¦é«˜äº®æ˜¾ç¤ºâ€oneâ€è¡Œï¼Œå› æ­¤æŒ‰<code>k</code>ã€‚ä»¤æ‚¨æ²®ä¸§çš„æ˜¯ï¼Œå®ƒç°åœ¨æ’é™¤äº†â€threeâ€é«˜äº®ã€‚</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">one<br><span class="hljs-string">[t]</span>wo<br>three<br></code></pre></td></tr></table></figure><p>æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è‡ªç”±åœ°æ‰©å±•è§†è§‰é€‰æ‹©èŒƒå›´ï¼Œä»¥å‘æ‚¨æƒ³è¦çš„ä»»ä½•æ–¹å‘å‘å±•ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚è®©æˆ‘ä»¬å…ˆæ¢å¤å…‰æ ‡åˆ°é«˜äº®æ˜¾ç¤ºâ€twoâ€å’Œâ€threeâ€è¡Œçš„ä½ç½®ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">one</span><br>[two<br>t]hree    <span class="hljs-operator">&lt;</span><span class="hljs-comment">-- å…‰æ ‡</span><br></code></pre></td></tr></table></figure><p>é«˜äº®åŒºåŸŸè·Ÿéšå…‰æ ‡ç§»åŠ¨ã€‚å¦‚æœè¦å°†å…¶å‘ä¸Šæ‰©å±•åˆ°è¡Œâ€oneâ€ï¼Œåˆ™éœ€è¦å°†å…‰æ ‡ç§»åŠ¨åˆ°â€twoâ€ï¼Œç°åœ¨æ‚¨çš„å…‰æ ‡åœ¨â€threeâ€è¡Œä¸Šã€‚è¿™æ—¶å¯ä»¥ç”¨<code>o</code>æˆ–<code>O</code>åˆ‡æ¢å…‰æ ‡ä½ç½®ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">one</span><br>[two     <span class="hljs-operator">&lt;</span><span class="hljs-comment">-- å…‰æ ‡</span><br>t]hree<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå½“æ‚¨æŒ‰<code>k</code>æ—¶ï¼Œå®ƒä¸å†ç¼©å°é€‰æ‹©ï¼Œè€Œæ˜¯å‘ä¸Šæ‰©å±•ã€‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata">[<span class="hljs-keyword">one</span><br><span class="hljs-keyword">two</span><br>t]hree<br></code></pre></td></tr></table></figure><p>åœ¨å¯è§†æ¨¡å¼ä¸­ä½¿ç”¨<code>o</code>æˆ–<code>O</code>ï¼Œå…‰æ ‡ä¼šåœ¨é«˜äº®é€‰æ‹©åŒºåŸŸçš„å¼€å¤´å’Œç»“å°¾è·³è½¬ï¼Œä»¥ä¾¿ä¸æ‚¨æ‰©å±•é«˜äº®åŒºåŸŸã€‚</p><h2 id="å¯è§†æ¨¡å¼è¯­æ³•"><a href="#å¯è§†æ¨¡å¼è¯­æ³•" class="headerlink" title="å¯è§†æ¨¡å¼è¯­æ³•"></a>å¯è§†æ¨¡å¼è¯­æ³•</h2><p>å¯è§†æ¨¡å¼ä¸æ™®é€šæ¨¡å¼ä½¿ç”¨ç›¸åŒçš„æ“ä½œç¬¦(operations)ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä»¥ä¸‹æ–‡å­—ï¼Œç„¶åæ‚¨æƒ³åœ¨å¯è§†æ¨¡å¼ä¸­åˆ é™¤å‰ä¸¤è¡Œï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br><span class="hljs-literal">three</span><br></code></pre></td></tr></table></figure><p>ç”¨é€è¡Œå¯è§†æ¨¡å¼(<code>V</code>)é«˜äº®æ˜¾ç¤ºâ€oneâ€å’Œâ€twoâ€è¡Œï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata">[<span class="hljs-keyword">one</span><br><span class="hljs-keyword">two</span>]<br>three<br></code></pre></td></tr></table></figure><p>æŒ‰ä¸‹<code>d</code>é”®å°†åˆ é™¤é€‰æ‹©ï¼Œç±»ä¼¼äºæ™®é€šæ¨¡å¼ã€‚è¯·æ³¨æ„ï¼Œä¸æ™®é€šæ¨¡å¼çš„è¯­æ³•è§„åˆ™æœ‰æ‰€ä¸åŒï¼ŒåŠ¨è¯+åè¯ä¸é€‚ç”¨å¯è§†æ¨¡å¼ã€‚è™½ç„¶å­˜åœ¨ç›¸åŒçš„åŠ¨è¯(<code>d</code>)ï¼Œä½†åœ¨å¯è§†æ¨¡å¼ä¸‹æ²¡æœ‰åè¯ã€‚å¯è§†æ¨¡å¼ä¸‹çš„è¯­æ³•è§„åˆ™æ˜¯åè¯+åŠ¨è¯(åè¿‡æ¥äº†)ï¼Œå…¶ä¸­åè¯æ˜¯é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚é¦–å…ˆé€‰æ‹©æ–‡æœ¬å—ï¼Œç„¶åè¿›è¡Œæ“ä½œã€‚</p><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œæœ‰ä¸€äº›å‘½ä»¤ä¸éœ€è¦åè¯(motion)ï¼Œä¾‹å¦‚<code>x</code>åˆ é™¤å…‰æ ‡ä¸‹æ–¹çš„å•ä¸ªå­—ç¬¦ï¼Œè¿˜æœ‰<code>r</code>æ›¿æ¢å…‰æ ‡ä¸‹æ–¹çš„å­—ç¬¦(<code>rx</code>å°†å½“å‰å…‰æ ‡ä¸‹çš„å­—ç¬¦æ›¿æ¢ä¸º<code>x</code>)ã€‚åœ¨å¯è§†æ¨¡å¼ä¸‹ï¼Œè¿™äº›å‘½ä»¤ç°åœ¨å°†åº”ç”¨äºæ•´ä¸ªé«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬ï¼Œè€Œä¸æ˜¯å•ä¸ªå­—ç¬¦ã€‚å›åˆ°é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata">[<span class="hljs-keyword">one</span><br><span class="hljs-keyword">two</span>]<br>three<br></code></pre></td></tr></table></figure><p>è¿è¡Œ<code>x</code>ä¼šåˆ é™¤æ‰€æœ‰é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚</p><p>æ‚¨å¯ä»¥ä½¿ç”¨æ­¤è¡Œä¸ºåœ¨markdownæ–‡æœ¬ä¸­å¿«é€Ÿåˆ›å»ºæ ‡é¢˜ã€‚å‡è®¾æ‚¨éœ€è¦å¿«é€Ÿä¸‹é¢çš„æ–‡æœ¬è½¬æ¢ä¸ºä¸€çº§markdownæ ‡é¢˜(â€œ&#x3D;&#x3D;&#x3D;â€):</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">Chapter One</span><br></code></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œæ‚¨ä½¿ç”¨<code>yy</code>å¤åˆ¶æ–‡æœ¬ï¼Œç„¶åä½¿ç”¨<code>p</code>ç²˜è´´æ–‡æœ¬ï¼š</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-section">Chapter One</span><br><span class="hljs-section">Chapter One</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨è½¬åˆ°ç¬¬äºŒè¡Œï¼Œä»¥é€è¡Œå¯è§†æ¨¡å¼é€‰æ‹©å®ƒï¼š</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-section">Chapter One</span><br><span class="hljs-comment">[Chapter One]</span><br></code></pre></td></tr></table></figure><p>åœ¨markdownä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨æ–‡æœ¬ä¸‹æ–¹æ·»åŠ ä¸€ç³»åˆ—<code>=</code>æ¥åˆ›å»ºæ ‡é¢˜ï¼Œå› æ­¤æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ<code>r=</code>æ¥æ›¿æ¢æ•´ä¸ªé«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">Chapter One<br><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><br></code></pre></td></tr></table></figure><p>è¦äº†è§£æœ‰å…³å¯è§†æ¨¡å¼ä¸‹çš„è¿ç®—ç¬¦çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<code>:h visual-operators</code>ã€‚</p><h2 id="å¯è§†æ¨¡å¼å’ŒExå‘½ä»¤"><a href="#å¯è§†æ¨¡å¼å’ŒExå‘½ä»¤" class="headerlink" title="å¯è§†æ¨¡å¼å’ŒExå‘½ä»¤"></a>å¯è§†æ¨¡å¼å’ŒExå‘½ä»¤</h2><p>æ‚¨å¯ä»¥æœ‰é€‰æ‹©åœ°åœ¨é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬å—ä¸Šåº”ç”¨Exå‘½ä»¤ã€‚å¦‚æœæ‚¨å…·æœ‰ä»¥ä¸‹è¡¨è¾¾å¼,å¹¶æƒ³å°†å‰ä¸¤è¡Œçš„â€constâ€æ›¿æ¢ä¸ºâ€letâ€ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const one <span class="hljs-operator">=</span> <span class="hljs-string">&quot;one&quot;</span><span class="hljs-comment">;</span><br>const two <span class="hljs-operator">=</span> <span class="hljs-string">&quot;two&quot;</span><span class="hljs-comment">;</span><br>const three <span class="hljs-operator">=</span> <span class="hljs-string">&quot;three&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>ç”¨ <em>ä»»æ„</em> å¯è§†æ¨¡å¼é«˜äº®æ˜¾ç¤ºå‰ä¸¤è¡Œï¼Œç„¶åè¿è¡Œæ›¿æ¢å‘½ä»¤<code>:s/const/let/g</code>ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let one <span class="hljs-operator">=</span> <span class="hljs-string">&quot;one&quot;</span><span class="hljs-comment">;</span><br>let two <span class="hljs-operator">=</span> <span class="hljs-string">&quot;two&quot;</span><span class="hljs-comment">;</span><br>const three <span class="hljs-operator">=</span> <span class="hljs-string">&quot;three&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œæˆ‘è¯´è¿‡æ‚¨å¯ä»¥ä½¿ç”¨ <em>ä»»ä½•</em> å¯è§†æ¨¡å¼æ‰§è¡Œæ­¤æ“ä½œã€‚æ‚¨ä¸å¿…é«˜äº®æ˜¾ç¤ºæ•´ä¸ªè¡Œå³å¯åœ¨è¯¥è¡Œä¸Šè¿è¡ŒExå‘½ä»¤ã€‚åªè¦æ‚¨åœ¨æ¯è¡Œä¸Šè‡³å°‘é€‰æ‹©ä¸€ä¸ªå­—ç¬¦ï¼Œå°±ä¼šåº”ç”¨Exå‘½ä»¤ã€‚</p><h2 id="è·¨å¤šè¡Œç¼–è¾‘"><a href="#è·¨å¤šè¡Œç¼–è¾‘" class="headerlink" title="è·¨å¤šè¡Œç¼–è¾‘"></a>è·¨å¤šè¡Œç¼–è¾‘</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨é€å—å¯è§†æ¨¡å¼åœ¨Vimä¸­è·¨å¤šè¡Œç¼–è¾‘æ–‡æœ¬ã€‚å¦‚æœéœ€è¦åœ¨æ¯è¡Œæœ«å°¾æ·»åŠ åˆ†å·ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = <span class="hljs-string">&quot;one&quot;</span><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = <span class="hljs-string">&quot;two&quot;</span><br><span class="hljs-keyword">const</span> three = <span class="hljs-string">&quot;three&quot;</span><br></code></pre></td></tr></table></figure><p>å°†å…‰æ ‡æ”¾åœ¨ç¬¬ä¸€è¡Œä¸Šï¼š</p><ul><li>è¿›å…¥é€å—å¯è§†æ¨¡å¼ï¼Œå¹¶å‘ä¸‹ä¸¤è¡Œ(<code>Ctrl-V jj</code>)ã€‚</li><li>é«˜äº®æ˜¾ç¤ºåˆ°è¡Œå°¾(<code>$</code>)ã€‚</li><li>æŒ‰(<code>A</code>) ï¼Œç„¶åé”®å…¥â€;â€ã€‚</li><li>é€€å‡ºå¯è§†æ¨¡å¼(<code>esc</code>)ã€‚</li></ul><p>æ‚¨åº”è¯¥çœ‹åˆ°åœ¨æ¯ä¸€è¡Œåé¢é™„åŠ çš„ â€œ;â€ã€‚666! æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ä»é€å—å¯è§†æ¨¡å¼è¿›å…¥è¾“å…¥æ¨¡å¼ï¼šå¯ä»¥ä½¿ç”¨<code>A</code>åœ¨å…‰æ ‡åè¾“å…¥æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>I</code>åœ¨å…‰æ ‡å‰è¾“å…¥æ–‡æœ¬ã€‚è¯·å‹¿å°†å®ƒä»¬ä¸æ™®é€šæ¨¡å¼ä¸‹çš„<code>A</code>å’Œ<code>I</code>æ··æ·†ã€‚(æ™®é€šæ¨¡å¼ä¸­ï¼Œ<code>A</code>è¡¨ç¤ºåœ¨è¡Œå°¾æ·»åŠ å†…å®¹ï¼Œ<code>I</code>è¡¨ç¤ºåœ¨è¡Œå°¾éç©ºå­—ç¬¦å‰æ’å…¥å†…å®¹)ã€‚</p><p>å¦å¤–ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨<code>:normal</code>å‘½ä»¤åœ¨å¤šè¡Œæ·»åŠ å†…å®¹ï¼š<br>-é«˜äº®æ˜¾ç¤ºæ‰€æœ‰3è¡Œ(<code>vjj</code>)ã€‚<br>-è¾“å…¥<code>:normal! A;</code>ã€‚</p><p>è®°ä½ï¼Œ<code>:normal</code>å‘½ä»¤æ‰§è¡Œæ™®é€šæ¨¡å¼å‘½ä»¤ã€‚æ‚¨å¯ä»¥æŒ‡ç¤ºå®ƒè¿è¡Œ<code>A;</code>åœ¨è¯¥è¡Œçš„æœ«å°¾æ·»åŠ æ–‡æœ¬â€;â€ã€‚</p><h2 id="é€’å¢æ•°å­—"><a href="#é€’å¢æ•°å­—" class="headerlink" title="é€’å¢æ•°å­—"></a>é€’å¢æ•°å­—</h2><p>Vimæœ‰<code>Ctrl-X</code>å’Œ<code>Ctrl-A</code>å‘½ä»¤æ¥å‡å°‘å’Œå¢åŠ æ•°å­—ã€‚ä¸å¯è§†æ¨¡å¼ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¯ä»¥è·¨å¤šè¡Œé€’å¢æ•°å­—ã€‚</p><p>å¦‚æœæ‚¨å…·æœ‰ä»¥ä¸‹HTMLå…ƒç´ ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-1&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-1&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-1&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-1&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-1&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br></code></pre></td></tr></table></figure><p>æœ‰å¤šä¸ªå…·æœ‰ç›¸åŒåç§°çš„idæ˜¯ä¸€ä¸ªä¸å¥½çš„åšæ³•ï¼Œå› æ­¤è®©æˆ‘ä»¬å¯¹å…¶è¿›è¡Œé€’å¢ä»¥ä½¿å…¶å”¯ä¸€ï¼š</p><ul><li>å°†å…‰æ ‡ç§»åŠ¨åˆ° <strong>ç¬¬äºŒè¡Œ</strong>çš„ â€œ1â€ã€‚</li><li>å¯åŠ¨é€å—å¯è§†æ¨¡å¼ï¼Œå¹¶å‘ä¸‹ç§»åŠ¨3è¡Œ(<code>Ctrl-V 3j</code>)ã€‚è¿™é«˜äº®æ˜¾ç¤ºå‰©ä½™çš„â€1â€ï¼Œç°åœ¨é™¤äº†ç¬¬ä¸€è¡Œï¼Œæ‰€æœ‰çš„â€1â€åº”è¯¥å·²ç»é«˜äº®ã€‚</li><li>è¿è¡Œ<code>g Ctrl-A</code>ã€‚</li></ul><p>æ‚¨åº”è¯¥çœ‹åˆ°ä»¥ä¸‹ç»“æœï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-1&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-2&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-3&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-4&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-5&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br></code></pre></td></tr></table></figure><p><code>g Ctrl-A</code>åœ¨å¤šè¡Œä¸Šé€’å¢æ•°å­—ã€‚ <code>Ctrl-X/Ctrl-A</code>ä¹Ÿå¯ä»¥å¢åŠ å­—æ¯ã€‚å¦‚æœæ‚¨è¿è¡Œï¼š</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs processing">:<span class="hljs-built_in">set</span> nrformats+=<span class="hljs-built_in">alpha</span><br></code></pre></td></tr></table></figure><p><code>nrformats</code>é€‰é¡¹æŒ‡ç¤ºVimå°†å“ªä¸ªåŸºæ•°è§†ä¸º<code>Ctrl-A</code>å’Œ<code>Ctrl-X</code>é€’å¢å’Œé€’å‡çš„â€œæ•°å­—â€ã€‚é€šè¿‡æ·»åŠ <code>alpha</code>ï¼Œç°åœ¨å°†å­—æ¯å­—ç¬¦è§†ä¸ºæ•°å­—ã€‚å¦‚æœæ‚¨å…·æœ‰ä»¥ä¸‹HTMLå…ƒç´ ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-a&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-a&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-a&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-a&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-a&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br></code></pre></td></tr></table></figure><p>å°†å…‰æ ‡æ”¾åœ¨ç¬¬äºŒä¸ªâ€app-aâ€ä¸Šã€‚ä½¿ç”¨ä¸ä¸Šè¿°ç›¸åŒçš„æŠ€æœ¯(<code>Ctrl-V 3j</code> ç„¶å <code>g Ctrl-A</code>)å¢åŠ IDã€‚</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs applescript">&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-a&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-b&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-c&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-d&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br>&lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">&quot;app-e&quot;</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;<br></code></pre></td></tr></table></figure><h2 id="é€‰æ‹©æœ€åä¸€ä¸ªå¯è§†æ¨¡å¼åŒºåŸŸ"><a href="#é€‰æ‹©æœ€åä¸€ä¸ªå¯è§†æ¨¡å¼åŒºåŸŸ" class="headerlink" title="é€‰æ‹©æœ€åä¸€ä¸ªå¯è§†æ¨¡å¼åŒºåŸŸ"></a>é€‰æ‹©æœ€åä¸€ä¸ªå¯è§†æ¨¡å¼åŒºåŸŸ</h2><p>å‰é¢ç« èŠ‚ä¸­æˆ‘æåˆ°äº†<code>gv</code>å¯ä»¥å¿«é€Ÿé«˜äº®æ˜¾ç¤ºä¸Šä¸€ä¸ªå¯è§†æ¨¡å¼é€‰æ‹©çš„å†…å®¹ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªç‰¹æ®Šæ ‡è®°è½¬åˆ°æœ€åä¸€ä¸ªå¯è§†æ¨¡å¼çš„å¼€å§‹å’Œç»“æŸä½ç½®ï¼š</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&#x27;&lt;    è½¬åˆ°ä¸Šä¸€ä¸ªå¯è§†æ¨¡å¼é«˜äº®æ˜¾ç¤ºçš„ç¬¬ä¸€ä¸ªä½ç½®ï¼ˆè¡Œï¼‰(è¯‘è€…æ³¨ï¼Œè‹±æ–‡åŸç‰ˆä¸­&#x27;&lt;&#x27;å‰é¢çš„ç¬¦å·æ˜¯`ï¼Œä½†è¿™åº”è¯¥æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œåº”è¯¥æ˜¯å•å¼•å·&#x27;)<br>&#x27;&gt;    è½¬åˆ°ä¸Šä¸€ä¸ªå¯è§†æ¨¡å¼é«˜äº®æ˜¾ç¤ºçš„æœ€åä½ç½®ï¼ˆè¡Œï¼‰<br></code></pre></td></tr></table></figure><p>ä¹‹å‰ï¼Œæˆ‘æåˆ°è¿‡æ‚¨å¯ä»¥åœ¨é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬ä¸Šæœ‰é€‰æ‹©åœ°æ‰§è¡ŒExå‘½ä»¤ï¼Œä¾‹å¦‚ï¼š<code>:s/const/let/g</code>ã€‚å½“æ‚¨è¿™æ ·åšæ—¶ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:<span class="hljs-string">&#x27;&lt;,&#x27;</span>&gt;s/const/let/g</span><br></code></pre></td></tr></table></figure><p>æ‚¨å®é™…ä¸Šæ˜¯åœ¨ä½¿ç”¨(<code>&#39;&lt;, &#39;&gt;</code>) æ ‡è®°ä½œä¸ºèŒƒå›´æ¥æ‰§è¡Œ <code>s/const/let/g</code>å‘½ä»¤ã€‚è¿™å¤ªæœ‰è¶£äº†ï¼</p><p>æ‚¨éšæ—¶å¯ä»¥éšæ—¶ç¼–è¾‘è¿™äº›æ ‡è®°ã€‚æ¯”å¦‚ï¼Œå¦‚æœæ‚¨éœ€è¦ä»é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬çš„å¼€å¤´åˆ°æ–‡ä»¶çš„æœ«å°¾è¿›è¡Œæ›¿æ¢ï¼Œåˆ™åªéœ€å°†å‘½ä»¤è¡Œæ›´æ”¹ä¸ºï¼š</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs julia">:&#x27;&lt;,$s/<span class="hljs-keyword">const</span>/<span class="hljs-keyword">let</span>/g<br></code></pre></td></tr></table></figure><h2 id="ä»æ’å…¥æ¨¡å¼è¿›å…¥å¯è§†æ¨¡å¼"><a href="#ä»æ’å…¥æ¨¡å¼è¿›å…¥å¯è§†æ¨¡å¼" class="headerlink" title="ä»æ’å…¥æ¨¡å¼è¿›å…¥å¯è§†æ¨¡å¼"></a>ä»æ’å…¥æ¨¡å¼è¿›å…¥å¯è§†æ¨¡å¼</h2><p>æ‚¨ä¹Ÿå¯ä»¥ä»æ’å…¥æ¨¡å¼è¿›å…¥å¯è§†æ¨¡å¼ã€‚åœ¨æ’å…¥æ¨¡å¼ä¸‹è¿›å…¥å­—ç¬¦å¯è§†æ¨¡å¼ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">Ctrl-O v</span><br></code></pre></td></tr></table></figure><p>å›æƒ³ä¸€ä¸‹ï¼Œåœ¨æ’å…¥æ¨¡å¼ä¸‹è¿è¡Œ<code>Ctrl-O</code>å¯ä»¥ä½¿æ‚¨æ‰§è¡Œæ™®é€šæ¨¡å¼å‘½ä»¤ã€‚åœ¨æ™®é€šæ¨¡å¼å‘½ä»¤æŒ‚èµ·æ¨¡å¼ä¸‹ï¼Œè¿è¡Œ<code>v</code>è¿›å…¥é€å­—å¯è§†æ¨¡å¼ã€‚è¯·æ³¨æ„ï¼Œåœ¨å±å¹•çš„å·¦ä¸‹æ–¹ï¼Œå®ƒæ˜¾ç¤ºä¸º<code>--(insert) VISUAL--</code>ã€‚è¯¥æŠ€å·§é€‚ç”¨äºä»»ä½•å¯è§†æ¨¡å¼è¿ç®—ç¬¦ï¼š<code>v</code>ï¼Œ<code>V</code>ï¼Œå’Œ<code>Ctrl-V</code>ã€‚</p><h2 id="é€‰æ‹©æ¨¡å¼"><a href="#é€‰æ‹©æ¨¡å¼" class="headerlink" title="é€‰æ‹©æ¨¡å¼"></a>é€‰æ‹©æ¨¡å¼</h2><p>Vimå…·æœ‰ç±»ä¼¼äºå¯è§†æ¨¡å¼çš„æ¨¡å¼ï¼Œç§°ä¸º<em>é€‰æ‹©æ¨¡å¼</em>ã€‚ä¸å¯è§†æ¨¡å¼ä¸€æ ·ï¼Œå®ƒä¹Ÿå…·æœ‰ä¸‰ç§ä¸åŒçš„æ¨¡å¼ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">gh</span>         é€å­—ç¬¦é€‰æ‹©æ¨¡å¼<br>gH         é€è¡Œé€‰æ‹©æ¨¡å¼<br>gCtrl-h    é€å—é€‰æ‹©æ¨¡å¼<br></code></pre></td></tr></table></figure><p>é€‰æ‹©æ¨¡å¼æ¯”Vimçš„å¯è§†æ¨¡å¼æ›´æ¥è¿‘å¸¸è§„ç¼–è¾‘å™¨çš„æ–‡æœ¬é«˜äº®æ˜¾ç¤ºè¡Œä¸ºã€‚</p><p>åœ¨å¸¸è§„ç¼–è¾‘å™¨ä¸­ï¼Œé«˜äº®æ˜¾ç¤ºæ–‡æœ¬å—å¹¶é”®å…¥å­—æ¯ï¼ˆä¾‹å¦‚å­—æ¯â€yâ€ï¼‰åï¼Œå®ƒå°†åˆ é™¤é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬å¹¶æ’å…¥å­—æ¯â€yâ€ã€‚å¦‚æœæ‚¨ä½¿ç”¨é€è¡Œé€‰æ‹©æ¨¡å¼(<code>gH</code>)é«˜äº®æ˜¾ç¤ºä¸€è¡Œæ–‡æœ¬å¹¶é”®å…¥â€yâ€ï¼Œå®ƒå°†åˆ é™¤é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬å¹¶æ’å…¥å­—æ¯â€yâ€ï¼Œè¿™ä¸å¸¸è§„æ–‡æœ¬ç¼–è¾‘å™¨éå¸¸ç›¸ä¼¼ã€‚</p><p>å°†æ­¤è¡Œä¸ºä¸å¯è§†æ¨¡å¼è¿›è¡Œå¯¹æ¯”ï¼šå¦‚æœæ‚¨ä½¿ç”¨é€è¡Œå¯è§†æ¨¡å¼(<code>V</code>)é«˜äº®æ˜¾ç¤ºä¸€è¡Œæ–‡æœ¬å¹¶é”®å…¥â€yâ€ï¼Œåˆ™é«˜äº®æ˜¾ç¤ºçš„æ–‡æœ¬ä¸ä¼šè¢«åˆ é™¤ä¸”è¢«å­—æ¯â€yâ€ä»£æ›¿ï¼Œè€Œæ˜¯ä»…å°†å…¶å¤åˆ¶(yank)ã€‚åœ¨é€‰æ‹©æ¨¡å¼ä¸­ï¼Œä½ ä¸èƒ½æ‰§è¡Œå¯¹é«˜äº®æ–‡æœ¬æ‰§è¡Œæ™®é€šæ¨¡å¼çš„å‘½ä»¤ã€‚</p><p>æˆ‘ä¸ªäººä»æœªä½¿ç”¨è¿‡é€‰æ‹©æ¨¡å¼ï¼Œä½†æ˜¯å¾ˆé«˜å…´çŸ¥é“å®ƒçš„å­˜åœ¨ã€‚</p><h2 id="ä»¥èªæ˜çš„æ–¹å¼å­¦ä¹ å¯è§†æ¨¡å¼"><a href="#ä»¥èªæ˜çš„æ–¹å¼å­¦ä¹ å¯è§†æ¨¡å¼" class="headerlink" title="ä»¥èªæ˜çš„æ–¹å¼å­¦ä¹ å¯è§†æ¨¡å¼"></a>ä»¥èªæ˜çš„æ–¹å¼å­¦ä¹ å¯è§†æ¨¡å¼</h2><p>å¯è§†æ¨¡å¼æ˜¯Vimé«˜äº®æ˜¾ç¤ºæ–‡æœ¬çš„è¿‡ç¨‹ã€‚</p><p>å¦‚æœå‘ç°ä½¿ç”¨å¯è§†æ¨¡å¼æ“ä½œçš„é¢‘ç‡æ¯”æ­£å¸¸æ¨¡å¼æ“ä½œçš„é¢‘ç‡é«˜å¾—å¤šï¼Œè¯·å½“å¿ƒã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ç§åæ¨¡å¼ã€‚è¿è¡Œå¯è§†æ¨¡å¼æ“ä½œæ‰€éœ€çš„å‡»é”®æ¬¡æ•°è¦å¤šäºæ™®é€šæ¨¡å¼ä¸‹çš„å‡»é”®æ¬¡æ•°ã€‚å‡è®¾æ‚¨éœ€è¦åˆ é™¤ä¸€ä¸ªå†…éƒ¨å•è¯(inner wordï¼Œè¯·å›é¡¾å‰é¢çš„æ–‡æœ¬å¯¹è±¡)ï¼Œå¦‚æœå¯ä»¥åªç”¨ä¸‰ä¸ªæŒ‰é”®(<code>diw</code>)ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å››ä¸ªæŒ‰é”®<code>viwd</code>ï¼ˆå…ˆ<code>v</code>è¿›å…¥å¯è§†æ¨¡å¼ï¼Œç„¶å<code>iw</code>é«˜äº®ä¸€ä¸ªå†…éƒ¨å•è¯ï¼Œæœ€å<code>d</code>åˆ é™¤ï¼‰å‘¢ï¼Ÿå‰è€…æ›´ä¸ºç›´æ¥å’Œç®€æ´ã€‚å½“ç„¶ï¼Œæœ‰æ—¶ä½¿ç”¨å¯è§†æ¨¡å¼æ˜¯åˆé€‚çš„ï¼Œä½†æ€»çš„æ¥è¯´ï¼Œæ›´å€¾å‘äºç›´æ¥çš„æ–¹æ³•ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-å…¨å±€å‘½ä»¤</title>
    <link href="/2022/04/05/Vim/ch13_the_global_command/"/>
    <url>/2022/04/05/Vim/ch13_the_global_command/</url>
    
    <content type="html"><![CDATA[<h1 id="å…¨å±€å‘½ä»¤"><a href="#å…¨å±€å‘½ä»¤" class="headerlink" title="å…¨å±€å‘½ä»¤"></a>å…¨å±€å‘½ä»¤</h1><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‚¨å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨ç‚¹å‘½ä»¤(<code>.</code>)é‡å¤ä¸Šä¸€æ¬¡æ›´æ”¹ï¼Œå¦‚ä½•ä½¿ç”¨å®(<code>q</code>)é‡å¤åŠ¨ä½œä»¥åŠå°†æ–‡æœ¬å­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­(<code>&quot;</code>)ã€‚</p><p>åœ¨æœ¬ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•åœ¨å…¨å±€å‘½ä»¤ä¸­é‡å¤å‘½ä»¤è¡Œå‘½ä»¤ã€‚</p><h2 id="å…¨å±€å‘½ä»¤æ¦‚è¿°"><a href="#å…¨å±€å‘½ä»¤æ¦‚è¿°" class="headerlink" title="å…¨å±€å‘½ä»¤æ¦‚è¿°"></a>å…¨å±€å‘½ä»¤æ¦‚è¿°</h2><p>Vimçš„å…¨å±€å‘½ä»¤ç”¨äºåŒæ—¶åœ¨å¤šè¡Œä¸Šè¿è¡Œå‘½ä»¤è¡Œå‘½ä»¤ã€‚</p><p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œæ‚¨ä¹‹å‰å¯èƒ½å·²ç»å¬è¯´è¿‡ â€œExå‘½ä»¤â€ ä¸€è¯ã€‚åœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘å°†å®ƒä»¬ç§°ä¸ºå‘½ä»¤è¡Œå‘½ä»¤ï¼Œä½†Exå‘½ä»¤å’Œå‘½ä»¤è¡Œå‘½ä»¤æ˜¯ç›¸åŒçš„ã€‚å®ƒä»¬æ˜¯ä»¥å†’å·ï¼ˆ<code>:</code>ï¼‰å¼€å¤´çš„å‘½ä»¤ã€‚åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæ‚¨äº†è§£äº†æ›¿ä»£å‘½ä»¤ã€‚è¿™æ˜¯ä¸€ä¸ªExå‘½ä»¤çš„ç¤ºä¾‹ã€‚å®ƒä»¬ä¹‹æ‰€ä»¥ç§°ä¸ºExï¼Œæ˜¯å› ä¸ºå®ƒä»¬æœ€åˆæ¥è‡ªExæ–‡æœ¬ç¼–è¾‘å™¨ã€‚åœ¨æœ¬ä¹¦ä¸­ï¼Œæˆ‘å°†ç»§ç»­å°†å®ƒä»¬ç§°ä¸ºå‘½ä»¤è¡Œå‘½ä»¤ã€‚æœ‰å…³Exå‘½ä»¤çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·æŸ¥çœ‹<code>:h ex-cmd-index</code>ã€‚</p><p>å…¨å±€å‘½ä»¤å…·æœ‰ä»¥ä¸‹è¯­æ³•ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/pattern/command</span><br></code></pre></td></tr></table></figure><p><code>pattern</code>åŒ¹é…åŒ…å«è¯¥æ¨¡å¼ä¸²çš„æ‰€æœ‰è¡Œï¼Œç±»ä¼¼äºæ›¿ä»£å‘½ä»¤ä¸­çš„æ¨¡å¼ä¸²ã€‚<code>command</code>å¯ä»¥æ˜¯ä»»ä½•å‘½ä»¤è¡Œå‘½ä»¤ã€‚å…¨å±€å‘½ä»¤é€šè¿‡å¯¹ä¸<code>pattern</code>åŒ¹é…çš„æ¯ä¸€è¡Œæ‰§è¡Œ<code>command</code>æ¥å·¥ä½œã€‚</p><p>å¦‚æœæ‚¨å…·æœ‰ä»¥ä¸‹è¡¨è¾¾å¼ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><br><span class="hljs-keyword">const</span> three = 3;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br></code></pre></td></tr></table></figure><p>è¦åˆ é™¤æ‰€æœ‰åŒ…å«â€consoleâ€çš„è¡Œï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/console/d</span><br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const one <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;</span><br><br>const two <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-comment">;</span><br><br>const three <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>å…¨å±€å‘½ä»¤åœ¨ä¸â€consoleâ€æ¨¡å¼ä¸²åŒ¹é…çš„æ‰€æœ‰è¡Œä¸Šæ‰§è¡Œåˆ é™¤å‘½ä»¤(<code>d</code>)ã€‚</p><p>è¿è¡Œ<code>g</code>å‘½ä»¤æ—¶ï¼ŒVimå¯¹æ–‡ä»¶è¿›è¡Œä¸¤æ¬¡æ‰«æã€‚åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ï¼Œå®ƒå°†æ‰«ææ¯è¡Œå¹¶æ ‡è®°ä¸<code>/console/</code>æ¨¡å¼ä¼ æ•™åŒ¹é…çš„è¡Œã€‚ä¸€æ—¦æ‰€æœ‰åŒ¹é…çš„è¡Œéƒ½è¢«æ ‡è®°ï¼Œå®ƒå°†è¿›è¡Œç¬¬äºŒæ¬¡è¿è¡Œï¼Œå¹¶åœ¨æ ‡è®°çš„è¡Œä¸Šæ‰§è¡Œdå‘½ä»¤ã€‚</p><p>å¦‚æœè¦åˆ é™¤æ‰€æœ‰åŒ…å«â€constâ€çš„è¡Œï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/const/d</span><br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, one);<br><br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, two);<br><br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br></code></pre></td></tr></table></figure><h2 id="é€†å‘åŒ¹é…"><a href="#é€†å‘åŒ¹é…" class="headerlink" title="é€†å‘åŒ¹é…"></a>é€†å‘åŒ¹é…</h2><p>è¦åœ¨ä¸åŒ¹é…çš„è¡Œä¸Šè¿è¡Œå…¨å±€å‘½ä»¤ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">:g!<span class="hljs-regexp">/&#123;pattern&#125;/</span>&#123;command&#125;<br></code></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:v<span class="hljs-regexp">/&#123;pattern&#125;/</span>&#123;command&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœè¿è¡Œ<code>:v/console/d</code>ï¼Œå®ƒå°†åˆ é™¤ <strong>ä¸</strong> åŒ…å«â€consoleâ€çš„æ‰€æœ‰è¡Œã€‚</p><h2 id="æ¨¡å¼ä¸²"><a href="#æ¨¡å¼ä¸²" class="headerlink" title="æ¨¡å¼ä¸²"></a>æ¨¡å¼ä¸²</h2><p>å…¨å±€å‘½ä»¤ä½¿ç”¨ä¸æ›¿ä»£å‘½ä»¤ç›¸åŒçš„æ¨¡å¼ä¸²ç³»ç»Ÿï¼Œå› æ­¤æœ¬èŠ‚å°†ä½œä¸ºæ›´æ–°ã€‚éšæ„è·³åˆ°ä¸‹ä¸€éƒ¨åˆ†æˆ–ç»§ç»­é˜…è¯»ï¼</p><p>å¦‚æœæ‚¨å…·æœ‰ä»¥ä¸‹è¡¨è¾¾å¼ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><br><span class="hljs-keyword">const</span> three = 3;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br></code></pre></td></tr></table></figure><p>è¦åˆ é™¤åŒ…å«â€oneâ€æˆ–â€twoâ€çš„è¡Œï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/one</span>\|two/d<br></code></pre></td></tr></table></figure><p>è¦åˆ é™¤åŒ…å«ä»»ä½•ä¸€ä½æ•°å­—çš„è¡Œï¼Œè¯·è¿è¡Œä»¥ä¸‹ä»»ä¸€å‘½ä»¤ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:g<span class="hljs-regexp">/[0-9]/</span>d<br></code></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:g<span class="hljs-regexp">/\d/</span>d<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æœ‰è¡¨è¾¾å¼ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const oneMillion <span class="hljs-operator">=</span> <span class="hljs-number">1000000</span><span class="hljs-comment">;</span><br>const oneThousand <span class="hljs-operator">=</span> <span class="hljs-number">1000</span><span class="hljs-comment">;</span><br>const one <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è¦åŒ¹é…åŒ…å«ä¸‰åˆ°å…­ä¸ªé›¶çš„è¡Œï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:g<span class="hljs-regexp">/0\&#123;3,6\&#125;/</span>d<br></code></pre></td></tr></table></figure><h2 id="ä¼ é€’èŒƒå›´å‚æ•°"><a href="#ä¼ é€’èŒƒå›´å‚æ•°" class="headerlink" title="ä¼ é€’èŒƒå›´å‚æ•°"></a>ä¼ é€’èŒƒå›´å‚æ•°</h2><p>æ‚¨å¯ä»¥åœ¨<code>g</code>å‘½ä»¤ä¹‹å‰ä¼ é€’ä¸€ä¸ªèŒƒå›´ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼š</p><ul><li><code>:1,5/g/console/d</code>  åˆ é™¤ç¬¬1è¡Œå’Œç¬¬5è¡Œä¹‹é—´åŒ¹é…å­—ç¬¦ä¸²â€consoleâ€çš„è¡Œã€‚</li><li><code>:,5/g/console/d</code> å¦‚æœé€—å·å‰æ²¡æœ‰åœ°å€ï¼Œåˆ™ä»å½“å‰è¡Œå¼€å§‹ã€‚å®ƒåœ¨å½“å‰è¡Œå’Œç¬¬5è¡Œä¹‹é—´å¯»æ‰¾å­—ç¬¦ä¸²â€consoleâ€å¹¶å°†è¯¥è¡Œåˆ é™¤ã€‚</li><li><code>:3,/g/console/d</code> å¦‚æœé€—å·åæ²¡æœ‰åœ°å€ï¼Œåˆ™åœ¨å½“å‰è¡Œç»“æŸã€‚å®ƒåœ¨ç¬¬3è¡Œå’Œå½“å‰è¡Œä¹‹é—´å¯»æ‰¾å­—ç¬¦ä¸²â€consoleâ€å¹¶å°†è¯¥è¡Œåˆ é™¤ã€‚</li><li><code>:3g/console/d</code> å¦‚æœåªä¼ é€’ä¸€ä¸ªåœ°å€è€Œä¸å¸¦é€—å·ï¼Œåˆ™ä»…åœ¨ç¬¬3è¡Œæ‰§è¡Œå‘½ä»¤ã€‚åœ¨ç¬¬3è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœåŒ…å«å­—ç¬¦ä¸²â€consoleâ€ï¼Œåˆ™å°†å…¶åˆ é™¤ã€‚</li></ul><p>é™¤äº†æ•°å­—ï¼Œæ‚¨è¿˜å¯ä»¥å°†è¿™äº›ç¬¦å·ç”¨ä½œèŒƒå›´ï¼š</p><ul><li><code>.</code> è¡¨ç¤ºå½“å‰è¡Œã€‚èŒƒå›´<code>.,3</code>è¡¨ç¤ºå½“å‰è¡Œå’Œç¬¬3è¡Œä¹‹é—´ã€‚</li><li><code>$</code> è¡¨ç¤ºæ–‡ä»¶çš„æœ€åä¸€è¡Œã€‚ <code>3,$</code>èŒƒå›´è¡¨ç¤ºåœ¨ç¬¬3è¡Œå’Œæœ€åä¸€è¡Œä¹‹é—´ã€‚</li><li><code>+n</code> è¡¨ç¤ºå½“å‰è¡Œä¹‹åçš„nè¡Œã€‚æ‚¨å¯ä»¥å°†å…¶ä¸<code>.</code>ç»“åˆä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸ç»“åˆä½¿ç”¨ã€‚  <code>3,+1</code>æˆ–<code>3,.+1</code>è¡¨ç¤ºåœ¨ç¬¬3è¡Œå’Œå½“å‰è¡Œä¹‹åçš„è¡Œä¹‹é—´ã€‚</li></ul><p>å¦‚æœæ‚¨ä¸ç»™å®ƒä»»ä½•èŒƒå›´ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒå°†å½±å“æ•´ä¸ªæ–‡ä»¶ã€‚è¿™å®é™…ä¸Šä¸æ˜¯å¸¸æ€ã€‚å¦‚æœæ‚¨ä¸ä¼ é€’ä»»ä½•èŒƒå›´ï¼ŒVimçš„å¤§å¤šæ•°å‘½ä»¤è¡Œå‘½ä»¤ä»…åœ¨å½“å‰è¡Œä¸Šè¿è¡Œ(ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„ä¾‹å¤–æ˜¯ï¼šè¿™é‡Œä»‹ç»çš„å…¨å±€å‘½ä»¤(<code>:g</code>)å’Œsave(<code>:w</code>)å‘½ä»¤)ã€‚</p><h2 id="æ™®é€šæ¨¡å¼å‘½ä»¤"><a href="#æ™®é€šæ¨¡å¼å‘½ä»¤" class="headerlink" title="æ™®é€šæ¨¡å¼å‘½ä»¤"></a>æ™®é€šæ¨¡å¼å‘½ä»¤</h2><p>æ‚¨å¯ä»¥å°†å…¨å±€å‘½ä»¤å’Œ<code>:normal</code>å‘½ä»¤è¡Œå‘½ä»¤ä¸€èµ·è¿è¡Œã€‚</p><p>å¦‚æœæ‚¨æœ‰ä»¥ä¸‹æ–‡å­—ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>)<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>)<br><br><span class="hljs-keyword">const</span> three = 3<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three)<br><br></code></pre></td></tr></table></figure><p>è¦æ·»åŠ â€;â€è¿è¡Œåˆ°æ¯ä¸€è¡Œçš„æœ«å°¾ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:g<span class="hljs-regexp">/./</span>normal A;<br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹ï¼š</p><ul><li><code>:g</code> æ˜¯å…¨å±€å‘½ä»¤ã€‚</li><li><code>/./</code> æ˜¯â€œéç©ºè¡Œâ€çš„æ¨¡å¼ã€‚å®ƒåŒ¹é…è‡³å°‘åŒ…å«1ä¸ªå­—ç¬¦çš„è¡Œã€‚å› æ­¤å°†ä¸åŒ…å«â€œconstâ€å’Œâ€œconsoleâ€çš„è¡ŒåŒ¹é…ã€‚å®ƒä¸åŒ¹é…ç©ºè¡Œã€‚</li><li><code>normal A;</code> è¿è¡Œ<code>:normal</code>å‘½ä»¤è¡Œå‘½ä»¤ã€‚ <code>A;</code> æ˜¯æ™®é€šæ¨¡å¼å‘½ä»¤ï¼Œç”¨äºåœ¨è¯¥è¡Œçš„æœ«å°¾æ’å…¥â€;â€ã€‚</li></ul><h2 id="æ‰§è¡Œå®"><a href="#æ‰§è¡Œå®" class="headerlink" title="æ‰§è¡Œå®"></a>æ‰§è¡Œå®</h2><p>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å…¨å±€å‘½ä»¤æ‰§è¡Œå®ã€‚å®åªæ˜¯æ™®é€šæ¨¡å¼ä¸‹çš„æ“ä½œï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨<code>:normal</code>æ¥æ‰§è¡Œå®ã€‚å¦‚æœæ‚¨æœ‰ä»¥ä¸‹è¡¨è¾¾å¼ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><br><span class="hljs-keyword">const</span> three = 3<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br></code></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œå¸¦æœ‰â€constâ€çš„è¡Œæ²¡æœ‰åˆ†å·ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®ï¼Œä»¥åœ¨å¯„å­˜å™¨â€aâ€çš„è¿™äº›è¡Œçš„æœ«å°¾æ·»åŠ é€—å·ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">qa0A<span class="hljs-comment">;&lt;esc&gt;q</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨éœ€è¦å¤ä¹ ï¼Œè¯·æŸ¥çœ‹æœ‰å…³å®çš„ç« èŠ‚ã€‚ç°åœ¨è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/const/normal</span> <span class="hljs-variable">@a</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæ‰€æœ‰å¸¦æœ‰â€constâ€çš„è¡Œçš„æœ«å°¾å°†å¸¦æœ‰â€;â€ã€‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><br><span class="hljs-keyword">const</span> three = 3;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨ä¸€æ­¥ä¸€æ­¥æŒ‰ç…§ç¤ºä¾‹åšï¼Œæ‚¨å°†ä¼šåœ¨ç¬¬ä¸€è¡Œæœ«å°¾çœ‹åˆ°ä¸¤ä¸ªåˆ†å·ã€‚ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œä½¿ç”¨å…¨å±€å‘½ä»¤æ—¶ï¼Œç»™ä¸€ä¸ªèŒƒå›´å‚æ•°ï¼Œä»ç¬¬2è¡Œåˆ°æœ€åä¸€è¡Œ, <code>:2,$g/const/normal @a</code>ã€‚</p><h2 id="é€’å½’å…¨å±€å‘½ä»¤"><a href="#é€’å½’å…¨å±€å‘½ä»¤" class="headerlink" title="é€’å½’å…¨å±€å‘½ä»¤"></a>é€’å½’å…¨å±€å‘½ä»¤</h2><p>å…¨å±€å‘½ä»¤æœ¬èº«æ˜¯å‘½ä»¤è¡Œå‘½ä»¤çš„ä¸€ç§ï¼Œå› æ­¤æ‚¨å¯ä»¥ä»æŠ€æœ¯ä¸Šåœ¨å…¨å±€å‘½ä»¤ä¸­è¿è¡Œå…¨å±€å‘½ä»¤ã€‚</p><p>ç»™å®šè¡¨è¾¾å¼ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><br><span class="hljs-keyword">const</span> three = 3;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/console/g/two/d</span><br></code></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œ<code>g</code>å°†æŸ¥æ‰¾åŒ…å«æ¨¡å¼â€consoleâ€çš„è¡Œï¼Œå¹¶æ‰¾åˆ°3ä¸ªåŒ¹é…é¡¹ã€‚ç„¶åï¼Œç¬¬äºŒä¸ªâ€gâ€å°†ä»é‚£ä¸‰ä¸ªåŒ¹é…é¡¹ä¸­æŸ¥æ‰¾åŒ…å«æ¨¡å¼â€twoâ€çš„è¡Œã€‚æœ€åï¼Œå®ƒå°†åˆ é™¤è¯¥åŒ¹é…é¡¹ã€‚</p><p>æ‚¨ä¹Ÿå¯ä»¥å°†<code>g</code>ä¸<code>v</code>ç»“åˆä½¿ç”¨ä»¥æ‰¾åˆ°æ­£è´Ÿæ¨¡å¼ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/console/v/two/d</span><br></code></pre></td></tr></table></figure><p>ä¸å‰é¢çš„å‘½ä»¤ä¸åŒï¼Œå®ƒå°†æŸ¥æ‰¾ <strong>ä¸</strong> åŒ…å«â€twoâ€çš„è¡Œã€‚</p><h2 id="æ›´æ”¹å®šç•Œç¬¦"><a href="#æ›´æ”¹å®šç•Œç¬¦" class="headerlink" title="æ›´æ”¹å®šç•Œç¬¦"></a>æ›´æ”¹å®šç•Œç¬¦</h2><p>æ‚¨å¯ä»¥åƒæ›¿ä»£å‘½ä»¤ä¸€æ ·æ›´æ”¹å…¨å±€å‘½ä»¤çš„å®šç•Œç¬¦ã€‚è§„åˆ™æ˜¯ç›¸åŒçš„ï¼šæ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•å•å­—èŠ‚å­—ç¬¦ï¼Œä½†å­—æ¯ï¼Œæ•°å­—ï¼Œ<code>&quot;</code>, <code>|</code>, å’Œ <code>\</code>é™¤å¤–ã€‚</p><p>è¦åˆ é™¤åŒ…å«â€consoleâ€çš„è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g</span><span class="hljs-variable">@console</span><span class="hljs-variable">@d</span><br></code></pre></td></tr></table></figure><p>å¦‚æœåœ¨å…¨å±€å‘½ä»¤ä¸­ä½¿ç”¨æ›¿ä»£å‘½ä»¤ï¼Œåˆ™å¯ä»¥æœ‰ä¸¤ä¸ªä¸åŒçš„å®šç•Œç¬¦ï¼š</p><figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs julia">g<span class="hljs-meta">@one</span><span class="hljs-meta">@s</span>+<span class="hljs-keyword">const</span>+<span class="hljs-keyword">let</span>+g<br></code></pre></td></tr></table></figure><p>æ­¤å¤„ï¼Œå…¨å±€å‘½ä»¤å°†æŸ¥æ‰¾åŒ…å«â€oneâ€çš„æ‰€æœ‰è¡Œã€‚ æ›¿æ¢å‘½ä»¤å°†ä»è¿™äº›åŒ¹é…é¡¹ä¸­å°†å­—ç¬¦ä¸²â€constâ€æ›¿æ¢ä¸ºâ€letâ€ã€‚</p><h2 id="é»˜è®¤å‘½ä»¤"><a href="#é»˜è®¤å‘½ä»¤" class="headerlink" title="é»˜è®¤å‘½ä»¤"></a>é»˜è®¤å‘½ä»¤</h2><p>å¦‚æœåœ¨å…¨å±€å‘½ä»¤ä¸­æœªæŒ‡å®šä»»ä½•å‘½ä»¤è¡Œå‘½ä»¤ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p>å…¨å±€å‘½ä»¤å°†ä½¿ç”¨æ‰“å°(<code>:p</code>)å‘½ä»¤æ¥æ‰“å°å½“å‰è¡Œçš„æ–‡æœ¬ã€‚å¦‚æœæ‚¨è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/console</span><br></code></pre></td></tr></table></figure><p>å®ƒå°†åœ¨å±å¹•åº•éƒ¨æ‰“å°æ‰€æœ‰åŒ…å«â€consoleâ€çš„è¡Œã€‚</p><p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„äº‹å®ã€‚å› ä¸ºå…¨å±€å‘½ä»¤ä½¿ç”¨çš„é»˜è®¤å‘½ä»¤æ˜¯<code>p</code>ï¼Œæ‰€ä»¥è¿™ä½¿<code>g</code>è¯­æ³•ä¸ºï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/re/p</span><br></code></pre></td></tr></table></figure><ul><li><code>g</code> &#x3D; å…¨å±€å‘½ä»¤</li><li><code>re</code> &#x3D; æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼</li><li><code>p</code> &#x3D; æ‰“å°å‘½ä»¤</li></ul><p>è¿™ä¸‰ä¸ªå…ƒç´ è¿èµ·æ¥æ‹¼å†™ä¸º **â€grepâ€**ï¼Œä¸å‘½ä»¤è¡Œä¸­çš„<code>grep</code> ç›¸åŒã€‚ä½†è¿™ <strong>ä¸</strong> æ˜¯å·§åˆã€‚ <code>g/re/p</code>å‘½ä»¤æœ€åˆæ¥è‡ªEdç¼–è¾‘å™¨ï¼ˆä¸€ä¸ªè¡Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰ã€‚ <code>grep</code>å‘½ä»¤çš„åç§°æ¥è‡ªEdã€‚</p><p>æ‚¨çš„è®¡ç®—æœºå¯èƒ½ä»å…·æœ‰Edç¼–è¾‘å™¨ã€‚ä»ç»ˆç«¯è¿è¡Œ<code>ed</code>ï¼ˆæç¤ºï¼šè¦é€€å‡ºï¼Œè¯·é”®å…¥<code>q</code>ï¼‰ã€‚</p><h2 id="åè½¬æ•´ä¸ªç¼“å†²åŒº"><a href="#åè½¬æ•´ä¸ªç¼“å†²åŒº" class="headerlink" title="åè½¬æ•´ä¸ªç¼“å†²åŒº"></a>åè½¬æ•´ä¸ªç¼“å†²åŒº</h2><p>è¦ç¿»è½¬æ•´ä¸ªæ–‡ä»¶ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/^/m</span> <span class="hljs-number">0</span> <br></code></pre></td></tr></table></figure><p><code>^</code>è¡¨ç¤ºè¡Œçš„å¼€å§‹ã€‚ä½¿ç”¨<code>^</code>åŒ¹é…æ‰€æœ‰è¡Œï¼ŒåŒ…æ‹¬ç©ºè¡Œã€‚</p><p>å¦‚æœåªéœ€è¦åè½¬å‡ è¡Œï¼Œè¯·å°†å…¶ä¼ é€’ä¸€ä¸ªèŒƒå›´ã€‚è¦å°†ç¬¬5è¡Œåˆ°ç¬¬10è¡Œä¹‹é—´çš„è¡Œåè½¬ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:<span class="hljs-number">5</span>,<span class="hljs-number">10</span>g<span class="hljs-regexp">/^/m</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>è¦äº†è§£æœ‰å…³moveå‘½ä»¤çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<code>:h :move</code>ã€‚</p><h2 id="æ±‡æ€»æ‰€æœ‰å¾…åŠäº‹é¡¹"><a href="#æ±‡æ€»æ‰€æœ‰å¾…åŠäº‹é¡¹" class="headerlink" title="æ±‡æ€»æ‰€æœ‰å¾…åŠäº‹é¡¹"></a>æ±‡æ€»æ‰€æœ‰å¾…åŠäº‹é¡¹</h2><p>å½“æˆ‘ç¼–ç æ—¶ï¼Œæœ‰æ—¶æˆ‘ä¼šæƒ³åˆ°ä¸€ä¸ªéšæœºçš„ç»å¦™ä¸»æ„ã€‚ä¸æƒ³å¤±å»ä¸“æ³¨ï¼Œæˆ‘é€šå¸¸å°†å®ƒä»¬å†™åœ¨æˆ‘æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å–‚å°ç‹—</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2;<br><span class="hljs-comment">// TODOï¼šè‡ªåŠ¨å–‚å°ç‹—</span><br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><br><span class="hljs-keyword">const</span> three = 3;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br><span class="hljs-comment">// TODOï¼šåˆ›å»ºä¸€å®¶é”€å”®è‡ªåŠ¨å°ç‹—å–‚é£Ÿå™¨çš„åˆåˆ›å…¬å¸</span><br></code></pre></td></tr></table></figure><p>è·Ÿè¸ªæ‰€æœ‰å·²åˆ›å»ºçš„TODOå¯èƒ½å¾ˆå›°éš¾ã€‚ Vimæœ‰ä¸€ä¸ª<code>:t</code>ï¼ˆcopyï¼‰æ–¹æ³•æ¥å°†æ‰€æœ‰åŒ¹é…é¡¹å¤åˆ¶åˆ°ä¸€ä¸ªåœ°å€ã€‚è¦äº†è§£æœ‰å…³å¤åˆ¶æ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<code>:h :copy</code>ã€‚</p><p>è¦å°†æ‰€æœ‰TODOå¤åˆ¶åˆ°æ–‡ä»¶æœ«å°¾ä»¥ä¾¿äºè‡ªçœï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/TODO/t</span> $<br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><span class="hljs-comment">// TODOï¼šå–‚å°ç‹—</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2;<br><span class="hljs-comment">// TODOï¼šè‡ªåŠ¨å–‚å°ç‹—</span><br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><br><span class="hljs-keyword">const</span> three = 3;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br><span class="hljs-comment">// TODOï¼šåˆ›å»ºä¸€å®¶é”€å”®è‡ªåŠ¨å°ç‹—å–‚é£Ÿå™¨çš„åˆåˆ›å…¬å¸</span><br><br><span class="hljs-comment">// TODOï¼šå–‚å°ç‹—</span><br><span class="hljs-comment">// TODOï¼šè‡ªåŠ¨å–‚å°ç‹—</span><br><span class="hljs-comment">// TODOï¼šåˆ›å»ºä¸€å®¶é”€å”®è‡ªåŠ¨å°ç‹—å–‚é£Ÿå™¨çš„åˆåˆ›å…¬å¸</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘å¯ä»¥æŸ¥çœ‹æˆ‘åˆ›å»ºçš„æ‰€æœ‰TODOï¼Œå¦å¤–æ‰¾ä¸ªæ—¶é—´æ¥å®Œæˆå®ƒä»¬ï¼Œæˆ–å°†å®ƒä»¬å§”æ‰˜ç»™å…¶ä»–äººï¼Œç„¶åç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</p><p>å¦‚æœä¸æƒ³å¤åˆ¶ï¼Œè€Œæ˜¯å°†æ‰€æœ‰çš„ TODO ç§»åŠ¨åˆ°æœ«å°¾ï¼Œå¯ä»¥ä½¿ç”¨ç§»åŠ¨å‘½ä»¤ <code>m</code>ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/TODO/m</span> $<br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><br><span class="hljs-keyword">const</span> three = 3;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br><br><span class="hljs-comment">// TODOï¼šå–‚å°ç‹—</span><br><span class="hljs-comment">// TODOï¼šè‡ªåŠ¨å–‚å°ç‹—</span><br><span class="hljs-comment">// TODOï¼šåˆ›å»ºä¸€å®¶é”€å”®è‡ªåŠ¨å°ç‹—å–‚é£Ÿå™¨çš„åˆåˆ›å…¬å¸</span><br></code></pre></td></tr></table></figure><h2 id="é»‘æ´åˆ é™¤"><a href="#é»‘æ´åˆ é™¤" class="headerlink" title="é»‘æ´åˆ é™¤"></a>é»‘æ´åˆ é™¤</h2><p>å›æƒ³ä¸€ä¸‹å¯„å­˜å™¨é‚£ä¸€ç« ï¼Œå·²åˆ é™¤çš„æ–‡æœ¬å­˜å‚¨åœ¨ç¼–å·å¯„å­˜å™¨ä¸­ï¼ˆå…è®¸å®ƒä»¬è¶³å¤Ÿå¤§ï¼‰ã€‚æ¯å½“è¿è¡Œ<code>:g/console/d</code>æ—¶ï¼ŒViméƒ½ä¼šå°†åˆ é™¤çš„è¡Œå­˜å‚¨åœ¨ç¼–å·å¯„å­˜å™¨ä¸­ã€‚å¦‚æœåˆ é™¤å¤šè¡Œï¼Œæ‰€æœ‰ç¼–å·çš„å¯„å­˜å™¨å°†å¾ˆå¿«è¢«å¡«æ»¡ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é»‘æ´å¯„å­˜å™¨ï¼ˆ<code>&quot;_</code>ï¼‰ <strong>ä¸</strong> å°†åˆ é™¤çš„è¡Œå­˜å‚¨åˆ°å¯„å­˜å™¨ä¸­ã€‚</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/console/d</span> _<br></code></pre></td></tr></table></figure><p>é€šè¿‡åœ¨<code>d</code>ä¹‹åä¼ é€’<code>_</code>ï¼ŒVimä¸ä¼šå°†åˆ é™¤çš„è¡Œä¿å­˜åˆ°ä»»ä½•å¯„å­˜å™¨ä¸­ã€‚</p><h2 id="å°†å¤šæ¡ç©ºè¡Œå‡å°‘ä¸ºä¸€æ¡ç©ºè¡Œ"><a href="#å°†å¤šæ¡ç©ºè¡Œå‡å°‘ä¸ºä¸€æ¡ç©ºè¡Œ" class="headerlink" title="å°†å¤šæ¡ç©ºè¡Œå‡å°‘ä¸ºä¸€æ¡ç©ºè¡Œ"></a>å°†å¤šæ¡ç©ºè¡Œå‡å°‘ä¸ºä¸€æ¡ç©ºè¡Œ</h2><p>å¦‚æœæ‚¨çš„æ–‡ä»¶å¸¦æœ‰å¤šä¸ªç©ºè¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><br><br><br><br><br><span class="hljs-keyword">const</span> three = 3;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥å¿«é€Ÿå°†å¤šä¸ªç©ºè¡Œå‡å°‘ä¸ºä¸€æ¡ç©ºè¡Œã€‚è¿è¡Œï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-symbol">:g/^</span><span class="hljs-variable">$/</span>,<span class="hljs-regexp">/./</span>-1j<br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><br><span class="hljs-keyword">const</span> three = 3;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br></code></pre></td></tr></table></figure><p>ä¸€èˆ¬æƒ…å†µä¸‹å…¨å±€å‘½ä»¤éµå¾ªä¸‹åˆ—æ ¼å¼ï¼š<code>:g/pattern/command</code>ã€‚ä½†æ˜¯ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ ¼å¼ï¼š<code>:g/pattern1/,/pattern2/command</code>ã€‚ç”¨è¿™ç§æ ¼å¼ï¼ŒVimå°†ä¼šä½¿<code>command</code>ä½œç”¨åœ¨<code>pattern1</code>å’Œ<code>pattern2</code>ä¸Šã€‚</p><p>è®°ä½ä¸Šé¢è¯´çš„æ ¼å¼ï¼Œè®©æˆ‘ä»¬æ ¹æ®<code>:g/pattern1/,/pattern2/command</code>è¿™ä¸ªæ ¼å¼åˆ†è§£ä¸€ä¸‹å‘½ä»¤<code>:g/^$/,/./-1j</code>ï¼š</p><ul><li><code>/pattern1/</code> å°±æ˜¯ <code>/^$/</code> ã€‚å®ƒè¡¨ç¤ºä¸€ä¸ªç©ºè¡Œï¼ˆä¸€ä¸ªæ²¡æœ‰ä»»ä½•å­—ç¬¦çš„è¡Œï¼‰ã€‚</li><li><code>/pattern2/</code> å°±æ˜¯ <code>/./</code>ï¼ˆç”¨-1ä½œä¸ºè¡Œä¿®æ­£ï¼‰ã€‚<code>/./</code>è¡¨ç¤ºä¸€ä¸ªéç©ºè¡Œï¼ˆä¸€ä¸ªå«æœ‰è‡³å°‘1ä¸ªå­—ç¬¦çš„è¡Œï¼‰ã€‚è¿™é‡Œçš„ <code>-1</code> æ„æ€æ˜¯å‘ä¸Šåç§»1è¡Œã€‚</li><li><code>command</code> å°±æ˜¯ <code>j</code>ï¼Œä¸€ä¸ªè”æ¥å‘½ä»¤(<code>:j</code>)ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè¯¥å…¨å±€å‘½ä»¤è”æ¥æ‰€æœ‰ç»™å®šçš„è¡Œã€‚</li></ul><p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœæ‚¨æƒ³è¦å°†å¤šä¸ªç©ºè¡Œå…¨éƒ¨åˆ å»ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-symbol">:g/^</span><span class="hljs-variable">$/</span>,<span class="hljs-regexp">/./j</span><br></code></pre></td></tr></table></figure><p>æˆ–è€…ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:g/^</span><span class="hljs-variable">$/</span>-j<br></code></pre></td></tr></table></figure><p>æ‚¨çš„æ–‡æœ¬å°†ä¼šå‡å°‘ä¸ºï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">const</span> <span class="hljs-keyword">one</span> = 1;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;one: &quot;</span>, <span class="hljs-keyword">one</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">two</span> = 2;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;two: &quot;</span>, <span class="hljs-keyword">two</span>);<br><span class="hljs-keyword">const</span> three = 3;<br>console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;three: &quot;</span>, three);<br></code></pre></td></tr></table></figure><p>ï¼ˆè¯‘è€…è¡¥å……ï¼š<code>j</code>è¿æ¥å‘½ä»¤çš„æ ¼å¼æ˜¯ï¼š<code>:[range]j</code>ã€‚æ¯”å¦‚ï¼š<code>:1,5j</code>å°†è¿æ¥ç¬¬1è‡³5è¡Œã€‚åœ¨å‰é¢çš„å‘½ä»¤ä¸­<code>:g/pattern1/,/pattern2/-1j</code>ï¼Œ<code>/pattern1/</code>å’Œ<code>/pattern2</code>éƒ½æ˜¯<code>j</code>å‘½ä»¤çš„èŒƒå›´å‚æ•°ï¼Œè¡¨ç¤ºè¿æ¥ç©ºè¡Œè‡³éç©ºè¡Œä¸Šæ–¹ä¸€è¡Œï¼Œè¿™æ ·å°±ä¼šä¿ç•™1ä¸ªç©ºè¡Œã€‚åœ¨æ—©å‰çš„è‹±æ–‡ç‰ˆæœ¬ä¸­æœ‰å…³äº<code>j</code>å‘½ä»¤çš„ä»‹ç»ï¼Œä¸çŸ¥ä¸ºä½•åœ¨åé¢çš„æ›´æ–°ä¸­ï¼ŒåŸä½œè€…åˆ é™¤äº†å…³äº<code>j</code>å‘½ä»¤çš„ä»‹ç»ï¼‰</p><h2 id="é«˜çº§æ’åº"><a href="#é«˜çº§æ’åº" class="headerlink" title="é«˜çº§æ’åº"></a>é«˜çº§æ’åº</h2><p>Vimæœ‰ä¸€ä¸ª<code>:sort</code>å‘½ä»¤æ¥å¯¹ä¸€ä¸ªèŒƒå›´å†…çš„è¡Œè¿›è¡Œæ’åºã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css">d<br><span class="hljs-selector-tag">b</span><br><span class="hljs-selector-tag">a</span><br>e<br>c<br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ<code>:sort</code>å¯¹å®ƒä»¬è¿›è¡Œæ’åºã€‚å¦‚æœç»™å®ƒä¸€ä¸ªèŒƒå›´ï¼Œå®ƒå°†åªå¯¹è¯¥èŒƒå›´å†…çš„è¡Œè¿›è¡Œæ’åºã€‚ä¾‹å¦‚ï¼Œ<code>:3,5sort</code>ä»…åœ¨ç¬¬ä¸‰å’Œç¬¬äº”è¡Œä¹‹é—´æ’åºã€‚</p><p>å¦‚æœæ‚¨å…·æœ‰ä»¥ä¸‹è¡¨è¾¾å¼ï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">const</span> arrayB = [<br>  <span class="hljs-string">&quot;i&quot;</span>,<br>  <span class="hljs-string">&quot;g&quot;</span>,<br>  <span class="hljs-string">&quot;h&quot;</span>,<br>  <span class="hljs-string">&quot;b&quot;</span>,<br>  <span class="hljs-string">&quot;f&quot;</span>,<br>  <span class="hljs-string">&quot;d&quot;</span>,<br>  <span class="hljs-string">&quot;e&quot;</span>,<br>  <span class="hljs-string">&quot;c&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>]<br><br><span class="hljs-keyword">const</span> arrayA = [<br>  <span class="hljs-string">&quot;h&quot;</span>,<br>  <span class="hljs-string">&quot;b&quot;</span>,<br>  <span class="hljs-string">&quot;f&quot;</span>,<br>  <span class="hljs-string">&quot;d&quot;</span>,<br>  <span class="hljs-string">&quot;e&quot;</span>,<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;c&quot;</span>,<br>]<br></code></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æ’åºæ•°ç»„ä¸­çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯æ•°ç»„æœ¬èº«ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:g<span class="hljs-regexp">/\[/</span>+<span class="hljs-number">1</span>,<span class="hljs-regexp">/\]/</span>-<span class="hljs-number">1</span><span class="hljs-keyword">sort</span><br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">const</span> arrayB = [<br>  <span class="hljs-string">&quot;a&quot;</span>,<br>  <span class="hljs-string">&quot;b&quot;</span>,<br>  <span class="hljs-string">&quot;c&quot;</span>,<br>  <span class="hljs-string">&quot;d&quot;</span>,<br>  <span class="hljs-string">&quot;e&quot;</span>,<br>  <span class="hljs-string">&quot;f&quot;</span>,<br>  <span class="hljs-string">&quot;g&quot;</span>,<br>  <span class="hljs-string">&quot;h&quot;</span>,<br>  <span class="hljs-string">&quot;i&quot;</span>,<br>]<br><br><span class="hljs-keyword">const</span> arrayA = [<br>  <span class="hljs-string">&quot;a&quot;</span><br>  <span class="hljs-string">&quot;b&quot;</span>,<br>  <span class="hljs-string">&quot;c&quot;</span>,<br>  <span class="hljs-string">&quot;d&quot;</span>,<br>  <span class="hljs-string">&quot;e&quot;</span>,<br>  <span class="hljs-string">&quot;f&quot;</span>,<br>  <span class="hljs-string">&quot;h&quot;</span>,<br>]<br></code></pre></td></tr></table></figure><p>è¿™å¾ˆæ£’ï¼ä½†æ˜¯å‘½ä»¤çœ‹èµ·æ¥å¾ˆå¤æ‚ã€‚è®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹ã€‚è¯¥å‘½ä»¤ä¾ç„¶éµå¾ª <code>:g/pattern1/,/pattern2/command</code>è¿™ä¸ªæ ¼å¼ã€‚</p><ul><li><code>:g</code> æ˜¯å…¨å±€å‘½ä»¤</li><li><code>/\[/+1</code> æ˜¯ç¬¬ä¸€ä¸ªæ¨¡å¼ä¸²ï¼Œå®ƒåŒ¹é…å·¦æ–¹æ‹¬å·â€[â€œã€‚<code>+1</code>è¡¨ç¤ºåŒ¹é…è¡Œçš„ä¸‹é¢1è¡Œã€‚</li><li><code>/\[/-1</code> æ˜¯ç¬¬äºŒä¸ªæ¨¡å¼ä¸²ï¼Œå®ƒåŒ¹é…å³æ–¹æ‹¬å·â€]â€ã€‚<code>-1</code>è¡¨ç¤ºåŒ¹é…è¡Œçš„ä¸Šé¢1è¡Œã€‚</li><li><code>/\[/+1,/\]/-1</code> è¡¨ç¤ºåœ¨â€[â€œå’Œâ€]â€ä¹‹é—´çš„è¡Œã€‚</li><li><code>sort</code> æ˜¯å‘½ä»¤è¡Œå‘½ä»¤ï¼šæ’åºã€‚</li></ul><h2 id="èªæ˜åœ°å­¦ä¹ å…¨å±€å‘½ä»¤"><a href="#èªæ˜åœ°å­¦ä¹ å…¨å±€å‘½ä»¤" class="headerlink" title="èªæ˜åœ°å­¦ä¹ å…¨å±€å‘½ä»¤"></a>èªæ˜åœ°å­¦ä¹ å…¨å±€å‘½ä»¤</h2><p>å…¨å±€å‘½ä»¤é’ˆå¯¹æ‰€æœ‰åŒ¹é…çš„è¡Œæ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤ã€‚æœ‰äº†å®ƒï¼Œæ‚¨åªéœ€è¦è¿è¡Œä¸€æ¬¡å‘½ä»¤ï¼ŒVimå°±ä¼šä¸ºæ‚¨å®Œæˆå…¶ä½™çš„å·¥ä½œã€‚è¦ç²¾é€šå…¨å±€å‘½ä»¤ï¼Œéœ€è¦åšä¸¤ä»¶äº‹ï¼šè‰¯å¥½çš„å‘½ä»¤è¡Œå‘½ä»¤è¯æ±‡è¡¨å’Œæ­£åˆ™è¡¨è¾¾å¼çŸ¥è¯†ã€‚éšç€æ‚¨èŠ±è´¹æ›´å¤šçš„æ—¶é—´ä½¿ç”¨Vimï¼Œæ‚¨è‡ªç„¶ä¼šå­¦åˆ°æ›´å¤šçš„å‘½ä»¤è¡Œå‘½ä»¤ã€‚æ­£åˆ™è¡¨è¾¾å¼çŸ¥è¯†éœ€è¦æ›´å¤šçš„å®é™…æ“ä½œã€‚ä½†æ˜¯ä¸€æ—¦æ‚¨é€‚åº”äº†ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‚¨å°†é¢†å…ˆäºå¾ˆå¤šå…¶ä»–äººã€‚</p><p>è¿™é‡Œçš„ä¸€äº›ä¾‹å­å¾ˆå¤æ‚ã€‚ä¸è¦è¢«å“åˆ°ã€‚çœŸæ­£èŠ±æ—¶é—´äº†è§£å®ƒä»¬ã€‚è®¤çœŸé˜…è¯»æ¯ä¸ªæ¨¡å¼ä¸²ï¼Œä¸è¦æ”¾å¼ƒã€‚</p><p>æ¯å½“éœ€è¦åœ¨å¤šä¸ªä½ç½®åº”ç”¨å‘½ä»¤æ—¶ï¼Œè¯·æš‚åœå¹¶æŸ¥çœ‹æ˜¯å¦å¯ä»¥ä½¿ç”¨<code>g</code>å‘½ä»¤ã€‚å¯»æ‰¾æœ€é€‚åˆå·¥ä½œçš„å‘½ä»¤ï¼Œå¹¶ç¼–å†™ä¸€ä¸ªæ¨¡å¼ä¸²ä»¥åŒæ—¶å®šä½å¤šä¸ªç›®æ ‡ã€‚</p><p>æ—¢ç„¶æ‚¨å·²ç»çŸ¥é“å…¨å±€å‘½ä»¤çš„åŠŸèƒ½å¼ºå¤§ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•ä½¿ç”¨å¤–éƒ¨å‘½ä»¤æ¥å¢åŠ å·¥å…·åº“ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-å¤–éƒ¨å‘½ä»¤</title>
    <link href="/2022/04/05/Vim/ch14_external_commands/"/>
    <url>/2022/04/05/Vim/ch14_external_commands/</url>
    
    <content type="html"><![CDATA[<h1 id="å¤–éƒ¨å‘½ä»¤"><a href="#å¤–éƒ¨å‘½ä»¤" class="headerlink" title="å¤–éƒ¨å‘½ä»¤"></a>å¤–éƒ¨å‘½ä»¤</h1><p>åœ¨Unixç³»ç»Ÿå†…éƒ¨ï¼Œæ‚¨ä¼šå‘ç°è®¸å¤šå°å‹çš„ï¼Œè¶…ä¸“ä¸šåŒ–å‘½ä»¤ï¼Œæ¯ä¸ªå‘½ä»¤åªåšä¸€ä»¶äº‹ï¼ˆè€Œä¸”èƒ½å¾ˆå¥½åœ°å®Œæˆï¼‰ã€‚æ‚¨å¯ä»¥å°†è¿™äº›å‘½ä»¤é“¾æ¥åœ¨ä¸€èµ·ä»¥å…±åŒè§£å†³ä¸€ä¸ªå¤æ‚çš„é—®é¢˜ã€‚å¦‚æœå¯ä»¥ä»Vimå†…éƒ¨ä½¿ç”¨è¿™äº›å‘½ä»¤ï¼Œé‚£ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„!åœ¨æœ¬ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•æ‰©å±•Vimä»¥ä½¿å…¶ä¸å¤–éƒ¨å‘½ä»¤æ— ç¼åä½œã€‚</p><h2 id="Bang-å‘½ä»¤"><a href="#Bang-å‘½ä»¤" class="headerlink" title="Bang å‘½ä»¤"></a>Bang å‘½ä»¤</h2><p>Vimæœ‰ä¸€ä¸ªBang(<code>!</code>)å‘½ä»¤ï¼Œå¯ä»¥æ‰§è¡Œä¸‰ä»¶äº‹ï¼š</p><p>1.å°†å¤–éƒ¨å‘½ä»¤çš„STDOUTè¯»å…¥å½“å‰ç¼“å†²åŒºã€‚<br>2.å°†ç¼“å†²åŒºçš„å†…å®¹ä½œä¸ºSTDINå†™å…¥å¤–éƒ¨å‘½ä»¤ã€‚<br>3.ä»Vimå†…éƒ¨æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚</p><p>è®©æˆ‘ä»¬ä¸€ä¸ªä¸ªè®¤çœŸçœ‹ä¸€ä¸‹ã€‚</p><h2 id="å°†å¤–éƒ¨å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºSTDOUTè¯»å…¥Vim"><a href="#å°†å¤–éƒ¨å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºSTDOUTè¯»å…¥Vim" class="headerlink" title="å°†å¤–éƒ¨å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºSTDOUTè¯»å…¥Vim"></a>å°†å¤–éƒ¨å‘½ä»¤çš„æ ‡å‡†è¾“å‡ºSTDOUTè¯»å…¥Vim</h2><p>å°†å¤–éƒ¨å‘½ä»¤çš„STDOUTè¯»å…¥å½“å‰ç¼“å†²åŒºçš„è¯­æ³•ä¸ºï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs css">:r !&#123;cmd&#125;<br></code></pre></td></tr></table></figure><p><code>:r</code>æ˜¯Vimçš„è¯»å‘½ä»¤ã€‚å¦‚æœä¸å¸¦<code>!</code>ä½¿ç”¨å®ƒï¼Œåˆ™å¯ä»¥ä½¿ç”¨å®ƒæ¥è·å–æ–‡ä»¶çš„å†…å®¹ã€‚å¦‚æœå½“å‰ç›®å½•ä¸­æœ‰æ–‡ä»¶<code>file1.txt</code>ï¼Œè¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:r</span> file1.txt<br></code></pre></td></tr></table></figure><p>Vimä¼šå°†<code>file1.txt</code>çš„å†…å®¹æ”¾å…¥å½“å‰ç¼“å†²åŒºã€‚</p><p>å¦‚æœæ‚¨è¿è¡Œçš„<code>:r</code>å‘½ä»¤åé¢è·Ÿä¸€ä¸ª<code>!</code>å’Œå¤–éƒ¨å‘½ä»¤ï¼Œåˆ™è¯¥å‘½ä»¤çš„è¾“å‡ºå°†æ’å…¥åˆ°å½“å‰ç¼“å†²åŒºä¸­ã€‚è¦è·å–<code>ls</code>å‘½ä»¤çš„ç»“æœï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">:<span class="hljs-built_in">r</span> !<span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><p>å®ƒè¿”å›ç±»ä¼¼ä¸‹åˆ—çš„æ–‡æœ¬ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">file1<span class="hljs-selector-class">.txt</span><br>file2<span class="hljs-selector-class">.txt</span><br>file3.txt<br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥ä»<code>curl</code>å‘½ä»¤è¯»å–æ•°æ®ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">:<span class="hljs-built_in">r</span> !<span class="hljs-built_in">curl</span> <span class="hljs-literal">-s</span> <span class="hljs-string">&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;</span><br></code></pre></td></tr></table></figure><p>rå‘½ä»¤ä¹Ÿæ¥å—ä¸€ä¸ªåœ°å€ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">:<span class="hljs-number">10</span><span class="hljs-built_in">r</span> !<span class="hljs-built_in">cat</span> file1.txt<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå°†åœ¨ç¬¬10è¡Œä¹‹åæ’å…¥æ¥è‡ªè¿è¡Œ<code>cat file.txt</code>çš„STDOUTã€‚</p><h2 id="å°†ç¼“å†²åŒºå†…å®¹å†™å…¥å¤–éƒ¨å‘½ä»¤"><a href="#å°†ç¼“å†²åŒºå†…å®¹å†™å…¥å¤–éƒ¨å‘½ä»¤" class="headerlink" title="å°†ç¼“å†²åŒºå†…å®¹å†™å…¥å¤–éƒ¨å‘½ä»¤"></a>å°†ç¼“å†²åŒºå†…å®¹å†™å…¥å¤–éƒ¨å‘½ä»¤</h2><p><code>:w</code>å‘½ä»¤é™¤äº†ä¿å­˜æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ç”¨æ¥å°†å½“å‰ç¼“å†²åŒºä¸­çš„æ–‡æœ¬ä½œä¸ºä½œä¸ºSTDINä¼ é€’ç»™å¤–éƒ¨å‘½ä»¤ã€‚è¯­æ³•ä¸ºï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">:w !<span class="hljs-keyword">cmd</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨å…·æœ‰ä»¥ä¸‹è¡¨è¾¾å¼ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;Hello Vim&quot;</span>);<br><span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;Vim is awesome&quot;</span>);<br></code></pre></td></tr></table></figure><p>ç¡®ä¿åœ¨è®¡ç®—æœºä¸­å®‰è£…äº†<a href="https://nodejs.org/en/">node</a>ï¼Œç„¶åè¿è¡Œï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">:w !<span class="hljs-keyword">node</span><span class="hljs-title"></span><br></code></pre></td></tr></table></figure><p>Vimå°†ä½¿ç”¨<code>node</code>æ‰§è¡ŒJavascriptè¡¨è¾¾å¼æ¥æ‰“å°â€Hello Vimâ€å’Œâ€Vim is awesomeâ€ã€‚</p><p>å½“ä½¿ç”¨<code>ï¼šw</code>å‘½ä»¤æ—¶ï¼ŒVimä½¿ç”¨å½“å‰ç¼“å†²åŒºä¸­çš„æ‰€æœ‰æ–‡æœ¬ï¼Œä¸globalå‘½ä»¤ç±»ä¼¼ï¼ˆå¤§å¤šæ•°å‘½ä»¤è¡Œå‘½ä»¤ï¼Œå¦‚æœä¸ç»™å®ƒä¼ é€’èŒƒå›´ï¼Œåˆ™ä»…å¯¹å½“å‰è¡Œæ‰§è¡Œè¯¥å‘½ä»¤ï¼‰ã€‚å¦‚æœæ‚¨é€šè¿‡<code>ï¼šw</code>æ¥æŒ‡å®šåœ°å€ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">:<span class="hljs-number">2</span>w !<span class="hljs-keyword">node</span><span class="hljs-title"></span><br></code></pre></td></tr></table></figure><p>â€œVimâ€åªä½¿ç”¨ç¬¬äºŒè¡Œä¸­çš„æ–‡æœ¬åˆ°<code>node</code>è§£é‡Šå™¨ä¸­ã€‚</p><p><code>:w !node</code>å’Œ<code>:w! node</code>å½¢å¼ä¸ŠåŒºåˆ«å¾ˆå°ï¼Œä½†åŠŸèƒ½ä¸Šç›¸éš”åƒé‡Œã€‚ä½¿ç”¨<code>:w !node</code>ï¼Œæ‚¨æ˜¯å°†å½“å‰ç¼“å†²åŒºä¸­çš„æ–‡æœ¬â€å†™å…¥â€åˆ°å¤–éƒ¨å‘½ä»¤<code>node</code>ä¸­ã€‚ç”¨<code>:w! node</code>ï¼Œåˆ™æ‚¨å°†å¼ºåˆ¶ä¿å­˜æ–‡ä»¶å¹¶å°†å…¶å‘½åä¸ºâ€nodeâ€ã€‚</p><h2 id="æ‰§è¡Œå¤–éƒ¨å‘½ä»¤"><a href="#æ‰§è¡Œå¤–éƒ¨å‘½ä»¤" class="headerlink" title="æ‰§è¡Œå¤–éƒ¨å‘½ä»¤"></a>æ‰§è¡Œå¤–éƒ¨å‘½ä»¤</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨bangå‘½ä»¤ä»Vimå†…éƒ¨æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ã€‚è¯­æ³•ä¸ºï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:!cmd</span><br></code></pre></td></tr></table></figure><p>è¦ä»¥é•¿æ ¼å¼æŸ¥çœ‹å½“å‰ç›®å½•çš„å†…å®¹ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:!<span class="hljs-built_in">ls</span> -<span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><p>è¦ç»ˆæ­¢åœ¨PID 3456ä¸Šè¿è¡Œçš„è¿›ç¨‹ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:!<span class="hljs-built_in">kill</span> -9 3456<br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥åœ¨ä¸ç¦»å¼€Vimçš„æƒ…å†µä¸‹è¿è¡Œä»»ä½•å¤–éƒ¨å‘½ä»¤ï¼Œå› æ­¤æ‚¨å¯ä»¥ä¸“æ³¨äºè‡ªå·±çš„ä»»åŠ¡ã€‚</p><h2 id="è¿‡æ»¤æ–‡æœ¬"><a href="#è¿‡æ»¤æ–‡æœ¬" class="headerlink" title="è¿‡æ»¤æ–‡æœ¬"></a>è¿‡æ»¤æ–‡æœ¬</h2><p>å¦‚æœç»™<code>!</code>èŒƒå›´ï¼Œåˆ™å¯ç”¨äºè¿‡æ»¤æ–‡æœ¬ã€‚å‡è®¾æ‚¨æœ‰ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">hello <span class="hljs-keyword">vim</span><br>hello <span class="hljs-keyword">vim</span><br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬ä½¿ç”¨<code>tr</code> (translate)å‘½ä»¤å°†å½“å‰è¡Œå¤§å†™ã€‚è¿è¡Œï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-meta">:.!tr &#x27;[:lower:]&#x27;</span> <span class="hljs-emphasis">&#x27;[:upper:]&#x27;</span><br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">HELLO VIM</span><br><span class="hljs-attribute">hello vim</span><br></code></pre></td></tr></table></figure><p>å‘½ä»¤åˆ†è§£ï¼š</p><ul><li><code>.!</code> åœ¨å½“å‰è¡Œæ‰§è¡Œfilterå‘½ä»¤ã€‚</li><li><code>!tr &#39;[:lower:]&#39; &#39;[:upper:]&#39;</code> è°ƒç”¨<code>tr</code>å¤–éƒ¨å‘½ä»¤å°†æ‰€æœ‰å°å†™å­—ç¬¦æ›¿æ¢ä¸ºå¤§å†™å­—ç¬¦ã€‚</li></ul><p>å¿…é¡»ä¼ é€’èŒƒå›´ä»¥è¿è¡Œå¤–éƒ¨å‘½ä»¤ä½œä¸ºè¿‡æ»¤å™¨ã€‚å¦‚æœæ‚¨å°è¯•åœ¨æ²¡æœ‰<code>.</code>çš„æƒ…å†µä¸‹è¿è¡Œä¸Šè¿°å‘½ä»¤(<code>:!tr &#39;[:lower:]&#39; &#39;[:upper:]&#39;</code>)ï¼Œåˆ™ä¼šçœ‹åˆ°é”™è¯¯ã€‚</p><p>å‡è®¾æ‚¨éœ€è¦ä½¿ç”¨awkå‘½ä»¤åˆ é™¤ä¸¤è¡Œçš„ç¬¬äºŒåˆ—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:%!awk <span class="hljs-string">&quot;&#123;print <span class="hljs-variable">$1</span>&#125;&quot;</span><br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hello</span><br><span class="hljs-attribute">hello</span><br></code></pre></td></tr></table></figure><p>å‘½ä»¤åˆ†è§£ï¼š</p><ul><li><code>:%!</code>  åœ¨æ‰€æœ‰è¡Œ(<code>%</code>)ä¸Šæ‰§è¡Œfilterå‘½ä»¤ã€‚</li><li><code>awk &quot;&#123;print $1&#125;&quot;</code> ä»…æ‰“å°åŒ¹é…é¡¹çš„ç¬¬ä¸€åˆ—ã€‚</li></ul><p>æ‚¨å¯ä»¥ä½¿ç”¨ç®¡é“è¿ç®—ç¬¦ï¼ˆ<code>|</code>ï¼‰é“¾æ¥å¤šä¸ªå‘½ä»¤ï¼Œå°±åƒåœ¨ç»ˆç«¯ä¸­ä¸€æ ·ã€‚å‡è®¾æ‚¨æœ‰ä¸€ä¸ªåŒ…å«è¿™äº›ç¾å‘³æ—©é¤çš„æ–‡ä»¶ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">name</span> price<br><span class="hljs-attribute">chocolate</span> pancake <span class="hljs-number">10</span><br><span class="hljs-attribute">buttermilk</span> pancake <span class="hljs-number">9</span><br><span class="hljs-attribute">blueberry</span> pancake <span class="hljs-number">12</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨éœ€è¦æ ¹æ®ä»·æ ¼å¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œå¹¶ä¸”ä»…ä»¥å‡åŒ€çš„é—´è·æ˜¾ç¤ºèœå•ï¼Œåˆ™å¯ä»¥è¿è¡Œï¼š</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">:%!awk <span class="hljs-string">&#x27;NR &gt; 1&#x27;</span> | <span class="hljs-keyword">sort</span> -nk <span class="hljs-number">3</span> | column -t<br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">buttermilk</span> pancake <span class="hljs-number">9</span><br><span class="hljs-attribute">chocolate</span> pancake <span class="hljs-number">10</span><br><span class="hljs-attribute">blueberry</span> pancake <span class="hljs-number">12</span><br></code></pre></td></tr></table></figure><p>å‘½ä»¤åˆ†è§£ï¼š</p><ul><li><code>:%!</code> å°†è¿‡æ»¤å™¨åº”ç”¨äºæ‰€æœ‰è¡Œ(<code>%</code>)ã€‚</li><li><code>awk &#39;NR &gt; 1&#39;</code> ä»…ä»ç¬¬äºŒè¡Œå¼€å§‹æ˜¾ç¤ºæ–‡æœ¬ã€‚</li><li><code>|</code>é“¾æ¥ä¸‹ä¸€ä¸ªå‘½ä»¤ã€‚</li><li><code>sort -nk 3</code>ä½¿ç”¨åˆ—3ï¼ˆ<code>k 3</code>ï¼‰ä¸­çš„å€¼å¯¹æ•°å­—è¿›è¡Œæ’åºï¼ˆ<code>n</code>ï¼‰ã€‚</li><li><code>column -t</code>ä»¥å‡åŒ€çš„é—´è·ç»„ç»‡æ–‡æœ¬ã€‚</li></ul><h2 id="æ™®é€šæ¨¡å¼å‘½ä»¤"><a href="#æ™®é€šæ¨¡å¼å‘½ä»¤" class="headerlink" title="æ™®é€šæ¨¡å¼å‘½ä»¤"></a>æ™®é€šæ¨¡å¼å‘½ä»¤</h2><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼ŒVimæœ‰ä¸€ä¸ªè¿‡æ»¤è¿ç®—ç¬¦ï¼ˆ<code>!</code>ï¼‰ã€‚å¦‚æœæ‚¨æœ‰ä»¥ä¸‹é—®å€™ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim">hello <span class="hljs-keyword">vim</span><br>hola <span class="hljs-keyword">vim</span><br>bonjour <span class="hljs-keyword">vim</span><br>salve <span class="hljs-keyword">vim</span><br></code></pre></td></tr></table></figure><p>è¦å¤§å†™å½“å‰è¡Œå’Œä¸‹é¢çš„è¡Œï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">!jtr <span class="hljs-string">&#x27;[a-z]&#x27;</span> <span class="hljs-string">&#x27;[A-Z]&#x27;</span><br></code></pre></td></tr></table></figure><p>å‘½ä»¤åˆ†è§£ï¼š</p><ul><li><code>!j</code> è¿è¡Œå¸¸è§„å‘½ä»¤è¿‡æ»¤å™¨è¿ç®—ç¬¦ï¼ˆ<code>!</code>ï¼‰ï¼Œç›®æ ‡æ˜¯å½“å‰è¡ŒåŠå…¶ä¸‹æ–¹çš„è¡Œã€‚å›æƒ³ä¸€ä¸‹ï¼Œå› ä¸ºå®ƒæ˜¯æ™®é€šæ¨¡å¼è¿ç®—ç¬¦ï¼Œæ‰€ä»¥é€‚ç”¨è¯­æ³•è§„åˆ™â€åŠ¨è¯+åè¯â€ã€‚</li><li><code>tr &#39;[a-z]&#39; &#39;[A-Z]&#39;</code>å°†å°å†™å­—æ¯æ›¿æ¢ä¸ºå¤§å†™å­—æ¯ã€‚</li></ul><p>filter normalå‘½ä»¤ä»…é€‚ç”¨äºè‡³å°‘ä¸€è¡Œä»¥ä¸Šçš„motionæˆ–è‡³å°‘ä¸€è¡Œä»¥ä¸Šçš„æ–‡æœ¬å¯¹è±¡ã€‚å¦‚æœæ‚¨å°è¯•è¿è¡Œ<code>!iwtr&#39;[az]&#39;&#39;[AZ]&#39;</code>ï¼ˆåœ¨å†…éƒ¨å•è¯ä¸Šæ‰§è¡Œ<code>tr</code>ï¼‰ï¼Œæ‚¨ä¼šå‘ç°å®ƒåœ¨æ•´ä¸ªè¡Œä¸Šéƒ½åº”ç”¨äº†trå‘½ä»¤ï¼Œè€Œä¸æ˜¯å…‰æ ‡æ‰€åœ¨çš„å•è¯ã€‚</p><h2 id="èªæ˜åœ°å­¦ä¹ å¤–éƒ¨å‘½ä»¤"><a href="#èªæ˜åœ°å­¦ä¹ å¤–éƒ¨å‘½ä»¤" class="headerlink" title="èªæ˜åœ°å­¦ä¹ å¤–éƒ¨å‘½ä»¤"></a>èªæ˜åœ°å­¦ä¹ å¤–éƒ¨å‘½ä»¤</h2><p>Vimä¸æ˜¯IDEã€‚å®ƒæ˜¯ä¸€ç§è½»é‡çº§çš„æ¨¡å¼ç¼–è¾‘å™¨ï¼Œé€šè¿‡è®¾è®¡å¯ä»¥é«˜åº¦æ‰©å±•ã€‚ç”±äºè¿™ç§å¯æ‰©å±•æ€§ï¼Œæ‚¨å¯ä»¥è½»æ¾è®¿é—®ç³»ç»Ÿä¸­çš„ä»»ä½•å¤–éƒ¨å‘½ä»¤ã€‚è¿™æ ·ï¼ŒVimç¦»æˆä¸ºIDEä»…ä¸€æ­¥ä¹‹é¥ã€‚æœ‰äººè¯´Unixç³»ç»Ÿæ˜¯æœ‰å²ä»¥æ¥çš„ç¬¬ä¸€ä¸ªIDEã€‚</p><p>Bang å‘½ä»¤çš„æœ‰ç”¨ç¨‹åº¦ä¸æ‚¨çŸ¥é“å¤šå°‘ä¸ªå¤–éƒ¨å‘½ä»¤ç›¸å…³ã€‚å¦‚æœæ‚¨çš„å¤–éƒ¨å‘½ä»¤çŸ¥è¯†æœ‰é™ï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚æˆ‘è¿˜æœ‰å¾ˆå¤šä¸œè¥¿è¦å­¦ã€‚ä»¥æ­¤ä½œä¸ºæŒç»­å­¦ä¹ çš„åŠ¨åŠ›ã€‚æ¯å½“æ‚¨éœ€è¦è¿‡æ»¤æ–‡æœ¬æ—¶ï¼Œè¯·æŸ¥çœ‹æ˜¯å¦å­˜åœ¨å¯ä»¥è§£å†³é—®é¢˜çš„å¤–éƒ¨å‘½ä»¤ã€‚ä¸å¿…æ‹…å¿ƒæŒæ¡æ‰€æœ‰çš„å‘½ä»¤ã€‚åªéœ€å­¦ä¹ å®Œæˆå½“å‰ä»»åŠ¡æ‰€éœ€çš„å†…å®¹å³å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-å‘½ä»¤è¡Œæ¨¡å¼</title>
    <link href="/2022/04/05/Vim/ch15_command-line_mode/"/>
    <url>/2022/04/05/Vim/ch15_command-line_mode/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬15ç« -å‘½ä»¤è¡Œæ¨¡å¼"><a href="#ç¬¬15ç« -å‘½ä»¤è¡Œæ¨¡å¼" class="headerlink" title="ç¬¬15ç«  å‘½ä»¤è¡Œæ¨¡å¼"></a>ç¬¬15ç«  å‘½ä»¤è¡Œæ¨¡å¼</h1><p>åœ¨å‰ä¸‰ç« ä¸­ï¼Œæ‚¨å·²ç»å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨æœç´¢å‘½ä»¤(<code>/</code>, <code>?</code>)ã€æ›¿æ¢å‘½ä»¤(<code>:s</code>)ã€å…¨å±€å‘½ä»¤(<code>:g</code>)ï¼Œä»¥åŠå¤–éƒ¨å‘½ä»¤(<code>!</code>)ã€‚è¿™äº›éƒ½æ˜¯å‘½ä»¤è¡Œæ¨¡å¼å‘½ä»¤çš„ä¸€äº›ä¾‹å­ã€‚</p><p>åœ¨æœ¬ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å‘½ä»¤è¡Œæ¨¡å¼çš„æ›´å¤šæŠ€å·§ã€‚</p><h2 id="è¿›å…¥å’Œé€€å‡ºå‘½ä»¤è¡Œæ¨¡å¼"><a href="#è¿›å…¥å’Œé€€å‡ºå‘½ä»¤è¡Œæ¨¡å¼" class="headerlink" title="è¿›å…¥å’Œé€€å‡ºå‘½ä»¤è¡Œæ¨¡å¼"></a>è¿›å…¥å’Œé€€å‡ºå‘½ä»¤è¡Œæ¨¡å¼</h2><p>å‘½ä»¤è¡Œæ¨¡å¼æœ¬èº«ä¹Ÿæ˜¯ä¸€ç§æ¨¡å¼ï¼Œå°±åƒæ™®é€šæ¨¡å¼ã€è¾“å…¥æ¨¡å¼ã€å¯è§†æ¨¡å¼ä¸€æ ·ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œå…‰æ ‡å°†è½¬åˆ°å±å¹•åº•éƒ¨ï¼Œæ­¤æ—¶æ‚¨å¯ä»¥è¾“å…¥ä¸åŒçš„å‘½ä»¤ã€‚</p><p>æœ‰ 4 ç§è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼çš„æ–¹å¼ï¼š</p><ul><li>æœç´¢å‘½ä»¤ (<code>/</code>, <code>?</code>)</li><li>å‘½ä»¤è¡ŒæŒ‡ä»¤ (<code>:</code>)</li><li>å¤–éƒ¨å‘½ä»¤ (<code>!</code>)</li></ul><p>æ‚¨å¯ä»¥ä»æ­£å¸¸æ¨¡å¼æˆ–å¯è§†æ¨¡å¼è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ã€‚</p><p>è‹¥è¦ç¦»å¼€å‘½ä»¤è¡Œæ¨¡å¼ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>&lt;esc&gt;</code>ã€<code>Ctrl-c</code>ã€<code>Ctrl-[</code>ã€‚</p><p><strong>æœ‰æ—¶å…¶ä»–èµ„æ–™å¯èƒ½ä¼šå°†â€å‘½ä»¤è¡ŒæŒ‡ä»¤â€ç§°ä¸ºâ€Ex å‘½ä»¤â€ï¼Œå°†â€å¤–éƒ¨å‘½ä»¤â€ç§°ä¸ºâ€è¿‡æ»¤å‘½ä»¤â€æˆ–è€…â€å¹å·è¿ç®—ç¬¦â€ã€‚</strong></p><h2 id="é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤"><a href="#é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤" class="headerlink" title="é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤"></a>é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤</h2><p>æ‚¨å¯ä»¥ç”¨ <code>@:</code> æ¥é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤è¡ŒæŒ‡ä»¤æˆ–å¤–éƒ¨å‘½ä»¤ã€‚</p><p>å¦‚æœæ‚¨åˆšè¿è¡Œ <code>:s/foo/bar/g</code>ï¼Œæ‰§è¡Œ <code>@:</code> å°†é‡å¤è¯¥æ›¿æ¢ã€‚å¦‚æœæ‚¨åˆšè¿è¡Œ <code>:.!tr &#39;[a-z]&#39; &#39;[A-Z]&#39;</code>ï¼Œæ‰§è¡Œ <code>@:</code> å°†é‡å¤ä¸Šä¸€æ¬¡å¤–éƒ¨å‘½ä»¤è½¬æ¢è¿‡æ»¤ã€‚</p><h2 id="å‘½ä»¤è¡Œæ¨¡å¼å¿«æ·é”®"><a href="#å‘½ä»¤è¡Œæ¨¡å¼å¿«æ·é”®" class="headerlink" title="å‘½ä»¤è¡Œæ¨¡å¼å¿«æ·é”®"></a>å‘½ä»¤è¡Œæ¨¡å¼å¿«æ·é”®</h2><p>åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>Left</code> æˆ– <code>Right</code> æ–¹å‘é”®ï¼Œæ¥å·¦å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚</p><p>å¦‚æœéœ€è¦ç§»åŠ¨ä¸€ä¸ªå•è¯ï¼Œä½¿ç”¨ <code>Shift-Left</code> æˆ– <code>Shift-Right</code> (åœ¨æŸäº›æ“ä½œç³»ç»Ÿä¸­ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ <code>Ctrl</code> è€Œä¸æ˜¯ <code>Shift</code>)ã€‚</p><p>ä½¿ç”¨ <code>Ctrl-b</code>ç§»åŠ¨åˆ°è¯¥è¡Œçš„å¼€å§‹ï¼Œä½¿ç”¨ <code>Ctrl-e</code>ç§»åŠ¨åˆ°è¯¥è¡Œçš„ç»“æŸã€‚</p><p>å’Œè¾“å…¥æ¨¡å¼ç±»ä¼¼ï¼Œåœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸­ï¼Œæœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥åˆ é™¤å­—ç¬¦ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><pre><code class="hljs">Ctrl-h    åˆ é™¤ä¸€ä¸ªå­—ç¬¦<br>Ctrl-w    åˆ é™¤ä¸€ä¸ªå•è¯<br>Ctrl-u    åˆ é™¤ä¸€æ•´è¡Œ<br></code></pre></td></tr></table></figure><p>æœ€åï¼Œå¦‚æœæ‚¨æƒ³åƒç¼–è¾‘æ–‡æœ¬æ–‡ä»¶ä¸€æ ·æ¥ç¼–è¾‘å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ <code>Ctrl-f</code>ã€‚</p><p>è¿™æ ·è¿˜å¯ä»¥æŸ¥çœ‹è¿‡å¾€çš„å‘½ä»¤ï¼Œå¹¶åœ¨è¿™ç§â€å‘½ä»¤è¡Œç¼–è¾‘çš„æ™®é€šæ¨¡å¼â€ä¸­ç¼–è¾‘å®ƒä»¬ï¼ŒåŒæ—¶è¿˜èƒ½æŒ‰ä¸‹ <code>Enter</code> æ¥è¿è¡Œå®ƒä»¬ã€‚</p><h2 id="å¯„å­˜å™¨å’Œè‡ªåŠ¨è¡¥å…¨"><a href="#å¯„å­˜å™¨å’Œè‡ªåŠ¨è¡¥å…¨" class="headerlink" title="å¯„å­˜å™¨å’Œè‡ªåŠ¨è¡¥å…¨"></a>å¯„å­˜å™¨å’Œè‡ªåŠ¨è¡¥å…¨</h2><p>å½“å¤„äºå‘½ä»¤è¡Œæ¨¡å¼æ—¶ï¼Œæ‚¨å¯ä»¥åƒåœ¨æ’å…¥æ¨¡å¼ä¸­ä¸€æ ·ä½¿ç”¨ <code>Ctrl-r</code> ä»Vimå¯„å­˜å™¨ä¸­æ’å…¥æ–‡æœ¬ã€‚å¦‚æœæ‚¨åœ¨å¯„å­˜å™¨ a ä¸­å­˜å‚¨äº†å­—ç¬¦ä¸² â€œfooâ€ ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œ <code>Ctrl-r a</code> ä»å¯„å­˜å™¨aä¸­æ’å…¥è¯¥æ–‡æœ¬ã€‚ä»»ä½•åœ¨æ’å…¥æ¨¡å¼ä¸­æ‚¨å¯ä»¥ä»å¯„å­˜å™¨ä¸­è·å–çš„å†…å®¹ï¼Œåœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸­æ‚¨ä¹Ÿå¯ä»¥è·å–ã€‚</p><p>å¦å¤–ï¼Œæ‚¨ä¹Ÿå¯ä»¥æŒ‰ <code>Ctrl-r Ctrl-w</code> è·å–å½“å‰å…‰æ ‡ä¸‹çš„å•è¯ï¼ˆæŒ‰ <code>Ctrl-r Ctrl-A</code> è·å–å½“å‰å…‰æ ‡ä¸‹çš„è¯ç»„ï¼‰ã€‚è¿˜å¯ä»¥æŒ‰ <code>Ctrl-r Ctlr-l</code> è·å–å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œã€‚æŒ‰ <code>Ctrl-r Ctrl-f</code> è·å–å…‰æ ‡ä¸‹çš„æ–‡ä»¶åã€‚</p><p>æ‚¨ä¹Ÿå¯ä»¥å¯¹å·²å­˜åœ¨çš„å‘½ä»¤ä½¿ç”¨è‡ªåŠ¨è¡¥å…¨ã€‚è¦è‡ªåŠ¨è¡¥å…¨ <code>echo</code> å‘½ä»¤ï¼Œå½“å¤„äºå‘½ä»¤è¡Œæ¨¡å¼æ—¶ï¼Œé¦–å…ˆè¾“å…¥ â€œecâ€ï¼Œæ¥ç€æŒ‰ä¸‹ <code>&lt;Tab&gt;</code>ï¼Œæ­¤æ—¶æ‚¨åº”è¯¥èƒ½åœ¨å·¦ä¸‹è§’çœ‹åˆ°ä¸€äº› â€œecâ€ å¼€å¤´çš„ Vim å‘½ä»¤ï¼ˆä¾‹å¦‚ï¼š<code>echo echoerr echohl echomsg econ</code>ï¼‰ã€‚æŒ‰ä¸‹ <code>&lt;Tab&gt;</code> æˆ– <code>Ctrl-n</code> å¯ä»¥è·³åˆ°ä¸‹ä¸€ä¸ªé€‰é¡¹ã€‚æŒ‰ä¸‹ <code>&lt;Shift-Tab&gt;</code> æˆ– <code>Ctrl-p</code> å¯ä»¥å›åˆ°ä¸Šä¸€ä¸ªé€‰é¡¹ã€‚</p><p>ä¸€äº›å‘½ä»¤è¡ŒæŒ‡ä»¤æ¥å—æ–‡ä»¶åä½œä¸ºå‚æ•°ã€‚<code>edit</code> å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œè¿™æ—¶å€™æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªåŠ¨è¡¥å…¨ã€‚å½“è¾“å…¥ <code>:e </code> åï¼ˆä¸è¦å¿˜è®°ç©ºæ ¼äº†ï¼‰ï¼ŒæŒ‰ä¸‹ <code>&lt;Tab&gt;</code>ï¼ŒVim å°†åˆ—å‡ºæ‰€æœ‰ç›¸å…³çš„æ–‡ä»¶åï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥è¿›è¡Œé€‰æ‹©è€Œä¸å¿…å®Œæ•´çš„è¾“å…¥å®ƒä»¬ã€‚</p><h2 id="å†å²è®°å½•çª—å£"><a href="#å†å²è®°å½•çª—å£" class="headerlink" title="å†å²è®°å½•çª—å£"></a>å†å²è®°å½•çª—å£</h2><p>æ‚¨å¯ä»¥æŸ¥çœ‹å‘½ä»¤è¡ŒæŒ‡ä»¤å’Œæœç´¢é¡¹çš„å†å²è®°å½•ï¼ˆè¦ç¡®ä¿åœ¨è¿è¡Œ <code>vim --version</code> æ—¶ï¼ŒVim çš„ç¼–è¯‘é€‰é¡¹ä¸­å«æœ‰<code>+cmdline_hist</code>ï¼‰ã€‚</p><p>è¿è¡Œ <code>:his :</code> æ¥æŸ¥çœ‹å‘½ä»¤è¡ŒæŒ‡ä»¤çš„å†å²è®°å½•ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">##  cmd History</span><br><span class="hljs-number">2</span>  e file1.txt<br><span class="hljs-number">3</span>  g<span class="hljs-regexp">/foo/</span>d<br><span class="hljs-number">4</span>  s<span class="hljs-regexp">/foo/</span>bar/g<br></code></pre></td></tr></table></figure><p>Vim åˆ—å‡ºäº†æ‚¨è¿è¡Œçš„æ‰€æœ‰ <code>:</code> å‘½ä»¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒVim å­˜å‚¨æœ€å 50 ä¸ªå‘½ä»¤ã€‚è¿è¡Œ <code>:set history=100</code> å¯ä»¥å°† Vim è®°ä½çš„æ¡ç›®æ€»æ•°æ›´æ”¹ä¸º 100ã€‚</p><p>ä¸€ä¸ªæ›´æœ‰ç”¨çš„åšæ³•æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œå†å²è®°å½•çª—å£ï¼ŒæŒ‰<code>q:</code>å°†ä¼šæ‰“å¼€ä¸€ä¸ªå¯æœç´¢ã€å¯ç¼–è¾‘çš„å†å²è®°å½•çª—å£ã€‚å‡è®¾æŒ‰ä¸‹<code>q:</code>åæ‚¨æœ‰å¦‚ä¸‹çš„è¡¨è¾¾å¼ï¼š</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">51 </span> s/verylongsubstitutionpattern/pancake/g<br><span class="hljs-symbol">52 </span> his :<br><span class="hljs-symbol">53 </span> wq<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨å½“å‰ä»»åŠ¡æ˜¯æ‰§è¡Œ <code>s/verylongsubstitutionpattern/donut/g</code>ï¼ˆâ€pancakeâ€æ¢æˆäº†â€donutâ€ï¼‰ï¼Œä¸ºä»€ä¹ˆä¸å¤ç”¨ <code>s/verylongsubstitutionpattern/pancake/g</code> å‘¢ï¼Ÿæ¯•ç«Ÿï¼Œä¸¤æ¡å‘½ä»¤å”¯ä¸€ä¸åŒçš„æ˜¯æ›¿æ¢çš„å•è¯ï¼Œâ€donutâ€ vs â€œpancakeâ€ ï¼Œæ‰€æœ‰å…¶ä»–çš„å†…å®¹éƒ½æ˜¯ç›¸åŒçš„ã€‚</p><p>å½“æ‚¨è¿è¡Œ <code>q:</code>åï¼Œåœ¨å†å²è®°å½•ä¸­æ‰¾åˆ° <code>s/verylongsubstitutionpattern/pancake/g</code>ï¼ˆåœ¨è¿™ä¸ªç¯å¢ƒä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Vimå¯¼èˆªï¼‰ï¼Œç„¶åç›´æ¥ç¼–è¾‘å®ƒï¼ åœ¨å†å²è®°å½•çª—å£ä¸­å°† â€œpancakeâ€ æ”¹ä¸º â€œdonutâ€ ï¼Œç„¶åæŒ‰ <code>&lt;Enter</code>ã€‚Vimç«‹åˆ»æ‰§è¡Œ <code>s/verylongsubstitutionpattern/donut/g</code> å‘½ä»¤ï¼Œè¶…çº§æ–¹ä¾¿ï¼</p><p>ç±»ä¼¼åœ°ï¼Œè¿è¡Œ <code>:his /</code> æˆ– <code>:his ?</code> å¯ä»¥æŸ¥çœ‹æœç´¢è®°å½•ã€‚è¦æƒ³æ‰“å¼€æ‚¨å¯ä»¥ç›´æ¥æœç´¢å’Œç¼–è¾‘çš„æœç´¢å†å²è®°å½•çª—å£ï¼Œæ‚¨å¯ä»¥è¿è¡Œ <code>q/</code> å’Œ <code>q?</code>ã€‚</p><p>è¦é€€å‡ºè¿™ä¸ªçª—å£ï¼ŒæŒ‰ <code>Ctrl-c</code>, <code>Ctrl-w c</code>, æˆ–è¾“å…¥ <code>:quit</code>ã€‚</p><h2 id="æ›´å¤šå‘½ä»¤è¡ŒæŒ‡ä»¤"><a href="#æ›´å¤šå‘½ä»¤è¡ŒæŒ‡ä»¤" class="headerlink" title="æ›´å¤šå‘½ä»¤è¡ŒæŒ‡ä»¤"></a>æ›´å¤šå‘½ä»¤è¡ŒæŒ‡ä»¤</h2><p>Vimæœ‰å‡ ç™¾ä¸ªå†…ç½®æŒ‡ä»¤ï¼Œè¦æŸ¥çœ‹Vimçš„æ‰€æœ‰æŒ‡ä»¤ï¼Œæ‰§è¡Œ <code>:h ex-cmd-index</code> æˆ– <code>:h :index</code>ã€‚</p><h2 id="èªæ˜åœ°å­¦ä¹ å‘½ä»¤è¡Œæ¨¡å¼"><a href="#èªæ˜åœ°å­¦ä¹ å‘½ä»¤è¡Œæ¨¡å¼" class="headerlink" title="èªæ˜åœ°å­¦ä¹ å‘½ä»¤è¡Œæ¨¡å¼"></a>èªæ˜åœ°å­¦ä¹ å‘½ä»¤è¡Œæ¨¡å¼</h2><p>å¯¹æ¯”å…¶ä»–ä¸‰ç§æ¨¡å¼ï¼Œå‘½ä»¤è¡Œæ¨¡å¼å°±åƒæ˜¯æ–‡æœ¬ç¼–è¾‘ä¸­çš„ç‘å£«å†›åˆ€ã€‚å¯¥ä¸¾å‡ ä¾‹ï¼Œæ‚¨å¯ä»¥ç¼–è¾‘æ–‡æœ¬ã€ä¿®æ”¹æ–‡ä»¶å’Œæ‰§è¡Œå‘½ä»¤ã€‚æœ¬ç« æ˜¯å‘½ä»¤è¡Œæ¨¡å¼çš„é›¶ç¢çŸ¥è¯†çš„é›†åˆã€‚åŒæ—¶ï¼ŒVim æ¨¡å¼çš„ä»‹ç»ä¹Ÿèµ°å‘å°¾å£°ã€‚ç°åœ¨ï¼Œæ‚¨å·²ç»çŸ¥é“å¦‚ä½•ä½¿ç”¨æ™®é€šã€è¾“å…¥ã€å¯è§†ä»¥åŠå‘½ä»¤è¡Œæ¨¡å¼ï¼Œæ‚¨å¯ä»¥æ¯”ä»¥å¾€æ›´å¿«åœ°ä½¿ç”¨ Vim æ¥ç¼–è¾‘æ–‡æœ¬äº†ã€‚</p><p>æ˜¯æ—¶å€™ç¦»å¼€ Vim æ¨¡å¼ï¼Œæ¥äº†è§£å¦‚ä½•ä½¿ç”¨ Vim æ ‡è®°è¿›è¡Œæ›´å¿«çš„å¯¼èˆªäº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-æ ‡ç­¾</title>
    <link href="/2022/04/05/Vim/ch16_tags/"/>
    <url>/2022/04/05/Vim/ch16_tags/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬16ç« -æ ‡ç­¾"><a href="#ç¬¬16ç« -æ ‡ç­¾" class="headerlink" title="ç¬¬16ç«  æ ‡ç­¾"></a>ç¬¬16ç«  æ ‡ç­¾</h1><p>å¿«é€Ÿè½¬åˆ°ä»»æ„å®šä¹‰å¤„ï¼Œæ˜¯æ–‡æœ¬ç¼–è¾‘ä¸­ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç‰¹æ€§ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Vim æ ‡ç­¾æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><h2 id="æ ‡ç­¾æ¦‚è¿°"><a href="#æ ‡ç­¾æ¦‚è¿°" class="headerlink" title="æ ‡ç­¾æ¦‚è¿°"></a>æ ‡ç­¾æ¦‚è¿°</h2><p>å‡è®¾æœ‰äººç»™äº†æ‚¨ä¸€ä¸ªæ–°çš„ä»£ç åº“ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span> = One.<span class="hljs-built_in">new</span><br><span class="hljs-literal">one</span>.donut<br></code></pre></td></tr></table></figure><p><code>One</code>ï¼Ÿ<code>donut</code>ï¼Ÿå‘ƒï¼Œå¯¹äºå½“æ—¶ç¼–å†™ä»£ç çš„å¼€å‘è€…è€Œè¨€ï¼Œè¿™äº›ä»£ç çš„å«ä¹‰å¯èƒ½æ˜¾è€Œæ˜“è§ã€‚é—®é¢˜æ˜¯å½“æ—¶çš„å¼€å‘è€…å·²ç»ä¸åœ¨äº†ï¼Œç°åœ¨è¦ç”±æ‚¨æ¥ç†è§£è¿™äº›è´¹è§£çš„ä»£ç ã€‚è€Œè·Ÿéšæœ‰<code>One</code> å’Œ <code>donut</code>å®šä¹‰çš„æºä»£ç ï¼Œæ˜¯å¸®åŠ©æ‚¨ç†è§£çš„ä¸€ä¸ªæœ‰æ•ˆæ–¹æ³•ã€‚</p><p>æ‚¨å¯ä»¥ä½¿ç”¨<code>fzf</code> æˆ– <code>grep</code>æ¥æœç´¢å®ƒä»¬ï¼Œä½†è¿™ç§æƒ…å†µä¸‹ï¼Œä½†ä½¿ç”¨æ ‡ç­¾å°†æ›´å¿«ã€‚</p><p>æŠŠæ ‡ç­¾æƒ³è±¡æˆåœ°å€ç°¿ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Name</span>    Address<br><span class="hljs-attribute">Iggy1</span>   <span class="hljs-number">1234</span> Cool St, <span class="hljs-number">11111</span><br><span class="hljs-attribute">Iggy2</span>   <span class="hljs-number">9876</span> Awesome Ave, <span class="hljs-number">2222</span><br></code></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæ ‡ç­¾å¯ä¸æ˜¯å­˜å‚¨ç€â€œå§“å-åœ°å€â€å¯¹ï¼Œè€Œæ˜¯â€œå®šä¹‰-åœ°å€â€å¯¹ã€‚</p><p>å‡è®¾æ‚¨åœ¨ä¸€ä¸ªç›®å½•ä¸­æœ‰ä¸¤ä¸ª Ruby æ–‡ä»¶ï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">## one.rb<br><span class="hljs-keyword">class</span> <span class="hljs-symbol">One</span><br>  <span class="hljs-symbol">def</span> <span class="hljs-symbol">initialize</span><br>    <span class="hljs-symbol">puts</span> &quot;<span class="hljs-symbol">Initialized</span>&quot;<br>  <span class="hljs-symbol">end</span><br><br>  <span class="hljs-symbol">def</span> <span class="hljs-symbol">donut</span><br>    <span class="hljs-symbol">puts</span> &quot;<span class="hljs-symbol">Bar</span>&quot;<br>  <span class="hljs-symbol">end</span><br><span class="hljs-symbol">end</span><br></code></pre></td></tr></table></figure><p>ä»¥åŠ</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-comment">## two.rb</span><br><span class="hljs-built_in">require</span> <span class="hljs-string">&#x27;./one&#x27;</span><br><br><span class="hljs-literal">one</span> = One.<span class="hljs-built_in">new</span><br><span class="hljs-literal">one</span>.donut<br></code></pre></td></tr></table></figure><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>Ctrl-]</code>è·³è½¬åˆ°å®šä¹‰ã€‚åœ¨<code>two.rb</code>ä¸­ï¼Œè½¬åˆ°<code>one.donut</code>æ‰€åœ¨è¡Œï¼Œå°†å…‰æ ‡ç§»åˆ°<code>donut</code>å¤„ï¼ŒæŒ‰ä¸‹<code>Ctrl-]</code>ã€‚</p><p>å“¦è±ï¼ŒVim æ‰¾ä¸åˆ°æ ‡ç­¾æ–‡ä»¶ï¼Œæ‚¨éœ€è¦å…ˆç”Ÿæˆå®ƒã€‚</p><h2 id="æ ‡ç­¾ç”Ÿæˆå™¨"><a href="#æ ‡ç­¾ç”Ÿæˆå™¨" class="headerlink" title="æ ‡ç­¾ç”Ÿæˆå™¨"></a>æ ‡ç­¾ç”Ÿæˆå™¨</h2><p>ç°ä»£ Vim ä¸è‡ªå¸¦æ ‡ç­¾ç”Ÿæˆå™¨ï¼Œæ‚¨éœ€è¦é¢å¤–ä¸‹è½½å®ƒã€‚æœ‰å‡ ä¸ªé€‰é¡¹å¯ä¾›é€‰æ‹©ï¼š</p><ul><li>ctags &#x3D; ä»…ç”¨äº Cï¼ŒåŸºæœ¬éšå¤„å¯è§ã€‚</li><li>exuberant ctags &#x3D; æœ€æµè¡Œçš„æ ‡ç­¾ç”Ÿæˆå™¨ä¹‹ä¸€ï¼Œæ”¯æŒè®¸å¤šè¯­è¨€ã€‚</li><li>universal ctags &#x3D; å’Œ exuberant ctags ç±»ä¼¼ï¼Œä½†æ¯”å®ƒæ›´æ–°ã€‚</li><li>etags &#x3D; ç”¨äº Emacsï¼Œå—¯â€¦â€¦</li><li>JTags &#x3D; Java</li><li>ptags.py &#x3D; Python</li><li>ptags &#x3D; Perl</li><li>gnatxref &#x3D; Ada</li></ul><p>å¦‚æœæ‚¨æŸ¥çœ‹ Vim åœ¨çº¿æ•™ç¨‹ï¼Œæ‚¨ä¼šå‘ç°è®¸å¤šéƒ½ä¼šæ¨è <a href="http://ctags.sourceforge.net/">exuberant ctags</a>ï¼Œå®ƒæ”¯æŒ <a href="http://ctags.sourceforge.net/languages.html">41 ç§ç¼–ç¨‹è¯­è¨€</a>ï¼Œæˆ‘ç”¨è¿‡å®ƒï¼ŒæŒºä¸é”™çš„ã€‚ä½†è‡ª2009å¹´ä»¥æ¥ä¸€ç›´æ²¡æœ‰ç»´æŠ¤ï¼Œå› æ­¤ Universal ctags æ›´å¥½äº›ï¼Œå®ƒå’Œ exuberant ctags ç›¸ä¼¼ï¼Œå¹¶ä»åœ¨ç»´æŠ¤ã€‚</p><p>æˆ‘ä¸æ‰“ç®—è¯¦ç»†ä»‹ç»å¦‚ä½•å®‰è£… Universal ctagsï¼Œæ‚¨å¯ä»¥åœ¨ <a href="https://github.com/universal-ctags/ctags">universal ctags</a> ä»“åº“äº†è§£æ›´å¤šè¯´æ˜ã€‚</p><p>å‡è®¾æ‚¨å·²ç»å®‰è£…å¥½äº†ctagsï¼Œæ¥ä¸‹æ¥ï¼Œç”Ÿæˆä¸€ä¸ªåŸºæœ¬çš„æ ‡ç­¾æ–‡ä»¶ã€‚è¿è¡Œï¼š</p><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang">ctags -R .<br></code></pre></td></tr></table></figure><p> <code>R</code> é€‰é¡¹å‘Šè¯‰ <code>ctags</code> ä»å½“å‰ä½ç½® (<code>.</code>) é€’å½’æ‰«ææ–‡ä»¶ã€‚ç¨åï¼Œæ‚¨åº”è¯¥åœ¨å½“å‰æ–‡ä»¶å¤¹çœ‹åˆ°ä¸€ä¸ª<code>tags</code> æ–‡ä»¶ï¼Œé‡Œé¢æ‚¨å°†çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹ï¼š</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-title">!_TAG_FILE_FORMAT</span><span class="hljs-number">2</span>/extended format<span class="hljs-comment">; --format=1 will not append ;&quot; to lines/</span><br><span class="hljs-title">!_TAG_FILE_SORTED</span><span class="hljs-number">1</span>/<span class="hljs-number">0</span><span class="hljs-operator">=</span>unsorted<span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span>sorted<span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-operator">=</span>foldcase/<br><span class="hljs-title">!_TAG_OUTPUT_FILESEP</span>slash/slash <span class="hljs-keyword">or</span> backslash/<br><span class="hljs-title">!_TAG_OUTPUT_MODE</span>u-ctags/u-ctags <span class="hljs-keyword">or</span> e-ctags/<br><span class="hljs-title">!_TAG_PATTERN_LENGTH_LIMIT</span><span class="hljs-number">96</span>/<span class="hljs-number">0</span> for no limit/<br><span class="hljs-title">!_TAG_PROGRAM_AUTHOR</span>Universal Ctags Team//<br><span class="hljs-title">!_TAG_PROGRAM_NAME</span>Universal Ctags/Derived from Exuberant Ctags/<br><span class="hljs-title">!_TAG_PROGRAM_URL</span>&lt;https://ctags.io/&gt;/official site/<br><span class="hljs-title">!_TAG_PROGRAM_VERSION</span><span class="hljs-number">0.0</span>.<span class="hljs-number">0</span>/b<span class="hljs-number">43</span>eb<span class="hljs-number">39</span>/<br>One<span class="hljs-keyword">one</span>.rb/^class One$/<span class="hljs-comment">;&quot;c</span><br>donut<span class="hljs-keyword">one</span>.rb/^  def donut$/<span class="hljs-comment">;&quot;fclass:One</span><br>initialize<span class="hljs-keyword">one</span>.rb/^  def initialize$/<span class="hljs-comment">;&quot;fclass:One</span><br></code></pre></td></tr></table></figure><p>æ ¹æ® Vim è®¾ç½®å’Œ ctag ç”Ÿæˆå™¨çš„ä¸åŒï¼Œæ‚¨çš„<code>tags</code> æ–‡ä»¶å¯èƒ½ä¼šæœ‰äº›ä¸åŒã€‚ä¸€ä¸ªæ ‡ç­¾æ–‡ä»¶ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šæ ‡ç­¾å…ƒæ•°æ®å’Œæ ‡ç­¾åˆ—è¡¨ã€‚é‚£äº›æ ‡ç­¾å…ƒæ•°æ® (<code>!TAG_FILE...</code>) é€šå¸¸ç”± ctags ç”Ÿæˆå™¨æ§åˆ¶ã€‚è¿™é‡Œæˆ‘ä¸æ‰“ç®—ä»‹ç»å®ƒä»¬ï¼Œæ‚¨å¯ä»¥éšæ„æŸ¥é˜…æ–‡æ¡£ã€‚æ ‡ç­¾åˆ—è¡¨æ˜¯ä¸€ä¸ªç”±æ‰€æœ‰å®šä¹‰ç»„æˆçš„åˆ—è¡¨ï¼Œç”±ctagså»ºç«‹ç´¢å¼•ã€‚</p><p>ç°åœ¨å›åˆ° <code>two.rb</code>ï¼Œå°†å…‰æ ‡ç§»è‡³ <code>donut</code>ï¼Œå†è¾“å…¥<code>Ctrl-]</code>ï¼ŒVim å°†å¸¦æ‚¨è½¬åˆ° <code>one.rb</code> æ–‡ä»¶é‡Œ<code>def donut</code> æ‰€åœ¨çš„è¡Œä¸Šã€‚æˆåŠŸå•¦ï¼ä½† Vim æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p><h2 id="è§£å‰–æ ‡ç­¾æ–‡ä»¶"><a href="#è§£å‰–æ ‡ç­¾æ–‡ä»¶" class="headerlink" title="è§£å‰–æ ‡ç­¾æ–‡ä»¶"></a>è§£å‰–æ ‡ç­¾æ–‡ä»¶</h2><p>æ¥çœ‹çœ‹<code>donut</code> æ ‡ç­¾é¡¹ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata">donut<span class="hljs-keyword">one</span>.rb/^  def donut$/;&quot;f<span class="hljs-keyword">class</span>:<span class="hljs-keyword">One</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„æ ‡ç­¾é¡¹ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼šä¸€ä¸ª<code>tagname</code>ã€ä¸€ä¸ª<code>tagfile</code>ã€ä¸€ä¸ª<code>tagaddress</code>ï¼Œä»¥åŠæ ‡ç­¾é€‰é¡¹ã€‚</p><ul><li><code>donut</code> æ˜¯ <code>tagname</code>ã€‚å½“å…‰æ ‡åœ¨ â€œdonutâ€ æ—¶ï¼ŒVim æœç´¢æ ‡ç­¾æ–‡ä»¶é‡Œå«æœ‰ â€œdonutâ€ å­—ç¬¦ä¸²çš„ä¸€è¡Œã€‚</li><li><code>one.rb</code> æ˜¯ <code>tagfile</code>ã€‚Vim ä¼šæœå¯» <code>one.rb</code> æ–‡ä»¶ã€‚</li><li><code>/^ def donut$/</code> æ˜¯ <code>tagaddress</code>ã€‚<code>/.../</code> æ˜¯æ¨¡å¼æŒ‡ç¤ºå™¨ã€‚<code>^</code> ä»£è¡¨ä¸€è¡Œä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåé¢è·Ÿç€ä¸¤ä¸ªç©ºæ ¼ï¼Œç„¶åæ˜¯<code>def donut</code>å­—ç¬¦ä¸²ï¼Œæœ€å <code>$</code> ä»£è¡¨ä¸€è¡Œä¸­æœ€åä¸€ä¸ªå…ƒç´ ã€‚</li><li><code>f class:One</code> æ˜¯æ ‡ç­¾é€‰é¡¹ï¼Œå®ƒå‘Šè¯‰ Vimï¼Œ<code>donut</code> æ˜¯ä¸€ç§å‡½æ•° (<code>f</code>)ï¼Œå¹¶ä¸”æ˜¯ <code>One</code> ç±»çš„ä¸€éƒ¨åˆ†ã€‚</li></ul><p>å†çœ‹çœ‹å¦ä¸€ä¸ªæ ‡ç­¾é¡¹ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">One</span><span class="hljs-keyword">one</span>.rb/^<span class="hljs-keyword">class</span> <span class="hljs-keyword">One</span>$/;&quot;c<br></code></pre></td></tr></table></figure><p>è¿™ä¸€è¡Œå’Œ <code>donut</code>ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š</p><ul><li><code>One</code> æ˜¯ <code>tagname</code>ã€‚æ³¨æ„ï¼Œå¯¹äºæ ‡ç­¾ï¼Œç¬¬ä¸€æ¬¡æ‰«æåŒºåˆ†å¤§å°å†™ã€‚å¦‚æœåˆ—è¡¨ä¸­æœ‰ <code>One</code> å’Œ <code>one</code>ï¼Œ Vim ä¼šä¼˜å…ˆè€ƒè™‘ <code>One</code> è€Œä¸æ˜¯ <code>one</code>ã€‚</li><li><code>one.rb</code> æ˜¯ <code>tagfile</code>ã€‚Vim ä¼šæœå¯» <code>one.rb</code> æ–‡ä»¶ã€‚</li><li><code>/^class One$/</code> æ˜¯ <code>tagaddress</code> ã€‚Vim ä¼šæŸ¥æ‰¾ä»¥ <code>class</code> å¼€å¤´ (<code>^</code>) ã€ä»¥ <code>One</code> ç»“å°¾ (<code>$</code>) çš„è¡Œã€‚</li><li><code>c</code> æ˜¯å¯ç”¨æ ‡ç­¾é€‰é¡¹ä¹‹ä¸€ã€‚ç”±äº <code>One</code> æ˜¯ä¸€ä¸ª ruby ç±»è€Œä¸æ˜¯è¿‡ç¨‹ï¼Œå› æ­¤è¢«æ ‡ç­¾ä¸º <code>c</code>ã€‚</li></ul><p>æ ‡ç­¾æ–‡ä»¶çš„å†…å®¹å¯èƒ½ä¸å°½ç›¸åŒï¼Œæ ¹æ®æ‚¨ä½¿ç”¨çš„æ ‡ç­¾ç”Ÿæˆå™¨è€Œå®šã€‚ä½†è‡³å°‘ï¼Œæ ‡ç­¾æ–‡ä»¶å¿…é¡»å…·æœ‰ä»¥ä¸‹æ ¼å¼ä¹‹ä¸€ï¼š</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">1.  </span><span class="hljs-template-variable">&#123;tagname&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;TAB&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;tagfile&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;TAB&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;tagaddress&#125;</span><span class="language-xml"></span><br><span class="language-xml">2.  </span><span class="hljs-template-variable">&#123;tagname&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;TAB&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;tagfile&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;TAB&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;tagaddress&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;term&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;field&#125;</span><span class="language-xml"> ..</span><br></code></pre></td></tr></table></figure><h2 id="æ ‡ç­¾æ–‡ä»¶"><a href="#æ ‡ç­¾æ–‡ä»¶" class="headerlink" title="æ ‡ç­¾æ–‡ä»¶"></a>æ ‡ç­¾æ–‡ä»¶</h2><p>æ‚¨çŸ¥é“ï¼Œåœ¨è¿è¡Œ <code>ctags -R .</code> åï¼Œä¸€ä¸ªæ–° <code>tags</code> æ–‡ä»¶ä¼šè¢«åˆ›å»ºã€‚ä½†æ˜¯ï¼ŒVim æ˜¯å¦‚ä½•çŸ¥é“åœ¨å“ªå„¿æŸ¥æ‰¾æ ‡ç­¾æ–‡ä»¶çš„å‘¢ï¼Ÿ</p><p>å¦‚æœè¿è¡Œ <code>:set tags?</code>ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹è§ <code>tags=./tags,tags</code>ï¼ˆæ ¹æ®æ‚¨çš„ Vim è®¾ç½®ï¼Œå†…å®¹å¯èƒ½æœ‰æ‰€ä¸åŒï¼‰ã€‚å¯¹äº <code>./tags</code>ï¼ŒVim ä¼šåœ¨å½“å‰æ–‡ä»¶æ‰€åœ¨è·¯å¾„æŸ¥æ‰¾æ‰€æœ‰æ ‡ç­¾ï¼›å¯¹äº <code>tags</code>ï¼ŒVim ä¼šåœ¨å½“å‰ç›®å½•ï¼ˆæ‚¨çš„é¡¹ç›®æ ¹è·¯å¾„ï¼‰ä¸­æŸ¥æ‰¾ã€‚</p><p>æ­¤å¤–ï¼Œå¯¹äº <code>./tags</code>ï¼ŒVim ä¼šåœ¨å½“å‰æ–‡ä»¶æ‰€åœ¨è·¯å¾„å†…æŸ¥æ‰¾ä¸€ä¸ªæ ‡ç­¾æ–‡ä»¶ï¼Œæ— è®ºå®ƒè¢«åµŒå¥—å¾—æœ‰å¤šæ·±ã€‚æ¥ä¸‹æ¥ï¼ŒVim ä¼šåœ¨å½“å‰ç›®å½•ï¼ˆé¡¹ç›®æ ¹è·¯å¾„ï¼‰æŸ¥æ‰¾ã€‚Vim åœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹åä¼šåœæ­¢æœç´¢ã€‚</p><p>å¦‚æœæ‚¨çš„ <code>&#39;tags&#39;</code> æ–‡ä»¶æ˜¯ <code>tags=./tags,tags,/user/iggy/mytags/tags</code>ï¼Œé‚£ä¹ˆ Vim åœ¨æœç´¢å®Œ <code>./tags</code> å’Œ <code>tags</code> ç›®å½•åï¼Œè¿˜ä¼šåœ¨ <code>/user/iggy/mytags</code> ç›®å½•å†…æŸ¥æ‰¾ã€‚æ‰€ä»¥æ‚¨å¯ä»¥åˆ†å¼€å­˜æ”¾æ ‡ç­¾æ–‡ä»¶ï¼Œä¸å¿…å°†å®ƒä»¬ç½®äºé¡¹ç›®æ–‡ä»¶å¤¹ä¸­ã€‚</p><p>è¦æ·»åŠ æ ‡ç­¾æ–‡ä»¶ä½ç½®ï¼Œåªéœ€è¦è¿è¡Œï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">set</span> <span class="hljs-keyword">tags</span>+=path/<span class="hljs-keyword">to</span>/my/<span class="hljs-keyword">tags</span>/<span class="hljs-keyword">file</span><br></code></pre></td></tr></table></figure><h2 id="ä¸ºå¤§å‹é¡¹ç›®ç”Ÿæˆæ ‡ç­¾ï¼š"><a href="#ä¸ºå¤§å‹é¡¹ç›®ç”Ÿæˆæ ‡ç­¾ï¼š" class="headerlink" title="ä¸ºå¤§å‹é¡¹ç›®ç”Ÿæˆæ ‡ç­¾ï¼š"></a>ä¸ºå¤§å‹é¡¹ç›®ç”Ÿæˆæ ‡ç­¾ï¼š</h2><p>å¦‚æœæ‚¨å°è¯•åœ¨å¤§å‹é¡¹ç›®ä¸­è¿è¡Œ ctagï¼Œåˆ™å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œå› ä¸º Vim ä¹Ÿä¼šæŸ¥çœ‹æ¯ä¸ªåµŒå¥—ç›®å½•ã€‚å¦‚æœæ‚¨æ˜¯ Javascript å¼€å‘è€…ï¼Œæ‚¨ä¼šçŸ¥é“ <code>node_modules</code> éå¸¸å¤§ã€‚å‡è®¾æ‚¨æœ‰äº”ä¸ªå­é¡¹ç›®ï¼Œæ¯ä¸ªéƒ½åŒ…å«è‡ªå·±çš„ <code>node_modules</code> ç›®å½•ã€‚ä¸€æ—¦è¿è¡Œ <code>ctags -R .</code>ï¼Œctags å°†å°è¯•æ‰«æè¿™5ä¸ª <code>node_modules</code>ã€‚ä½†æ‚¨å¯èƒ½ä¸éœ€è¦ä¸º <code>node_modules</code> è¿è¡Œ ctagã€‚</p><p>å¦‚æœè¦æ’é™¤ <code>node_modules</code> åæ‰§è¡Œ ctagsï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ctags -R --exclude</span>=node_modules .<br></code></pre></td></tr></table></figure><p>è¿™æ¬¡åº”è¯¥åªéœ€è¦ä¸åˆ°ä¸€ç§’é’Ÿçš„æ—¶é—´ã€‚å¦å¤–ï¼Œæ‚¨è¿˜å¯ä»¥å¤šæ¬¡ä½¿ç”¨ <code>exclude</code> é€‰é¡¹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">ctags -R <span class="hljs-attribute">--exclude</span>=.git <span class="hljs-attribute">--exclude</span>=vendor <span class="hljs-attribute">--exclude</span>=node_modules <span class="hljs-attribute">--exclude</span>=db <span class="hljs-attribute">--exclude</span>=log .<br></code></pre></td></tr></table></figure><h2 id="æ ‡ç­¾å¯¼èˆª"><a href="#æ ‡ç­¾å¯¼èˆª" class="headerlink" title="æ ‡ç­¾å¯¼èˆª"></a>æ ‡ç­¾å¯¼èˆª</h2><p>ä»…ä½¿ç”¨ <code>Ctrl-]</code> ä¹ŸæŒºå¥½ï¼Œä½†æˆ‘ä»¬è¿˜å¯ä»¥å¤šå­¦å‡ ä¸ªæŠ€å·§ã€‚å…¶å®ï¼Œæ ‡ç­¾è·³è½¬é”® <code>Ctrl-]</code> è¿˜æœ‰å‘½ä»¤è¡Œæ¨¡å¼ï¼š<code>:tag my-tag</code>ã€‚å¦‚æœæ‚¨è¿è¡Œï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">:<span class="hljs-keyword">tag</span> <span class="hljs-title">donut</span><br></code></pre></td></tr></table></figure><p>Vim å°±ä¼šè·³è½¬è‡³ <code>donut</code> æ–¹æ³•ï¼Œå°±åƒåœ¨ â€œdonutâ€ å­—ç¬¦ä¸²ä¸ŠæŒ‰ <code>Ctrl-]</code> ä¸€æ ·ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ <code>&lt;Tab&gt;</code> æ¥è‡ªåŠ¨è¡¥å…¨å‚æ•°ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">:<span class="hljs-keyword">tag</span> <span class="hljs-title">d</span><span class="hljs-tag">&lt;Tab&gt;</span><br></code></pre></td></tr></table></figure><p>Vim ä¼šåˆ—å‡ºæ‰€æœ‰ä»¥ â€œdâ€ å¼€å¤´çš„æ ‡ç­¾ã€‚å¯¹äºä¸Šé¢çš„å‘½ä»¤ï¼Œç»“æœåˆ™æ˜¯ â€œdonutâ€ã€‚</p><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°å¤šä¸ªåŒåçš„æ–¹æ³•ã€‚æˆ‘ä»¬æ¥æ›´æ–°ä¸‹è¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚å…ˆæ˜¯ <code>one.rb</code>ï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">## one.rb<br><span class="hljs-keyword">class</span> <span class="hljs-symbol">One</span><br>  <span class="hljs-symbol">def</span> <span class="hljs-symbol">initialize</span><br>    <span class="hljs-symbol">puts</span> &quot;<span class="hljs-symbol">Initialized</span>&quot;<br>  <span class="hljs-symbol">end</span><br><br>  <span class="hljs-symbol">def</span> <span class="hljs-symbol">donut</span><br>    <span class="hljs-symbol">puts</span> &quot;<span class="hljs-symbol">one</span> <span class="hljs-symbol">donut</span>&quot;<br>  <span class="hljs-symbol">end</span><br><br>  <span class="hljs-symbol">def</span> <span class="hljs-symbol">pancake</span><br>    <span class="hljs-symbol">puts</span> &quot;<span class="hljs-symbol">one</span> <span class="hljs-symbol">pancake</span>&quot;<br>  <span class="hljs-symbol">end</span><br><span class="hljs-symbol">end</span><br></code></pre></td></tr></table></figure><p>ç„¶å <code>two.rb</code>ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-comment">## two.rb</span><br><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;./one.rb&#x27;</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pancake</span></span><br>  <span class="hljs-string">&quot;Two pancakes&quot;</span><br><span class="hljs-keyword">end</span><br><br>one = <span class="hljs-title class_">One</span>.new<br>one.donut<br>puts pancake<br></code></pre></td></tr></table></figure><p>ç”±äºæ–°æ·»åŠ äº†ä¸€äº›è¿‡ç¨‹ï¼Œå› æ­¤ç¼–å†™å®Œä»£ç åï¼Œä¸è¦å¿˜è®°è¿è¡Œ <code>ctags -R .</code>ã€‚ç°åœ¨ï¼Œæ‚¨æœ‰äº†ä¸¤ä¸ª <code>pancake</code> è¿‡ç¨‹ã€‚å¦‚æœæ‚¨åœ¨ <code>two.rb</code> å†…æŒ‰ä¸‹ <code>Ctrl-]</code>ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p><p>Vim ä¼šè·³è½¬åˆ° <code>two.rb</code> å†…çš„ <code>def pancake</code>ï¼Œè€Œä¸æ˜¯ <code>one.rb</code> çš„ <code>def pancake</code>ã€‚è¿™æ˜¯å› ä¸º Vim è®¤ä¸º <code>two.rb</code> å†…éƒ¨çš„ <code>pancake</code> è¿‡ç¨‹æ¯”å…¶ä»–çš„<code>pancake</code> è¿‡ç¨‹å…·æœ‰æ›´é«˜ä¼˜å…ˆçº§ã€‚</p><h2 id="æ ‡ç­¾ä¼˜å…ˆçº§"><a href="#æ ‡ç­¾ä¼˜å…ˆçº§" class="headerlink" title="æ ‡ç­¾ä¼˜å…ˆçº§"></a>æ ‡ç­¾ä¼˜å…ˆçº§</h2><p>å¹¶éæ‰€æœ‰çš„æ ‡ç­¾éƒ½æœ‰ç€ç›¸åŒçš„åœ°ä½ã€‚ä¸€äº›æ ‡ç­¾æœ‰ç€æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚å¦‚æœæœ‰é‡å¤çš„æ ‡ç­¾é¡¹ï¼ŒVim ä¼šæ£€æŸ¥å…³é”®è¯çš„ä¼˜å…ˆçº§ã€‚é¡ºåºæ˜¯ï¼š</p><ol><li>å½“å‰æ–‡ä»¶ä¸­å®Œå…¨åŒ¹é…çš„é™æ€æ ‡ç­¾ã€‚</li><li>å½“å‰æ–‡ä»¶ä¸­å®Œå…¨åŒ¹é…çš„å…¨å±€æ ‡ç­¾ã€‚</li><li>å…¶ä»–æ–‡ä»¶ä¸­å®Œå…¨åŒ¹é…çš„å…¨å±€æ ‡ç­¾ã€‚</li><li>å…¶ä»–æ–‡ä»¶ä¸­å®Œå…¨åŒ¹é…çš„é™æ€æ ‡ç­¾ã€‚</li><li>å½“å‰æ–‡ä»¶ä¸­ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…çš„é™æ€æ ‡ç­¾ã€‚</li><li>å½“å‰æ–‡ä»¶ä¸­ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…çš„å…¨å±€æ ‡ç­¾ã€‚</li><li>å…¶ä»–æ–‡ä»¶ä¸­åŒºåˆ†å¤§å°å†™åŒ¹é…çš„å…¨å±€æ ‡ç­¾ã€‚</li><li>å½“å‰æ–‡ä»¶ä¸­ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…çš„é™æ€æ ‡ç­¾ã€‚</li></ol><p>æ ¹æ®ä¼˜å…ˆçº§åˆ—è¡¨ï¼ŒVim ä¼šå¯¹åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸Šæ‰¾åˆ°çš„ç²¾ç¡®åŒ¹é…é¡¹è¿›è¡Œä¼˜å…ˆçº§æ’åºã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Vim ä¼šé€‰æ‹© <code>two.rb</code> é‡Œçš„ <code>pancake</code> è¿‡ç¨‹è€Œä¸æ˜¯ <code>one.rb</code> é‡Œçš„ã€‚ä½†æ˜¯ï¼Œä¸Šè¿°ä¼˜å…ˆçº§åˆ—è¡¨æœ‰äº›ä¾‹å¤–ï¼Œå–å†³äºæ‚¨çš„<code>&#39;tagcase&#39;</code>ã€<code>&#39;ignorecase&#39;</code>ã€<code>&#39;smartcase&#39;</code> è®¾ç½®ã€‚æˆ‘ä¸æ‰“ç®—ä»‹ç»å®ƒä»¬ï¼Œæ‚¨å¯ä»¥è‡ªè¡ŒæŸ¥é˜… <code>:h tag-priority</code>ã€‚</p><h2 id="é€‰æ‹©æ€§è·³è½¬æ ‡ç­¾"><a href="#é€‰æ‹©æ€§è·³è½¬æ ‡ç­¾" class="headerlink" title="é€‰æ‹©æ€§è·³è½¬æ ‡ç­¾"></a>é€‰æ‹©æ€§è·³è½¬æ ‡ç­¾</h2><p>å¦‚æœå¯ä»¥é€‰æ‹©è¦è·³è½¬åˆ°å“ªä¸ªæ ‡ç­¾ï¼Œè€Œä¸æ˜¯å§‹ç»ˆè½¬åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„ï¼Œé‚£å°±å¤ªå¥½äº†ã€‚å› ä¸ºæ‚¨å¯èƒ½æƒ³è·³è½¬åˆ° <code>one.rb</code> é‡Œçš„ <code>pancake</code> æ–¹æ³•ï¼Œè€Œä¸æ˜¯ <code>two.rb</code> é‡Œçš„ã€‚ç°åœ¨æ‚¨å¯ä»¥ä½¿ç”¨ <code>:tselect</code> åšåˆ°å®ƒï¼è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:tselect</span> pancake<br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥åœ¨å±å¹•åº•éƒ¨çœ‹åˆ°ï¼š</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-comment">## pri kind tag               file</span><br><span class="hljs-number">1</span> F C f    pancake           two.rb<br>             <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pancake</span></span><br><span class="hljs-number">2</span> F   f    pancake           one.rb<br>             <span class="hljs-class"><span class="hljs-keyword">class</span>:<span class="hljs-title">One</span></span><br>             <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pancake</span></span><br></code></pre></td></tr></table></figure><p>å¦‚æœè¾“å…¥<code>2</code> åå† <code>&lt;Return&gt;</code>ï¼ŒVim å°†è·³è½¬åˆ° <code>one.rb</code> é‡Œçš„<code>pancake</code> è¿‡ç¨‹ã€‚å¦‚æœè¾“å…¥<code>1</code> åå† <code>&lt;Return&gt;</code>ï¼ŒVim å°†è·³è½¬åˆ° <code>two.rb</code> é‡Œçš„ã€‚</p><p>æ³¨æ„<code>pri</code> åˆ—ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…ä¸­è¯¥åˆ—æ˜¯<code>F C</code>ï¼Œç¬¬äºŒä¸ªåŒ¹é…ä¸­åˆ™æ˜¯<code>F</code>ã€‚è¿™å°±æ˜¯ Vim ç”¨æ¥ç¡®å®šæ ‡ç­¾ä¼˜å…ˆçº§çš„å‡­æ®ã€‚<code>F C</code>è¡¨ç¤ºåœ¨å½“å‰ (<code>C</code>) æ–‡ä»¶ä¸­å®Œå…¨åŒ¹é… (<code>F</code>) çš„å…¨å±€æ ‡ç­¾ã€‚<code>F</code> è¡¨ç¤ºä»…å®Œå…¨åŒ¹é… (<code>F</code>) çš„å…¨å±€æ ‡ç­¾ã€‚<code>F C</code> çš„ä¼˜å…ˆçº§æ°¸è¿œæ¯” <code>F</code> é«˜ã€‚<em>ï¼ˆè¯‘æ³¨ï¼š<code>F</code>æ˜¯<code>Fully-matched</code>ï¼Œ<code>C</code>æ˜¯<code>Current file</code>ï¼‰</em></p><p>å¦‚æœè¿è¡Œ<code>:tselect donut</code>ï¼Œå³ä½¿åªæœ‰ä¸€ä¸ªæ ‡ç­¾å¯é€‰ï¼ŒVim ä¹Ÿä¼šæç¤ºæ‚¨é€‰æ‹©è·³è½¬åˆ°å“ªä¸€ä¸ªã€‚æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥è®© Vim ä»…åœ¨æœ‰å¤šä¸ªåŒ¹é…é¡¹æ—¶æ‰æç¤ºæ ‡ç­¾åˆ—è¡¨ï¼Œè€Œåªæ‰¾åˆ°ä¸€ä¸ªæ ‡ç­¾æ—¶å°±ç«‹å³è·³è½¬å‘¢ï¼Ÿ</p><p>å½“ç„¶ï¼Vim æœ‰ä¸€ä¸ª <code>:tjump</code> æ–¹æ³•ã€‚è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:tjump</span> donut<br></code></pre></td></tr></table></figure><p>Vim å°†ç«‹å³è·³è½¬åˆ° <code>one.rb</code> é‡Œçš„<code>donut</code> è¿‡ç¨‹ï¼Œå°±åƒåœ¨è¿è¡Œ <code>:tag donut</code> ä¸€æ ·ã€‚ç°åœ¨è¯•è¯•ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:tjump</span> pancake<br></code></pre></td></tr></table></figure><p>Vim å°†æç¤ºæ‚¨ä»æ ‡ç­¾é€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªï¼Œå°±åƒåœ¨è¿è¡Œ<code>:tselect pancake</code>ã€‚<code>tjump</code> èƒ½ä¸¤å…¨å…¶ç¾ã€‚</p><p><code>tjump</code> åœ¨æ™®é€šæ¨¡å¼ä¸‹æœ‰ä¸€ä¸ªå¿«æ·é”®ï¼š<code>g Ctrl-]</code>ã€‚æˆ‘ä¸ªäººå–œæ¬¢<code>g Ctrl-]</code>èƒœè¿‡ <code>Ctrl-]</code>ã€‚</p><h2 id="æ ‡ç­¾çš„è‡ªåŠ¨è¡¥å…¨"><a href="#æ ‡ç­¾çš„è‡ªåŠ¨è¡¥å…¨" class="headerlink" title="æ ‡ç­¾çš„è‡ªåŠ¨è¡¥å…¨"></a>æ ‡ç­¾çš„è‡ªåŠ¨è¡¥å…¨</h2><p>æ ‡ç­¾èƒ½æœ‰åŠ©äºè‡ªåŠ¨è¡¥å…¨ã€‚å›æƒ³ä¸‹ç¬¬6ç« â€œæ’å…¥æ¨¡å¼â€ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>Ctrl-x</code> å­æ¨¡å¼æ¥è¿›è¡Œå„å¼è‡ªåŠ¨è¡¥å…¨ã€‚å…¶ä¸­æœ‰ä¸€ä¸ªæˆ‘æ²¡æœ‰æåˆ°è¿‡çš„è‡ªåŠ¨è¡¥å…¨å­æ¨¡å¼ä¾¿æ˜¯ <code>Ctrl-]</code>ã€‚å¦‚æœæ‚¨åœ¨æ’å…¥æ¨¡å¼ä¸­è¾“å…¥<code>Ctrl-x Ctrl-]</code>ï¼ŒVim å°†ä½¿ç”¨æ ‡ç­¾æ–‡ä»¶æ¥è‡ªåŠ¨è¡¥å…¨ã€‚</p><p>åœ¨æ’å…¥æ¨¡å¼ä¸‹è¾“å…¥<code>Ctrl-x Ctrl-]</code>ï¼Œæ‚¨ä¼šçœ‹åˆ°ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">One</span><br><span class="hljs-attribute">donut</span><br><span class="hljs-attribute">initialize</span><br><span class="hljs-attribute">pancake</span><br></code></pre></td></tr></table></figure><h2 id="æ ‡ç­¾å †æ ˆ"><a href="#æ ‡ç­¾å †æ ˆ" class="headerlink" title="æ ‡ç­¾å †æ ˆ"></a>æ ‡ç­¾å †æ ˆ</h2><p>Vim ç»´æŒç€ä¸€ä¸ªæ ‡ç­¾å †æ ˆï¼Œä¸Šé¢è®°å½•ç€æ‰€æœ‰æ‚¨ä»å“ªå„¿æ¥ã€è·³å“ªå„¿å»çš„æ ‡ç­¾åˆ—è¡¨ã€‚ä½¿ç”¨ <code>:tags</code> å¯ä»¥çœ‹åˆ°è¿™ä¸ªå †æ ˆã€‚å¦‚æœæ‚¨é¦–å…ˆè·³è½¬åˆ°<code>pancake</code>ï¼Œç´§æ¥ç€æ˜¯<code>donut</code>ï¼Œæ­¤æ—¶è¿è¡Œ<code>:tags</code>ï¼Œæ‚¨å°†çœ‹åˆ°ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tap">  <span class="hljs-comment"># TO tag         FROM line  in file/text</span><br> <span class="hljs-number"> 1 </span><span class="hljs-number"> 1 </span>pancake           <span class="hljs-number"> 10 </span> ch16_tags/two.rb<br> <span class="hljs-number"> 2 </span><span class="hljs-number"> 1 </span>donut              <span class="hljs-number"> 9 </span> ch16_tags/two.rb<br>&gt;<br></code></pre></td></tr></table></figure><p>æ³¨æ„ä¸Šé¢çš„ <code>&gt;</code> ç¬¦å·ï¼Œå®ƒä»£è¡¨ç€æ‚¨å½“å‰åœ¨å †æ ˆä¸­çš„ä½ç½®ã€‚è¦â€œå¼¹å‡ºâ€å †æ ˆï¼Œä»è€Œå›åˆ°ä¸Šä¸€æ¬¡çš„çŠ¶æ€ï¼Œæ‚¨å¯ä»¥è¿è¡Œ<code>:pop</code>ã€‚è¯•è¯•å®ƒï¼Œå†è¿è¡Œ<code>:tags</code>çœ‹çœ‹ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tap">  <span class="hljs-comment"># TO tag         FROM line  in file/text</span><br> <span class="hljs-number"> 1 </span><span class="hljs-number"> 1 </span>pancake           <span class="hljs-number"> 10 </span> puts pancake<br>&gt;<span class="hljs-number"> 2 </span><span class="hljs-number"> 1 </span>donut              <span class="hljs-number"> 9 </span> one.donut<br><br></code></pre></td></tr></table></figure><p>æ³¨æ„ç°åœ¨ <code>&gt;</code> ç¬¦å·ä½äº <code>donut</code> æ‰€åœ¨çš„ç¬¬äºŒè¡Œäº†ã€‚å† <code>pop</code> ä¸€æ¬¡ï¼Œç„¶åè¿è¡Œ<code>:tags</code>ï¼š</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tap">  <span class="hljs-comment"># TO tag         FROM line  in file/text</span><br>&gt;<span class="hljs-number"> 1 </span><span class="hljs-number"> 1 </span>pancake           <span class="hljs-number"> 10 </span> puts pancake<br> <span class="hljs-number"> 2 </span><span class="hljs-number"> 1 </span>donut              <span class="hljs-number"> 9 </span> one.donut<br></code></pre></td></tr></table></figure><p>åœ¨æ™®é€šæ¨¡å¼ä¸‹ï¼Œæ‚¨å¯ä»¥æŒ‰ä¸‹ <code>Ctrl-t</code> æ¥è¾¾åˆ°å’Œ <code>:pop</code> ä¸€æ ·çš„æ•ˆæœã€‚</p><h2 id="è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾"><a href="#è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾" class="headerlink" title="è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾"></a>è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾</h2><p>Vim æ ‡ç­¾æœ€å¤§çš„ç¼ºç‚¹ä¹‹ä¸€æ˜¯ï¼Œæ¯å½“è¿›è¡Œé‡å¤§æ”¹å˜æ—¶ï¼Œæ‚¨éœ€è¦é‡æ–°ç”Ÿæˆæ ‡ç­¾æ–‡ä»¶ã€‚å¦‚æœæ‚¨å°†<code>pancake</code> è¿‡ç¨‹é‡å‘½åä¸º <code>waffle</code>ï¼Œæ ‡ç­¾æ–‡ä»¶ä¸çŸ¥é“ <code>pancake</code> è¢«é‡å‘½åäº†ï¼Œæ ‡ç­¾åˆ—è¡¨ä»æ—§å­˜å‚¨ç€ <code>pancake</code> è¿‡ç¨‹ã€‚è¿è¡Œ<code>ctags -R .</code> å¯ä»¥åˆ›å»ºæ›´æ–°çš„æ ‡ç­¾æ–‡ä»¶ï¼Œä½†è¿™å¯èƒ½ä¼šå¾ˆç¼“æ…¢ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œæœ‰å‡ ç§å¯ä»¥è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾çš„æ–¹æ³•ã€‚è¿™ä¸€å°èŠ‚ä¸æ‰“ç®—ä»‹ç»ä¸€ä¸ªç®€å•æ˜äº†çš„è¿‡ç¨‹ï¼Œè€Œæ˜¯æå‡ºä¸€äº›æƒ³æ³•ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥æ‰©å±•å®ƒä»¬ã€‚</p><h2 id="åœ¨ä¿å­˜æ—¶ç”Ÿæˆæ ‡ç­¾"><a href="#åœ¨ä¿å­˜æ—¶ç”Ÿæˆæ ‡ç­¾" class="headerlink" title="åœ¨ä¿å­˜æ—¶ç”Ÿæˆæ ‡ç­¾"></a>åœ¨ä¿å­˜æ—¶ç”Ÿæˆæ ‡ç­¾</h2><p>Vim æœ‰ä¸€ä¸ªè‡ªåŠ¨å‘½ä»¤ (<code>autocmd</code>) æ–¹æ³•ï¼Œå¯ä»¥åœ¨è§¦å‘äº‹ä»¶æ—¶æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä»¥ä¾¿åœ¨æ¯æ¬¡ä¿å­˜æ—¶ç”Ÿæˆæ ‡ç­¾ã€‚è¿è¡Œï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">autocmd</span> BufWritePost *.rb <span class="hljs-keyword">silent</span> !ctags -R .<br></code></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤çš„åˆ†è§£å¦‚ä¸‹ï¼š</p><ul><li><code>autocmd</code> æ˜¯ Vim çš„è‡ªåŠ¨å‘½ä»¤æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªäº‹ä»¶åç§°ã€æ–‡ä»¶å’Œä¸€ä¸ªå‘½ä»¤ã€‚</li><li><code>BufWritePost</code> æ˜¯ä¿å­˜ç¼“å†²åŒºæ—¶çš„ä¸€ä¸ªäº‹ä»¶ã€‚æ¯æ¬¡ä¿å­˜æ–‡ä»¶æ—¶å°†è§¦å‘ä¸€æ¬¡ <code>BufWritePost</code> äº‹ä»¶ã€‚</li><li><code>.rb</code> æ˜¯ ruby (<code>rb</code>) æ–‡ä»¶çš„ä¸€ç§æ–‡ä»¶æ¨¡å¼ã€‚</li><li><code>silent</code> æ˜¯æ‚¨ä¼ é€’çš„å‘½ä»¤çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœä¸è¾“å…¥å®ƒï¼Œæ¯æ¬¡è§¦å‘è‡ªåŠ¨å‘½ä»¤æ—¶ï¼ŒVim éƒ½ä¼šæç¤º  <code>press ENTER or type command to continue</code>ã€‚</li><li><code>!ctags -R .</code> æ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚å›æƒ³ä¸€ä¸‹ï¼Œ<code>!cmd</code> ä» Vim å†…éƒ¨æ‰§è¡Œç»ˆç«¯å‘½ä»¤ã€‚</li></ul><p>ç°åœ¨ï¼Œæ¯æ¬¡æ‚¨ä¿å­˜ä¸€ä¸ª ruby æ–‡ä»¶æ—¶ï¼ŒVim éƒ½ä¼šè¿è¡Œ<code>ctags -R .</code>ã€‚</p><h2 id="ä½¿ç”¨æ’ä»¶"><a href="#ä½¿ç”¨æ’ä»¶" class="headerlink" title="ä½¿ç”¨æ’ä»¶"></a>ä½¿ç”¨æ’ä»¶</h2><p>æœ‰å‡ ç§æ’ä»¶å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ ctagsï¼š</p><ul><li><a href="https://github.com/ludovicchabant/vim-gutentags">vim-gutentags</a></li><li><a href="https://github.com/szw/vim-tags">vim-tags</a></li><li><a href="https://github.com/xolox/vim-easytags">vim-easytags</a></li><li><a href="https://github.com/craigemery/vim-autotag">vim-autotag</a></li></ul><p>æˆ‘ä½¿ç”¨ vim-gutentagsã€‚å®ƒçš„ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œè€Œä¸”è£…ä¸Šå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><h2 id="Ctags-ä»¥åŠ-Git-é’©å­"><a href="#Ctags-ä»¥åŠ-Git-é’©å­" class="headerlink" title="Ctags ä»¥åŠ Git é’©å­"></a>Ctags ä»¥åŠ Git é’©å­</h2><p>Tim Pope æ˜¯ä¸€ä¸ªå†™äº†å¾ˆå¤šéå¸¸æ£’çš„ Vim æ’ä»¶çš„ä½œè€…ï¼Œä»–å†™äº†ä¸€ç¯‡åšå®¢ï¼Œå»ºè®®ä½¿ç”¨ git é’©å­ã€‚<a href="https://tbaggery.com/2011/08/08/effortless-ctags-with-git.html">å¯ä»¥çœ‹ä¸€çœ‹</a>ã€‚</p><h2 id="èªæ˜åœ°å­¦ä¹ æ ‡ç­¾"><a href="#èªæ˜åœ°å­¦ä¹ æ ‡ç­¾" class="headerlink" title="èªæ˜åœ°å­¦ä¹ æ ‡ç­¾"></a>èªæ˜åœ°å­¦ä¹ æ ‡ç­¾</h2><p>åªè¦é…ç½®å¾—å½“ï¼Œæ ‡ç­¾æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚å‡è®¾åœ¨ä¸€ä¸ªæ–°çš„ä»£ç åº“ä¸­ï¼Œæ‚¨æƒ³è¦ææ¸…æ¥š <code>functionFood</code> å¹²äº†ä»€ä¹ˆï¼Œæ‚¨å¯ä»¥é€šè¿‡è·³è½¬åˆ°å®ƒçš„å®šä¹‰æ¥ææ‡‚å®ƒä»¬ã€‚åœ¨é‚£å„¿å¯ä»¥çœ‹åˆ°ï¼Œå®ƒåˆè°ƒç”¨äº† <code>functionBreakfast</code>ã€‚ç»§ç»­è·Ÿè¸ªï¼Œå‘ç°è¿˜è°ƒç”¨äº† <code>functionPancake</code>ã€‚ç°åœ¨æ‚¨æ˜ç™½äº†ï¼Œå‡½æ•°è°ƒç”¨è·¯å¾„å›¾é•¿è¿™æ ·ï¼š</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xl"><span class="hljs-function"><span class="hljs-title">functionFood</span> -&gt;</span> <span class="hljs-function"><span class="hljs-title">functionBreakfast</span> -&gt;</span> functionPancake<br></code></pre></td></tr></table></figure><p>è¿›ä¸€æ­¥å¯ä»¥çŸ¥é“ï¼Œè¿™æ®µä»£ç å’Œæ—©é¤åƒç…é¥¼æœ‰å…³ã€‚</p><p>ç°åœ¨æ‚¨å·²ç»çŸ¥é“å¦‚ä½•ä½¿ç”¨æ ‡ç­¾ï¼Œé€šè¿‡ <code>:h tags</code> å¯ä»¥å­¦ä¹ æ›´å¤šæœ‰å…³æ ‡ç­¾çš„çŸ¥è¯†ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢å¦ä¸€ä¸ªåŠŸèƒ½ï¼šæŠ˜å ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-æŠ˜å </title>
    <link href="/2022/04/05/Vim/ch17_fold/"/>
    <url>/2022/04/05/Vim/ch17_fold/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬17ç« -æŠ˜å "><a href="#ç¬¬17ç« -æŠ˜å " class="headerlink" title="ç¬¬17ç«  æŠ˜å "></a>ç¬¬17ç«  æŠ˜å </h1><p>åœ¨é˜…è¯»æ–‡ä»¶æ—¶ï¼Œç»å¸¸ä¼šæœ‰ä¸€äº›ä¸ç›¸å…³çš„æ–‡æœ¬ä¼šå¦¨ç¢æ‚¨ç†è§£ã€‚ä½¿ç”¨ Vim æŠ˜å å¯ä»¥éšè—è¿™äº›ä¸å¿…è¦çš„ä¿¡æ¯ã€‚</p><p>æœ¬ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ä¸åŒçš„æŠ˜å æ–¹æ³•ã€‚</p><h2 id="æ‰‹åŠ¨æŠ˜å "><a href="#æ‰‹åŠ¨æŠ˜å " class="headerlink" title="æ‰‹åŠ¨æŠ˜å "></a>æ‰‹åŠ¨æŠ˜å </h2><p>æƒ³è±¡æ‚¨æ­£åœ¨æŠ˜å ä¸€å¼ çº¸æ¥è¦†ç›–ä¸€äº›æ–‡æœ¬ï¼Œå®é™…çš„æ–‡æœ¬ä¸ä¼šæ¶ˆå¤±ï¼Œå®ƒä»åœ¨é‚£å„¿ã€‚Vim æŠ˜å çš„å·¥ä½œæ–¹å¼ä¸æ­¤ç›¸åŒï¼Œå®ƒ<em>æŠ˜å </em>ä¸€æ®µæ–‡æœ¬ï¼Œåœ¨æ˜¾ç¤ºæ—¶ä¼šéšè—èµ·æ¥ï¼Œä½†å®é™…ä¸Šå¹¶ä¸ä¼šçœŸçš„åˆ é™¤å®ƒã€‚</p><p>æŠ˜å æ“ä½œç¬¦æ˜¯<code>z</code>ã€‚ï¼ˆæŠ˜å çº¸å¼ æ—¶ï¼Œå®ƒçœ‹èµ·æ¥ä¹Ÿåƒå­—æ¯ â€œzâ€ï¼‰ã€‚</p><p>å‡è®¾æœ‰å¦‚ä¸‹æ–‡æœ¬ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs applescript">Fold <span class="hljs-keyword">me</span><br>Hold <span class="hljs-keyword">me</span><br></code></pre></td></tr></table></figure><p>æŠŠå…‰æ ‡æ”¾åœ¨ç¬¬ä¸€è¡Œï¼Œè¾“å…¥ <code>zfj</code>ã€‚Vim å°†è¿™ä¸¤è¡ŒæŠ˜å æˆä¸€è¡Œï¼ŒåŒæ—¶ä¼šçœ‹åˆ°ç±»ä¼¼æ¶ˆæ¯ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">+<span class="hljs-comment">-- 2 lines: Fold me -----</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‘½ä»¤åˆ†è§£å¦‚ä¸‹ï¼š</p><ul><li><code>zf</code> æ˜¯æŠ˜å æ“ä½œç¬¦ã€‚</li><li><code>j</code> æ˜¯ç”¨äºæŠ˜å æ“ä½œç¬¦çš„åŠ¨ä½œã€‚</li></ul><p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>zo</code> æ‰“å¼€&#x2F;å±•å¼€å·²æŠ˜å æ–‡æœ¬ï¼Œä½¿ç”¨ <code>zc</code> å…³é—­&#x2F;æ”¶ç¼©æ–‡æœ¬ã€‚</p><p>æŠ˜å æ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œæ‰€ä»¥å®ƒéµå¾ªè¯­æ³•è§„åˆ™ï¼ˆ<code>åŠ¨è¯+åè¯</code>ï¼‰ã€‚æ‚¨å¯ä»¥åœ¨æŠ˜å è¿ç®—ç¬¦åï¼ŒåŠ ä¸Šä¸€ä¸ªåŠ¨ä½œ(motion)æˆ–æ–‡æœ¬å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ <code>zfip</code> å¯ä»¥æŠ˜å å†…éƒ¨æ®µè½ï¼›ä½¿ç”¨ <code>zfG</code> å¯ä»¥æŠ˜å è‡³æ–‡ä»¶æœ«å°¾ï¼›ä½¿ç”¨ <code>zfa&#123;</code> å¯ä»¥æŠ˜å  <code>&#123;</code> å’Œ <code>&#125;</code> ä¹‹é—´çš„æ–‡æœ¬ã€‚</p><p>æ‚¨å¯ä»¥åœ¨å¯è§†æ¨¡å¼ä¸‹è¿›è¡ŒæŠ˜å ã€‚é«˜äº®æ‚¨æƒ³è¦æŠ˜å çš„åŒºåŸŸå (<code>v</code>, <code>V</code>, æˆ– <code>Ctrl-v</code>)ï¼Œå†è¾“å…¥ <code>zf</code> å³å¯ã€‚</p><p>æ‚¨ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼Œä½¿ç”¨ <code>:fold</code> å‘½ä»¤æ‰§è¡Œä¸€æ¬¡æŠ˜å ã€‚è‹¥è¦æŠ˜å å½“å‰è¡ŒåŠç´§éšå…¶åçš„ç¬¬äºŒè¡Œï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">:,+<span class="hljs-number">1</span><span class="hljs-built_in">fold</span><br></code></pre></td></tr></table></figure><p><code>,+1</code> æ˜¯è¦æŠ˜å çš„èŒƒå›´ã€‚å¦‚æœä¸ä¼ é€’èŒƒå›´å‚æ•°ï¼Œé»˜è®¤å½“å‰è¡Œã€‚<code>+1</code> æ˜¯ä»£è¡¨ä¸‹ä¸€è¡Œçš„èŒƒå›´æŒ‡ç¤ºå™¨ã€‚è¿è¡Œ <code>:5,10fold</code> å¯ä»¥æŠ˜å ç¬¬5è‡³10è¡Œã€‚è¿è¡Œ <code>:,$fold</code> å¯ä»¥æŠ˜å å½“å‰è¡Œè‡³æ–‡ä»¶æœ«å°¾ã€‚</p><p>è¿˜æœ‰è®¸å¤šå…¶ä»–æŠ˜å å’Œå±•å¼€çš„å‘½ä»¤ã€‚æˆ‘å‘ç°ä»–ä»¬å®åœ¨å¤ªå¤šï¼Œä»¥è‡³äºåœ¨åˆšèµ·æ­¥æ—¶å¾ˆéš¾è®°ä½ã€‚æœ€æœ‰ç”¨çš„ä¸€äº›å‘½ä»¤æ˜¯ï¼š</p><ul><li><code>zR</code> å±•å¼€æ‰€æœ‰æŠ˜å ã€‚</li><li><code>zM</code> æ”¶ç¼©æ‰€æœ‰æŠ˜å ã€‚</li><li><code>za</code> åˆ‡æ¢æŠ˜å çŠ¶æ€ã€‚</li></ul><p><code>zR</code> å’Œ <code>zM</code> å¯ç”¨äºä»»æ„è¡Œä¸Šï¼Œä½† <code>za</code> ä»…èƒ½ç”¨äºå·²æŠ˜å &#x2F;æœªæŠ˜å çš„è¡Œä¸Šã€‚è¾“å…¥ <code>:h fold-commands</code> å¯æŸ¥é˜…æ›´å¤šæœ‰å…³æŠ˜å çš„æŒ‡ä»¤ã€‚</p><h2 id="ä¸åŒçš„æŠ˜å æ–¹æ³•"><a href="#ä¸åŒçš„æŠ˜å æ–¹æ³•" class="headerlink" title="ä¸åŒçš„æŠ˜å æ–¹æ³•"></a>ä¸åŒçš„æŠ˜å æ–¹æ³•</h2><p>ä»¥ä¸Šéƒ¨åˆ†æ¶µç›–äº† Vim æ‰‹åŠ¨æŠ˜å çš„å†…å®¹ã€‚å®é™…ä¸Šï¼ŒVim æœ‰å…­ç§ä¸åŒçš„æŠ˜å æ–¹æ³•ï¼š</p><ol><li>æ‰‹åŠ¨æŠ˜å </li><li>ç¼©è¿›æŠ˜å </li><li>è¡¨è¾¾å¼æŠ˜å </li><li>è¯­æ³•æŠ˜å </li><li>å·®å¼‚æŠ˜å </li><li>æ ‡å¿—æŠ˜å </li></ol><p>è¿è¡Œ <code>:set foldmethod?</code> å¯æŸ¥çœ‹æ‚¨å½“å‰æ­£åœ¨ä½¿ç”¨å“ªä¸€ç§æŠ˜å æ–¹å¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒVim ä½¿ç”¨æ‰‹åŠ¨æ–¹å¼ã€‚</p><p>åœ¨æœ¬ç« çš„å‰©ä½™éƒ¨åˆ†ï¼Œæ‚¨å°†å­¦ä¹ å…¶ä»–äº”ç§æŠ˜å æ–¹æ³•ã€‚è®©æˆ‘ä»¬ä»ç¼©è¿›æŠ˜å å¼€å§‹ã€‚</p><h2 id="ç¼©è¿›æŠ˜å "><a href="#ç¼©è¿›æŠ˜å " class="headerlink" title="ç¼©è¿›æŠ˜å "></a>ç¼©è¿›æŠ˜å </h2><p>è¦ä½¿ç”¨ç¼©è¿›æŠ˜å ï¼Œéœ€è¦å°† <code>&#39;foldmethod&#39;</code> é€‰é¡¹æ›´æ”¹ä¸ºç¼©è¿›ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">foldmethod</span>=indent<br></code></pre></td></tr></table></figure><p>å‡è®¾æœ‰å¦‚ä¸‹æ–‡æœ¬ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">One</span><br>  <span class="hljs-keyword">Two</span><br>  <span class="hljs-keyword">Two</span> again<br></code></pre></td></tr></table></figure><p>è¿è¡Œ <code>:set foldmethod=indent</code> åå°†çœ‹åˆ°ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">One</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-- 2 lines: Two -----</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ç¼©è¿›æŠ˜å åï¼ŒVim å°†ä¼šæŸ¥çœ‹æ¯è¡Œçš„å¼€å¤´æœ‰å¤šå°‘ç©ºæ ¼ï¼Œå¹¶å°†å®ƒä¸ <code>&#39;shiftwidth&#39;</code> é€‰é¡¹è¿›è¡Œæ¯”è¾ƒï¼Œä»¥æ­¤æ¥å†³å®šè¯¥è¡Œå¯æŠ˜å æ€§ã€‚<code>&#39;shiftwidth&#39;</code> è¿”å›æ¯æ¬¡ç¼©è¿›æ‰€éœ€çš„ç©ºæ ¼æ•°ã€‚å¦‚æœè¿è¡Œï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> shiftwidth?<br></code></pre></td></tr></table></figure><p>Vim çš„é»˜è®¤ <code>&#39;shiftwidth&#39;</code> å€¼ä¸º2ã€‚å¯¹äºä¸Šé¢çš„æ–‡æœ¬è€Œè¨€ï¼Œâ€Twoâ€ å’Œ â€œTwo againâ€ çš„å¼€å¤´éƒ½æœ‰ä¸¤ä¸ªç©ºæ ¼ã€‚å½“ Vim çœ‹åˆ°äº†ç©ºæ ¼æ•° <em>ä¸”</em> <code>&#39;shiftwidth&#39;</code>å€¼éƒ½ä¸º2æ—¶ï¼ŒVim è®¤ä¸ºè¯¥è¡Œçš„ç¼©è¿›æŠ˜å çº§åˆ«ä¸º1ã€‚</p><p>å‡è®¾è¿™æ¬¡æ–‡æœ¬å¼€å¤´åªæœ‰ä¸€ä¸ªç©ºæ ¼ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">One</span><br> <span class="hljs-keyword">Two</span><br> <span class="hljs-keyword">Two</span> again<br></code></pre></td></tr></table></figure><p>è¿è¡Œ <code>:set foldmethod=indent</code> åï¼ŒVim ä¸å†æŠ˜å å·²ç¼©è¿›çš„è¡Œäº†ï¼Œå› ä¸ºè¿™äº›è¡Œæ²¡æœ‰è¶³å¤Ÿçš„ç©ºæ ¼ã€‚1ä¸ªç©ºæ ¼ä¸ä¼šè¢«è§†ä½œä¸€ä¸ªç¼©è¿›ã€‚ç„¶è€Œï¼Œå½“æ‚¨æ”¹å˜ <code>&#39;shiftwidth&#39; </code> çš„å€¼ä¸º1åï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">shiftwidth</span>=1<br></code></pre></td></tr></table></figure><p>æ–‡æœ¬ç°åœ¨å¯ä»¥æŠ˜å äº†ï¼ç°åœ¨ä¸€ä¸ªç©ºæ ¼å°†è¢«è§†ä¸ºä¸€ä¸ªç¼©è¿›ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°† <code>&#39;shiftwidth&#39; </code> ä»¥åŠæ–‡æœ¬å¼€å¤´çš„ç©ºæ ¼æ•°éƒ½é‡æ–°æ¢å¤ä¸º2åï¼Œå¦å¤–æ·»åŠ ä¸€äº›å†…å®¹ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">One</span><br>  <span class="hljs-keyword">Two</span><br>  <span class="hljs-keyword">Two</span> again<br>    Three<br>    Three again<br></code></pre></td></tr></table></figure><p>è¿è¡ŒæŠ˜å å‘½ä»¤ (<code>zM</code>) åå¯ä»¥çœ‹åˆ°ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">One</span><br><span class="hljs-operator">+</span><span class="hljs-comment">-- 4 lines: Two -----</span><br></code></pre></td></tr></table></figure><p>å±•å¼€å·²æŠ˜å çš„è¡Œ (<code>zR</code>)ï¼Œæ¥ç€ç§»åŠ¨å…‰æ ‡è‡³ â€œThreeâ€ï¼Œç„¶ååˆ‡æ¢æ–‡æœ¬çš„æŠ˜å çŠ¶æ€ (<code>za</code>)ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">One</span><br>  <span class="hljs-keyword">Two</span><br>  <span class="hljs-keyword">Two</span> again<br>+-- 2 lines: Three -----<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯å•¥ï¼Ÿå ä¸­å ï¼Ÿ</p><p>æ˜¯çš„ï¼Œæ‚¨å¯ä»¥åµŒå¥—æŠ˜å ã€‚æ–‡æœ¬ â€œTwoâ€ å’Œ â€œTwo againâ€ çš„æŠ˜å çº§åˆ«éƒ½ä¸º1ï¼Œæ–‡æœ¬ â€œThreeâ€ å’Œ â€œThree againâ€ çš„æŠ˜å çº§åˆ«éƒ½ä¸º2ã€‚å¦‚æœåœ¨ä¸€æ®µå¯æŠ˜å æ–‡æœ¬ä¸­ï¼Œå…·æœ‰å¦ä¸€æ®µæŠ˜å çº§åˆ«æ›´é«˜çš„å¯æŠ˜å æ–‡æœ¬ï¼Œåˆ™å¯ä»¥å…·æœ‰å¤šä¸ªæŠ˜å å±‚ã€‚</p><h2 id="è¡¨è¾¾å¼æŠ˜å "><a href="#è¡¨è¾¾å¼æŠ˜å " class="headerlink" title="è¡¨è¾¾å¼æŠ˜å "></a>è¡¨è¾¾å¼æŠ˜å </h2><p>è¡¨è¾¾å¼æŠ˜å å…è®¸æ‚¨å®šä¹‰è¦åŒ¹é…æŠ˜å çš„è¡¨è¾¾å¼ã€‚å®šä¹‰æŠ˜å è¡¨è¾¾å¼åï¼ŒVim ä¼šè®¡ç®—æ¯è¡Œçš„ <code>&#39;foldexpr&#39;</code> å€¼ã€‚è¿™æ˜¯å¿…é¡»é…ç½®çš„å˜é‡ï¼Œå®ƒè¦è¿”å›é€‚å½“çš„å€¼ã€‚å¦‚æœè¿”å› 0ï¼Œåˆ™ä¸æŠ˜å è¡Œã€‚å¦‚æœå®ƒè¿”å› 1ï¼Œåˆ™è¯¥è¡Œçš„æŠ˜å çº§åˆ«ä¸º 1ã€‚å¦‚æœå®ƒè¿”å› 2ï¼Œåˆ™è¯¥çº¿çš„æŠ˜å çº§åˆ«ä¸º 2ã€‚é™¤äº†æ•´æ•°å¤–è¿˜æœ‰å…¶ä»–çš„å€¼ï¼Œä½†æˆ‘ä¸æ‰“ç®—ä»‹ç»å®ƒä»¬ã€‚å¦‚æœä½ å¥½å¥‡ï¼Œå¯ä»¥æŸ¥é˜…<code>:h fold-expr</code>ã€‚</p><p>é¦–å…ˆï¼Œæ›´æ”¹æŠ˜å æ–¹æ³•ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">foldmethod</span>=expr<br></code></pre></td></tr></table></figure><p>å‡è®¾æ‚¨æœ‰ä¸€ä»½æ—©é¤é£Ÿå“åˆ—è¡¨ï¼Œå¹¶ä¸”æƒ³è¦æŠ˜å æ‰€æœ‰ä»¥ â€œpâ€ å¼€å¤´çš„æ—©é¤é¡¹ï¼š</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gauss">donut<br>pancake<br><span class="hljs-keyword">pop</span>-tarts<br>protein <span class="hljs-built_in">bar</span><br>salmon<br>scrambled eggs<br></code></pre></td></tr></table></figure><p>å…¶æ¬¡ï¼Œæ›´æ”¹ <code>foldexpr</code> ä¸ºæ•è·ä»¥ â€œpâ€ å¼€å¤´çš„è¡¨è¾¾å¼ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">foldexpr</span>=getline(v:lnum)[0]==\\<span class="hljs-string">&quot;p\\&quot;</span><br></code></pre></td></tr></table></figure><p>è¿™è¡¨è¾¾å¼çœ‹èµ·æ¥æœ‰ç‚¹å“äººã€‚æˆ‘ä»¬æ¥åˆ†è§£ä¸‹ï¼š</p><ul><li><code>:set foldexpr</code> è®¾ç½® <code>&#39;foldexpr&#39;</code> ä¸ºè‡ªå®šä¹‰è¡¨è¾¾å¼ã€‚</li><li><code>getline()</code> æ˜¯ Vim è„šæœ¬çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¿”å›æŒ‡å®šè¡Œçš„å†…å®¹ã€‚å¦‚è¿è¡Œ <code>:echo getline(5)</code> å¯ä»¥è·å–ç¬¬5è¡Œçš„å†…å®¹ã€‚</li><li><code>v:lnum</code> æ˜¯ Vim <code>&#39;foldexpr&#39;</code> è¡¨è¾¾å¼çš„ç‰¹æ®Šå˜é‡ã€‚Vim åœ¨æ‰«ææ¯ä¸€è¡Œæ—¶ï¼Œéƒ½ä¼šå°†è¡Œå·å­˜å‚¨è‡³ <code>v:lnum</code> å˜é‡ã€‚åœ¨ç¬¬5è¡Œï¼Œ<code>v:lnum</code> å€¼ä¸º5ã€‚åœ¨ç¬¬10è¡Œï¼Œ<code>v:lnum</code>å€¼ä¸º10ã€‚</li><li><code>[0]</code> å¤„äº <code>getline(v:lnum)[0]</code> è¯­å¢ƒæ—¶ï¼Œä»£è¡¨æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚Vim åœ¨æ‰«ææŸä¸€è¡Œæ—¶ï¼Œ<code>getline(v:lnum)</code> è¿”å›è¯¥è¡Œçš„å†…å®¹ï¼Œè€Œ <code>getline(v:lnum)[0]</code> åˆ™è¿”å›è¿™ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ—©é¤é£Ÿå“åˆ—è¡¨çš„ç¬¬ä¸€è¡Œæ˜¯ â€œdonutâ€ï¼Œåˆ™ <code>getline(v:lnum)[0]</code> è¿”å› â€œdâ€ï¼›åˆ—è¡¨çš„ç¬¬äºŒè¡Œæ˜¯ â€œpancakeâ€ï¼Œåˆ™ <code>getline(v:lnum)[0]</code> è¿”å› â€œpâ€ã€‚</li><li><code>==\\&quot;p\\&quot;</code> æ˜¯ç­‰å¼è¡¨è¾¾å¼çš„ååŠéƒ¨åˆ†ï¼Œå®ƒæ£€æŸ¥åˆšæ‰è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœæ˜¯å¦ç­‰äº â€œpâ€ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¿”å›1ï¼Œå¦åˆ™è¿”å›0ã€‚åœ¨ Vim çš„ä¸–ç•Œé‡Œï¼Œ1ä»£è¡¨çœŸï¼Œ0ä»£è¡¨å‡ã€‚æ‰€ä»¥ï¼Œé‚£äº›ä»¥ â€œpâ€ å¼€å¤´çš„è¡Œï¼Œè¡¨è¾¾å¼éƒ½ä¼šè¿”å›1ã€‚å›æƒ³ä¸€ä¸‹æœ¬èŠ‚çš„å¼€å§‹ï¼Œå¦‚æœ <code>&#39;foldexpr&#39;</code> çš„å€¼ä¸º1ï¼Œåˆ™æŠ˜å çº§åˆ«ä¸º1ã€‚</li></ul><p>åœ¨è¿è¡Œè¿™ä¸ªè¡¨è¾¾å¼åï¼Œæ‚¨å°†çœ‹åˆ°ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ada">donut<br>+<span class="hljs-comment">-- 3 lines: pancake -----</span><br>salmon<br>scrambled eggs<br></code></pre></td></tr></table></figure><h2 id="è¯­æ³•æŠ˜å "><a href="#è¯­æ³•æŠ˜å " class="headerlink" title="è¯­æ³•æŠ˜å "></a>è¯­æ³•æŠ˜å </h2><p>è¯­æ³•æŠ˜å æ˜¯ç”±Vimçš„è¯­æ³•é«˜äº®å†³å®šçš„ã€‚å¦‚æœæ‚¨ä½¿ç”¨äº†è¯­æ³•é«˜äº®æ’ä»¶ï¼Œæ¯”å¦‚<a href="https://github.com/sheerun/vim-polyglot">vim-polyglot</a>ï¼Œé‚£ä¹ˆè£…ä¸Šæ’ä»¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¯­æ³•æŠ˜å ã€‚ä»…ä»…éœ€è¦å°†<code>foldmethod</code>é€‰é¡¹æ”¹ä¸º <code>syntax</code>ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">foldmethod</span>=syntax<br></code></pre></td></tr></table></figure><p>å‡è®¾æ‚¨æ­£åœ¨ç¼–è¾‘ä¸€ä¸ªJavaScriptæ–‡ä»¶ï¼Œè€Œä¸”æ‚¨å·²ç»è£…å¥½äº† vim-polyglot æ’ä»¶ã€‚å¦‚æœæ‚¨æœ‰ä»¥ä¸‹æ–‡æœ¬ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">const nums = [<br>  <span class="hljs-literal">one</span>,<br>  <span class="hljs-literal">two</span>,<br>  <span class="hljs-literal">three</span>,<br>  <span class="hljs-literal">four</span><br>]<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æ–‡æœ¬å°†ä¼šä½¿ç”¨è¯­æ³•æŠ˜å æŠ˜èµ·æ¥ã€‚å½“æ‚¨ä¸ºæŸä¸ªç‰¹å®šè¯­è¨€ï¼ˆä½äº <code>syntax/</code> ç›®å½•ä¸­çš„è¯­è¨€å³æ˜¯å…¸å‹ä¾‹å­ï¼‰å®šä¹‰äº†è¯­æ³•é«˜äº®ï¼Œæ‚¨å¯ä»¥æ·»åŠ ä¸€ä¸ª <code>fold</code> å±æ€§ï¼Œä½¿å®ƒæ”¯æŒæŠ˜å ã€‚ä¸‹é¢æ˜¯ vim-polyglot ä¸­JavaScriptè¯­æ³•æ–‡ä»¶ä¸­çš„ä¸€ä¸ªç‰‡æ®µã€‚æ³¨æ„æœ€åçš„ <code>fold</code> å…³é”®å­—ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">syntax region  jsBracket                      <span class="hljs-attribute">matchgroup</span>=jsBrackets            <span class="hljs-attribute">start</span>=/\[/ <span class="hljs-attribute">end</span>=/\]/ <span class="hljs-attribute">contains</span>=@jsExpression,jsSpreadExpression extend fold<br></code></pre></td></tr></table></figure><p>æœ¬ä¹¦ä¸ä¼šè¯¦ç»†ä»‹ç» <code>syntax</code> åŠŸèƒ½ã€‚å¦‚æœæ‚¨æ„Ÿå…´è¶£ï¼Œå¯ä»¥æŸ¥é˜… <code>:h syntax.txt</code>ã€‚</p><h2 id="å·®å¼‚æŠ˜å "><a href="#å·®å¼‚æŠ˜å " class="headerlink" title="å·®å¼‚æŠ˜å "></a>å·®å¼‚æŠ˜å </h2><p>Vim å¯ä»¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œå·®å¼‚æ¯”è¾ƒã€‚</p><p>å¦‚æœæ‚¨æœ‰ <code>file1.txt</code>ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br></code></pre></td></tr></table></figure><p>ä»¥åŠ <code>file2.txt</code>ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br>emacs <span class="hljs-keyword">is</span> ok<br></code></pre></td></tr></table></figure><p>è¿è¡Œ <code>vimdiff file1.txt file2.txt</code>ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vim">+-- <span class="hljs-number">3</span> lines: <span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome -----<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br>[<span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome] / [emacs <span class="hljs-keyword">is</span> ok]<br></code></pre></td></tr></table></figure><p>Vim ä¼šè‡ªåŠ¨æŠ˜å ä¸€äº›ç›¸åŒçš„è¡Œã€‚è¿è¡Œ <code>vimdiff</code> å‘½ä»¤æ—¶ï¼ŒVim ä¼šè‡ªåŠ¨ä½¿ç”¨ <code>foldmethod=diff</code>ã€‚æ­¤æ—¶å¦‚æœè¿è¡Œ <code>:set foldmethod?</code>ï¼Œå®ƒå°†è¿”å› <code>diff</code>ã€‚</p><h2 id="æ ‡å¿—æŠ˜å "><a href="#æ ‡å¿—æŠ˜å " class="headerlink" title="æ ‡å¿—æŠ˜å "></a>æ ‡å¿—æŠ˜å </h2><p>è¦ä½¿ç”¨æ ‡å¿—æŠ˜å ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">foldmethod</span>=marker<br></code></pre></td></tr></table></figure><p>å‡è®¾æœ‰å¦‚ä¸‹æ–‡æœ¬ï¼š</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">Hello</span><br><span class="language-xml"></span><br><span class="language-xml"></span><span class="hljs-template-variable">&#123;&#123;&#123;</span><br><span class="hljs-template-variable"><span class="hljs-name">world</span></span><br><span class="hljs-template-variable">vim</span><br><span class="hljs-template-variable">&#125;&#125;&#125;</span><br></code></pre></td></tr></table></figure><p>è¾“å…¥ <code>zM</code> åä¼šçœ‹åˆ°ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ada">hello<br><br>+<span class="hljs-comment">-- 4 lines: -----</span><br></code></pre></td></tr></table></figure><p>Vim å°† <code>&#123;&#123;&#123;` å’Œ `&#125;&#125;&#125;</code> è§†ä¸ºæŠ˜å æŒ‡ç¤ºå™¨ï¼Œå¹¶æŠ˜å å…¶ä¸­çš„å†…å®¹ã€‚ä½¿ç”¨æ ‡å¿—æŠ˜å æ—¶ï¼ŒVim ä¼šå¯»æ‰¾ç”± <code>&#39;foldmarker&#39;</code> é€‰é¡¹å®šä¹‰çš„ç‰¹æ®Šæ ‡å¿—ï¼Œå¹¶æ ‡è®°æŠ˜å åŒºåŸŸã€‚è¦æŸ¥çœ‹ Vim ä½¿ç”¨çš„æ ‡å¿—ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> foldmarker?<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒVim æŠŠ <code>&#123;&#123;&#123;` å’Œ `&#125;&#125;&#125;</code> ä½œä¸ºæŒ‡ç¤ºå™¨ã€‚å¦‚æœæ‚¨æƒ³å°†æŒ‡ç¤ºå™¨æ›´æ”¹ä¸ºå…¶ä»–è¯¸å¦‚ â€œcoffee1â€ å’Œ â€œcoffee2â€ çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">foldmarker</span>=coffee1,coffee2<br></code></pre></td></tr></table></figure><p>å‡è®¾æœ‰å¦‚ä¸‹æ–‡æœ¬ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">hello</span><br><br>coffee1<br>world<br>vim<br>coffee2<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼ŒVim å°†ä½¿ç”¨ <code>coffee1</code> å’Œ <code>coffee2</code> ä½œä¸ºæ–°æŠ˜å æ ‡å¿—ã€‚æ³¨æ„ï¼ŒæŒ‡ç¤ºå™¨å¿…é¡»æ˜¯æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä¸èƒ½æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><h2 id="æŒä¹…åŒ–æŠ˜å "><a href="#æŒä¹…åŒ–æŠ˜å " class="headerlink" title="æŒä¹…åŒ–æŠ˜å "></a>æŒä¹…åŒ–æŠ˜å </h2><p>å½“å…³é—­ Vim ä¼šè¯åï¼Œæ‚¨å°†å¤±å»æ‰€æœ‰çš„æŠ˜å ä¿¡æ¯ã€‚å‡è®¾æ‚¨æœ‰ <code>count.txt</code> æ–‡ä»¶ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br><span class="hljs-literal">three</span><br><span class="hljs-literal">four</span><br><span class="hljs-literal">five</span><br></code></pre></td></tr></table></figure><p>æ‰‹åŠ¨ä»ç¬¬ä¸‰è¡Œå¼€å§‹å¾€ä¸‹æŠ˜å  (<code>:3,$fold</code>)ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-literal">one</span><br><span class="hljs-literal">two</span><br>+<span class="hljs-comment">-- 3 lines: three ---</span><br></code></pre></td></tr></table></figure><p>å½“æ‚¨é€€å‡º Vim å†é‡æ–°æ‰“å¼€ <code>count.txt</code> åï¼Œè¿™äº›æŠ˜å éƒ½ä¸è§äº†ï¼</p><p>è¦åœ¨æŠ˜å åä¿ç•™å®ƒä»¬ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:mkview</span><br></code></pre></td></tr></table></figure><p>å½“æ‰“å¼€ <code>count.txt</code> åï¼Œè¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:loadview</span><br></code></pre></td></tr></table></figure><p>æ‚¨çš„æŠ˜å ä¿¡æ¯éƒ½è¢«ä¿ç•™ä¸‹æ¥äº†ã€‚ç„¶è€Œï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨è¿è¡Œ <code>mkview</code> å’Œ <code>loadview</code>ã€‚æˆ‘çŸ¥é“ï¼Œç»ˆæœ‰ä¸€æ—¥ï¼Œæˆ‘ä¼šå¿˜è®°è¿è¡Œ <code>mkview</code> å°±å…³é—­æ–‡ä»¶äº†ï¼Œæ¥ç€ä¾¿ä¼šä¸¢å¤±æ‰€æœ‰æŠ˜å ä¿¡æ¯ã€‚èƒ½ä¸èƒ½è‡ªåŠ¨å®ç°è¿™ä¸ªå‘¢ï¼Ÿ</p><p>å½“ç„¶èƒ½ï¼è¦åœ¨å…³é—­ <code>.txt</code> æ–‡ä»¶æ—¶è‡ªåŠ¨è¿è¡Œ <code>mkview</code>ï¼Œä»¥åŠåœ¨æ‰“å¼€ <code>.txt</code> æ–‡ä»¶åè‡ªåŠ¨è¿è¡Œ <code>loadview</code>ï¼Œå°†ä¸‹åˆ—å†…å®¹æ·»åŠ è‡³æ‚¨çš„ vimrcï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">autocmd</span> BufWinLeave *.txt <span class="hljs-keyword">mkview</span><br><span class="hljs-keyword">autocmd</span> BufWinEnter *.txt <span class="hljs-keyword">silent</span> <span class="hljs-keyword">loadview</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šä¸€ç« æ‚¨å·²ç»è§è¿‡ <code>autocmd</code> äº†ï¼Œå®ƒç”¨äºåœ¨äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œä¸€æ¡å‘½ä»¤ã€‚è¿™é‡Œçš„ä¸¤ä¸ªäº‹ä»¶æ˜¯ï¼š</p><ul><li><code>BufWinLeave</code> ä»çª—å£ä¸­åˆ é™¤ç¼“å†²æ—¶ã€‚</li><li><code>BufWinEnter</code> åœ¨çª—å£ä¸­åŠ è½½ç¼“å†²æ—¶ã€‚</li></ul><p>ç°åœ¨ï¼Œå³ä½¿æ‚¨åœ¨ <code>.txt</code> æ–‡ä»¶å†…æŠ˜å å†…å®¹åç›´æ¥é€€å‡º Vimï¼Œä¸‹æ¬¡å†æ‰“å¼€è¯¥æ–‡ä»¶æ—¶ï¼Œæ‚¨çš„æŠ˜å ä¿¡æ¯éƒ½èƒ½è‡ªåŠ¨æ¢å¤ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“è¿è¡Œ <code>mkview</code> æ—¶ï¼ŒVimå°†æŠ˜å ä¿¡æ¯ä¿å­˜åœ¨<code>~/.vim/view</code> (Unix ç³»ç»Ÿ)ã€‚æ‚¨å¯ä»¥æŸ¥é˜… <code>:h &#39;viewdir&#39;</code> æ¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><h2 id="èªæ˜åœ°å­¦ä¹ æŠ˜å "><a href="#èªæ˜åœ°å­¦ä¹ æŠ˜å " class="headerlink" title="èªæ˜åœ°å­¦ä¹ æŠ˜å "></a>èªæ˜åœ°å­¦ä¹ æŠ˜å </h2><p>å½“æˆ‘åˆšå¼€å§‹ä½¿ç”¨ Vim æ—¶ï¼Œ æˆ‘ä¼šè·³è¿‡å­¦ä¹  Vim æŠ˜å ï¼Œå› ä¸ºæˆ‘è§‰å¾—å®ƒä¸å¤ªå®ç”¨ã€‚ç„¶è€Œï¼Œéšç€æˆ‘ç é¾„çš„å¢é•¿ï¼Œæˆ‘è¶Šå‘è§‰å¾—æŠ˜å åŠŸèƒ½å¤§æœ‰ç”¨å¤„ã€‚å¾—å½“åœ°ä½¿ç”¨æŠ˜å åŠŸèƒ½ï¼Œæ–‡æœ¬ç»“æ„å¯ä»¥æ›´åŠ æ¸…æ™°ï¼ŒçŠ¹å¦‚ä¸€æœ¬ä¹¦ç±çš„ç›®å½•ã€‚</p><p>å½“æ‚¨å­¦ä¹ æŠ˜å æ—¶ï¼Œè¯·ä»æ‰‹åŠ¨æŠ˜å å¼€å§‹ï¼Œå› ä¸ºå®ƒå¯ä»¥éšå­¦éšç”¨ã€‚ç„¶åé€æ¸å­¦ä¹ ä¸åŒçš„æŠ€å·§æ¥ä½¿ç”¨ç¼©è¿›å’Œæ ‡å¿—æŠ˜å ã€‚æœ€åï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨è¯­æ³•å’Œè¡¨è¾¾å¼æŠ˜å ã€‚æ‚¨ç”šè‡³å¯ä»¥ä½¿ç”¨åä¸¤ä¸ªæ¥ç¼–å†™æ‚¨è‡ªå·±çš„ Vim æ’ä»¶ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-Git</title>
    <link href="/2022/04/05/Vim/ch18_git/"/>
    <url>/2022/04/05/Vim/ch18_git/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬18ç« -Git"><a href="#ç¬¬18ç« -Git" class="headerlink" title="ç¬¬18ç«  Git"></a>ç¬¬18ç«  Git</h1><p>Vim å’Œ Git æ˜¯ä¸¤ç§å®ç°ä¸åŒåŠŸèƒ½çš„ä¼Ÿå¤§å·¥å…·ã€‚Vim ç”¨äºæ–‡æœ¬ç¼–è¾‘ï¼ŒGit ç”¨äºç‰ˆæœ¬æ§åˆ¶ã€‚</p><p>åœ¨æœ¬ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•å°† Vim å’Œ Git é›†æˆåœ¨ä¸€èµ·ã€‚</p><h2 id="å·®å¼‚æ¯”è¾ƒ"><a href="#å·®å¼‚æ¯”è¾ƒ" class="headerlink" title="å·®å¼‚æ¯”è¾ƒ"></a>å·®å¼‚æ¯”è¾ƒ</h2><p>åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæ‚¨çœ‹åˆ°äº†å¦‚ä½•è¿è¡Œ <code>vimdiff</code> å‘½ä»¤ä»¥æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ã€‚</p><p>å‡è®¾æ‚¨æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œ<code>file1.txt</code> å’Œ <code>file2.txt</code>ã€‚</p><p><code>file1.txt</code> çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pancakes</span><br><span class="hljs-attribute">waffles</span><br><span class="hljs-attribute">apples</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">milk</span><br><span class="hljs-attribute">apple juice</span><br><span class="hljs-attribute"></span><br><span class="hljs-attribute">yogurt</span><br></code></pre></td></tr></table></figure><p><code>file2.txt</code> çš„å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">pancakes<br>waffles<br><span class="hljs-keyword">oranges</span><br><span class="hljs-keyword"></span><br>milk<br><span class="hljs-keyword">orange </span><span class="hljs-keyword">juice</span><br><span class="hljs-keyword"></span><br>yogurt<br></code></pre></td></tr></table></figure><p>è‹¥è¦æŸ¥çœ‹ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">vimdiff</span> file1.txt file2.txt<br></code></pre></td></tr></table></figure><p>æˆ–è€…ä¹Ÿå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">vim</span> -d file1.txt file2.txt<br></code></pre></td></tr></table></figure><p align="center">  <img alt="Basic diffing with Vim" width="900" height="auto" src="images/diffing-basic.png"></p><p><code>vimdiff</code> å¹¶æ’æ˜¾ç¤ºä¸¤ä¸ªç¼“å†²åŒºã€‚å·¦è¾¹æ˜¯ <code>file1.txt</code>ï¼Œå³è¾¹æ˜¯ <code>file2.txt</code>ã€‚ä¸åŒçš„ä¸¤è¡Œï¼ˆapples å’Œ orangesï¼‰ä¼šè¢«é«˜äº®æ˜¾ç¤ºã€‚</p><p>å‡è®¾æ‚¨è¦ä½¿ç¬¬äºŒä¸ªç¼“å†²åŒºç›¸åº”ä½ç½®å˜æˆ applesï¼Œè€Œä¸æ˜¯ orangesã€‚è‹¥æƒ³ä» <code>file1.txt</code> ä¼ è¾“æ‚¨å½“å‰ä½ç½®ï¼ˆå½“å‰æ‚¨åœ¨ <code>file1.txt</code>ï¼‰çš„å†…å®¹åˆ° <code>file2.txt</code>ï¼Œé¦–å…ˆä½¿ç”¨ <code>]c</code> è·³è½¬åˆ°ä¸‹ä¸€å¤„å·®å¼‚ï¼ˆä½¿ç”¨ <code>[c</code> å¯è·³å›ä¸Šä¸€å¤„å·®å¼‚ï¼‰ï¼Œç°åœ¨å…‰æ ‡åº”è¯¥åœ¨ apples ä¸Šäº†ã€‚æ¥ç€è¿è¡Œ <code>:diffput</code>ã€‚æ­¤æ—¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æ˜¯ apples äº†ã€‚</p><p align="center">  <img alt="Finding files in FZF" width="900" height="auto" src="images/diffing-apples.png"></p><p>å¦‚æœæ‚¨æƒ³ä»å¦ä¸€ä¸ªç¼“å†²åŒºï¼ˆorange juiceï¼Œ<code>file2.txt</code>ï¼‰ä¼ è¾“æ–‡æœ¬æ¥æ›¿ä»£å½“å‰ç¼“å†²åŒºï¼ˆapple juiceï¼Œ<code>file1.txt</code>ï¼‰ï¼Œè®©æ‚¨çš„å…‰æ ‡ä»ç„¶ä½äº <code>file1.txt</code> çš„çª—å£ä¸­ï¼Œé¦–å…ˆä½¿ç”¨ <code>]c</code> è·³è½¬è‡³ä¸‹ä¸€å¤„å·®å¼‚ï¼Œæ­¤æ—¶å…‰æ ‡åº”è¯¥åœ¨ apple juice ä¸Šã€‚æ¥ç€è¿è¡Œ <code>:diffget</code> è·å–å¦ä¸€ä¸ªç¼“å†²åŒºçš„ orange juice æ¥æ›¿ä»£å½“å‰ç¼“å†²åŒºä¸­çš„ apple juiceã€‚</p><p><code>:diffput</code> å°†æ–‡æœ¬ä»å½“å‰ç¼“å†²åŒº <em>è¾“å‡º</em> åˆ°å¦ä¸€ä¸ªç¼“å†²åŒºã€‚<code>:diffget</code> ä»å¦ä¸€ä¸ªç¼“å†²åŒº <em>è·å–</em> æ–‡æœ¬åˆ°å½“å‰ç¼“å†²åŒºã€‚</p><p>å¦‚æœæœ‰å¤šä¸ªç¼“å†²åŒºï¼Œå¯ä»¥è¿è¡Œ <code>:diffput fileN.txt</code> å’Œ <code>:diffget fileN.txt</code> æ¥æŒ‡å®šç›®æ ‡ç¼“å†²åŒº fileNã€‚</p><h2 id="ä½¿ç”¨-Vim-ä½œä¸ºåˆå¹¶å·¥å…·"><a href="#ä½¿ç”¨-Vim-ä½œä¸ºåˆå¹¶å·¥å…·" class="headerlink" title="ä½¿ç”¨ Vim ä½œä¸ºåˆå¹¶å·¥å…·"></a>ä½¿ç”¨ Vim ä½œä¸ºåˆå¹¶å·¥å…·</h2><blockquote><p>â€œæˆ‘éå¸¸å–œæ¬¢è§£å†³åˆå¹¶å†²çªã€‚â€ â€”â€”ä½šå</p></blockquote><p>æˆ‘ä¸çŸ¥é“æœ‰è°å–œæ¬¢è§£å†³åˆå¹¶å†²çªï¼Œä½†æ€»ä¹‹ï¼Œåˆå¹¶å†²çªæ˜¯æ— æ³•é¿å…çš„ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•åˆ©ç”¨ Vim ä½œä¸ºè§£å†³åˆå¹¶å†²çªçš„å·¥å…·ã€‚</p><p>é¦–å…ˆï¼Œè¿è¡Œä¸‹åˆ—å‘½ä»¤æ¥å°†é»˜è®¤åˆå¹¶å·¥å…·æ›´æ”¹ä¸º <code>vimdiff</code>ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">git config merge.tool vimdiff<br>git config merge.conflictstyle diff3<br>git config mergetool.prompt <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>æˆ–è€…æ‚¨ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹ <code>~/.gitconfig</code>ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåº”è¯¥å¤„äºæ ¹ç›®å½•ä¸­ï¼Œä½†æ‚¨çš„å¯èƒ½åœ¨ä¸åŒçš„ä½ç½®ï¼‰ã€‚ä¸Šé¢çš„å‘½ä»¤åº”è¯¥ä¼šå°†æ‚¨çš„ <code>gitconfig</code> æ”¹æˆå¦‚ä¸‹è®¾ç½®çš„æ ·å­ï¼Œå¦‚æœæ‚¨è¿˜æ²¡æœ‰è¿è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œæ‚¨ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ›´æ”¹æ‚¨çš„ gitconfigã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[core]</span><br>  <span class="hljs-attr">editor</span> = vim<br><span class="hljs-section">[merge]</span><br>  <span class="hljs-attr">tool</span> = vimdiff<br>  <span class="hljs-attr">conflictstyle</span> = diff3<br><span class="hljs-section">[difftool]</span><br>  <span class="hljs-attr">prompt</span> = <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡çš„åˆå¹¶å†²çªæ¥æµ‹è¯•ä¸€ä¸‹ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ªç›®å½• <code>/food</code>ï¼Œå¹¶åˆå§‹åŒ– git ä»“åº“ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">git <span class="hljs-keyword">init</span><br></code></pre></td></tr></table></figure><p>æ·»åŠ  <code>breakfast.txt</code> æ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pancakes</span><br><span class="hljs-attribute">waffles</span><br><span class="hljs-attribute">oranges</span><br></code></pre></td></tr></table></figure><p>æ·»åŠ æ–‡ä»¶å¹¶æäº¤å®ƒï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">git <span class="hljs-keyword">add</span> .<br>git <span class="hljs-keyword">commit</span> -m &quot;Initial breakfast commit&quot;<br></code></pre></td></tr></table></figure><p>æ¥ç€ï¼Œåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ applesï¼š</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">git</span> checkout -<span class="hljs-keyword">b</span> apples<br></code></pre></td></tr></table></figure><p>æ›´æ”¹ <code>breakfast.txt</code> æ–‡ä»¶ä¸ºï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pancakes</span><br><span class="hljs-attribute">waffles</span><br><span class="hljs-attribute">apples</span><br></code></pre></td></tr></table></figure><p>ä¿å­˜æ–‡ä»¶ï¼Œæ·»åŠ å¹¶æäº¤æ›´æ”¹ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">git <span class="hljs-keyword">add</span> .<br>git <span class="hljs-keyword">commit</span> -m &quot;Apples not oranges&quot;<br></code></pre></td></tr></table></figure><p>çœŸæ£’ï¼ç°åœ¨ master åˆ†æ”¯æœ‰ orangesï¼Œè€Œ apples åˆ†æ”¯æœ‰ applesã€‚æ¥ç€å›åˆ° master åˆ†æ”¯ï¼š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git checkout <span class="hljs-literal">master</span><br></code></pre></td></tr></table></figure><p>åœ¨ <code>breakfast.txt</code> æ–‡ä»¶ä¸­ï¼Œæ‚¨åº”è¯¥èƒ½çœ‹åˆ°åŸæ¥çš„æ–‡æœ¬ orangesã€‚æ¥ç€å°†å®ƒæ”¹æˆ grapesï¼Œå› ä¸ºå®ƒæ˜¯ç°åœ¨çš„åº”å­£æ°´æœï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pancakes</span><br><span class="hljs-attribute">waffles</span><br><span class="hljs-attribute">grapes</span><br></code></pre></td></tr></table></figure><p>ä¿å­˜ã€æ·»åŠ ã€æäº¤ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">git <span class="hljs-keyword">add</span> .<br>git <span class="hljs-keyword">commit</span> -m &quot;Grapes not oranges&quot;<br></code></pre></td></tr></table></figure><p>åš¯ï¼è¿™ä¹ˆå¤šæ­¥éª¤ï¼ç°åœ¨å‡†å¤‡è¦å°† apples åˆ†æ”¯åˆå¹¶è¿› master åˆ†æ”¯äº†ï¼š</p><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cos">git <span class="hljs-keyword">merge</span> apples<br></code></pre></td></tr></table></figure><p>æ‚¨åº”è¯¥ä¼šçœ‹åˆ°å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">Auto-merging breakfast.txt<br><span class="hljs-keyword">CONFLICT</span> (content): Merge <span class="hljs-keyword">conflict</span> <span class="hljs-keyword">in</span> breakfast.txt<br>Automatic merge failed; fix conflicts <span class="hljs-keyword">and</span> <span class="hljs-keyword">then</span> <span class="hljs-keyword">commit</span> the result.<br></code></pre></td></tr></table></figure><p>æ²¡é”™ï¼Œä¸€ä¸ªå†²çªï¼ç°åœ¨ä¸€èµ·æ¥ç”¨ä¸€ä¸‹æ–°é…ç½®çš„ <code>mergetool</code> æ¥è§£å†³å†²çªå§ï¼è¿è¡Œï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">git mergetool</span><br></code></pre></td></tr></table></figure><p align="center">  <img alt="Three-way mergetool with Vim" width="900" height="auto" src="images/mergetool-initial.png"></p><p>Vim æ˜¾ç¤ºäº†å››ä¸ªçª—å£ã€‚æ³¨æ„ä¸€ä¸‹é¡¶éƒ¨ä¸‰ä¸ªï¼š</p><ul><li><code>LOCAL</code> åŒ…å«äº† <code>grapes</code>ã€‚è¿™æ˜¯â€œæœ¬åœ°â€ä¸­çš„å˜åŒ–ï¼Œä¹Ÿæ˜¯æ‚¨è¦åˆå¹¶çš„å†…å®¹ã€‚</li><li><code>BASE</code> åŒ…å«äº† <code>oranges</code>ã€‚è¿™æ˜¯ <code>LOCAL</code> å’Œ <code>REMOTE</code> çš„å…±åŒç¥–å…ˆï¼Œç”¨äºæ¯”è¾ƒå®ƒä»¬ä¹‹é—´çš„åˆ†æ­§ã€‚</li><li><code>REMOTE</code> åŒ…å«äº† <code>apples</code>ã€‚è¿™æ˜¯è¦è¢«åˆå¹¶çš„å†…å®¹ã€‚</li></ul><p>åº•éƒ¨çª—å£ï¼ˆä¹Ÿå³ç¬¬å››ä¸ªçª—å£ï¼‰ï¼Œæ‚¨èƒ½çœ‹åˆ°ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">pancakes<br>waffles<br>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br>grapes<br>||||||| db63958<br><span class="hljs-section">oranges</span><br><span class="hljs-section">=======</span><br>apples<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; apples<br></code></pre></td></tr></table></figure><p>ç¬¬å››ä¸ªçª—å£åŒ…å«äº†åˆå¹¶å†²çªæ–‡æœ¬ã€‚æœ‰äº†è¿™æ­¥è®¾ç½®ï¼Œå°±èƒ½æ›´è½»æ¾çœ‹åˆ°å“ªä¸ªç¯å¢ƒå‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ã€‚æ‚¨å¯ä»¥åŒæ—¶æŸ¥çœ‹ <code>LOCAL</code>ã€<code>BASE</code> å’Œ <code>REMOTE</code> çš„å†…å®¹ã€‚</p><p>æ‚¨çš„å…‰æ ‡åº”è¯¥åœ¨ç¬¬å››ä¸ªçª—å£çš„é«˜äº®åŒºåŸŸã€‚å†è¿è¡Œ <code>:diffget LOCAL</code>ï¼Œå°±å¯ä»¥<em>è·å–</em>æ¥è‡ª <code>LOCAL</code> çš„æ”¹å˜ï¼ˆgrapesï¼‰ã€‚åŒæ ·ï¼Œè¿è¡Œ <code>:diffget BASE</code> å¯ä»¥è·å–æ¥è‡ª <code>BASE</code> çš„æ”¹å˜ï¼ˆorangesï¼‰ï¼Œè€Œè¿è¡Œ <code>:diffget REMOTE</code> å¯ä»¥è·å–æ¥è‡ª <code>REMOTE</code> çš„æ”¹å˜ï¼ˆapplesï¼‰ã€‚</p><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¯•ç€è·å–æ¥è‡ª <code>LOCAL</code> çš„æ”¹å˜ã€‚è¿è¡Œ <code>:diffget LO</code>ï¼ˆ<code>LOCAL</code> çš„ç®€å†™ï¼‰ï¼Œç¬¬å››ä¸ªçª—å£å˜æˆäº† grapesã€‚å®Œæˆåï¼Œå°±å¯ä»¥ä¿å­˜å¹¶é€€å‡ºæ‰€æœ‰æ–‡ä»¶ï¼ˆ<code>:wqall</code>ï¼‰äº†ã€‚è¿˜ä¸é”™å§ï¼Ÿ</p><p>ç¨åŠ ç•™æ„æ‚¨ä¼šå‘ç°ï¼Œç°åœ¨å¤šäº†ä¸€ä¸ª <code>breakfast.txt.orig</code> æ–‡ä»¶ã€‚è¿™æ˜¯ Git é˜²æ­¢äº‹ä¸æ„¿è¿è€Œåˆ›å»ºçš„å¤‡ä»½æ–‡ä»¶ã€‚å¦‚æœæ‚¨ä¸å¸Œæœ› Git åœ¨åˆå¹¶æœŸé—´åˆ›å»ºå¤‡ä»½æ–‡ä»¶ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">git config --global mergetool.keepBackup <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h2 id="åœ¨-Vim-ä¸­ä½¿ç”¨-Git"><a href="#åœ¨-Vim-ä¸­ä½¿ç”¨-Git" class="headerlink" title="åœ¨ Vim ä¸­ä½¿ç”¨ Git"></a>åœ¨ Vim ä¸­ä½¿ç”¨ Git</h2><p>Vim æœ¬èº«æ²¡æœ‰é›†æˆ Gitï¼Œè¦åœ¨ Vim ä¸­æ‰§è¡Œ Git å‘½ä»¤ï¼Œä¸€ç§æ–¹æ³•æ˜¯åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸­ä½¿ç”¨ <code>!</code> å¹å·è¿ç®—ç¬¦ã€‚</p><p>ä½¿ç”¨ <code>!</code> å¯ä»¥è¿è¡Œä»»ä½• Git å‘½ä»¤ï¼š</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">:!git status<br>:!git commit<br>:!git diff<br>:!git push origin master<br></code></pre></td></tr></table></figure><p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ Vim çš„ç‰¹æ®Šå­—ç¬¦ <code>%</code> (å½“å‰ç¼“å†²åŒº) æˆ– <code>#</code> (å…¶ä»–ç¼“å†²åŒº)ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">:!git <span class="hljs-built_in">add</span> %         <span class="hljs-comment">&quot; git add current file</span><br>:!git checkout #    <span class="hljs-comment">&quot; git checkout the other file</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸€ä¸ªVimæŠ€å·§ï¼Œæ‚¨å¯ä»¥ç”¨æ¥æ·»åŠ ä¸åŒVimçª—å£ä¸­çš„å¤šä¸ªæ–‡ä»¶ï¼Œè¿è¡Œï¼š</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">windo !git add <span class="hljs-comment">%</span><br></code></pre></td></tr></table></figure><p>ç„¶åæäº¤ï¼š</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">:!git commit <span class="hljs-string">&quot;æ·»åŠ äº†Vimçª—å£ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œé…·&quot;</span><br></code></pre></td></tr></table></figure><p><code>windo</code>å‘½ä»¤æ˜¯VImçš„ â€œdoâ€ å‘½ä»¤å…¶ä¸­ä¹‹ä¸€ï¼Œç±»ä¼¼äºæ‚¨å‰é¢çœ‹åˆ°çš„ <code>argdo</code> ã€‚<code>windo</code> å°†å‘½ä»¤æ‰§è¡Œåœ¨æ¯ä¸€ä¸ªçª—å£ä¸­ã€‚</p><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><p>è¿™é‡Œæœ‰å¾ˆå¤šæä¾›gitæ”¯æŒçš„Vimæ’ä»¶ã€‚ä»¥ä¸‹æ˜¯ Vim ä¸­è¾ƒæµè¡Œçš„ Git ç›¸å…³æ’ä»¶åˆ—è¡¨ï¼ˆæ‚¨è¯»åˆ°è¿™ç¯‡æ–‡ç« æ—¶å¯èƒ½åˆæœ‰æ›´å¤šï¼‰ï¼š</p><ul><li><a href="https://github.com/airblade/vim-gitgutter">vim-gitgutter</a></li><li><a href="https://github.com/mhinz/vim-signify">vim-signify</a></li><li><a href="https://github.com/tpope/vim-fugitive">vim-fugitive</a></li><li><a href="https://github.com/junegunn/gv.vim">gv.vim</a></li><li><a href="https://github.com/jreybert/vimagit">vimagit</a></li><li><a href="https://github.com/sodapopcan/vim-twiggy">vim-twiggy</a></li><li><a href="https://github.com/tpope/vim-rhubarb">rhubarb</a></li></ul><p>å…¶ä¸­æœ€æµè¡Œçš„æ˜¯ vim-fugitiveã€‚æœ¬ç« çš„å‰©ä½™éƒ¨åˆ†ï¼Œæˆ‘å°†ä½¿ç”¨æ­¤æ’ä»¶æ¥ä»‹ç»å‡ ä¸ª git å·¥ä½œæµã€‚</p><h2 id="Vim-Fugitive"><a href="#Vim-Fugitive" class="headerlink" title="Vim-Fugitive"></a>Vim-Fugitive</h2><p>vim-fugitive æ’ä»¶å…è®¸æ‚¨åœ¨ä¸ç¦»å¼€ Vim ç¼–è¾‘å™¨çš„æƒ…å†µä¸‹è¿è¡Œ git å‘½ä»¤è¡Œç•Œé¢ã€‚æ‚¨ä¼šå‘ç°ï¼Œæœ‰äº›å‘½ä»¤åœ¨ Vim å†…éƒ¨æ‰§è¡Œæ—¶ä¼šæ›´å¥½ã€‚</p><p>å¼€å§‹å‰ï¼Œè¯·å…ˆä½¿ç”¨ Vim æ’ä»¶ç®¡ç†å™¨ï¼ˆ<a href="https://github.com/junegunn/vim-plug">vim-plug</a>ã€<a href="https://github.com/VundleVim/Vundle.vim">vundle</a>ã€<a href="https://github.com/Shougo/dein.vim">dein.vim</a> ç­‰ï¼‰å®‰è£… vim-fugitiveã€‚</p><h2 id="Git-Status"><a href="#Git-Status" class="headerlink" title="Git Status"></a>Git Status</h2><p>å½“æ‚¨ä¸å¸¦å‚æ•°åœ°è¿è¡Œ <code>:Git</code> å‘½ä»¤æ—¶ï¼Œvim-fugitive å°†æ˜¾ç¤ºä¸€ä¸ª git æ¦‚è¦çª—å£ï¼Œå®ƒæ˜¾ç¤ºäº†æœªè·Ÿè¸ªã€æœªæš‚å­˜å’Œå·²æš‚å­˜çš„æ–‡ä»¶ã€‚åœ¨æ­¤ â€œ<code>git status</code>â€ æ¨¡å¼ä¸‹ï¼Œæ‚¨å¯ä»¥åšä¸€äº›æ“ä½œï¼š</p><ul><li><code>Ctrl-n</code> &#x2F; <code>Ctrl-p</code> è½¬åˆ°ä¸‹ä¸€ä¸ª &#x2F; ä¸Šä¸€ä¸ªæ–‡ä»¶ã€‚</li><li><code>-</code> æš‚å­˜æˆ–å–æ¶ˆæš‚å­˜å…‰æ ‡å¤„çš„æ–‡ä»¶ã€‚</li><li><code>s</code> æš‚å­˜å…‰æ ‡å¤„çš„æ–‡ä»¶ã€‚</li><li><code>u</code> å–æ¶ˆæš‚å­˜å…‰æ ‡å¤„çš„æ–‡ä»¶ã€‚</li><li><code>&gt;</code> &#x2F; <code>&lt;</code> å†…è”æ˜¾ç¤ºæˆ–éšè—å…‰æ ‡å¤„æ–‡ä»¶çš„å·®å¼‚å˜åŒ–ã€‚</li></ul><p align="center">  <img alt="Finding files in FZF" width="900" height="auto" src="images/fugitive-git.png"></p><p>æŸ¥é˜… <code>:h fugitive-staging-maps</code> å¯è·å¾—æ›´å¤šä¿¡æ¯ã€‚</p><h2 id="Git-Blame"><a href="#Git-Blame" class="headerlink" title="Git Blame"></a>Git Blame</h2><p>åœ¨å½“å‰æ–‡ä»¶è¿è¡Œ <code>:Git blame</code> å‘½ä»¤ï¼Œvim-fugitive å¯ä»¥æ˜¾ç¤ºä¸€ä¸ªæ‹†åˆ†çš„é—®è´£çª—å£ã€‚è¿™æœ‰åŠ©äºè¿½è¸ªé‚£äº› BUG æ˜¯è°å†™çš„ï¼Œæ¥ç€å°±å¯ä»¥å†²ä»–&#x2F;å¥¹æ€’å¼ï¼ˆå¼€ä¸ªç©ç¬‘ï¼‰ã€‚</p><p>åœ¨  <code>&quot;git blame&quot;</code> æ¨¡å¼ä¸‹æ‚¨å¯ä»¥åšï¼š</p><ul><li><code>q</code> å…³é—­é—®è´£çª—å£ã€‚</li><li><code>A</code> è°ƒæ•´ä½œè€…åˆ—å¤§å°ã€‚</li><li><code>C</code> è°ƒæ•´æäº¤åˆ—å¤§å°ã€‚</li><li><code>D</code> è°ƒæ•´æ—¥æœŸ&#x2F;æ—¶é—´åˆ—å¤§å°ã€‚</li></ul><p>æŸ¥é˜… <code>:h :Git_blame</code> å¯è·å¾—æ›´å¤šä¿¡æ¯ã€‚</p><p align="center">  <img alt="Finding files in FZF" width="900" height="auto" src="images/fugitive-git-blame.png"></p><h2 id="Gdiffsplit"><a href="#Gdiffsplit" class="headerlink" title="Gdiffsplit"></a>Gdiffsplit</h2><p>å½“æ‚¨è¿è¡Œ <code>:Gdiffsplit</code> å‘½ä»¤åï¼Œvim-fugitive ä¼šæ‰§è¡Œ <code>vimdiff</code>ï¼Œæ¯”å¯¹ç´¢å¼•æˆ–å·¥ä½œæ ‘ä¸­çš„ç‰ˆæœ¬ä¸å½“å‰æ–‡ä»¶æœ€æ–°æ›´æ”¹çš„åŒºåˆ«ã€‚å¦‚æœè¿è¡Œ <code>:Gdiffsplit &lt;commit&gt;</code>ï¼Œvim-fugitive åˆ™ä¼šæ ¹æ® <code>&lt;commit&gt;</code> ä¸­çš„ç‰ˆæœ¬æ¥æ‰§è¡Œ <code>vimdiff</code>ã€‚</p><p align="center">  <img alt="Finding files in FZF" width="900" height="auto" src="images/fugitive-gdiffsplit.png"></p><p>ç”±äºæ‚¨å¤„äº <code>vimdiff</code> æ¨¡å¼ä¸­ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨ <code>:diffput</code> å’Œ <code>:diffget</code> æ¥ <em>è·å–</em> æˆ– <em>è¾“å‡º</em> å·®å¼‚ã€‚</p><h2 id="Gwrite-å’Œ-Gread"><a href="#Gwrite-å’Œ-Gread" class="headerlink" title="Gwrite å’Œ Gread"></a>Gwrite å’Œ Gread</h2><p>å½“æ‚¨åœ¨æ›´æ”¹æ–‡ä»¶åè¿è¡Œ <code>:Gwrite</code> å‘½ä»¤ï¼Œvim-fugitive å°†æš‚å­˜æ›´æ”¹ï¼Œå°±åƒè¿è¡Œ <code>git add &lt;current-file&gt;</code> ä¸€æ ·ã€‚</p><p>å½“æ‚¨åœ¨æ›´æ”¹æ–‡ä»¶åè¿è¡Œ <code>:Gread</code> å‘½ä»¤ï¼Œvim-fugitive ä¼šå°†æ–‡ä»¶è¿˜åŸè‡³æ›´æ”¹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿è¡Œ <code>git checkout &lt;current-file&gt;</code> ä¸€æ ·ã€‚ä½¿ç”¨ <code>:Gread</code> è¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯æ“ä½œå¯æ’¤é”€ã€‚å¦‚æœåœ¨è¿è¡Œ <code>:Gread</code> åæ‚¨æ”¹å˜ä¸»æ„ï¼Œæƒ³è¦ä¿ç•™åŸæ¥çš„æ›´æ”¹ï¼Œæ‚¨åªéœ€è¦æ’¤æ¶ˆï¼ˆ<code>u</code>ï¼‰ï¼ŒVim å°†æ’¤å› <code>:Gread</code> æ“ä½œã€‚è¦æ¢ä½œæ˜¯åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ <code>git checkout &lt;current-file&gt;</code>ï¼Œå°±å®Œæˆä¸äº†è¿™ç§æ“ä½œäº†ã€‚</p><h2 id="Gclog"><a href="#Gclog" class="headerlink" title="Gclog"></a>Gclog</h2><p>å½“æ‚¨è¿è¡Œ <code>:Gclog</code> å‘½ä»¤æ—¶ï¼Œvim-fugitive å°†æ˜¾ç¤ºæäº¤å†å²è®°å½•ï¼Œå°±åƒè¿è¡Œ <code>git log</code> å‘½ä»¤ä¸€æ ·ã€‚Vim-fugitive ä½¿ç”¨ Vim çš„ quickfix æ¥å®Œæˆæ­¤ä»»åŠ¡ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨ <code>:cnext</code> å’Œ <code>:cprevious</code> æ¥éå†ä¸‹ä¸€ä¸ªæˆ–ä¸Šä¸€ä¸ªæ—¥å¿—ä¿¡æ¯ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ <code>:copen</code> å’Œ <code>:cclose</code> æ‰“å¼€æˆ–å…³é—­æ—¥å¿—åˆ—è¡¨ã€‚</p><p align="center">  <img alt="Finding files in FZF" width="900" height="auto" src="images/fugitive-git-log.png"></p><p>åœ¨ <code>&quot;git log&quot;</code> æ¨¡å¼ä¸­ï¼Œæ‚¨å¯ä»¥åšä¸¤ä»¶äº‹ï¼š</p><ul><li>æŸ¥çœ‹æ ‘ã€‚</li><li>è®¿é—®çˆ¶çº§ï¼ˆä¸Šä¸€ä¸ªæäº¤ï¼‰ã€‚</li></ul><p>æ‚¨å¯ä»¥åƒ <code>git log</code> å‘½ä»¤ä¸€æ ·ï¼Œä¼ é€’å‚æ•°ç»™ <code>:Gclog</code> å‘½ä»¤ã€‚å¦‚æœæ‚¨é¡¹ç›®çš„æäº¤å†å²è®°å½•å¾ˆé•¿ï¼Œåªæƒ³çœ‹æœ€åä¸‰ä¸ªæäº¤ï¼Œåˆ™å¯ä»¥è¿è¡Œ <code>:Gclog -3</code>ã€‚å¦‚æœéœ€è¦æ ¹æ®æäº¤æ—¥æœŸæ¥ç­›é€‰è®°å½•ï¼Œå¯ä»¥è¿è¡Œç±»ä¼¼ <code>:Gclog --after=&quot;January 1&quot; --before=&quot;March 14&quot;</code> çš„å‘½ä»¤ã€‚</p><h2 id="Vim-Fugitive-çš„æ›´å¤šåŠŸèƒ½"><a href="#Vim-Fugitive-çš„æ›´å¤šåŠŸèƒ½" class="headerlink" title="Vim-Fugitive çš„æ›´å¤šåŠŸèƒ½"></a>Vim-Fugitive çš„æ›´å¤šåŠŸèƒ½</h2><p>ä»¥ä¸Šåªæ˜¯å¯¥å¯¥å‡ ä¸ª vim-fugitive åŠŸèƒ½çš„ä¾‹å­ï¼Œæ‚¨å¯ä»¥æŸ¥é˜… <code>:h fugitive.txt</code> æ¥äº†è§£æ›´å¤šæœ‰å…³ vim-fugitive çš„ä¿¡æ¯ã€‚å¤§å¤šæ•°æµè¡Œçš„ git å‘½ä»¤å¯èƒ½éƒ½æœ‰ vim-fugitive çš„ä¼˜åŒ–ç‰ˆæœ¬ï¼Œæ‚¨åªéœ€åœ¨æ–‡æ¡£ä¸­æŸ¥æ‰¾å®ƒä»¬ã€‚</p><p>å¦‚æœæ‚¨å¤„äº vim-fugitive çš„â€œç‰¹æ®Šæ¨¡å¼â€ï¼ˆå¦‚ <code>:Git</code> æˆ– <code>:Git blame</code> æ¨¡å¼ï¼‰ä¸­ï¼ŒæŒ‰ä¸‹ <code>g?</code> å¯ä»¥äº†è§£å½“å‰æœ‰å“ªäº›å¯ç”¨çš„å¿«æ·é”®ï¼ŒVim-fugitive å°†ä¸ºæ‚¨æ‰€å¤„çš„æ¨¡å¼æ˜¾ç¤ºç›¸åº”çš„ <code>:help</code> çª—å£ã€‚æ£’æäº†ï¼</p><h2 id="èªæ˜åœ°å­¦ä¹ -Vim-å’Œ-Git"><a href="#èªæ˜åœ°å­¦ä¹ -Vim-å’Œ-Git" class="headerlink" title="èªæ˜åœ°å­¦ä¹  Vim å’Œ Git"></a>èªæ˜åœ°å­¦ä¹  Vim å’Œ Git</h2><p>æ¯ä¸ªäººéƒ½æœ‰ä¸åŒçš„ git å·¥ä½œæµï¼Œå¯èƒ½ vim-fugitive éå¸¸åˆé€‚æ‚¨çš„å·¥ä½œæµï¼ˆä¹Ÿå¯èƒ½ä¸é€‚åˆï¼‰ã€‚æ€»ä¹‹ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ‚¨è¯•è¯•ä¸Šé¢åˆ—å‡ºçš„æ‰€æœ‰æ’ä»¶ã€‚å¯èƒ½è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æˆ‘æ²¡æœ‰åˆ—å‡ºæ¥ï¼Œéƒ½å¯ä»¥å»è¯•ä¸€è¯•ã€‚</p><p>è¦è®©Vim-gitçš„é›†æˆå·¥ä½œå¾—æ›´å¥½ï¼Œä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„åŠæ³•å°±æ˜¯å»æ·±å…¥äº†è§£gitã€‚Git æœ¬èº«æ˜¯ä¸€ä¸ªå¾ˆåºå¤§çš„ä¸»é¢˜ï¼Œæˆ‘åªå‘æ‚¨å±•ç¤ºäº†å®ƒå…¶ä¸­å¾ˆå°çš„ä¸€éƒ¨åˆ†ã€‚å¥½äº†ï¼Œæ¥ä¸‹æ¥è°ˆè°ˆå¦‚ä½•ä½¿ç”¨ Vim ç¼–è¯‘æ‚¨çš„ä»£ç ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-ç¼–è¯‘</title>
    <link href="/2022/04/05/Vim/ch19_compile/"/>
    <url>/2022/04/05/Vim/ch19_compile/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬19ç« -ç¼–è¯‘"><a href="#ç¬¬19ç« -ç¼–è¯‘" class="headerlink" title="ç¬¬19ç«  ç¼–è¯‘"></a>ç¬¬19ç«  ç¼–è¯‘</h1><p>ç¼–è¯‘æ˜¯è®¸å¤šç¼–ç¨‹è¯­è¨€çš„é‡è¦ä¸»é¢˜ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•åœ¨ Vim ä¸­ç¼–è¯‘ã€‚æ­¤å¤–ï¼Œæ‚¨å°†çœ‹åˆ°å¦‚ä½•åˆ©ç”¨å¥½ Vim çš„ <code>:make</code> å‘½ä»¤ã€‚</p><h2 id="ä»å‘½ä»¤è¡Œç¼–è¯‘"><a href="#ä»å‘½ä»¤è¡Œç¼–è¯‘" class="headerlink" title="ä»å‘½ä»¤è¡Œç¼–è¯‘"></a>ä»å‘½ä»¤è¡Œç¼–è¯‘</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨å¹å·è¿ç®—ç¬¦ï¼ˆ<code>!</code>ï¼‰è¿›è¡Œç¼–è¯‘ã€‚å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨ <code>g++</code> æ¥ç¼–è¯‘ <code>.cpp</code> æ–‡ä»¶ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">:!g</span><span class="hljs-literal">++</span> <span class="hljs-comment">hello</span><span class="hljs-string">.</span><span class="hljs-comment">cpp</span> <span class="hljs-literal">-</span><span class="hljs-comment">o hello</span><br></code></pre></td></tr></table></figure><p>ä½†è¦æ¯æ¬¡æ‰‹åŠ¨æŒ‡å®šæ–‡ä»¶åå’Œè¾“å‡ºæ–‡ä»¶åä¼šéå¸¸ç¹çå’Œå®¹æ˜“å‡ºé”™ã€‚è€Œ makefile æ˜¯æ¡å¯è¡Œä¹‹è·¯ã€‚</p><h2 id="Makeå‘½ä»¤"><a href="#Makeå‘½ä»¤" class="headerlink" title="Makeå‘½ä»¤"></a>Makeå‘½ä»¤</h2><p>Vim æœ‰è¿è¡Œ makefile çš„ <code>:make</code> å‘½ä»¤ã€‚å½“æ‚¨è¿è¡Œå®ƒæ—¶ï¼ŒVim ä¼šåœ¨å½“å‰ç›®å½•æŸ¥æ‰¾ makefile å¹¶æ‰§è¡Œå®ƒã€‚</p><p>åœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åä¸º <code>makefile</code> ï¼Œç„¶åæ·»åŠ ä¸‹åˆ—å†…å®¹ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">all</span>:<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Hello all&quot;</span><br>foo:<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Hello foo&quot;</span><br>list_pls:<br><span class="hljs-keyword">ls</span><br></code></pre></td></tr></table></figure><p>åœ¨ Vim ä¸­è¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:make</span><br></code></pre></td></tr></table></figure><p>Vim æ‰§è¡Œå®ƒçš„æ–¹å¼ä¸ä»ç»ˆç«¯è¿è¡Œå®ƒçš„æ–¹å¼ç›¸åŒã€‚<code>:make</code> å‘½ä»¤ä¹Ÿæ¥å—ç»ˆç«¯ä¸­ <code>make</code> å‘½ä»¤çš„å‚æ•°ã€‚è¿è¡Œï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">make</span> foo<br><span class="hljs-string">&quot; Outputs &quot;</span>Hello foo<span class="hljs-comment">&quot;</span><br><br>:<span class="hljs-keyword">make</span> list_pls<br><span class="hljs-comment">&quot; Outputs the ls command result</span><br></code></pre></td></tr></table></figure><p>å¦‚æœå‘½ä»¤æ‰§è¡Œå¼‚å¸¸ï¼Œ<code>:make</code> å‘½ä»¤å°†ä½¿ç”¨ Vim çš„ <code>quickfix</code> æ¥å­˜å‚¨è¿™äº›é”™è¯¯ã€‚ç°åœ¨è¯•ç€è¿è¡Œä¸€ä¸ªä¸å­˜åœ¨çš„ç›®æ ‡ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:make</span> dontexist<br></code></pre></td></tr></table></figure><p>æ‚¨åº”è¯¥ä¼šçœ‹åˆ°è¯¥å‘½ä»¤æ‰§è¡Œé”™è¯¯ã€‚è¿è¡Œ <code>quickfix</code> å‘½ä»¤ <code>:copen</code> å¯ä»¥æ‰“å¼€ <code>quickfix</code> çª—å£æ¥æŸ¥çœ‹è¯¥é”™è¯¯ï¼š</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">|| <span class="hljs-built_in">make</span>: *** No rule to <span class="hljs-built_in">make</span> target `dontexist&#x27;.  <span class="hljs-keyword">Stop</span>.<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-Make-ç¼–è¯‘"><a href="#ä½¿ç”¨-Make-ç¼–è¯‘" class="headerlink" title="ä½¿ç”¨ Make ç¼–è¯‘"></a>ä½¿ç”¨ Make ç¼–è¯‘</h2><p>è®©æˆ‘ä»¬ä½¿ç”¨ makefile æ¥ç¼–è¯‘ä¸€ä¸ªåŸºæœ¬çš„ <code>.cpp</code> ç¨‹åºã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>hello.cpp</code> æ–‡ä»¶ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Hello!\n&quot;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œæ›´æ–° <code>makefile</code> æ¥ç¼–è¯‘å’Œè¿è¡Œ <code>.cpp</code> æ–‡ä»¶ï¼š</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">all:</span><br>echo <span class="hljs-string">&quot;build, run&quot;</span><br><span class="hljs-symbol">build:</span><br>g++ hello.cpp -o hello<br><span class="hljs-symbol">run:</span><br>./hello<br></code></pre></td></tr></table></figure><p>ç°åœ¨è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:make</span> build<br></code></pre></td></tr></table></figure><p><code>g++</code> å°†ç¼–è¯‘ <code>./hello.cpp</code> å¹¶ä¸”ç”Ÿæˆ <code>./hello</code>ã€‚æ¥ç€è¿è¡Œï¼š</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">:<span class="hljs-built_in">make</span> <span class="hljs-keyword">run</span><br></code></pre></td></tr></table></figure><p>æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç»ˆç«¯ä¸Šæ‰“å°å‡ºäº† <code>&quot;Hello!&quot;</code>ã€‚</p><h2 id="ä¸åŒçš„Makeç¨‹åº"><a href="#ä¸åŒçš„Makeç¨‹åº" class="headerlink" title="ä¸åŒçš„Makeç¨‹åº"></a>ä¸åŒçš„Makeç¨‹åº</h2><p>å½“æ‚¨è¿è¡Œ <code>:make</code> æ—¶ï¼ŒVim å®é™…ä¸Šä¼šæ‰§è¡Œ <code>makeprg</code> é€‰é¡¹æ‰€è®¾ç½®çš„ä»»ä½•å‘½ä»¤ï¼Œæ‚¨å¯ä»¥è¿è¡Œ <code>:set makeprg?</code> æ¥æŸ¥çœ‹å®ƒï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">makeprg</span><span class="hljs-operator">=</span>make<br></code></pre></td></tr></table></figure><p><code>:make</code> çš„é»˜è®¤å‘½ä»¤æ˜¯å¤–éƒ¨çš„ <code>make</code> å‘½ä»¤ã€‚è‹¥æƒ³ä¿®æ”¹ <code>:make</code> å‘½ä»¤ï¼Œä½¿æ¯æ¬¡è¿è¡Œå®ƒæ—¶æ‰§è¡Œ <code>g++ &lt;your-file-name&gt;</code>ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">makeprg</span>=g++\ %<br></code></pre></td></tr></table></figure><p><code>\</code> ç”¨äºè½¬ä¹‰ <code>g++</code> åçš„ç©ºæ ¼ã€‚Vim ä¸­ <code>%</code> ç¬¦å·ä»£è¡¨å½“å‰æ–‡ä»¶ã€‚å› æ­¤ï¼Œ<code>g++\ %</code> å‘½ä»¤ç­‰äºè¿è¡Œ <code>g++ hello.cpp</code>ã€‚</p><p>è½¬åˆ° <code>./hello.cpp</code> ç„¶åè¿è¡Œ <code>:make</code>ï¼ŒVim å°†ç¼–è¯‘ <code>hello.cpp</code> å¹¶è¾“å‡º <code>a.out</code>ï¼ˆå› ä¸ºæ‚¨æ²¡æœ‰æŒ‡å®šè¾“å‡ºï¼‰ã€‚è®©æˆ‘ä»¬é‡æ„ä¸€ä¸‹ï¼Œä½¿ç”¨å»æ‰æ‰©å±•åçš„åŸå§‹æ–‡ä»¶åæ¥å‘½åç¼–è¯‘åçš„è¾“å‡ºã€‚è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ˆæˆ–å°†å®ƒä»¬æ·»åŠ åˆ°vimrcï¼‰ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">makeprg</span>=g++\ %\ -o\ %&lt;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‘½ä»¤åˆ†è§£å¦‚ä¸‹ï¼š</p><ul><li><code>g++\\ %</code> å¦‚ä¸Šæ‰€è¿°ï¼Œç­‰åŒäºè¿è¡Œ <code>g++ &lt;your-file&gt;</code>ã€‚</li><li><code>-o</code> è¾“å‡ºé€‰é¡¹ã€‚</li><li><code>%&lt;</code> åœ¨ Vim ä¸­ä»£è¡¨äº†æ²¡æœ‰æ‰©å±•åçš„å½“å‰æ–‡ä»¶åï¼ˆå¦‚ <code>hello.cpp</code> å˜æˆ <code>hello</code>ï¼‰ã€‚</li></ul><p>å½“æ‚¨åœ¨ <code>./hello.cpp</code> ä¸­è¿è¡Œ <code>:make</code> æ—¶ï¼Œå®ƒå°†ç¼–è¯‘ä¸º <code>./hello</code>ã€‚è¦åœ¨ <code>./hello.cpp</code> ä¸­å¿«é€Ÿåœ°æ‰§è¡Œ <code>./hello</code>ï¼Œå¯ä»¥è¿è¡Œ <code>:!./%&lt;</code>ã€‚åŒæ ·ï¼Œå®ƒç­‰åŒäºè¿è¡Œ <code>:!./&lt;æ— åç¼€çš„å½“å‰æ–‡ä»¶å&gt;</code>ã€‚</p><p>æŸ¥é˜… <code>:h :compiler</code> å’Œ <code>:h write-compiler-plugin</code> å¯ä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><h2 id="ä¿å­˜æ—¶è‡ªåŠ¨ç¼–è¯‘"><a href="#ä¿å­˜æ—¶è‡ªåŠ¨ç¼–è¯‘" class="headerlink" title="ä¿å­˜æ—¶è‡ªåŠ¨ç¼–è¯‘"></a>ä¿å­˜æ—¶è‡ªåŠ¨ç¼–è¯‘</h2><p>æœ‰äº†è‡ªåŠ¨åŒ–ç¼–è¯‘ï¼Œæ‚¨å¯ä»¥è®©ç”Ÿæ´»æ›´åŠ è½»æ¾ã€‚å›æƒ³ä¸€ä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Vim çš„ <code>autocmd</code> æ¥æ ¹æ®æŸäº›äº‹ä»¶è‡ªåŠ¨æ‰§è¡Œæ“ä½œã€‚ä¾‹å¦‚ï¼Œè¦è‡ªåŠ¨åœ¨æ¯æ¬¡ä¿å­˜åç¼–è¯‘ <code>.cpp</code> æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥å°†ä¸‹é¢å†…å®¹æ·»åŠ åˆ°vimrcï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">autocmd</span> BufWritePost *.cpp <span class="hljs-keyword">make</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨æ‚¨æ¯æ¬¡ä¿å­˜ <code>.cpp</code> æ–‡ä»¶åï¼ŒVim éƒ½å°†è‡ªåŠ¨æ‰§è¡Œ <code>make</code> å‘½ä»¤ã€‚</p><h2 id="åˆ‡æ¢ç¼–è¯‘å™¨"><a href="#åˆ‡æ¢ç¼–è¯‘å™¨" class="headerlink" title="åˆ‡æ¢ç¼–è¯‘å™¨"></a>åˆ‡æ¢ç¼–è¯‘å™¨</h2><p>Vim æœ‰ä¸€ä¸ª <code>:compiler</code> å‘½ä»¤å¯ä»¥å¿«é€Ÿåˆ‡æ¢ç¼–è¯‘å™¨ã€‚æ‚¨çš„ Vim å¯èƒ½é™„å¸¦äº†ä¸€äº›é¢„æ„å»ºçš„ç¼–è¯‘é…ç½®ã€‚è¦æ£€æŸ¥æ‚¨æ‹¥æœ‰å“ªäº›ç¼–è¯‘å™¨ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:e <span class="hljs-variable">$VIMRUNTIME</span><span class="hljs-regexp">/compilers/</span>&lt;tab&gt;<br></code></pre></td></tr></table></figure><p>æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªä¸åŒç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨åˆ—è¡¨ã€‚</p><p>è‹¥è¦ä½¿ç”¨ <code>:compiler</code> å‘½ä»¤ï¼Œå‡è®¾æ‚¨æœ‰ä¸€ä¸ª ruby æ–‡ä»¶ <code>hello.rb</code>ï¼Œå†…å®¹æ˜¯ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">puts</span> <span class="hljs-string">&quot;Hello ruby&quot;</span><br></code></pre></td></tr></table></figure><p>å›æƒ³ä¸€ä¸‹ï¼Œå¦‚æœè¿è¡Œ <code>:make</code>ï¼ŒVim å°†æ‰§è¡Œèµ‹å€¼ç»™ <code>makeprg</code> çš„ä»»ä½•å‘½ä»¤ï¼ˆé»˜è®¤æ˜¯ <code>make</code>ï¼‰ã€‚å¦‚æœæ‚¨è¿è¡Œï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">compiler</span> <span class="hljs-keyword">ruby</span><br></code></pre></td></tr></table></figure><p>Vim æ‰§è¡Œ <code>$VIMRUNTIME/compiler/ruby.vim</code> è„šæœ¬ï¼Œå¹¶å°† <code>makeprg</code> æ›´æ”¹ä¸ºä½¿ç”¨ <code>ruby</code> å‘½ä»¤ã€‚ç°åœ¨å¦‚æœæ‚¨è¿è¡Œ <code>:set makeprg?</code>ï¼Œå®ƒä¼šæ˜¾ç¤º <code>makeprg=ruby</code>ï¼ˆè¿™å–å†³äºæ‚¨ <code>$VIMRUNTIME/compiler/ruby.vim</code> é‡Œçš„å†…å®¹ï¼Œå¦‚æœæ‚¨æœ‰å…¶ä»–è‡ªå®šä¹‰çš„ ruby ç¼–è¯‘å™¨ï¼Œæ‚¨çš„ç»“æœå¯èƒ½ä¼šæœ‰ä¸åŒï¼‰ã€‚<code>:compiler &lt;your-lang&gt;</code> å‘½ä»¤å…è®¸æ‚¨å¿«é€Ÿåˆ‡æ¢è‡³å…¶ä»–ç¼–è¯‘å™¨ã€‚å¦‚æœæ‚¨çš„é¡¹ç›®ä½¿ç”¨å¤šç§è¯­è¨€ï¼Œè¿™ä¼šéå¸¸æœ‰ç”¨ã€‚</p><p>æ‚¨ä¸å¿…ä½¿ç”¨ <code>:compiler</code> æˆ– <code>makeprg</code> æ¥ç¼–è¯‘ç¨‹åºã€‚æ‚¨å¯ä»¥è¿è¡Œæµ‹è¯•è„šæœ¬ã€åˆ†ææ–‡ä»¶ã€å‘é€ä¿¡å·æˆ–ä»»ä½•æ‚¨æƒ³è¦çš„å†…å®¹ã€‚</p><h2 id="åˆ›å»ºè‡ªå®šä¹‰ç¼–è¯‘å™¨"><a href="#åˆ›å»ºè‡ªå®šä¹‰ç¼–è¯‘å™¨" class="headerlink" title="åˆ›å»ºè‡ªå®šä¹‰ç¼–è¯‘å™¨"></a>åˆ›å»ºè‡ªå®šä¹‰ç¼–è¯‘å™¨</h2><p>è®©æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ Typescript ç¼–è¯‘å™¨ã€‚å…ˆåœ¨æ‚¨çš„è®¾å¤‡ä¸Šå®‰è£… Typescriptï¼ˆ<code>npm install -g typescript</code>ï¼‰ï¼Œå®‰è£…å®Œåæ‚¨å°†æœ‰ <code>tsc</code> å‘½ä»¤ã€‚å¦‚æœæ‚¨ä¹‹å‰æ²¡æœ‰å°è¯•è¿‡ typescriptï¼Œ<code>tsc</code> å°† Typescript æ–‡ä»¶ç¼–è¯‘æˆ Javascript æ–‡ä»¶ã€‚å‡è®¾æ‚¨æœ‰ä¸€ä¸ª <code>hello.ts</code> æ–‡ä»¶ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const hello <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span><span class="hljs-comment">;</span><br>console.log(hello)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œ <code>tsc hello.ts</code> åï¼Œå®ƒå°†è¢«ç¼–è¯‘æˆ <code>hello.js</code>ã€‚ç„¶è€Œï¼Œå¦‚æœæ‚¨çš„ <code>hello.ts</code> æ–‡ä»¶ä¸­æœ‰å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const hello <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span><span class="hljs-comment">;</span><br><span class="hljs-attribute">hello</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello again&quot;</span><span class="hljs-comment">;</span><br>console.log(hello)<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è¿™ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºä¸èƒ½æ›´æ”¹ä¸€ä¸ª <code>const</code> å˜é‡ã€‚è¿è¡Œ <code>tsc hello.ts</code> çš„é”™è¯¯å¦‚ä¸‹ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs applescript">hello.ts:<span class="hljs-number">2</span>:<span class="hljs-number">1</span> - <span class="hljs-keyword">error</span> TS2588: Cannot assign <span class="hljs-keyword">to</span> &#x27;person&#x27; because <span class="hljs-keyword">it</span> <span class="hljs-keyword">is</span> a <span class="hljs-built_in">constant</span>.<br><br><span class="hljs-number">2</span> person = <span class="hljs-string">&quot;hello again&quot;</span>;<br>  ~~~~~~<br><br><br>Found <span class="hljs-number">1</span> <span class="hljs-keyword">error</span>.<br></code></pre></td></tr></table></figure><p>è¦åˆ›å»ºä¸€ä¸ªç®€å•çš„ Typescript ç¼–è¯‘å™¨ï¼Œè¯·åœ¨æ‚¨çš„ <code>~/.vim/</code> ç›®å½•ä¸­æ–°æ·»åŠ ä¸€ä¸ª <code>compiler</code> ç›®å½•ï¼ˆå³ <code>~/.vim/compiler/</code>ï¼‰ï¼Œæ¥ç€åˆ›å»º <code>typescript.vim</code> æ–‡ä»¶ï¼ˆå³ <code>~/.vim/compiler/typescript.vim</code>ï¼‰ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">CompilerSet <span class="hljs-attribute">makeprg</span>=tsc<br>CompilerSet <span class="hljs-attribute">errorformat</span>=%f:\ %m<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œå°† <code>makeprg</code> è®¾ç½®ä¸ºè¿è¡Œ <code>tsc</code> å‘½ä»¤ã€‚ç¬¬äºŒè¡Œå°†é”™è¯¯æ ¼å¼è®¾ç½®ä¸ºæ˜¾ç¤ºæ–‡ä»¶ï¼ˆ<code>%f</code>ï¼‰ï¼Œåè·Ÿå†’å·ï¼ˆ<code>:</code>ï¼‰å’Œè½¬ä¹‰çš„ç©ºæ ¼ï¼ˆ<code>\ </code>ï¼‰ï¼Œæœ€åæ˜¯é”™è¯¯æ¶ˆæ¯ï¼ˆ<code>%m</code>ï¼‰ã€‚æŸ¥é˜… <code>:h errorformat</code> å¯äº†è§£æ›´å¤šå…³äºé”™è¯¯æ ¼å¼çš„ä¿¡æ¯ã€‚</p><p>æ‚¨è¿˜å¯ä»¥é˜…è¯»ä¸€äº›é¢„åˆ¶çš„ç¼–è¯‘å™¨ï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦‚ä½•å®ç°çš„ã€‚è¾“å…¥ <code>:e $VIMRUNTIME/compiler/&lt;some-language&gt;.vim</code> æŸ¥çœ‹ã€‚</p><p>æœ‰äº›æ’ä»¶å¯èƒ½ä¼šå¹²æ‰° Typescript æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>--noplugin</code> æ ‡å¿—ä»¥é›¶æ’ä»¶çš„å½¢å¼æ‰“å¼€<code>hello.ts</code> æ–‡ä»¶ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> --noplugin hello.<span class="hljs-keyword">ts</span><br></code></pre></td></tr></table></figure><p>æ£€æŸ¥ <code>makeprg</code>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> makeprg?<br></code></pre></td></tr></table></figure><p>å®ƒåº”è¯¥ä¼šæ˜¾ç¤ºé»˜è®¤çš„ <code>make</code> ç¨‹åºã€‚è¦ä½¿ç”¨æ–°çš„ Typescript ç¼–è¯‘å™¨ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:compiler</span> typescript<br></code></pre></td></tr></table></figure><p>å½“æ‚¨è¿è¡Œ <code>:set makeprg?</code> æ—¶ï¼Œå®ƒåº”è¯¥ä¼šæ˜¾ç¤º <code>tsc</code> äº†ã€‚æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:make</span> %<br></code></pre></td></tr></table></figure><p>å›æƒ³ä¸€ä¸‹ï¼Œ<code>%</code> ä»£è¡¨å½“å‰æ–‡ä»¶ã€‚çœ‹çœ‹æ‚¨çš„ Typescript ç¼–è¯‘å™¨æ˜¯å¦å¦‚é¢„æœŸä¸€æ ·å·¥ä½œã€‚è¿è¡Œ <code>:copen</code> å¯ä»¥æŸ¥çœ‹é”™è¯¯åˆ—è¡¨ã€‚</p><h2 id="å¼‚æ­¥ç¼–è¯‘å™¨"><a href="#å¼‚æ­¥ç¼–è¯‘å™¨" class="headerlink" title="å¼‚æ­¥ç¼–è¯‘å™¨"></a>å¼‚æ­¥ç¼–è¯‘å™¨</h2><p>æœ‰æ—¶ç¼–è¯‘å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚åœ¨ç­‰å¾…ç¼–è¯‘æ—¶ï¼Œæ‚¨ä¸ä¼šæƒ³çœ¼ççç›¯ç€å·²å†»ç»“çš„ Vim çš„ã€‚å¦‚æœå¯ä»¥å¼‚æ­¥ç¼–è¯‘ï¼Œå°±å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´ç»§ç»­ä½¿ç”¨ Vim äº†ï¼Œå²‚ä¸ç¾å“‰ï¼Ÿ</p><p>å¹¸è¿çš„æ˜¯ï¼Œæœ‰æ’ä»¶æ¥è¿è¡Œå¼‚æ­¥è¿›ç¨‹ã€‚æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¥½çš„æ˜¯ï¼š</p><ul><li><a href="https://github.com/tpope/vim-dispatch">vim-dispatch</a></li><li><a href="https://github.com/skywind3000/asyncrun.vim">asyncrun.vim</a></li></ul><p>åœ¨è¿™ä¸€ç« ä¸­ï¼Œæˆ‘å°†ä»‹ç» vim-dispatchï¼Œä½†æˆ‘å¼ºçƒˆå»ºè®®æ‚¨å°è¯•ä¸Šè¿°åˆ—è¡¨ä¸­æ‰€æœ‰æ’ä»¶ã€‚</p><p><em>Vim å’Œ NeoVim å®é™…ä¸Šéƒ½æ”¯æŒå¼‚æ­¥ä½œä¸šï¼Œä½†å®ƒä»¬è¶…å‡ºäº†æœ¬ç« çš„èŒƒå›´ã€‚å¦‚æœæ‚¨å¥½å¥‡ï¼Œå¯ä»¥æŸ¥é˜… <code>:h job-channel-overview.txt</code>ã€‚</em></p><h2 id="æ’ä»¶ï¼šVim-dispatch"><a href="#æ’ä»¶ï¼šVim-dispatch" class="headerlink" title="æ’ä»¶ï¼šVim-dispatch"></a>æ’ä»¶ï¼šVim-dispatch</h2><p>Vim-dispatch æœ‰å‡ ä¸ªå‘½ä»¤ï¼Œæœ€ä¸»è¦çš„ä¸¤ä¸ªæ˜¯ <code>:Make</code> å’Œ <code>:Dispatch</code>ã€‚</p><h3 id="å¼‚æ­¥Make"><a href="#å¼‚æ­¥Make" class="headerlink" title="å¼‚æ­¥Make"></a>å¼‚æ­¥Make</h3><p>Vim-dispatch çš„ <code>:Make</code> å‘½ä»¤ä¸ Vim çš„ <code>:make</code> ç›¸ä¼¼ï¼Œä½†å®ƒä»¥å¼‚æ­¥æ–¹å¼è¿è¡Œã€‚å¦‚æœæ‚¨æ­£å¤„äº Javascript é¡¹ç›®ä¸­ï¼Œå¹¶ä¸”éœ€è¦è¿è¡Œ <code>npm t</code>ï¼Œå¯ä»¥å°† <code>makeprg</code> è®¾ç½®ä¸ºï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">makeprg</span>=npm\\ t<br></code></pre></td></tr></table></figure><p>å¦‚æœè¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:make</span><br></code></pre></td></tr></table></figure><p>Vim å°†æ‰§è¡Œ <code>npm t</code>ã€‚ä½†åŒæ—¶ï¼Œæ‚¨åªèƒ½ç›¯ç€å†»ç»“äº†çš„å±å¹•ã€‚æœ‰äº† vim-dispatchï¼Œæ‚¨åªéœ€è¦è¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:Make</span><br></code></pre></td></tr></table></figure><p>Vim å°†å¯ç”¨åå°è¿›ç¨‹å¼‚æ­¥è¿è¡Œ <code>npm t</code>ï¼ŒåŒæ—¶æ‚¨è¿˜èƒ½åœ¨ Vim ä¸­ç»§ç»­ç¼–è¾‘æ‚¨çš„æ–‡æœ¬ã€‚æ£’æäº†ï¼</p><h3 id="å¼‚æ­¥è°ƒåº¦ï¼ˆDispatchï¼‰"><a href="#å¼‚æ­¥è°ƒåº¦ï¼ˆDispatchï¼‰" class="headerlink" title="å¼‚æ­¥è°ƒåº¦ï¼ˆDispatchï¼‰"></a>å¼‚æ­¥è°ƒåº¦ï¼ˆDispatchï¼‰</h3><p><code>:Dispatch</code> å‘½ä»¤çš„å·¥ä½œæ–¹å¼å’Œ <code>:compiler</code> åŠ <code>:!</code> ç±»ä¼¼ï¼Œå®ƒå¯ä»¥åœ¨Vimä¸­è¿è¡Œä»»æ„å¤–éƒ¨å‘½ä»¤ã€‚</p><p>å‡è®¾æ‚¨åœ¨ ruby spec æ–‡ä»¶ä¸­ï¼Œéœ€è¦æ‰§è¡Œæµ‹è¯•ï¼Œå¯ä»¥è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:Dispatch</span> rspec %<br></code></pre></td></tr></table></figure><p>Vim å°†å¯¹å½“å‰æ–‡ä»¶å¼‚æ­¥è¿è¡Œ <code>rspec</code> å‘½ä»¤ã€‚</p><h3 id="è‡ªåŠ¨è°ƒåº¦"><a href="#è‡ªåŠ¨è°ƒåº¦" class="headerlink" title="è‡ªåŠ¨è°ƒåº¦"></a>è‡ªåŠ¨è°ƒåº¦</h3><p>Vim-dispatch æœ‰ä¸€ä¸ªç¼“å†²åŒºå˜é‡<code>b:dispatch</code>ï¼Œæ‚¨å¯ä»¥é…ç½®å®ƒæ¥è‡ªåŠ¨æ‰§è¡Œç‰¹å®šå‘½ä»¤ï¼Œæ‚¨å¯ä»¥åˆ©ç”¨ <code>autocmd</code>å’Œå®ƒä¸€èµ·å·¥ä½œã€‚å¦‚æœåœ¨æ‚¨çš„ vimrc ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">autocmd</span> BufEnter *_spec.rb <span class="hljs-keyword">let</span> <span class="hljs-variable">b:dispatch</span> = <span class="hljs-string">&#x27;bundle exec rspec %&#x27;</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨æ¯å½“æ‚¨è¿›å…¥ï¼ˆ<code>BufEnter</code>ï¼‰ä¸€ä¸ªä»¥ <code>_spec.rb</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œè¿è¡Œ<code>:Dispatch</code> å°†è‡ªåŠ¨æ‰§è¡Œ <code>bundle exec rspec &lt;your-current-ruby-spec-file&gt;</code>ã€‚</p><h2 id="èªæ˜åœ°å­¦ä¹ ç¼–è¯‘"><a href="#èªæ˜åœ°å­¦ä¹ ç¼–è¯‘" class="headerlink" title="èªæ˜åœ°å­¦ä¹ ç¼–è¯‘"></a>èªæ˜åœ°å­¦ä¹ ç¼–è¯‘</h2><p>åœ¨æœ¬ç« ä¸­ï¼Œæ‚¨äº†è§£åˆ°å¯ä»¥ä½¿ç”¨ <code>make</code> å’Œ <code>compiler</code> å‘½ä»¤ä»Vimå†…éƒ¨å¼‚æ­¥è¿è¡Œ <em>ä»»ä½•</em> è¿›ç¨‹ï¼Œä»¥å®Œå–„æ‚¨çš„ç¼–ç¨‹å·¥ä½œæµç¨‹ã€‚Vim æ‹¥æœ‰é€šè¿‡å…¶ä»–ç¨‹åºæ¥æ‰©å±•è‡ªèº«çš„èƒ½åŠ›ï¼Œè¿™ä½¿å…¶å˜å¾—å¼ºå¤§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-è§†å›¾ã€ä¼šè¯å’Œ Viminfo</title>
    <link href="/2022/04/05/Vim/ch20_views_sessions_viminfo/"/>
    <url>/2022/04/05/Vim/ch20_views_sessions_viminfo/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬20ç« -è§†å›¾ã€ä¼šè¯å’Œ-Viminfo"><a href="#ç¬¬20ç« -è§†å›¾ã€ä¼šè¯å’Œ-Viminfo" class="headerlink" title="ç¬¬20ç«  è§†å›¾ã€ä¼šè¯å’Œ Viminfo"></a>ç¬¬20ç«  è§†å›¾ã€ä¼šè¯å’Œ Viminfo</h1><p>å½“æ‚¨åšäº†ä¸€æ®µæ—¶é—´çš„é¡¹ç›®åï¼Œæ‚¨å¯èƒ½ä¼šå‘ç°è¿™ä¸ªé¡¹ç›®é€æ¸å½¢äº†æˆè‡ªå·±çš„è®¾ç½®ã€æŠ˜å ã€ç¼“å†²åŒºã€å¸ƒå±€ç­‰ï¼Œå°±åƒä½äº†ä¸€æ®µæ—¶é—´å…¬å¯“åï¼Œç²¾å¿ƒè£…é¥°äº†å®ƒä¸€æ ·ã€‚é—®é¢˜æ˜¯ï¼Œå…³é—­ Vim åï¼Œæ‰€æœ‰çš„è¿™äº›æ›´æ”¹éƒ½ä¼šä¸¢å¤±ã€‚å¦‚æœèƒ½ä¿ç•™è¿™äº›æ›´æ”¹ï¼Œç­‰åˆ°ä¸‹æ¬¡æ‰“å¼€ Vim æ—¶ï¼Œä¸€åˆ‡æ¢å¤å¦‚åˆï¼Œå²‚ä¸ç¾å“‰ï¼Ÿ</p><p>æœ¬ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ è§†å›¾ã€ä¼šè¯ å’Œ Viminfo æ¥ä¿å­˜é¡¹ç›®çš„â€œå¿«ç…§â€ã€‚</p><h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><p>è§†å›¾æ˜¯è¿™ä¸‰ä¸ªéƒ¨åˆ†ï¼ˆè§†å›¾ã€ä¼šè¯ã€Viminfoï¼‰ä¸­çš„æœ€å°å­é›†ï¼Œå®ƒæ˜¯å•ä¸ªçª—å£ç›¸å…³è®¾ç½®çš„é›†åˆã€‚å¦‚æœæ‚¨é•¿æ—¶é—´åœ¨ä¸€ä¸ªçª—å£ä¸Šå·¥ä½œï¼Œå¹¶ä¸”æƒ³è¦ä¿ç•™å…¶æ˜ å°„å’ŒæŠ˜å ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è§†å›¾ã€‚</p><p>æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ª <code>foo.txt</code> æ–‡ä»¶ï¼š</p><figure class="highlight gcode"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><pre><code class="hljs gcode">fo<span class="hljs-meta">o1</span><br>fo<span class="hljs-meta">o2</span><br>fo<span class="hljs-meta">o3</span><br>fo<span class="hljs-meta">o4</span><br>fo<span class="hljs-meta">o5</span><br>fo<span class="hljs-meta">o6</span><br>fo<span class="hljs-meta">o7</span><br>fo<span class="hljs-meta">o8</span><br>fo<span class="hljs-meta">o9</span><br>fo<span class="hljs-meta">o10</span><br></code></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œåšä¸‰æ¬¡ä¿®æ”¹ï¼š</p><ol><li>åœ¨ç¬¬ 1 è¡Œï¼Œåˆ›å»ºä¸€ä¸ªæ‰‹åŠ¨æŠ˜å  <code>zf4j</code>ï¼ˆæŠ˜å æ¥ä¸‹æ¥ 4 è¡Œï¼‰ã€‚</li><li>æ›´æ”¹ <code>number</code> è®¾ç½®ï¼š<code>setlocal nonumber norelativenumber</code>ã€‚è¿™ä¼šç§»é™¤çª—å£å·¦ä¾§çš„æ•°å­—æŒ‡ç¤ºå™¨ã€‚</li><li>åˆ›å»ºæœ¬åœ°æ˜ å°„ï¼Œæ¯å½“æŒ‰ä¸€æ¬¡ <code>j</code> æ—¶ï¼Œå‘ä¸‹ä¸¤è¡Œï¼š<code>:nnoremap &lt;buffer&gt; j jj</code>ã€‚</li></ol><p>æ‚¨çš„æ–‡ä»¶çœ‹èµ·æ¥åº”è¯¥åƒï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ada">+<span class="hljs-comment">-- 5 lines: foo1 -----</span><br>foo6<br>foo7<br>foo8<br>foo9<br>foo10<br></code></pre></td></tr></table></figure><h3 id="é…ç½®è§†å›¾å±æ€§"><a href="#é…ç½®è§†å›¾å±æ€§" class="headerlink" title="é…ç½®è§†å›¾å±æ€§"></a>é…ç½®è§†å›¾å±æ€§</h3><p>è¿è¡Œï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> viewoptions?<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ä¼šæ˜¾ç¤ºï¼ˆæ ¹æ®æ‚¨çš„ vimrc å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼‰ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">viewoptions</span>=folds,cursor,curdir<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥é…ç½® <code>viewoptions</code>ã€‚è¦ä¿ç•™çš„ä¸‰ä¸ªå±æ€§åˆ†åˆ«æ˜¯æŠ˜å ã€æ˜ å°„å’Œæœ¬åœ°è®¾ç½®é€‰é¡¹ã€‚å¦‚æœæ‚¨çš„è®¾ç½®å’Œæˆ‘çš„ç›¸ä¼¼ï¼Œé‚£ä¹ˆæ‚¨å·²ç»æœ‰äº† <code>folds</code> é€‰é¡¹ã€‚è¿è¡Œä¸‹åˆ—å‘½ä»¤ä½¿è§†å›¾è®°ä½ <code>localoptions</code>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> viewoptions+=localoptions<br></code></pre></td></tr></table></figure><p>æŸ¥é˜… <code>:h viewoptions</code> å¯äº†è§£ <code>viewoptions</code> çš„å…¶ä»–å¯ç”¨é€‰é¡¹ã€‚ç°åœ¨è¿è¡Œ <code>:set viewoptions?</code>ï¼Œæ‚¨å°†çœ‹åˆ°ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">viewoptions</span>=folds,cursor,curdir,localoptions<br></code></pre></td></tr></table></figure><h3 id="ä¿å­˜è§†å›¾"><a href="#ä¿å­˜è§†å›¾" class="headerlink" title="ä¿å­˜è§†å›¾"></a>ä¿å­˜è§†å›¾</h3><p>åœ¨ <code>foo.txt</code> çª—å£ç»è¿‡é€‚å½“æŠ˜å å¹¶è®¾ç½®äº† <code>nonumber norelativenumber</code> é€‰é¡¹åï¼Œç°åœ¨æˆ‘ä»¬æ¥ä¿å­˜è§†å›¾ã€‚è¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:mkview</span><br></code></pre></td></tr></table></figure><p>Vim åˆ›å»ºäº†ä¸€ä¸ªè§†å›¾æ–‡ä»¶ã€‚</p><h3 id="è§†å›¾æ–‡ä»¶"><a href="#è§†å›¾æ–‡ä»¶" class="headerlink" title="è§†å›¾æ–‡ä»¶"></a>è§†å›¾æ–‡ä»¶</h3><p>æ‚¨å¯èƒ½ä¼šæƒ³â€œVim å°†è¿™ä¸ªè§†å›¾æ–‡ä»¶ä¿å­˜åˆ°å“ªå„¿äº†å‘¢ï¼Ÿâ€ï¼Œè¿è¡Œä¸‹åˆ—å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°ç­”æ¡ˆäº†ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> viewdir?<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ä¼šæ˜¾ç¤º <code>~/.vim/view</code>ï¼ˆæ ¹æ®æ‚¨çš„æ“ä½œç³»ç»Ÿï¼Œå¯èƒ½ä¼šæœ‰ä¸åŒçš„è·¯å¾„ã€‚æŸ¥é˜… <code>:h viewdir</code> è·å¾—æ›´å¤šä¿¡æ¯ï¼‰ã€‚å¦‚æœæ‚¨è¿è¡Œçš„æ˜¯åŸºäºUnixçš„æ“ä½œç³»ç»Ÿï¼Œæƒ³ä¿®æ”¹è¯¥è·¯å¾„ï¼Œå¯ä»¥åœ¨æ‚¨çš„ vimrc ä¸­æ·»åŠ ä¸‹åˆ—å†…å®¹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">set</span> <span class="hljs-attribute">viewdir</span>=<span class="hljs-variable">$HOME</span>/else/where<br></code></pre></td></tr></table></figure><h3 id="åŠ è½½è§†å›¾æ–‡ä»¶"><a href="#åŠ è½½è§†å›¾æ–‡ä»¶" class="headerlink" title="åŠ è½½è§†å›¾æ–‡ä»¶"></a>åŠ è½½è§†å›¾æ–‡ä»¶</h3><p>å…³é—­å¹¶é‡æ–°æ‰“å¼€ <code>foo.txt</code>ï¼Œæ‚¨ä¼šçœ‹åˆ°åŸæ¥çš„æ–‡æœ¬ï¼Œæ²¡æœ‰ä»»ä½•æ”¹å˜ã€‚è¿™æ˜¯é¢„æœŸè¡Œä¸ºã€‚è¿è¡Œä¸‹åˆ—å‘½ä»¤å¯ä»¥åŠ è½½è§†å›¾æ–‡ä»¶ï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:loadview</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨æ‚¨å°†çœ‹åˆ°ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ada">+<span class="hljs-comment">-- 5 lines: foo1 -----</span><br>foo6<br>foo7<br>foo8<br>foo9<br>foo10<br></code></pre></td></tr></table></figure><p>é‚£äº›æŠ˜å ã€æœ¬åœ°è®¾ç½®ä»¥åŠæ˜ å°„éƒ½æ¢å¤äº†ã€‚å¦‚æœæ‚¨ç»†å¿ƒè¿˜å¯ä»¥å‘ç°ï¼Œå…‰æ ‡ä½äºä¸Šä¸€æ¬¡æ‚¨è¿è¡Œ <code>:mkview</code> æ—¶æ‰€å¤„çš„è¡Œä¸Šã€‚åªè¦æ‚¨æœ‰ <code>cursor</code> é€‰é¡¹ï¼Œè§†å›¾å°†è®°ä½å…‰æ ‡ä½ç½®ã€‚</p><h3 id="å¤šä¸ªè§†å›¾"><a href="#å¤šä¸ªè§†å›¾" class="headerlink" title="å¤šä¸ªè§†å›¾"></a>å¤šä¸ªè§†å›¾</h3><p>Vim å…è®¸æ‚¨ä¿å­˜ 9 ä¸ªç¼–å·çš„è§†å›¾ï¼ˆ1-9ï¼‰ã€‚</p><p>å‡è®¾æ‚¨æƒ³ç”¨ <code>:9,10 fold</code> æ¥é¢å¤–æŠ˜å æœ€åä¸¤è¡Œï¼Œæˆ‘ä»¬æŠŠè¿™å­˜ä¸ºè§†å›¾ 1ã€‚è¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:mkview</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨åˆæƒ³ç”¨ <code>:6,7 fold</code> å†æŠ˜å ä¸€æ¬¡ï¼Œå¹¶å­˜ä¸ºä¸åŒçš„è§†å›¾ï¼Œè¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:mkview</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>å…³é—­å¹¶é‡æ–°æ‰“å¼€ <code>foo.txt</code> æ–‡ä»¶ï¼Œè¿è¡Œä¸‹åˆ—å‘½ä»¤å¯ä»¥åŠ è½½è§†å›¾ 1ï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:loadview</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>è¦åŠ è½½è§†å›¾ 2ï¼Œè¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:loadview</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>è¦åŠ è½½åŸå§‹è§†å›¾ï¼Œè¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:loadview</span><br></code></pre></td></tr></table></figure><h3 id="è‡ªåŠ¨åˆ›å»ºè§†å›¾"><a href="#è‡ªåŠ¨åˆ›å»ºè§†å›¾" class="headerlink" title="è‡ªåŠ¨åˆ›å»ºè§†å›¾"></a>è‡ªåŠ¨åˆ›å»ºè§†å›¾</h3><p>æœ‰ä¸€ä»¶å¯èƒ½ä¼šå‘ç”Ÿçš„å¾ˆå€’éœ‰çš„äº‹æƒ…æ˜¯ï¼Œæ‚¨èŠ±äº†å¾ˆé•¿æ—¶é—´åœ¨ä¸€ä¸ªå¤§æ–‡ä»¶ä¸­è¿›è¡ŒæŠ˜å ï¼Œä¸€ä¸å°å¿ƒå…³é—­äº†çª—å£ï¼Œæ¥ç€ä¸¢å¤±äº†æ‰€æœ‰æŠ˜å ä¿¡æ¯ã€‚æ‚¨å¯ä»¥åœ¨ vimrc ä¸­æ·»åŠ ä¸‹åˆ—å†…å®¹ï¼Œä½¿å¾—åœ¨å…³é—­ç¼“å†²åŒºå Vim èƒ½è‡ªåŠ¨åˆ›å»ºè§†å›¾ï¼Œé˜²æ­¢æ­¤ç±»ç¾éš¾å‘ç”Ÿï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">autocmd</span> BufWinLeave <span class="hljs-regexp">*.txt</span> mkview<br></code></pre></td></tr></table></figure><p>å¦å¤–ä¹Ÿèƒ½åœ¨æ‰“å¼€ç¼“å†²åŒºåè‡ªåŠ¨åŠ è½½è§†å›¾ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">autocmd</span> BufWinEnter *.txt <span class="hljs-keyword">silent</span> <span class="hljs-keyword">loadview</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå½“æ‚¨ç¼–è¾‘ <code>txt</code> æ–‡ä»¶æ—¶ï¼Œä¸ç”¨å†æ‹…å¿ƒåˆ›å»ºå’ŒåŠ è½½è§†å›¾äº†ã€‚ä½†ä¹Ÿæ³¨æ„ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œè§†å›¾æ–‡ä»¶ä¼šä¸æ–­ç§¯ç´¯ï¼Œè®°å¾—æ¯éš”å‡ ä¸ªæœˆæ¸…ç†ä¸€æ¬¡ã€‚</p><h2 id="ä¼šè¯"><a href="#ä¼šè¯" class="headerlink" title="ä¼šè¯"></a>ä¼šè¯</h2><p>å¦‚æœè¯´è§†å›¾ä¿å­˜äº†æŸä¸ªçª—å£çš„è®¾ç½®ï¼Œé‚£ä¹ˆä¼šè¯åˆ™ä¿å­˜äº†æ‰€æœ‰çª—å£ï¼ˆåŒ…æ‹¬å¸ƒå±€ï¼‰çš„ä¿¡æ¯ã€‚</p><h3 id="åˆ›å»ºæ–°ä¼šè¯"><a href="#åˆ›å»ºæ–°ä¼šè¯" class="headerlink" title="åˆ›å»ºæ–°ä¼šè¯"></a>åˆ›å»ºæ–°ä¼šè¯</h3><p>å‡è®¾æ‚¨åœ¨ <code>foobarbaz</code> å·¥ç¨‹ä¸­ç¼–è¾‘ç€ 3 ä¸ªæ–‡ä»¶ï¼š</p><p><code>foo.txt</code> çš„å†…å®¹ï¼š</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs gcode">fo<span class="hljs-meta">o1</span><br>fo<span class="hljs-meta">o2</span><br>fo<span class="hljs-meta">o3</span><br>fo<span class="hljs-meta">o4</span><br>fo<span class="hljs-meta">o5</span><br>fo<span class="hljs-meta">o6</span><br>fo<span class="hljs-meta">o7</span><br>fo<span class="hljs-meta">o8</span><br>fo<span class="hljs-meta">o9</span><br>fo<span class="hljs-meta">o10</span><br></code></pre></td></tr></table></figure><p><code>bar.txt</code> çš„å†…å®¹ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">bar1</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bar2</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bar3</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bar4</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bar5</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bar6</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bar7</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bar8</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bar9</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">bar10</span><br></code></pre></td></tr></table></figure><p><code>baz.txt</code> çš„å†…å®¹ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">baz1</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baz2</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baz3</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baz4</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baz5</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baz6</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baz7</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baz8</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baz9</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">baz10</span><br></code></pre></td></tr></table></figure><p>å‡è®¾æ‚¨çš„çª—å£å¸ƒå±€å¦‚ä¸‹æ‰€ç¤ºï¼ˆé€‚å½“åœ°ä½¿ç”¨ <code>split</code> å’Œ <code>vsplit</code> æ¥æ”¾ç½®ï¼‰ï¼š</p><p><img src="/images/session-layout.png" alt="Session Layout"></p><p>è¦ä¿ç•™è¿™ä¸ªå¤–è§‚ï¼Œæ‚¨éœ€è¦ä¿å­˜ä¼šè¯ã€‚è¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:mksession</span><br></code></pre></td></tr></table></figure><p>ä¸é»˜è®¤å­˜å‚¨åœ¨ <code>~/.vim/view</code> çš„ <code>mkview</code> ä¸åŒï¼Œ<code>mksession</code> åœ¨å½“å‰ç›®å½•å­˜å‚¨ä¼šè¯æ–‡ä»¶ï¼ˆ<code>Session.vim</code>ï¼‰ã€‚å¦‚æœå¥½å¥‡ï¼Œæ‚¨å¯ä»¥çœ‹çœ‹æ–‡ä»¶ã€‚</p><p>å¦‚æœæ‚¨æƒ³å°†ä¼šè¯æ–‡ä»¶å¦å­˜ä»–å¤„ï¼Œå¯ä»¥å°†å‚æ•°ä¼ é€’ç»™ <code>mksession</code>ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">:mksession ~/<span class="hljs-keyword">some</span>/<span class="hljs-keyword">where</span>/<span class="hljs-keyword">else</span>.vim<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>!</code> æ¥è°ƒç”¨å‘½ä»¤å¯ä»¥è¦†ç›–ä¸€ä¸ªå·²å­˜åœ¨çš„ä¼šè¯æ–‡ä»¶ï¼ˆ<code>:mksession! ~/some/where/else.vim</code>ï¼‰ã€‚</p><h3 id="åŠ è½½ä¼šè¯"><a href="#åŠ è½½ä¼šè¯" class="headerlink" title="åŠ è½½ä¼šè¯"></a>åŠ è½½ä¼šè¯</h3><p>è¿è¡Œä¸‹åˆ—å‘½ä»¤å¯ä»¥åŠ è½½ä¼šè¯ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">source</span> Session.<span class="hljs-keyword">vim</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨ Vim çœ‹èµ·æ¥å°±åƒæ‚¨ç¦»å¼€å®ƒæ—¶çš„æ ·å­ï¼æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä»ç»ˆç«¯åŠ è½½ä¼šè¯æ–‡ä»¶ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> -S Session.<span class="hljs-keyword">vim</span><br></code></pre></td></tr></table></figure><h3 id="é…ç½®ä¼šè¯å±æ€§"><a href="#é…ç½®ä¼šè¯å±æ€§" class="headerlink" title="é…ç½®ä¼šè¯å±æ€§"></a>é…ç½®ä¼šè¯å±æ€§</h3><p>æ‚¨å¯ä»¥é…ç½®ä¼šè¯è¦ä¿å­˜çš„å±æ€§ã€‚è‹¥è¦æŸ¥çœ‹å½“å‰å“ªäº›å±æ€§æ­£è¢«ä¿å­˜ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> sessionoptions?<br></code></pre></td></tr></table></figure><p>æˆ‘çš„æ˜¾ç¤ºï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">blank,<span class="hljs-keyword">buffers</span>,curdir,folds,<span class="hljs-keyword">help</span>,tabpages,<span class="hljs-keyword">winsize</span>,terminal<br></code></pre></td></tr></table></figure><p>å¦‚æœåœ¨ä¿å­˜ä¼šè¯æ—¶ä¸æƒ³å­˜å‚¨ <code>terminal</code>ï¼Œå¯ä»¥è¿è¡Œä¸‹åˆ—å‘½ä»¤å°†å…¶ä»ä¼šè¯é€‰é¡¹ä¸­åˆ é™¤ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> <span class="hljs-attribute">sessionoptions-</span>=terminal<br></code></pre></td></tr></table></figure><p>å¦‚æœè¦åœ¨ä¿å­˜ä¼šè¯æ—¶å­˜å‚¨ <code>options</code>ï¼Œè¯·è¿è¡Œï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">:<span class="hljs-keyword">set</span> sessionoptions+=<span class="hljs-keyword">options</span><br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€äº› <code>sessionoptions</code> å¯ä»¥å­˜å‚¨çš„å±æ€§ï¼š</p><ul><li><code>blank</code> å­˜å‚¨ç©ºçª—å£</li><li><code>buffers</code> å­˜å‚¨ç¼“å†²åŒº</li><li><code>folds</code> å­˜å‚¨æŠ˜å </li><li><code>globals</code> å­˜å‚¨å…¨å±€å˜é‡ï¼ˆå¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œå¹¶ä¸”è‡³å°‘åŒ…å«ä¸€ä¸ªå°å†™å­—æ¯ï¼‰</li><li><code>options</code> å­˜å‚¨é€‰é¡¹å’Œæ˜ å°„</li><li><code>resize</code> å­˜å‚¨çª—å£è¡Œåˆ—</li><li><code>winpos</code> å­˜å‚¨çª—å£ä½ç½®</li><li><code>winsize</code> å­˜å‚¨çª—å£å¤§å°</li><li><code>tabpages</code> å­˜å‚¨é€‰é¡¹å¡</li><li><code>unix</code> ä»¥ Unix æ ¼å¼å­˜å‚¨æ–‡ä»¶</li></ul><p>æŸ¥é˜… <code>:h &#39;sessionoptions&#39;</code> æ¥è·å–å®Œæ•´åˆ—è¡¨ã€‚</p><p>ä¼šè¯æ˜¯ä¿å­˜é¡¹ç›®å¤–éƒ¨å±æ€§çš„å¥½å·¥å…·ã€‚ä½†æ˜¯ï¼Œä¸€äº›å†…éƒ¨å±æ€§ä¸å­˜å‚¨åœ¨ä¼šè¯ä¸­ï¼Œå¦‚æœ¬åœ°æ ‡è®°ã€å¯„å­˜å™¨ã€å†å²è®°å½•ç­‰ã€‚è¦ä¿å­˜å®ƒä»¬ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ Viminfoï¼</p><h2 id="Viminfo"><a href="#Viminfo" class="headerlink" title="Viminfo"></a>Viminfo</h2><p>å¦‚æœæ‚¨ç•™æ„ï¼Œåœ¨å¤åˆ¶ä¸€ä¸ªå•è¯è¿›å¯„å­˜å™¨ aï¼Œå†é€€å‡ºå¹¶é‡æ–°æ‰“å¼€ Vim åï¼Œæ‚¨ä»ç„¶å¯ä»¥çœ‹åˆ°å­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­çš„æ–‡æœ¬ã€‚è¿™å°±æ˜¯ Viminfo çš„åŠŸåŠ³ã€‚æ²¡æœ‰å®ƒï¼Œåœ¨æ‚¨å…³é—­ Vim åï¼ŒVim ä¼šå¿˜è®°è¿™äº›å¯„å­˜å™¨ã€‚</p><p>å¦‚æœæ‚¨ä½¿ç”¨ Vim 8 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ŒVim ä¼šé»˜è®¤å¯ç”¨ Viminfoã€‚å› æ­¤æ‚¨å¯èƒ½ä¸€ç›´åœ¨ä½¿ç”¨ Viminfoï¼Œè€Œæ‚¨å¯¹å®ƒæ¯«ä¸çŸ¥æƒ…ï¼</p><p>æ‚¨å¯èƒ½ä¼šé—®ï¼šViminfo å­˜å‚¨äº†ä»€ä¹ˆï¼Ÿä¸ä¼šè¯æœ‰ä½•ä¸åŒï¼Ÿ</p><p>è¦ä½¿ç”¨ Viminfoï¼Œæ‚¨å¿…é¡»å¯ç”¨äº† <code>+viminfo</code> ç‰¹æ€§ï¼ˆ<code>:version</code>ï¼‰ã€‚Viminfo å­˜å‚¨ç€ï¼š</p><ul><li>å‘½ä»¤è¡Œå†å²è®°å½•ã€‚</li><li>å­—ç¬¦ä¸²æœç´¢å†å²è®°å½•ã€‚</li><li>è¾“å…¥è¡Œå†å²è®°å½•ã€‚</li><li>éç©ºå¯„å­˜å™¨çš„å†…å®¹ã€‚</li><li>å¤šä¸ªæ–‡ä»¶çš„æ ‡è®°ã€‚</li><li>æ–‡ä»¶æ ‡è®°ï¼Œå®ƒæŒ‡å‘æ–‡ä»¶ä¸­çš„ä½ç½®ã€‚</li><li>ä¸Šæ¬¡æœç´¢ &#x2F; æ›¿æ¢æ¨¡å¼ï¼ˆç”¨äº â€œnâ€ å’Œ â€œ&amp;â€ï¼‰ã€‚</li><li>ç¼“å†²åŒºåˆ—è¡¨ã€‚</li><li>å…¨å±€å˜é‡ã€‚</li></ul><p>é€šå¸¸ï¼Œä¼šè¯å­˜å‚¨â€œå¤–éƒ¨â€å±æ€§ï¼ŒViminfo å­˜å‚¨â€œå†…éƒ¨â€å±æ€§ã€‚</p><p>æ¯ä¸ªé¡¹ç›®å¯ä»¥æœ‰ä¸€ä¸ªä¼šè¯æ–‡ä»¶ï¼Œè€Œ Viminfo ä¸ä¼šè¯ä¸åŒï¼Œé€šå¸¸æ¯å°è®¡ç®—æœºåªä½¿ç”¨ä¸€ä¸ª Viminfoã€‚Viminfo æ˜¯é¡¹ç›®æ— å…³çš„ã€‚</p><p>å¯¹äº Unixï¼ŒViminfo çš„é»˜è®¤ä½ç½®æ˜¯ <code>$HOME/.viminfo</code>ï¼ˆ<code>~/.viminfo</code>ï¼‰ã€‚å¦‚æœæ‚¨ç”¨å…¶ä»–æ“ä½œç³»ç»Ÿï¼ŒViminfo ä½ç½®å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚å¯ä»¥æŸ¥é˜… <code>:h viminfo-file-name</code>ã€‚æ¯ä¸€æ¬¡æ‚¨åšå‡ºçš„â€œå†…éƒ¨â€æ›´æ”¹ï¼Œå¦‚å°†æ–‡æœ¬å¤åˆ¶è¿›ä¸€ä¸ªå¯„å­˜å™¨ï¼ŒVim éƒ½ä¼šè‡ªåŠ¨æ›´æ–° Viminfo æ–‡ä»¶ã€‚</p><p><em>è¯·ç¡®ä¿æ‚¨è®¾ç½®äº† <code>nocompatible</code> é€‰é¡¹ï¼ˆ<code>set nocompatible</code>ï¼‰ï¼Œå¦åˆ™æ‚¨çš„ Viminfo å°†ä¸èµ·ä½œç”¨ã€‚</em></p><h3 id="è¯»å†™-Viminfo"><a href="#è¯»å†™-Viminfo" class="headerlink" title="è¯»å†™ Viminfo"></a>è¯»å†™ Viminfo</h3><p>å°½ç®¡åªä½¿ç”¨ä¸€ä¸ª Viminfo æ–‡ä»¶ï¼Œä½†æ‚¨è¿˜æ˜¯å¯ä»¥åˆ›å»ºå¤šä¸ª Viminfo æ–‡ä»¶ã€‚ä½¿ç”¨ <code>:wviminfo</code> å‘½ä»¤ï¼ˆç¼©å†™ä¸º <code>:wv</code>ï¼‰æ¥åˆ›å»ºå¤šä¸ª Viminfo æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:wv ~/.viminfo_extra<br></code></pre></td></tr></table></figure><p>è¦è¦†ç›–ç°æœ‰çš„ Viminfo æ–‡ä»¶ï¼Œå‘ <code>wv</code> å‘½ä»¤å¤šæ·»åŠ ä¸€ä¸ªå¹å·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:wv! ~/.viminfo_extra<br></code></pre></td></tr></table></figure><p>Vim é»˜è®¤æƒ…å†µä¸‹ä¼šè¯»å– <code>~/.viminfo</code> æ–‡ä»¶ã€‚è¿è¡Œ <code>:rviminfo</code>ï¼ˆç¼©å†™ä¸º <code>:rv</code>ï¼‰å¯ä»¥è¯»å–ä¸åŒçš„ Vimfile æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:rv ~/.viminfo_extra<br></code></pre></td></tr></table></figure><p>è¦åœ¨ç»ˆç«¯ä½¿ç”¨ä¸åŒçš„ Viminfo æ–‡ä»¶æ¥å¯åŠ¨ Vimï¼Œè¯·ä½¿ç”¨ â€œiâ€ æ ‡å¿—ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">vim -<span class="hljs-selector-tag">i</span> viminfo_extra<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨è¦å°† Vim ç”¨äºä¸åŒçš„ä»»åŠ¡ï¼Œæ¯”å¦‚å†™ä»£ç å’Œå†™ä½œï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸¤ä¸ª Viminfoï¼Œä¸€ä¸ªé’ˆå¯¹å†™ä½œä¼˜åŒ–ï¼Œå¦ä¸€ä¸ªä¸ºå†™ä»£ç ä¼˜åŒ–ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">vim -<span class="hljs-selector-tag">i</span> viminfo_writing<br><br>vim -<span class="hljs-selector-tag">i</span> viminfo_coding<br></code></pre></td></tr></table></figure><h3 id="ä¸ä½¿ç”¨-Viminfo-å¯åŠ¨-Vim"><a href="#ä¸ä½¿ç”¨-Viminfo-å¯åŠ¨-Vim" class="headerlink" title="ä¸ä½¿ç”¨ Viminfo å¯åŠ¨ Vim"></a>ä¸ä½¿ç”¨ Viminfo å¯åŠ¨ Vim</h3><p>è¦ä¸ä½¿ç”¨ Viminfo å¯åŠ¨ Vimï¼Œå¯ä»¥åœ¨ç»ˆç«¯è¿è¡Œï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">vim -<span class="hljs-selector-tag">i</span> <span class="hljs-attribute">NONE</span><br></code></pre></td></tr></table></figure><p>è¦æ°¸ä¸ä½¿ç”¨ Viminfoï¼Œå¯ä»¥åœ¨æ‚¨çš„ vimrc æ–‡ä»¶æ·»åŠ ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">set</span> <span class="hljs-attribute">viminfo</span>=<span class="hljs-string">&quot;NONE&quot;</span><br></code></pre></td></tr></table></figure><h3 id="é…ç½®-Viminfo-å±æ€§"><a href="#é…ç½®-Viminfo-å±æ€§" class="headerlink" title="é…ç½® Viminfo å±æ€§"></a>é…ç½® Viminfo å±æ€§</h3><p>å’Œ <code>viewoptions</code> ä»¥åŠ <code>sessionoptions</code> ç±»ä¼¼ï¼Œæ‚¨å¯ä»¥ç”¨ <code>viminfo</code> é€‰é¡¹æŒ‡å®šè¦å­˜å‚¨çš„å±æ€§ã€‚è¯·è¿è¡Œï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">set</span> viminfo?<br></code></pre></td></tr></table></figure><p>æ‚¨ä¼šå¾—åˆ°ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-addition">!,&#x27;100,&lt;50,s10,h</span><br></code></pre></td></tr></table></figure><p>çœ‹èµ·æ¥æœ‰ç‚¹æ™¦æ¶©éš¾æ‡‚ã€‚å‘½ä»¤åˆ†è§£å¦‚ä¸‹ï¼š</p><ul><li><code>!</code> ä¿å­˜ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€å´ä¸åŒ…å«å°å†™å­—æ¯çš„å…¨å±€å˜é‡ã€‚å›æƒ³ä¸€ä¸‹ <code>g:</code> ä»£è¡¨äº†ä¸€ä¸ªå…¨å±€å˜é‡ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨å†™äº†èµ‹å€¼è¯­å¥ <code>let g:FOO = &quot;foo&quot;</code>ï¼ŒViminfo å°†å­˜å‚¨å…¨å±€å˜é‡ <code>FOO</code>ã€‚ç„¶è€Œå¦‚æœæ‚¨å†™äº† <code>let g:Foo = &quot;foo&quot;</code>ï¼ŒViminfo å°†ä¸å­˜å‚¨å®ƒï¼Œå› ä¸ºå®ƒåŒ…å«äº†å°å†™å­—æ¯ã€‚æ²¡æœ‰ <code>!</code>ï¼ŒVim ä¸ä¼šå­˜å‚¨è¿™äº›å…¨å±€å˜é‡ã€‚</li><li><code>&#39;100</code> ä»£è¡¨æ ‡è®°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒViminfo å°†ä¿å­˜æœ€è¿‘ 100 ä¸ªæ–‡ä»¶çš„æœ¬åœ°æ ‡è®°ï¼ˆa-zï¼‰ã€‚æ³¨æ„ï¼Œå¦‚æœå­˜å‚¨çš„æ–‡ä»¶è¿‡å¤šï¼ŒVim ä¼šå˜å¾—å¾ˆæ…¢ï¼Œ1000 å·¦å³å°±å¯ä»¥äº†ã€‚</li><li><code>&lt;50</code> å‘Šè¯‰ Viminfo æ¯ä¸ªå¯„å­˜å™¨æœ€å¤šä¿å­˜å¤šå°‘è¡Œï¼ˆè¿™ä¸ªä¾‹å­ä¸­æ˜¯ 50 è¡Œï¼‰ã€‚å¦‚æœæˆ‘å¤åˆ¶ 100 è¡Œæ–‡æœ¬è¿›å¯„å­˜å™¨ aï¼ˆ<code>&quot;ay99j</code>ï¼‰åå…³é—­ Vimï¼Œä¸‹æ¬¡æ‰“å¼€ Vim å¹¶ä»å¯„å­˜å™¨ aï¼ˆ<code>&quot;ap</code>ï¼‰ç²˜è´´æ—¶ï¼ŒVim æœ€å¤šåªç²˜è´´ 50 è¡Œï¼›å¦‚æœä¸æŒ‡å®šæœ€å¤§è¡Œå·ï¼Œ <em>æ‰€æœ‰</em> è¡Œéƒ½å°†è¢«ä¿å­˜ï¼›å¦‚æœæŒ‡å®š 0ï¼Œä»€ä¹ˆéƒ½ä¸ä¿å­˜äº†ã€‚</li><li><code>s10</code> ä¸ºå¯„å­˜å™¨è®¾ç½®å¤§å°é™åˆ¶ï¼ˆkbï¼‰ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä»»ä½•å¤§äº 10kb çš„å¯„å­˜å™¨éƒ½ä¼šè¢«æ’é™¤ã€‚</li><li><code>h</code> ç¦ç”¨é«˜äº®æ˜¾ç¤ºï¼ˆ<code>hlsearch</code> æ—¶ï¼‰ã€‚</li></ul><p>å¯ä»¥æŸ¥é˜… <code>:h &#39;viminfo&#39;</code> æ¥äº†è§£å…¶ä»–æ›´å¤šé€‰é¡¹ã€‚</p><h2 id="èªæ˜åœ°ä½¿ç”¨è§†å›¾ã€ä¼šè¯å’Œ-Viminfo"><a href="#èªæ˜åœ°ä½¿ç”¨è§†å›¾ã€ä¼šè¯å’Œ-Viminfo" class="headerlink" title="èªæ˜åœ°ä½¿ç”¨è§†å›¾ã€ä¼šè¯å’Œ Viminfo"></a>èªæ˜åœ°ä½¿ç”¨è§†å›¾ã€ä¼šè¯å’Œ Viminfo</h2><p>Vim èƒ½ä½¿ç”¨è§†å›¾ã€ä¼šè¯å’Œ Viminfo æ¥ä¿å­˜ä¸åŒçº§åˆ«çš„ Vim ç¯å¢ƒå¿«ç…§ã€‚å¯¹äºå¾®å‹é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨è§†å›¾ï¼›å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ä¼šè¯ã€‚æ‚¨åº”è¯¥èŠ±äº›æ—¶é—´æ¥æŸ¥é˜…è§†å›¾ã€ä¼šè¯å’Œ Viminfo æä¾›çš„æ‰€æœ‰é€‰é¡¹ã€‚</p><p>ä¸ºæ‚¨çš„ç¼–è¾‘é£æ ¼åˆ›å»ºå±äºæ‚¨è‡ªå·±çš„è§†å›¾ã€ä¼šè¯å’Œ Viminfoã€‚å¦‚æœæ‚¨è¦æ¢å°è®¡ç®—æœºä½¿ç”¨ Vimï¼Œåªéœ€åŠ è½½æ‚¨çš„è®¾ç½®ï¼Œç«‹åˆ»å°±ä¼šæ„Ÿåˆ°å°±åƒåœ¨å®¶é‡Œçš„å·¥ä½œç¯å¢ƒä¸€æ ·ï¼</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-å¤šæ–‡ä»¶æ“ä½œ</title>
    <link href="/2022/04/05/Vim/ch21_multiple_file_operations/"/>
    <url>/2022/04/05/Vim/ch21_multiple_file_operations/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬21ç« -å¤šæ–‡ä»¶æ“ä½œ"><a href="#ç¬¬21ç« -å¤šæ–‡ä»¶æ“ä½œ" class="headerlink" title="ç¬¬21ç«  å¤šæ–‡ä»¶æ“ä½œ"></a>ç¬¬21ç«  å¤šæ–‡ä»¶æ“ä½œ</h1><p>å¤šæ–‡ä»¶ç¼–è¾‘æ›´æ–°æ˜¯ä¸€ä¸ªå€¼å¾—æŒæ¡ã€éå¸¸æœ‰ç”¨çš„ç¼–è¾‘å·¥å…·ã€‚å‰é¢æ‚¨å·²ç»å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨ <code>cfdo</code> å‘½ä»¤åœ¨å¤šä¸ªæ–‡æœ¬ä¸­è¿›è¡Œæ›´æ–°ã€‚æœ¬ç« ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä½•åœ¨Vimä¸­è¿›è¡Œå¤šæ–‡ä»¶ç¼–è¾‘çš„æ›´å¤šä¸åŒæ–¹æ³•ã€‚</p><h2 id="åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œå‘½ä»¤çš„å‡ ç§æ–¹æ³•"><a href="#åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œå‘½ä»¤çš„å‡ ç§æ–¹æ³•" class="headerlink" title="åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œå‘½ä»¤çš„å‡ ç§æ–¹æ³•"></a>åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œå‘½ä»¤çš„å‡ ç§æ–¹æ³•</h2><p>è¦åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œå‘½ä»¤ï¼ŒVimæœ‰8ç§æ–¹æ³•ï¼š</p><ul><li>å‚æ•°åˆ—è¡¨ (<code>argdo</code>)</li><li>ç¼“å†²åŒºåˆ—è¡¨ (<code>bufdo</code>)</li><li>çª—å£åˆ—è¡¨ (<code>windo</code>)</li><li>tab åˆ—è¡¨(<code>tabdo</code>)</li><li>å¿«é€Ÿä¿®å¤åˆ—è¡¨ (<code>cdo</code>)</li><li>æ–‡ä»¶æ–¹å¼çš„å¿«é€Ÿä¿®å¤åˆ—è¡¨ (<code>cfdo</code>)</li><li>ä½ç½®åˆ—è¡¨ (<code>ldo</code>)</li><li>æ–‡ä»¶æ–¹å¼çš„ä½ç½®åˆ—è¡¨ (<code>lfdo</code>)</li></ul><p>å®é™…ä¸Šï¼Œå¤§éƒ¨åˆ†æ—¶é—´æ‚¨å¯èƒ½åªä¼šç”¨åˆ°1ç§æˆ–2ç§ï¼ˆå°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘ä½¿ç”¨ <code>cdo</code> å’Œ <code>argdo</code>æ¯”å…¶ä»–çš„å¤šå¾—å¤šï¼‰ï¼Œä½†äº†è§£æ‰€æœ‰å¯è¡Œæ–¹æ³•è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥é€‰æ‹©ä¸€ä¸ªæœ€ç¬¦åˆæ‚¨ä¸ªäººç¼–è¾‘é£æ ¼çš„æ–¹æ³•ã€‚</p><p>å­¦ä¹ æ‰€æœ‰8ä¸ªå‘½ä»¤å¯èƒ½å¬èµ·æ¥è®©äººæœ‰ç‚¹æ‰“é€€å ‚é¼“ã€‚ä½†å®é™…ä¸Šï¼Œè¿™äº›å‘½ä»¤å·¥ä½œæ–¹å¼å¾ˆç›¸ä¼¼ã€‚å­¦ä¹ äº†å…¶ä¸­ä¸€ä¸ªåï¼Œå†å­¦ä¹ å‰©ä½™çš„å°†å®¹æ˜“çš„å¤šã€‚å®ƒä»¬çš„è¿è¡Œæ–¹å¼éƒ½å¤§ä½“ç›¸åŒï¼šåˆ†åˆ«åˆ›å»ºä¸€ä¸ªåˆ—è¡¨(åˆ—è¡¨ä¸­çš„å…ƒç´ æ ¹æ®å‘½ä»¤æœ‰æ‰€ä¸åŒ)ï¼Œç„¶åå‘åˆ—è¡¨ä¼ é€’ä¸€ä¸ªæ‚¨æƒ³æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><h2 id="å‚æ•°åˆ—è¡¨"><a href="#å‚æ•°åˆ—è¡¨" class="headerlink" title="å‚æ•°åˆ—è¡¨"></a>å‚æ•°åˆ—è¡¨</h2><p>å‚æ•°åˆ—è¡¨æ˜¯æœ€åŸºç¡€çš„åˆ—è¡¨ã€‚å®ƒåˆ›å»ºä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨ã€‚è¦æƒ³ä¸º file1, file2, file3åˆ›å»ºæ–‡ä»¶åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:args</span> file1 file2 file3<br></code></pre></td></tr></table></figure><p>æ‚¨ä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªé€šé…ç¬¦ï¼ˆ<code>*</code>ï¼‰ï¼Œæ‰€ä»¥å¦‚æœæ‚¨æƒ³ä¸ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„ <code>.js</code> æ–‡ä»¶åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œè¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:args</span> *.js<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æƒ³ä¸ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰ä»¥ â€œaâ€ å¼€å¤´çš„Javascriptæ–‡ä»¶åˆ›å»ºåˆ—è¡¨ï¼Œè¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:args</span> a*.js<br></code></pre></td></tr></table></figure><p>ï¼ˆ<code>*</code>ï¼‰é€šé…ç¬¦åŒ¹é…å½“å‰ç›®å½•ä¸‹çš„1ä¸ªæˆ–å¤šä¸ªä»»æ„æ–‡ä»¶åä¸­çš„å­—ç¬¦ã€‚ä½†å¦‚æœæ‚¨æƒ³åœ¨æŸä¸ªç›®å½•ä¸‹è¿›è¡Œé€’å½’æœç´¢æ€ä¹ˆåŠå‘¢ï¼Ÿæ‚¨å¯ä»¥ä½¿ç”¨åŒé€šé…ç¬¦ï¼ˆ<code>**</code>ï¼‰ã€‚è¦å¾—åˆ°æ‚¨å½“å‰ä½ç½®ä¸‹æ‰€æœ‰å­ç›®å½•ä¸­çš„Javascriptæ–‡ä»¶ï¼Œè¿è¡Œï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">:args <span class="hljs-strong">**/*</span>.js<br></code></pre></td></tr></table></figure><p>æ‚¨è¿è¡Œäº† <code>args</code> å‘½ä»¤åï¼Œæ‚¨çš„å½“å‰bufferå°†ä¼šåˆ‡æ¢åˆ°åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚è¿è¡Œ <code>:args</code>å¯ä»¥æŸ¥çœ‹æ‚¨åˆšæ‰åˆ›å»ºçš„æ–‡ä»¶åˆ—è¡¨ã€‚å½“æ‚¨åˆ›å»ºå¥½äº†æ‚¨çš„åˆ—è¡¨åï¼Œæ‚¨å°±å¯ä»¥éå†å®ƒä»¬äº†ã€‚<code>:first</code> å°†è®©æ‚¨è·³è‡³åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚<code>:last</code> å°†è·³åˆ°æœ€åä¸€ä¸ªæ–‡ä»¶ã€‚è¿è¡Œ<code>:next</code>å¯ä»¥åœ¨åˆ—è¡¨ä¸­ä¸€æ¬¡å‘å‰ç§»åŠ¨ä¸€ä¸ªæ–‡ä»¶ã€‚è¿è¡Œ <code>:prev</code>å¯ä»¥åœ¨åˆ—è¡¨ä¸­ä¸€æ¬¡å‘åç§»åŠ¨ä¸€ä¸ªæ–‡ä»¶ã€‚è¿è¡Œ<code>:wnext</code> å’Œ <code>:wprev</code>å‘½ä»¤ï¼Œåœ¨å‘å‰&#x2F;å‘åç§»åŠ¨æ–‡ä»¶çš„åŒæ—¶è¿˜ä¼šä¿å­˜ä¿®æ”¹ã€‚æŸ¥é˜… <code>: arglist</code> äº†è§£æ›´å¤šå¯¼èˆªå‘½ä»¤ã€‚</p><p>å‚æ•°åˆ—è¡¨åœ¨å®šä½æŸä¸ªç‰¹å®šç±»å‹çš„æ–‡ä»¶æˆ–å°‘é‡æ–‡ä»¶æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚å‡å¦‚æ‚¨éœ€è¦å°†æ‰€æœ‰ <code>yml</code> æ–‡ä»¶ä¸­çš„<code>donut</code> æ›´æ–°ä¸º <code>pancake</code>ã€‚è¿è¡Œï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">args</span> **/*.yml<br>:<span class="hljs-keyword">argdo</span> %s/donut/pancake/g | <span class="hljs-keyword">update</span><br><br></code></pre></td></tr></table></figure><p>æ³¨æ„å¦‚æœæ‚¨å†æ¬¡æ‰§è¡Œ <code>args</code> å‘½ä»¤ï¼Œå®ƒå°†è¦†ç›–å…ˆå‰çš„åˆ—è¡¨ã€‚æ¯”å¦‚ï¼Œå¦‚æœæ‚¨å…ˆå‰è¿è¡Œäº†ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:args</span> file1 file2 file3<br></code></pre></td></tr></table></figure><p>å‡è®¾è¿™äº›æ–‡ä»¶éƒ½æ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆç°åœ¨æ‚¨çš„åˆ—è¡¨ä¸º <code>file1</code>, <code>file2</code>,ä»¥åŠ <code>file3</code>ã€‚ç„¶åå†è¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:args</span> file4 file5<br></code></pre></td></tr></table></figure><p>æ‚¨çš„åˆå§‹åˆ—è¡¨ <code>file1</code>, <code>file2</code>, <code>file3</code>å°†è¢«è¦†ç›–ä¸º <code>file4</code>, <code>file5</code>ã€‚å¦‚æœæ‚¨çš„å‚æ•°åˆ—è¡¨ä¸­å·²ç»æœ‰äº† <code>file1</code>, <code>file2</code>, <code>file3</code> ï¼Œè€Œæ‚¨æƒ³å°† <code>file4</code>, <code>file5</code> æ·»åŠ åˆ°åˆå§‹åˆ—è¡¨ä¸­ï¼Œè¯·ä½¿ç”¨ <code>:arga</code>å‘½ä»¤ã€‚è¿è¡Œ</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:arga</span> file4 file5<br></code></pre></td></tr></table></figure><p>ç°åœ¨æ‚¨çš„åˆ—è¡¨ä¸º<code>file1</code>, <code>file2</code>, <code>file3</code>, <code>file4</code>, <code>file5</code>ã€‚</p><p>å¦‚æœæ‚¨è¿è¡Œ <code>:arga</code> æ—¶æ²¡æœ‰ç»™ä»»ä½•å‚æ•°ï¼ŒVimä¼šæ·»åŠ å½“å‰bufferåˆ°å‚æ•°åˆ—è¡¨ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„å‚æ•°åˆ—è¡¨ä¸­å·²ç»æœ‰äº† <code>file1</code>, <code>file2</code>, <code>file3</code>ï¼Œè€Œæ‚¨å½“å‰bufferæ˜¯ <code>file5</code>ï¼Œè¿è¡Œ <code>:arga</code> å°†æ·»åŠ  <code>file5</code> åˆ°æ‚¨çš„åˆ—è¡¨ä¸­ã€‚</p><p>åœ¨å‰é¢çš„å‘½ä»¤ï¼ˆ<code>:argdo %s/donut/pancake/g</code>ï¼‰ä¸­æ‚¨å·²ç»çœ‹åˆ°è¿‡äº†ï¼Œå½“æ‚¨åˆ›å»ºå¥½åˆ—è¡¨åå°±å¯ä»¥å‘å®ƒä¼ é€’ä»»æ„å‘½ä»¤è¡Œå‘½ä»¤ã€‚å…¶ä»–çš„ä¸€äº›ç¤ºä¾‹ï¼š</p><ul><li>åˆ é™¤å‚æ•°åˆ—è¡¨æ‰€æœ‰æ–‡ä»¶å†…åŒ…å« â€œdessertâ€ çš„è¡Œ, è¿è¡Œ <code>:argdo g/dessert/d</code>.</li><li>åœ¨å‚æ•°åˆ—è¡¨æ¯ä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œå®a(å‡è®¾æ‚¨å·²ç»åœ¨aä¸­å½•å¥½äº†ä¸€ä¸ªå®)ï¼Œè¿è¡Œ <code>:argdo norm @a</code>.</li><li>å‘å‚æ•°åˆ—è¡¨æ‰€æœ‰æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ’å…¥â€hello â€œ+æ–‡ä»¶å ï¼Œè¿è¡Œ <code>:argdo 0put=&#39;hello &#39; . @%</code>ï¼ˆè¯‘è€…æ³¨ï¼šåœ¨è‹±æ–‡ç‰ˆä¸­ï¼ŒåŸä½œè€…ç»™å‡ºçš„å‘½ä»¤æ˜¯ <code>:argdo 0put=&#39;hello &#39; .. @:</code>ï¼Œè²Œä¼¼è¿™ä¸ªå‘½ä»¤æœ‰é—®é¢˜ï¼‰ã€‚</li></ul><p>æŠŠæ‰€æœ‰å·¥ä½œå®Œæˆåï¼Œåˆ«å¿˜äº†ä½¿ç”¨ <code>:update</code> å‘½ä»¤ä¿å­˜(<code>:update</code>åªä¼šä¿å­˜å½“å‰bufferï¼Œè¦ä¿å­˜åˆ—è¡¨æ‰€æœ‰æ–‡ä»¶çš„ä¿®æ”¹ï¼Œè¯·ç”¨ <code>:argdo update</code>)ã€‚</p><p>æœ‰æ—¶å€™æ‚¨ä»…ä»…éœ€è¦åœ¨å‚æ•°åˆ—è¡¨çš„å‰nä¸ªæ–‡ä»¶æ‰§è¡ŒæŸæ¡å‘½ä»¤ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œåªéœ€è¦å‘ <code>argdo</code> å‘½ä»¤ä¼ é€’ä¸€ä¸ªåœ°å€å°±å¯ä»¥äº†ã€‚æ¯”å¦‚ï¼Œè¦åœ¨åˆ—è¡¨çš„å‰3ä¸ªæ–‡ä»¶æ‰§è¡Œæ›¿æ¢å‘½ä»¤ï¼Œè¿è¡Œï¼š<code>:1,3argdo %s/donut/pancake/g</code>ã€‚</p><h2 id="ç¼“å†²åŒºåˆ—è¡¨"><a href="#ç¼“å†²åŒºåˆ—è¡¨" class="headerlink" title="ç¼“å†²åŒºåˆ—è¡¨"></a>ç¼“å†²åŒºåˆ—è¡¨</h2><p>å› ä¸ºæ¯æ¬¡æ‚¨åˆ›å»ºæ–°æ–‡ä»¶æˆ–æ‰“å¼€æ–‡ä»¶æ—¶ï¼ŒVimå°†å®ƒä¿å­˜åœ¨ä¸€ä¸ªbufferä¸­ï¼ˆé™¤éæ‚¨æ˜¾å¼åœ°åˆ é™¤å®ƒï¼‰ï¼Œæ‰€ä»¥å½“æ‚¨ç¼–è¾‘æ–°æ–‡ä»¶æ—¶ï¼Œç¼“å†²åŒºåˆ—è¡¨å°±æœ‰ç»„ç»‡åœ°è¢«åˆ›å»ºäº†ã€‚å¦‚æœæ‚¨å·²ç»æ‰“å¼€äº†3ä¸ªæ–‡ä»¶ï¼š<code>file1.rb file2.rb file3.rb</code>ï¼Œæ‚¨çš„ç¼“å†²åŒºåˆ—è¡¨å°±å·²ç»æœ‰äº†3ä¸ªå…ƒç´ ã€‚è¿è¡Œ <code>:buffers</code>ï¼ˆæˆ–è€…<code>:ls</code>ã€æˆ–<code>:files</code>ï¼‰å¯ä»¥æ˜¾ç¤ºç¼“å†²åŒºåˆ—è¡¨ã€‚è¦æƒ³å‘å‰æˆ–å‘åéå†ç¼“å†²åŒºåˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>:bnext</code> <code>:bprev</code>ã€‚è¦æƒ³è·³è‡³åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªbufferï¼Œå¯ä½¿ç”¨ <code>:bfirst</code> å’Œ <code>:blast</code>ã€‚</p><p>å¦å¤–ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå’Œæœ¬ç« å†…å®¹ä¸ç›¸å…³ï¼Œä½†æ˜¯å¾ˆé…·çš„ç¼“å†²åŒºæŠ€å·§ï¼šå¦‚æœæ‚¨çš„ç¼“å†²åŒºæœ‰å¤§é‡çš„æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>:ball</code> æ˜¾ç¤ºæ‰€æœ‰ç¼“å†²åŒºã€‚<code>:ball</code> å‘½ä»¤é»˜è®¤ä½¿ç”¨æ°´å¹³åˆ†å‰²çª—å£è¿›è¡Œæ˜¾ç¤ºï¼Œå¦‚æœæƒ³ä½¿ç”¨å‚ç›´åˆ†å‰²çš„çª—å£æ˜¾ç¤ºï¼Œè¿è¡Œï¼š<code>:vertical ball</code></p><p>å›åˆ°æœ¬ç« ä¸»é¢˜ã€‚åœ¨ç¼“å†²åŒºåˆ—è¡¨ä¸­æ‰§è¡ŒæŸä¸ªæ“ä½œçš„æ–¹æ³•ä¸å‚æ•°åˆ—è¡¨æ“ä½œéå¸¸ç›¸ä¼¼ã€‚å½“æ‚¨åˆ›å»ºå¥½ç¼“å†²åŒºåˆ—è¡¨åï¼Œæ‚¨åªéœ€è¦åœ¨æ‚¨æƒ³æ‰§è¡Œçš„å‘½ä»¤å‰ç”¨ <code>:bufdo</code> ä»£æ›¿ <code>:argdo</code>å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³å°†ç¼“å†²åŒºåˆ—è¡¨å†…æ¯ä¸ªæ–‡ä»¶ä¸­æ‰€æœ‰çš„ â€œdonutâ€ æ›¿æ¢ä¸º â€œpancakeâ€å¹¶ä¿å­˜ä¿®æ”¹ï¼Œå¯ä»¥è¿è¡Œï¼š<code>:bufdo %s/donut/pancake/g | update</code>ã€‚</p><h2 id="çª—å£åˆ—è¡¨å’Œé€‰é¡¹å¡ï¼ˆTabï¼‰åˆ—è¡¨"><a href="#çª—å£åˆ—è¡¨å’Œé€‰é¡¹å¡ï¼ˆTabï¼‰åˆ—è¡¨" class="headerlink" title="çª—å£åˆ—è¡¨å’Œé€‰é¡¹å¡ï¼ˆTabï¼‰åˆ—è¡¨"></a>çª—å£åˆ—è¡¨å’Œé€‰é¡¹å¡ï¼ˆTabï¼‰åˆ—è¡¨</h2><p>çª—å£åˆ—è¡¨ã€é€‰é¡¹å¡åˆ—è¡¨çš„æ“ä½œå’Œå‚æ•°åˆ—è¡¨ã€ç¼“å†²åŒºåˆ—è¡¨åŒæ ·éå¸¸ç›¸ä¼¼ã€‚å”¯ä¸€çš„åŒºåˆ«åœ¨äºå®ƒä»¬çš„å†…å®¹å’Œè¯­æ³•ã€‚</p><p>çª—å£æ“ä½œä½œç”¨åœ¨æ¯ä¸€ä¸ªæ‰“å¼€çš„çª—å£ä¸Šï¼Œä½¿ç”¨çš„å‘½ä»¤æ˜¯ <code>:windo</code>ã€‚é€‰é¡¹å¡ï¼ˆTabï¼‰æ“ä½œä½œç”¨åœ¨æ¯ä¸€ä¸ªæ‰“å¼€çš„é€‰é¡¹å¡ä¸Šï¼Œä½¿ç”¨çš„å‘½ä»¤æ˜¯ <code>:tabdo</code>ã€‚å¯ä»¥æŸ¥è¯¢ <code>:h list-repeat</code>, <code>:h :windo</code>å’Œ<code>:h :tabdo</code>ï¼Œäº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœæ‚¨æ‰“å¼€äº†4ä¸ªçª—å£ï¼ˆæ‚¨å¯ä»¥ä½¿ç”¨ <code>Ctrl-w v</code>æ‰“å¼€ä¸€ä¸ªå‚ç›´åˆ†å‰²çš„çª—å£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>Ctrl-w s</code>æ‰“å¼€ä¸€ä¸ªæ°´å¹³åˆ†å‰²çš„çª—å£ï¼‰ï¼Œç„¶åæ‚¨è¿è¡Œ <code>:windo 0put = &#39;hello&#39; . @%</code>ï¼ŒVimå°†åœ¨æ‰€æœ‰æ‰“å¼€çš„çª—å£çš„ç¬¬ä¸€è¡Œè¾“å‡º â€œhelloâ€+æ–‡ä»¶åã€‚</p><h2 id="å¿«é€Ÿä¿®å¤åˆ—è¡¨"><a href="#å¿«é€Ÿä¿®å¤åˆ—è¡¨" class="headerlink" title="å¿«é€Ÿä¿®å¤åˆ—è¡¨"></a>å¿«é€Ÿä¿®å¤åˆ—è¡¨</h2><p>åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼ˆç¬¬3ç« å’Œç¬¬19ç« ï¼‰ï¼Œæˆ‘æ›¾æåˆ°è¿‡å¿«é€Ÿä¿®å¤ï¼ˆquickfixï¼‰ã€‚å¿«é€Ÿä¿®å¤æœ‰å¾ˆå¤šä½œç”¨ï¼Œå¾ˆå¤šæµè¡Œçš„æ’ä»¶éƒ½åœ¨ä½¿ç”¨å¿«é€Ÿä¿®å¤æä¾›çš„åŠŸèƒ½ï¼Œå› æ­¤å€¼å¾—èŠ±æ—¶é—´å»ç†è§£å®ƒã€‚</p><p>å¦‚æœæ‚¨æ˜¯Vimæ–°æ‰‹ï¼Œå¿«é€Ÿä¿®å¤å¯¹äºæ‚¨å¯èƒ½æ˜¯ä¸ªæ–°æ¦‚å¿µã€‚å›æƒ³ä»¥å‰æ‚¨æ‰§è¡Œä»£ç ç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘æœŸé—´æ‚¨å¯èƒ½é‡åˆ°è¿‡é”™è¯¯ï¼Œè€Œè¿™äº›é”™è¯¯éƒ½æ˜¾ç¤ºåœ¨ä¸€ä¸ªç‰¹æ®Šçš„çª—å£ã€‚è¿™å°±æ˜¯å¿«é€Ÿä¿®å¤(quickfix)çš„ç”±æ¥ã€‚å½“æ‚¨ç¼–è¯‘æ‚¨çš„ä»£ç çš„æ—¶å€™ï¼ŒVimä¼šåœ¨å¿«é€Ÿä¿®å¤çª—å£æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥ç¨åå»è§£å†³ã€‚è®¸å¤šç°ä»£è¯­è¨€å·²ç»ä¸å†éœ€è¦è¿›è¡Œæ˜¾å¼åœ°ç¼–è¯‘ï¼Œä½†å¿«é€Ÿä¿®å¤å¹¶æ²¡æœ‰è¢«æ·˜æ±°ã€‚ç°åœ¨ï¼Œäººä»¬ä½¿ç”¨å¿«é€Ÿä¿®å¤æ¥åšå„ç§å„æ ·çš„äº‹ï¼Œæ¯”å¦‚æ˜¾ç¤ºè™šæ‹Ÿç»ˆç«¯çš„è¾“å…¥ã€å­˜å‚¨æœç´¢ç»“æœç­‰ã€‚æˆ‘ä»¬é‡ç‚¹ç ”ç©¶åè€…ï¼Œå­˜å‚¨æœç´¢ç»“æœã€‚</p><p>é™¤ç¼–è¯‘å‘½ä»¤å¤–ï¼ŒæŸäº›ç‰¹å®šçš„Vimå‘½ä»¤ä¹Ÿä¾èµ–å¿«é€Ÿä¿®å¤æ¥å£ã€‚å…¶ä¸­ä¸€ç§å°±æ˜¯æœç´¢å‘½ä»¤ï¼Œå…¶ä½¿ç”¨è¿‡ç¨‹ä¸­å¤§é‡çš„ä½¿ç”¨äº†å¿«é€Ÿä¿®å¤çª—å£ï¼Œ<code>:vimgrep</code> å’Œ <code>:grep</code> éƒ½é»˜è®¤ä½¿ç”¨å¿«é€Ÿä¿®å¤ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨æ‰€æœ‰çš„Javascriptæ–‡ä»¶ä¸­é€’å½’åœ°æœç´¢ â€œdonutâ€ï¼Œæ‚¨å¯ä»¥è¿è¡Œï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:vimgrep <span class="hljs-regexp">/donut/</span> **/*.js<br></code></pre></td></tr></table></figure><p>â€œdonutâ€çš„æœç´¢ç»“æœå­˜å‚¨åœ¨å¿«é€Ÿä¿®å¤çª—å£ä¸­ã€‚è¦æŸ¥çœ‹å¿«é€Ÿä¿®å¤çª—å£çš„ç»“æœï¼Œè¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:copen</span><br></code></pre></td></tr></table></figure><p>è¦å…³é—­å¿«é€Ÿä¿®å¤çª—å£ï¼Œè¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:cclose</span><br></code></pre></td></tr></table></figure><p>åœ¨å¿«é€Ÿä¿®å¤åˆ—è¡¨ä¸­å‘å‰æˆ–å‘åéå†ï¼Œè¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:cnext</span><br><span class="hljs-symbol">:cprev</span><br></code></pre></td></tr></table></figure><p>è·³è‡³ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ï¼Œè¿è¡Œï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clojure"><span class="hljs-symbol">:cfirst</span><br><span class="hljs-symbol">:clast</span><br></code></pre></td></tr></table></figure><p>åœ¨å‰é¢æˆ‘æåˆ°è¿‡ï¼Œæœ‰ä¸¤ç§å¿«é€Ÿä¿®å¤å‘½ä»¤ï¼š<code>cdo</code> å’Œ <code>cfdo</code> ã€‚å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<code>cdo</code> åœ¨ä¿®å¤åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸Šæ‰§è¡Œå‘½ä»¤ï¼Œè€Œ <code>cfdo</code> åœ¨ä¿®å¤åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶ä¸Šæ‰§è¡Œå‘½ä»¤ã€‚</p><p>è®©æˆ‘è®²æ¸…æ¥šä¸€ç‚¹ï¼Œå‡è®¾è¿è¡Œå®Œä¸Šé¢çš„ <code>vimgrep</code> å‘½ä»¤åï¼Œæ‚¨æ‰¾åˆ°ä»¥ä¸‹ç»“æœï¼š</p><ul><li>1 result in <code>file1.js</code></li><li>10 results in <code>file2.js</code></li></ul><p>å¦‚æœæ‚¨è¿è¡Œ <code>:cfdo %s/donut/pancake/g</code>, è¿™ä¸ªå‘½ä»¤å°†ä¼šåœ¨ <code>file1.js</code> å’Œ <code>file2.js</code> ä¸Šåˆ†åˆ«æœ‰æ•ˆåœ°è¿è¡Œä¸€æ¬¡<code>%s/donut/pancake/g</code>. å®ƒæ‰§è¡Œçš„æ¬¡æ•°ä¸ <em>åŒ¹é…ç»“æœä¸­æ–‡ä»¶çš„æ•°é‡</em> ç›¸åŒã€‚å› ä¸ºæœç´¢ç»“æœä¸­æœ‰2ä¸ªæ–‡ä»¶ï¼Œå› æ­¤Vimåœ¨ <code>file1.js</code> ä¸Šè¿è¡Œä¸€æ¬¡æ›¿æ¢å‘½ä»¤ï¼Œåœ¨ <code>file2.js</code> ä¸Šå†è¿è¡Œä¸€æ¬¡æ›¿æ¢å‘½ä»¤ã€‚ å°½ç®¡åœ¨ç¬¬äºŒä¸ªæ–‡ä»¶ä¸­æœ‰10ä¸ªæœç´¢ç»“æœï¼Œä½† <code>cfdo</code> åªå…³æ³¨å¿«é€Ÿä¿®å¤åˆ—è¡¨ä¸­æœ‰å¤šå°‘ä¸ªæ–‡ä»¶ã€‚</p><p>è€Œå¦‚æœæ‚¨è¿è¡Œ <code>:cdo %s/donut/pancake/g</code> ï¼Œè¿™ä¸ªå‘½ä»¤å°†ä¼šåœ¨ <code>file1.js</code> ä¸Šæœ‰æ•ˆè¿è¡Œä¸€æ¬¡ï¼Œç„¶ååœ¨ <code>file2.js</code> ä¸Šè¿è¡Œ10æ¬¡ã€‚å®ƒæ‰§è¡Œçš„æ¬¡æ•°ä¸ <em>å¿«é€Ÿä¿®å¤åˆ—è¡¨ä¸­å…ƒç´ çš„æ•°é‡</em> ç›¸åŒã€‚å› ä¸ºåœ¨ <code>file1.js</code> ä¸Šæ‰¾åˆ°1ä¸ªåŒ¹é…ç»“æœï¼Œåœ¨ <code>file2.js</code> ä¸Šæ‰¾åˆ°10ä¸ªåŒ¹é…ç»“æœï¼Œå› æ­¤å®ƒæ‰§è¡Œçš„æ€»æ¬¡æ•°æ˜¯11æ¬¡ã€‚</p><p>ç”±äºæ‚¨è¦åœ¨åˆ—è¡¨ä¸­è¿è¡Œçš„å‘½ä»¤æ˜¯ <code>%s/donut/pancake/g</code> ï¼Œæ‰€ä»¥ä½¿ç”¨ <code>cfdo</code>å‘½ä»¤æ˜¯æ¯”è¾ƒåˆç†çš„ã€‚è€Œä½¿ç”¨ <code>cdo</code> æ˜¯ä¸åˆç†çš„ï¼Œå› ä¸ºå®ƒå°†åœ¨ <code>file2.js</code> ä¸­è¿è¡Œ10æ¬¡ <code>%s/donut/pancake/g</code>å‘½ä»¤ï¼ˆ<code>%s</code>å·²ç»æ˜¯ä¸€ä¸ªé’ˆå¯¹æ•´ä¸ªæ–‡ä»¶çš„æ›¿æ¢æ“ä½œï¼‰ã€‚ä¸€ä¸ªæ–‡ä»¶è¿è¡Œä¸€æ¬¡ <code>%s</code> å°±è¶³å¤Ÿäº†ã€‚å¦‚æœæ‚¨ä½¿ç”¨ <code>cdo</code>ï¼Œåˆ™ä¼ ç»™å®ƒçš„å‘½ä»¤åº”å½“æ”¹ä¸º <code>s/donut/pancake/g</code> æ‰æ˜¯åˆç†çš„ã€‚</p><p>é‚£åˆ°åº•ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ <code>cfdo</code>ï¼Ÿä»€ä¹ˆæ—¶å€™è¯¥ç”¨ <code>cdo</code>ï¼Ÿ    è¿™åº”å½“æƒ³ä¸€æƒ³æ‚¨è¦ä¼ é€’çš„å‘½ä»¤çš„ä½œç”¨åŸŸï¼Œè¦çœ‹å‘½ä»¤ä½œç”¨åŸŸæ˜¯æ•´ä¸ªæ–‡ä»¶ï¼ˆæ¯”å¦‚ <code>:%s</code> æˆ– <code>:g</code>ï¼‰ï¼Ÿè¿˜æ˜¯æŸä¸€è¡Œï¼ˆæ¯”å¦‚ <code>:s</code> æˆ– <code>:!</code>ï¼‰ï¼Ÿ</p><h2 id="ä½ç½®åˆ—è¡¨"><a href="#ä½ç½®åˆ—è¡¨" class="headerlink" title="ä½ç½®åˆ—è¡¨"></a>ä½ç½®åˆ—è¡¨</h2><p>ä½ç½®åˆ—è¡¨åœ¨æŸç§æ„ä¹‰ä¸Šå’Œå¿«é€Ÿä¿®å¤åˆ—è¡¨å¾ˆåƒã€‚Vimä¹Ÿä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„çª—å£æ¥æ˜¾ç¤ºä½ç½®åˆ—è¡¨çš„ä¿¡æ¯ã€‚åŒºåˆ«åœ¨äºï¼šæ‚¨ä»»ä½•æ—¶å€™éƒ½åªèƒ½æœ‰1ä¸ªå¿«é€Ÿä¿®å¤åˆ—è¡¨ï¼Œè€Œä½ç½®åˆ—è¡¨åˆ™æ˜¯ï¼Œæœ‰å¤šå°‘ä¸ªçª—å£å°±å¯ä»¥æœ‰å¤šå°‘ä¸ªä½ç½®åˆ—è¡¨ã€‚</p><p>å‡è®¾æ‚¨æ‰“å¼€äº†ä¸¤ä¸ªçª—å£ï¼Œå…¶ä¸­ä¸€ä¸ªçª—å£æ˜¾ç¤º <code>food.txt</code> ï¼Œè€Œå¦ä¸€ä¸ªæ˜¾ç¤º <code>drinks.txt</code>ã€‚åœ¨ <code>food.txt</code>é‡Œé¢ï¼Œè¿è¡Œä¸€ä¸ªä½ç½®åˆ—è¡¨æœç´¢å‘½ä»¤ <code>:lvimgrep</code> ï¼ˆ<code>:vimgrep</code>å‘½ä»¤å…³äºä½ç½®åˆ—è¡¨çš„ä¸€ä¸ªå˜ä½“ï¼‰ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:lvim <span class="hljs-regexp">/bagel/</span> **/*.md<br></code></pre></td></tr></table></figure><p>Vimå°†ä¸º <code>food.txt</code>æ‰€åœ¨ <em>çª—å£</em>åˆ›å»ºä¸€ä¸ªä½ç½®åˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰çš„bagelæœç´¢ç»“æœã€‚ç”¨ <code>:lopen</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹ä½ç½®åˆ—è¡¨ã€‚ç°åœ¨è½¬åˆ°å¦ä¸€ä¸ªçª—å£ <code>drinks.txt</code>ï¼Œè¿è¡Œï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:lvimgrep <span class="hljs-regexp">/milk/</span> **/*.md<br></code></pre></td></tr></table></figure><p>Vimå°†ä¸º <code>drinks.txt</code>æ‰€åœ¨ <em>çª—å£</em>å†åˆ›å»ºä¸€ä¸ª <em>å•ç‹¬</em>çš„ä½ç½®åˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰å…³äºmilkçš„æœç´¢ç»“æœã€‚</p><p>å¯¹äºæ¯ä¸ªä¸åŒçš„çª—å£ä¸­æ‚¨è¿è¡Œçš„ä½ç½®å‘½ä»¤ï¼ŒViméƒ½ä¼šå•ç‹¬åˆ›å»ºä¸€ä¸ªä½ç½®åˆ—è¡¨ã€‚å¦‚æœæ‚¨æœ‰10ä¸ªä¸åŒçš„çª—å£ï¼Œæ‚¨å°±å¯ä»¥æœ‰æœ€å¤š10ä¸ªä¸åŒçš„ä½ç½®åˆ—è¡¨ã€‚å¯¹æ¯”å‰é¢ä»‹ç»çš„å¿«é€Ÿä¿®å¤åˆ—è¡¨ï¼Œå¿«é€Ÿä¿®å¤åˆ—è¡¨ä»»ä½•æ—¶å€™éƒ½åªèƒ½æœ‰1ä¸ªã€‚å°±ç®—æ‚¨æœ‰10ä¸ªä¸åŒçš„çª—å£ï¼Œæ‚¨ä¹Ÿåªèƒ½æœ‰1ä¸ªå¿«é€Ÿä¿®å¤åˆ—è¡¨ã€‚</p><p>å¤§å¤šæ•°ä½ç½®åˆ—è¡¨å‘½ä»¤éƒ½å’Œå¿«é€Ÿä¿®å¤åˆ—è¡¨å‘½ä»¤ç›¸ä¼¼ï¼Œå”¯ä¸€ä¸åŒå°±æ˜¯ä½ç½®åˆ—è¡¨å‘½ä»¤æœ‰ä¸€ä¸ª <code>l-</code>å‰ç¼€ï¼Œæ¯”å¦‚ï¼š <code>:lvimgrep</code>, <code>:lgrep</code>, è¿˜æœ‰ <code>:lmake</code>ã€‚åœ¨å¿«é€Ÿä¿®å¤åˆ—è¡¨å‘½ä»¤ä¸­ä¸ä¹‹å¯¹åº”çš„æ˜¯: <code>:vimgrep</code>, <code>:grep</code>, ä»¥åŠ <code>:make</code>ã€‚æ“ä½œä½ç½®åˆ—è¡¨çª—å£çš„æ–¹å¼å’Œå¿«é€Ÿä¿®å¤çª—å£ä¹Ÿå¾ˆç›¸ä¼¼ï¼š<code>:lopen</code>, <code>:lclose</code>, <code>:lfirst</code>, <code>:llast</code>, <code>:lnext</code>, è¿˜æœ‰<code>:lprev</code>ï¼Œä¸ä¹‹å¯¹åº”å¿«é€Ÿä¿®å¤ç‰ˆæœ¬æ˜¯ï¼š<code>:copen</code>, <code>:cclose</code>, <code>:cfirst</code>, <code>:clast</code>, <code>:cnext</code>, and <code>:cprev</code>ã€‚</p><p>ä¸¤ä¸ªä½ç½®åˆ—è¡¨å‚æ•°çš„å¤šæ–‡ä»¶æ“ä½œå‘½ä»¤ä¹Ÿå’Œå¿«é€Ÿä¿®å¤åˆ—è¡¨çš„å¤šæ–‡ä»¶æ“ä½œå‘½ä»¤ä¹Ÿå¾ˆç±»ä¼¼ï¼š<code>:ldo</code> å’Œ <code>:lfdo</code>ã€‚<code>:ldo</code> å¯¹ä½ç½®åˆ—è¡¨ä¸­æ¯ä¸€ä¸ªå…ƒç´ æ‰§è¡Œå‘½ä»¤ï¼Œè€Œ <code>:lfdo</code> å¯¹ä½ç½®åˆ—è¡¨ä¸­æ¯ä¸€ä¸ªæ–‡ä»¶æ‰§è¡Œå‘½ä»¤ã€‚å¯ä»¥æŸ¥é˜… <code>:h location-list</code>äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><h2 id="åœ¨Vimä¸­è¿è¡Œå¤šæ–‡ä»¶æ“ä½œå‘½ä»¤"><a href="#åœ¨Vimä¸­è¿è¡Œå¤šæ–‡ä»¶æ“ä½œå‘½ä»¤" class="headerlink" title="åœ¨Vimä¸­è¿è¡Œå¤šæ–‡ä»¶æ“ä½œå‘½ä»¤"></a>åœ¨Vimä¸­è¿è¡Œå¤šæ–‡ä»¶æ“ä½œå‘½ä»¤</h2><p>åœ¨ç¼–è¾‘å·¥ä½œä¸­ï¼ŒçŸ¥é“å¦‚ä½•è¿›è¡Œå¤šæ–‡ä»¶æ“ä½œæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æŠ€èƒ½ã€‚å½“æ‚¨éœ€è¦åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ”¹å˜ä¸€ä¸ªå˜é‡åå­—çš„æ—¶å€™ï¼Œæ‚¨è‚¯å®šæƒ³ä¸€ä¸ªæ“ä½œå°±å…¨éƒ¨æå®šã€‚Vimæœ‰8ç§ä¸åŒçš„æ–¹æ³•æ”¯æŒä½ å®Œæˆè¿™ä¸ªäº‹ã€‚</p><p>äº‹å®ä¸Šï¼Œæ‚¨å¯èƒ½å¹¶ä¸ä¼šç”¨åˆ°æ‰€æœ‰8ç§æ–¹æ³•ã€‚æ‚¨ä¼šæ…¢æ…¢å€¾å‘äºå…¶ä¸­1ä¸­æˆ–2ç§ã€‚å½“æ‚¨åˆšå¼€å§‹æ—¶ï¼Œé€‰æ‹©å…¶ä¸­1ä¸ªï¼ˆæˆ‘ä¸ªäººå»ºè®®ä»å‚æ•°åˆ—è¡¨å¼€å§‹ <code>:argdo</code>ï¼‰å¹¶æŒæ¡å®ƒã€‚å½“æ‚¨ä¹ æƒ¯äº†å…¶ä¸­1ä¸ªï¼Œç„¶åå†å­¦ä¸‹ä¸€ä¸ªã€‚æ‚¨å°†ä¼šå‘ç°ï¼Œå­¦ä¹ ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªã€ç¬¬å››ä¸ªæ—¶è¦å®¹æ˜“å¤šäº†ã€‚è®°å¾—è¦åˆ›é€ æ€§çš„ä½¿ç”¨ï¼Œå³å°†å®ƒå’Œå…¶ä»–å„ç§ä¸åŒå‘½ä»¤ç»„åˆèµ·æ¥ä½¿ç”¨ã€‚åšæŒç»ƒä¹ ç›´åˆ°æ‚¨å¯ä»¥ä¸ç»æ€è€ƒåœ°é«˜æ•ˆçš„ä½¿ç”¨å®ƒã€‚è®©å®ƒæˆä¸ºæ‚¨çš„è‚Œè‚‰è®°å¿†ã€‚</p><p>å°±åƒå‰é¢å·²ç»è¯´è¿‡çš„ï¼Œæ‚¨ç°åœ¨å·²ç»æŒæ¡äº†Vimçš„ç¼–è¾‘åŠŸèƒ½ã€‚æ­å–œæ‚¨ï¼</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-Vimrc</title>
    <link href="/2022/04/05/Vim/ch22_vimrc/"/>
    <url>/2022/04/05/Vim/ch22_vimrc/</url>
    
    <content type="html"><![CDATA[<h1 id="Ch22-Vimrc"><a href="#Ch22-Vimrc" class="headerlink" title="Ch22. Vimrc"></a>Ch22. Vimrc</h1><p>åœ¨å…ˆå‰çš„ç« èŠ‚ä¸­ï¼Œæ‚¨å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨Vimã€‚åœ¨æœ¬ç« ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ç»„ç»‡å’Œé…ç½®Vimrcã€‚</p><h2 id="Vimå¦‚ä½•æ‰¾åˆ°Vimrc"><a href="#Vimå¦‚ä½•æ‰¾åˆ°Vimrc" class="headerlink" title="Vimå¦‚ä½•æ‰¾åˆ°Vimrc"></a>Vimå¦‚ä½•æ‰¾åˆ°Vimrc</h2><p>å¯¹äºVimrcï¼Œå¸¸è§çš„ç†è§£æ˜¯åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª <code>.vimrc</code> ç‚¹æ–‡ä»¶ï¼ˆæ ¹æ®æ‚¨ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼Œæ–‡ä»¶è·¯å¾„åå¯èƒ½ä¸åŒï¼‰ã€‚</p><p>å®é™…ä¸Šï¼ŒVimåœ¨å¤šä¸ªåœ°æ–¹æŸ¥æ‰¾vimrcæ–‡ä»¶ã€‚ä¸‹é¢æ˜¯Vimæ£€æŸ¥çš„è·¯å¾„ï¼š</p><ul><li><code>$VIMINIT</code></li><li><code>$HOME/.vimrc</code></li><li><code>$HOME/.vim/vimrc</code></li><li><code>$EXINIT</code></li><li><code>$HOME/.exrc</code></li><li><code>$VIMRUNTIME/default.vim</code></li></ul><p>å½“æ‚¨å¯åŠ¨Vimæ—¶ï¼Œå®ƒå°†åœ¨ä¸Šé¢åˆ—å‡ºçš„6ä¸ªä½ç½®æŒ‰é¡ºåºæ£€æŸ¥vimrcæ–‡ä»¶ï¼Œç¬¬ä¸€ä¸ªè¢«æ‰¾åˆ°çš„vimrcæ–‡ä»¶å°†è¢«åŠ è½½ï¼Œè€Œå…¶ä½™çš„å°†è¢«å¿½ç•¥ã€‚</p><p>é¦–å…ˆï¼ŒVimå°†æŸ¥æ‰¾ç¯å¢ƒå˜é‡ <code>$VIMINIT</code>ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼ŒVimå°†æ£€æŸ¥ <code>$HOME/.vimrc</code>ã€‚å¦‚æœè¿˜æ²¡æ‰¾åˆ°ï¼ŒVImå°±æ£€æŸ¥ <code>$HOME/.vim/vimrc</code>ã€‚å¦‚æœVimæ‰¾åˆ°äº†vimrcæ–‡ä»¶ï¼Œå®ƒå°±åœæ­¢æŸ¥æ‰¾ï¼Œå¹¶ä½¿ç”¨ <code>$HOME/.vim/vimrc</code>ã€‚</p><p>å…³äºç¬¬ä¸€ä¸ªä½ç½®ï¼Œ<code>$VIMINIT</code> æ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ã€‚é»˜è®¤æƒ…å†µä¸‹å®ƒæ˜¯æœªå®šä¹‰çš„ã€‚å¦‚æœæ‚¨æƒ³å°† <code>~/dotfiles/testvimrc</code> ä½œä¸º <code>$VIMINTI</code> çš„å€¼ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒ…å«é‚£ä¸ªvimrcè·¯å¾„çš„ç¯å¢ƒå˜é‡ã€‚å½“æ‚¨è¿è¡Œ <code>export VIMINIT=&#39;let $MYVIMRC=&quot;$HOME/dotfiles/testvimrc&quot; | source $MYVIMRC&#39;</code>åï¼ŒVImå°†ä½¿ç”¨ <code>~/dotfiles/testvimrc</code> ä½œä¸ºæ‚¨çš„vimrcæ–‡ä»¶ã€‚</p><p>ç¬¬äºŒä¸ªä½ç½®ï¼Œ<code>$HOME/.vimrc</code> æ˜¯å¾ˆå¤šVimç”¨æˆ·ä¹ æƒ¯ä½¿ç”¨çš„è·¯å¾„ã€‚<code>$HOME</code> å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯æ‚¨çš„æ ¹ç›®å½•ï¼ˆ<code>~</code>ï¼‰ã€‚å¦‚æœæ‚¨æœ‰ä¸€ä¸ª <code>~/.vimrc</code> æ–‡ä»¶ï¼ŒVimå°†ä½¿ç”¨å®ƒä½œä¸ºæ‚¨çš„vimrcæ–‡ä»¶ã€‚</p><p>ç¬¬ä¸‰ä¸ªï¼Œ<code>$HOME/.vim/vimrc</code>ï¼Œä½äº <code>~/.vim</code> ç›®å½•ä¸­ã€‚æ‚¨å¯èƒ½å·²ç»æœ‰äº†ä¸€ä¸ª <code>~/.vim</code> ç›®å½•ç”¨äºå­˜æ”¾æ’ä»¶ã€è‡ªå®šä¹‰è„šæœ¬ã€æˆ–è§†å›¾æ–‡ä»¶ã€‚æ³¨æ„è¿™é‡Œçš„vimrcæ–‡ä»¶åæ²¡æœ‰â€œç‚¹â€ï¼ˆ<code>$HOME/.vim/.vimrc</code> ä¸ä¼šè¢«è¯†åˆ«ï¼Œä½† <code>$HOME/.vim/vimrc</code>èƒ½è¢«è¯†åˆ«ï¼‰ã€‚</p><p>ç¬¬å››ä¸ªï¼Œ<code>$EXINIT</code> å·¥ä½œæ–¹å¼ä¸ <code>$VIMINIT</code> ç±»ä¼¼ã€‚</p><p>ç¬¬äº”ä¸ªï¼Œ<code>$HOME/.exrc</code> å·¥ä½œæ–¹å¼ä¸ <code>$HOME/.vimrc</code> ç±»ä¼¼ã€‚</p><p>ç¬¬å…­ä¸ªï¼Œ<code>$VIMRUNTIME/defaults.vim</code> æ˜¯Vimç¼–è¯‘æ—¶è‡ªå¸¦çš„é»˜è®¤vimrcæ–‡ä»¶ã€‚åœ¨æˆ‘çš„ç”µè„‘ä¸­ï¼Œæˆ‘æ˜¯ä½¿ç”¨Homebrewå®‰è£…çš„Vim8.2ï¼Œæ‰€ä»¥æˆ‘çš„è·¯å¾„æ˜¯ï¼ˆ<code>/usr/local/share/vim/vim82</code>ï¼‰ã€‚å¦‚æœVimåœ¨å‰5ä¸ªä½ç½®éƒ½æ²¡æœ‰æ‰¾åˆ°vimrcæ–‡ä»¶ï¼Œå®ƒå°†ä½¿ç”¨è¿™ä¸ªVimè‡ªå¸¦çš„vimrcæ–‡ä»¶ã€‚</p><p>åœ¨æœ¬ç« å‰©ä½™éƒ¨åˆ†ï¼Œæˆ‘å°†å‡è®¾vimrcä½¿ç”¨çš„è·¯å¾„æ˜¯ <code>~/.vimrc</code>ã€‚</p><h2 id="åº”è¯¥æŠŠä»€ä¹ˆæ”¾åœ¨Vimrcä¸­ï¼Ÿ"><a href="#åº”è¯¥æŠŠä»€ä¹ˆæ”¾åœ¨Vimrcä¸­ï¼Ÿ" class="headerlink" title="åº”è¯¥æŠŠä»€ä¹ˆæ”¾åœ¨Vimrcä¸­ï¼Ÿ"></a>åº”è¯¥æŠŠä»€ä¹ˆæ”¾åœ¨Vimrcä¸­ï¼Ÿ</h2><p>æˆ‘åˆšå¼€å§‹é…ç½®Vimrcæ—¶ï¼Œæ›¾é—®è¿‡ä¸€ä¸ªé—®é¢˜ï¼Œâ€œæˆ‘ç©¶ç«Ÿè¯¥æŠŠä»€ä¹ˆæ”¾åœ¨Vimrcæ–‡ä»¶ä¸­ï¼Ÿâ€ã€‚</p><p>ç­”æ¡ˆæ˜¯ï¼Œâ€œä»»ä½•æ‚¨æƒ³æ”¾çš„ä¸œè¥¿â€ã€‚Â ç›´æ¥å¤åˆ¶ç²˜è´´åˆ«äººçš„vimrcæ–‡ä»¶çš„ç¡®æ˜¯ä¸€ä¸ªè¯±æƒ‘ï¼Œä½†æ‚¨åº”å½“æŠµåˆ¶è¿™ä¸ªè¯±æƒ‘ã€‚å¦‚æœæ‚¨ä»ç„¶åšæŒä½¿ç”¨åˆ«äººçš„vimrcæ–‡ä»¶ï¼Œç¡®ä¿æ‚¨çŸ¥é“è¿™ä¸ªvimrcå¹²äº†ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆä»–&#x2F;å¥¹è¦ç”¨è¿™äº›è®¾ç½®ï¼Ÿä»¥åŠä»–&#x2F;å¥¹å¦‚ä½•ä½¿ç”¨è¿™äº›è®¾ç½®ï¼Ÿè¿˜æœ‰æœ€é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªvimrcæ–‡ä»¶æ˜¯å¦ç¬¦åˆä½ çš„å®é™…éœ€è¦ï¼Ÿåˆ«äººä½¿ç”¨å¹¶ä¸ä»£è¡¨æ‚¨ä¹Ÿè¦ä½¿ç”¨ã€‚</p><h2 id="VimrcåŸºç¡€å†…å®¹"><a href="#VimrcåŸºç¡€å†…å®¹" class="headerlink" title="VimrcåŸºç¡€å†…å®¹"></a>VimrcåŸºç¡€å†…å®¹</h2><p>ç®€å•åœ°è¯´ï¼Œä¸€ä¸ªvimrcæ˜¯ä»¥ä¸‹å†…å®¹çš„é›†åˆï¼š</p><ul><li>æ’ä»¶</li><li>è®¾ç½®</li><li>è‡ªå®šä¹‰å‡½æ•°</li><li>è‡ªå®šä¹‰å‘½ä»¤</li><li>é”®ç›˜æ˜ å°„</li></ul><p>å½“ç„¶è¿˜æœ‰ä¸€äº›ä¸Šé¢æ²¡æœ‰æåˆ°çš„å†…å®¹ï¼Œä½†æ€»ä½“è¯´ï¼Œå·²ç»æ¶µç›–äº†ç»å¤§éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ã€‚</p><h3 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h3><p>åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘æ›¾æåˆ°å¾ˆå¤šä¸åŒçš„æ’ä»¶ï¼Œæ¯”å¦‚<a href="https://github.com/junegunn/fzf.vim">fzf.vim</a>, <a href="https://github.com/simnalamburt/vim-mundo">vim-mundo</a>, è¿˜æœ‰ <a href="https://github.com/tpope/vim-fugitive">vim-fugitive</a>.</p><p>åå¹´å‰ï¼Œç®¡ç†æ’ä»¶æ’ä»¶æ˜¯ä¸€ä¸ªå™©æ¢¦ã€‚ä½†éšç€å¾ˆå¤šç°ä»£æ’ä»¶ç®¡ç†å™¨çš„å¼€å‘ï¼Œç°åœ¨å®‰è£…æ’ä»¶å¯ä»¥åœ¨å‡ ç§’å†…å®Œæˆã€‚æˆ‘ç°åœ¨æ­£åœ¨ä½¿ç”¨<a href="https://github.com/junegunn/vim-plug">vim-plug</a>ä½œä¸ºæˆ‘çš„æ’ä»¶ç®¡ç†å™¨ï¼Œæ‰€ä»¥æˆ‘åœ¨æœ¬èŠ‚ä¸­å°†ä½¿ç”¨å®ƒã€‚ç›¸å…³æ¦‚å¿µå’Œå…¶ä»–æµè¡Œçš„æ’ä»¶ç®¡ç†å™¨åº”è¯¥æ˜¯ç±»ä¼¼çš„ã€‚æˆ‘å¼ºçƒˆå»ºè®®æ‚¨å¤šè¯•è¯•å‡ ä¸ªæ’ä»¶ç®¡ç†å™¨ï¼Œæ¯”å¦‚ï¼š</p><ul><li><a href="https://github.com/VundleVim/Vundle.vim">vundle.vim</a></li><li><a href="https://github.com/tpope/vim-pathogen">vim-pathogen</a></li><li><a href="https://github.com/Shougo/dein.vim">dein.vim</a></li></ul><p>é™¤äº†ä¸Šé¢åˆ—å‡ºçš„ï¼Œè¿˜æœ‰å¾ˆå¤šæ’ä»¶ç®¡ç†å™¨ï¼Œå¯ä»¥éšä¾¿çœ‹çœ‹ã€‚è¦æƒ³å®‰è£… vim-plugï¼Œå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Unixï¼Œè¿è¡Œï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs awk">curl -fLo ~<span class="hljs-regexp">/.vim/</span>autoload<span class="hljs-regexp">/plug.vim --create-dirs https:/</span><span class="hljs-regexp">/raw.githubusercontent.com/</span>junegunn<span class="hljs-regexp">/vim-plug/m</span>aster/plug.vim<br></code></pre></td></tr></table></figure><p>è¦æ·»åŠ æ–°çš„æ’ä»¶ï¼Œå°†æ‚¨çš„æ’ä»¶å(æ¯”å¦‚ï¼Œ<code>Plug &#39;github-username/repository-name&#39;</code>) æ”¾ç½®åœ¨ <code>call plug#begin()</code> å’Œ <code>call plug#end()</code> ä¹‹é—´çš„è¡Œä¸­. æ‰€ä»¥ï¼Œå¦‚æœæ‚¨æƒ³å®‰è£… <code>emmet-vim</code> å’Œ <code>nerdtree</code>ï¼Œå°†ä¸‹é¢çš„ç‰‡æ®µæ”¾åˆ°æ‚¨çš„vimrcä¸­ï¼š</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs leaf">call plug<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">begin</span><span class="hljs-params">(&#x27;~/.<span class="hljs-variable">vim</span>/<span class="hljs-variable">plugged</span>&#x27;)</span></span><br>  Plug &#x27;mattn/emmet-vim&#x27;<br>  Plug &#x27;preservim/nerdtree&#x27;<br>call plug<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">end</span><span class="hljs-params">()</span></span><br></code></pre></td></tr></table></figure><p>ç„¶åä¿å­˜ä¿®æ”¹ï¼ŒåŠ è½½å½“å‰vimrc (<code>:source %</code>), ç„¶åè¿è¡Œ <code>:PlugInstall</code> å®‰è£…æ’ä»¶ã€‚</p><p>å¦‚æœä»¥åæ‚¨æƒ³åˆ é™¤ä¸ä½¿ç”¨çš„æ’ä»¶ï¼Œæ‚¨åªéœ€å°†æ’ä»¶åä» <code>call</code> ä»£ç å—ä¹‹é—´ç§»é™¤ï¼Œä¿å­˜å¹¶åŠ è½½ï¼Œç„¶åè¿è¡Œ <code>:PlugClean</code> å‘½ä»¤å°†å®ƒä»æœºå™¨ä¸Šåˆ é™¤ã€‚</p><p>Vim 8 æœ‰è‡ªå·±çš„å†…ç½®åŒ…ç®¡ç†å™¨ã€‚æ‚¨å¯ä»¥æŸ¥é˜… <code>:h packages</code> äº†è§£æ›´å¤šä¿¡æ¯ã€‚åœ¨åé¢ä¸€ç« ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒã€‚</p><h3 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h3><p>åœ¨ä»»æ„ä¸€ä¸ªvimrcæ–‡ä»¶ä¸­éƒ½å¯ä»¥çœ‹åˆ°å¤§é‡çš„ <code>set</code> é€‰é¡¹ã€‚ å¦‚æœæ‚¨åœ¨å‘½ä»¤è¡Œæ¨¡å¼ä¸­è¿è¡Œ set å‘½ä»¤ï¼Œå®ƒåªæ˜¯æš‚æ—¶çš„ã€‚å½“æ‚¨å…³é—­Vimï¼Œè®¾ç½®å°±ä¼šä¸¢å¤±ã€‚æ¯”å¦‚ï¼Œä¸ºäº†é¿å…æ‚¨æ¯æ¬¡è¿è¡ŒVimæ—¶éƒ½å¿…é¡»åœ¨å‘½ä»¤è¡Œæ¨¡å¼è¿è¡Œ <code>:set relativenumber number</code> å‘½ä»¤ï¼Œæ‚¨å¯ä»¥å°†è¿™ä¸ªå‘½ä»¤æ·»åŠ åœ¨vimrcä¸­ï¼š</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">set</span> relativenumber <span class="hljs-built_in">number</span><br></code></pre></td></tr></table></figure><p>æœ‰ä¸€äº›è®¾ç½®éœ€è¦æ‚¨èµ‹äºˆä¸€ä¸ªå€¼ï¼Œæ¯”å¦‚ <code>set tabstop=2</code>ã€‚æƒ³äº†è§£ä¸€ä¸ªè®¾ç½®å¯ä»¥æ¥æ”¶ä»€ä¹ˆç±»å‹çš„å€¼ï¼Œå¯ä»¥æŸ¥çœ‹å¸®åŠ©é¡µã€‚</p><p>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>let</code> æ¥ä»£æ›¿ <code>set</code>ï¼ˆç¡®ä¿åœ¨é€‰é¡¹å‰æ·»åŠ ä¸€ä¸ª <code>&amp;</code>å·ï¼‰ã€‚ä½¿ç”¨ <code>let</code> ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼è¿›è¡Œèµ‹å€¼ã€‚æ¯”å¦‚ï¼Œè¦æƒ³ä»…å½“æŸä¸ªè·¯å¾„å­˜åœ¨æ—¶ï¼Œæ‰å°†è¯¥è·¯å¾„èµ‹äºˆ <code>&#39;dictionary&#39;</code> é€‰é¡¹ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">let</span> <span class="hljs-variable">s:english_dict</span> = <span class="hljs-string">&quot;/usr/share/dict/words&quot;</span><br><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">filereadable</span>(<span class="hljs-variable">s:english_dict</span>)<br>  <span class="hljs-keyword">let</span> &amp;dictionary=<span class="hljs-variable">s:english_dict</span><br><span class="hljs-keyword">endif</span><br></code></pre></td></tr></table></figure><p>åœ¨åé¢çš„ç« èŠ‚ä¸­æ‚¨å°†äº†è§£å…³äºVimscriptèµ‹å€¼å’Œæ¡ä»¶çš„çŸ¥è¯†ã€‚</p><p>è¦æŸ¥çœ‹Vimä¸­æ‰€æœ‰å¯ç”¨çš„é€‰é¡¹ï¼ŒæŸ¥é˜… <code>:h E355</code>ã€‚</p><h3 id="è‡ªå®šä¹‰å‡½æ•°"><a href="#è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="è‡ªå®šä¹‰å‡½æ•°"></a>è‡ªå®šä¹‰å‡½æ•°</h3><p>Vimrcæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç”¨æ¥æ”¾ç½®è‡ªå®šä¹‰å‡½æ•°çš„åœ°æ–¹ã€‚åœ¨åé¢çš„ç« èŠ‚ä¸­æ‚¨å°†å­¦ä¹ å¦‚ä½•å†™æ‚¨è‡ªå·±çš„Vimscriptå‡½æ•°ã€‚</p><h3 id="è‡ªå®šä¹‰å‘½ä»¤"><a href="#è‡ªå®šä¹‰å‘½ä»¤" class="headerlink" title="è‡ªå®šä¹‰å‘½ä»¤"></a>è‡ªå®šä¹‰å‘½ä»¤</h3><p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>command</code> åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å‘½ä»¤è¡Œå‘½ä»¤ã€‚</p><p>æ¯”å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªç”¨äºæ˜¾ç¤ºä»Šå¤©æ—¥æœŸçš„åŸºæœ¬å‘½ä»¤ <code>GimmeDate</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:<span class="hljs-built_in">command</span>! GimmeDate <span class="hljs-built_in">echo</span> call(<span class="hljs-string">&quot;strftime&quot;</span>, [<span class="hljs-string">&quot;%F&quot;</span>])<br></code></pre></td></tr></table></figure><p>å½“æ‚¨è¿è¡Œ <code>:GimmeDate</code> æ—¶ï¼ŒVimå°†æ˜¾ç¤ºä¸€ä¸ªç±»ä¼¼ â€œ2021-01-1â€çš„æ—¥æœŸã€‚</p><p>è¦åˆ›å»ºä¸€ä¸ªå¯ä»¥æ¥æ”¶è¾“å…¥çš„åŸºæœ¬å‘½ä»¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>&lt;args&gt;</code> ã€‚å¦‚æœæ‚¨æƒ³å‘ <code>GimmeDate</code> ä¼ é€’ä¸€ä¸ªæ—¶é—´&#x2F;æ—¥æœŸæ ¼å¼å‚æ•°ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">:command! GimmeDate echo call(&quot;strftime&quot;, [&lt;args&gt;])<br><br>:GimmeDate &quot;%F&quot;<br>&quot; 2020-01-01<br><br><span class="hljs-meta">:GimmeDate &quot;%H:%M&quot;</span><br>&quot; 11:30<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æƒ³é™å®šå‚æ•°çš„æ•°ç›®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>-nargs</code> æ ‡å¿—ã€‚<code>-nargs=0</code> è¡¨ç¤ºæ²¡æœ‰å‚æ•°ï¼Œ<code>-nargs=1</code> è¡¨ç¤ºä¼ é€’1ä¸ªå‚æ•°ï¼Œ<code>-nargs=+</code> è¡¨ç¤ºè‡³å°‘1ä¸ªå‚æ•°ï¼Œ<code>-nargs=*</code> è¡¨ç¤ºä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œ<code>-nargs=?</code> è¡¨ç¤ºä¼ é€’0ä¸ªæˆ–1ä¸ªå‚æ•°ã€‚å¦‚æœæ‚¨æƒ³ä¼ é€’nä¸ªå‚æ•°ï¼Œä½¿ç”¨ <code>-nargs=n</code>ï¼ˆè¿™é‡Œ <code>n</code> æ˜¯ä¸€ä¸ªä»»æ„æ•´æ•°ï¼‰ã€‚</p><p><code>&lt;args&gt;</code> æœ‰ä¸¤ä¸ªå˜ä½“ï¼š<code>&lt;f-args&gt;</code> å’Œ <code>&lt;q-args&gt;</code> ã€‚å‰è€…ç”¨æ¥å‘Vimscriptå‡½æ•°ä¼ é€’å‚æ•°ï¼Œåè€…ç”¨æ¥å°†ç”¨æˆ·è¾“å…¥è‡ªåŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><p>ä½¿ç”¨ <code>args</code>:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim">:command! -nargs=<span class="hljs-number">1</span> Hello <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Hello &quot;</span> . <span class="hljs-symbol">&lt;args&gt;</span><br>:Hello <span class="hljs-string">&quot;Iggy&quot;</span><br><span class="hljs-comment">&quot; returns &#x27;Hello Iggy&#x27;</span><br><br>:Hello Iggy<br><span class="hljs-comment">&quot; Undefined variable error</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>q-args</code>:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim">:command! -nargs=<span class="hljs-number">1</span> Hello <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Hello &quot;</span> . <span class="hljs-symbol">&lt;q-args&gt;</span><br>:Hello Iggy<br><span class="hljs-comment">&quot; returns &#x27;Hello Iggy&#x27;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>f-args</code>:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">function!</span> <span class="hljs-title">PrintHello</span><span class="hljs-params">(person1, person2)</span><br>:  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Hello &quot;</span> . <span class="hljs-variable">a:person1</span> . <span class="hljs-string">&quot; and &quot;</span> . <span class="hljs-variable">a:person2</span><br>:<span class="hljs-keyword">endfunction</span><br><br>:command! -nargs=* Hello <span class="hljs-keyword">call</span> PrintHello(<span class="hljs-symbol">&lt;f-args&gt;</span>)<br><br>:Hello Iggy1 Iggy2<br><span class="hljs-string">&quot; returns &quot;</span>Hello Iggy1 <span class="hljs-built_in">and</span> Iggy2<span class="hljs-comment">&quot;</span><br></code></pre></td></tr></table></figure><p>å½“æ‚¨å­¦äº†å…³äºVimscriptå‡½æ•°çš„ç« èŠ‚åï¼Œä¸Šé¢çš„å‡½æ•°å°†æ›´æœ‰æ„ä¹‰ã€‚</p><p>æŸ¥é˜… <code>:h command</code> å’Œ <code>:args</code> äº†è§£æ›´å¤šå…³äºcommandå’Œargsçš„ä¿¡æ¯ã€‚</p><h3 id="é”®ç›˜æ˜ å°„"><a href="#é”®ç›˜æ˜ å°„" class="headerlink" title="é”®ç›˜æ˜ å°„"></a>é”®ç›˜æ˜ å°„</h3><p>å¦‚æœæ‚¨å‘ç°æ‚¨é‡å¤åœ°æ‰§è¡Œä¸€äº›ç›¸åŒçš„å¤æ‚æ“ä½œï¼Œé‚£ä¹ˆä¸ºè¿™äº›å¤æ‚æ“ä½œå»ºç«‹ä¸€ä¸ªé”®ç›˜æ˜ å°„å°†ä¼šå¾ˆæœ‰ç”¨ï¼š</p><p>æ¯”å¦‚ï¼Œåœ¨æˆ‘çš„vimrcæ–‡ä»¶ä¸­æœ‰2ä¸ªé”®ç›˜æ˜ å°„ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;silent&gt;</span> <span class="hljs-symbol">&lt;C-f&gt;</span> :GFiles<span class="hljs-symbol">&lt;CR&gt;</span><br><br><span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;Leader&gt;</span><span class="hljs-keyword">tn</span> :<span class="hljs-keyword">call</span> ToggleNumber()<span class="hljs-symbol">&lt;CR&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨ç¬¬ä¸€ä¸ªä¸­ï¼Œæˆ‘å°† <code>Ctrl-F</code> æ˜ å°„åˆ° <a href="https://github.com/junegunn/fzf.vim">fzf.vim</a> æ’ä»¶çš„ <code>:Gfiles</code> å‘½ä»¤(å¿«é€Ÿæœç´¢Gitæ–‡ä»¶)ä¸Šã€‚åœ¨ç¬¬äºŒä¸ªä¸­ï¼Œæˆ‘å°† <code>&lt;leader&gt;tn</code> æ˜ å°„åˆ°è°ƒç”¨ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•° <code>ToggleNumber</code> ï¼ˆåˆ‡æ¢ <code>norelativenumber</code> å’Œ <code>relativenumber</code> é€‰é¡¹ï¼‰ã€‚<code>Ctrl-f</code> æ˜ å°„è¦†ç›–äº†Vimçš„åŸç”Ÿçš„é¡µé¢æ»šåŠ¨ã€‚å¦‚æœå‘ç”Ÿå†²çªï¼Œæ‚¨çš„æ˜ å°„å°†ä¼šè¦†ç›–Vimçš„è®¾ç½®ã€‚å› ä¸ºä»å‡ ä¹ä»æ¥ä¸ç”¨VimåŸç”Ÿçš„é¡µé¢æ»šåŠ¨åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºå¯ä»¥å®‰å…¨åœ°è¦†ç›–å®ƒã€‚</p><p>å¦å¤–ï¼Œåœ¨ <code>&lt;Leader&gt;tn</code> ä¸­çš„ â€œleaderâ€ é”®åˆ°åº•æ˜¯ä»€ä¹ˆ?</p><p>Vimæœ‰ä¸€ä¸ªleaderé”®ç”¨æ¥è¾…åŠ©é”®ç›˜æ˜ å°„ã€‚æ¯”å¦‚ï¼Œæˆ‘å°† <code>&lt;leader&gt;tn</code> æ˜ å°„ä¸ºè¿è¡Œ <code>ToggleNumber()</code> å‡½æ•°ã€‚å¦‚æœæ²¡æœ‰leaderé”®ï¼Œæˆ‘å¯èƒ½ä¼šç”¨ <code>tn</code>ï¼Œä½†Vimä¸­çš„ <code>t</code> å·²ç»ç”¨åšå…¶ä»–åŠŸèƒ½ï¼ˆâ€tillâ€æœç´¢å¯¼èˆªå‘½ä»¤ï¼‰äº†ã€‚æœ‰äº†leaderé”®ï¼Œæˆ‘ç°åœ¨å…ˆæŒ‰å®šä¹‰å¥½çš„leaderé”®ä½œä¸ºå¼€å¤´ï¼Œç„¶åæŒ‰ <code>tn</code>ï¼Œè€Œä¸ç”¨å¹²æ‰°å·²ç»å­˜åœ¨çš„å‘½ä»¤ã€‚æ‚¨å¯ä»¥è®¾ç½®leaderé”®ä½œä¸ºæ‚¨æ˜ å°„çš„è¿ç»­æŒ‰é”®çš„ç¬¬ä¸€ä¸ªæŒ‰é”®ã€‚é»˜è®¤Vimä½¿ç”¨åæ–œæ ä½œä¸ºleaderé”®ï¼ˆæ‰€ä»¥ <code>&lt;Leader&gt;tn</code> ä¼šå˜æˆ â€œåæ–œæ -t-nâ€ï¼‰ã€‚</p><p>æˆ‘ä¸ªäººå–œæ¬¢ä½¿ç”¨ç©ºæ ¼ <code>&lt;Space&gt;</code> ä½œä¸ºleaderé”®ï¼Œä»£æ›¿é»˜è®¤çš„åæ–œæ ã€‚è¦æƒ³æ”¹å˜æ‚¨çš„leaderé”®ï¼Œå°†ä¸‹é¢çš„æ–‡æœ¬æ·»åŠ åˆ°æ‚¨çš„vimrcä¸­ï¼š</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-keyword">let</span> <span class="hljs-attr">mapleader</span> = <span class="hljs-string">&quot;\&lt;space&gt;&quot;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ <code>nnoremap</code> å‘½ä»¤å¯ä»¥åˆ†è§£ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul><li><code>n</code> è¡¨ç¤ºæ™®é€šæ¨¡å¼ã€‚</li><li><code>nore</code> è¡¨ç¤ºç¦æ­¢é€’å½’ã€‚</li><li><code>map</code> æ˜¯é”®ç›˜æ˜ å°„å‘½ä»¤ã€‚</li></ul><p>å¦‚æœä¸æƒ³ä½¿ç”¨ <code>nnoremap</code>ï¼Œæ‚¨è‡³å°‘ä¹Ÿå¾—ä½¿ç”¨ <code>nmap</code> (<code>nmap &lt;silent&gt; &lt;C-f&gt; :Gfiles&lt;CR&gt;</code>)ã€‚ä½†æ˜¯ï¼Œæœ€å¥½è¿˜æ˜¯ä½¿ç”¨ç¦æ­¢é€’å½’çš„ç‰ˆæœ¬ï¼Œè¿™æ ·æ˜¯ä¸ºäº†é¿å…é”®ç›˜æ˜ å°„æ—¶æ½œåœ¨çš„æ— é™å¾ªç¯é£é™©ã€‚</p><p>å¦‚æœæ‚¨è¿›è¡Œé”®ç›˜æ˜ å°„æ—¶ä¸ä½¿ç”¨ç¦æ­¢é€’å½’ï¼Œä¸‹é¢ä¾‹å­æ¼”ç¤ºäº†ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å‡è®¾æ‚¨æƒ³ç»™ <code>B</code> æ·»åŠ ä¸€ä¸ªé”®ç›˜æ˜ å°„ï¼Œç”¨æ¥åœ¨ä¸€è¡Œçš„æœ«å°¾æ·»åŠ ä¸€ä¸ªåˆ†å·ï¼Œç„¶åè·³å›å‰ä¸€ä¸ªè¯ç»„ï¼ˆå›æƒ³ä¸€ä¸‹ï¼Œ<code>B</code> æ˜¯Vimæ™®é€šæ¨¡å¼çš„ä¸€ä¸ªå¯¼èˆªå‘½ä»¤ï¼Œç”¨æ¥è·³å›å‰ä¸€ä¸ªè¯ç»„)ã€‚ </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">nmap <span class="hljs-selector-tag">B</span> <span class="hljs-selector-tag">A</span>;&lt;esc&gt;<span class="hljs-selector-tag">B</span><br></code></pre></td></tr></table></figure><p>å½“æ‚¨æŒ‰ä¸‹ <code>B</code> â€¦å“¦è±ï¼ŒVimå¼€å§‹å¤±æ§äº†ï¼Œå¼€å§‹æ— æ­¢å°½çš„æ·»åŠ <code>;</code>ï¼ˆç”¨ <code>Ctrl-c</code>ç»ˆæ­¢ï¼‰ã€‚ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™æ ·çš„æƒ…å†µï¼Ÿå› ä¸ºåœ¨é”®ç›˜æ˜ å°„ <code>A;&lt;esc&gt;B</code>ä¸­ï¼Œè¿™ä¸ª <code>B</code>ä¸å†æ˜¯VimåŸç”Ÿçš„å¯¼èˆªå‘½ä»¤ï¼Œå®ƒå·²ç»è¢«æ˜ å°„åˆ°æ‚¨åˆšæ‰åˆ›å»ºçš„é”®ç›˜æ˜ å°„ä¸­äº†ã€‚è¿™æ˜¯æ‚¨å®é™…ä¸Šæ‰§è¡Œçš„æ“ä½œåºåˆ—ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">A</span>;&lt;esc&gt;<span class="hljs-selector-tag">A</span>;&lt;esc&gt;<span class="hljs-selector-tag">A</span>;&lt;esc&gt;<span class="hljs-selector-tag">A</span>;esc&gt;...<br></code></pre></td></tr></table></figure><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨éœ€è¦æŒ‡å®šé”®ç›˜æ˜ å°„ç¦æ­¢é€’å½’ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">nnoremap <span class="hljs-selector-tag">B</span> <span class="hljs-selector-tag">A</span>;&lt;esc&gt;<span class="hljs-selector-tag">B</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨å†æŒ‰ä¸€ä¸‹ <code>B</code> è¯•è¯•ã€‚è¿™ä¸€æ¬¡å®ƒæˆåŠŸåœ°åœ¨è¡Œå°¾æ·»åŠ äº†ä¸€ä¸ª <code>;</code>ï¼Œç„¶åè·³å›åˆ°å‰ä¸€ä¸ªè¯ç»„ã€‚è¿™ä¸ªæ˜ å°„ä¸­çš„ <code>B</code> å°±è¡¨ç¤ºVimåŸç”Ÿçš„ <code>B</code>äº†ã€‚</p><p>Vimé’ˆå¯¹ä¸åŒçš„æ¨¡å¼æœ‰ä¸åŒçš„é”®ç›˜æ˜ å°„å‘½ä»¤ã€‚å¦‚æœæ‚¨æƒ³åˆ›å»ºä¸€ä¸ªæ’å…¥æ¨¡å¼ä¸‹çš„é”®ç›˜æ˜ å°„ <code>jk</code>ï¼Œç”¨æ¥é€€å‡ºæ’å…¥æ¨¡å¼ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">inoremap</span> jk <span class="hljs-symbol">&lt;esc&gt;</span><br></code></pre></td></tr></table></figure><p>å…¶ä»–æ¨¡å¼çš„é”®ç›˜æ˜ å°„å‘½ä»¤æœ‰ï¼š<code>map</code>ï¼ˆæ™®é€šã€å¯è§†ã€é€‰æ‹©ã€ä»¥åŠæ“ä½œç¬¦ç­‰å¾…æ¨¡å¼ï¼‰ï¼Œ <code>vmap</code>ï¼ˆå¯è§†ã€é€‰æ‹©ï¼‰ï¼Œ <code>smap</code>ï¼ˆé€‰æ‹©ï¼‰ï¼Œ <code>xmap</code>ï¼ˆå¯è§†ï¼‰ï¼Œ <code>omap</code>ï¼ˆæ“ä½œç¬¦ç­‰å¾…æ¨¡å¼ï¼‰ï¼Œ <code>map!</code>ï¼ˆæ’å…¥ã€å‘½ä»¤è¡Œï¼‰ï¼Œ <code>lmap</code>ï¼ˆæ’å…¥ï¼Œå‘½ä»¤è¡Œï¼ŒLang-argæ¨¡å¼ï¼‰ï¼Œ <code>cmap</code>ï¼ˆå‘½ä»¤è¡Œï¼‰ï¼Œ è¿˜æœ‰<code>tmap</code>ï¼ˆç»ˆç«¯ä»»åŠ¡ï¼‰ã€‚åœ¨è¿™é‡Œæˆ‘ä¸ä¼šè¯¦ç»†çš„è®²è§£å®ƒä»¬ï¼Œè¦äº†è§£æ›´å¤šä¿¡æ¯ï¼ŒæŸ¥é˜… <code>:h map.txt</code>ã€‚</p><p>åˆ›å»ºæœ€ç›´è§‚ã€æœ€ä¸€è‡´ã€æœ€æ˜“äºè®°å¿†çš„é”®ç›˜æ˜ å°„ã€‚</p><h2 id="ç»„ç»‡ç®¡ç†Vimrc"><a href="#ç»„ç»‡ç®¡ç†Vimrc" class="headerlink" title="ç»„ç»‡ç®¡ç†Vimrc"></a>ç»„ç»‡ç®¡ç†Vimrc</h2><p>ä¸€æ®µæ—¶å€™é”®ï¼Œæ‚¨çš„vimrcæ–‡ä»¶å°±ä¼šå˜å¤§ä¸”å¤æ‚å¾—éš¾ä»¥é˜…è¯»ã€‚æœ‰ä¸¤ç§æ–¹æ³•è®©æ‚¨çš„vimrcæ–‡ä»¶ä¿æŒæ•´æ´ï¼š</p><ul><li>å°†æ‚¨çš„vimrcæ–‡ä»¶åˆ’åˆ†ä¸ºå‡ ä¸ªæ–‡ä»¶</li><li>æŠ˜å æ‚¨çš„vimrcæ–‡ä»¶</li></ul><h3 id="åˆ’åˆ†æ‚¨çš„vimrc"><a href="#åˆ’åˆ†æ‚¨çš„vimrc" class="headerlink" title="åˆ’åˆ†æ‚¨çš„vimrc"></a>åˆ’åˆ†æ‚¨çš„vimrc</h3><p>æ‚¨å¯ä»¥ä½¿ç”¨Vimçš„ <code>:source</code> å‘½ä»¤å°†æ‚¨çš„vimrcæ–‡ä»¶åˆ’åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå‘½ä»¤å¯ä»¥æ ¹æ®ç»™å®šçš„æ–‡ä»¶å‚æ•°ï¼Œè¯»å–æ–‡ä»¶ä¸­çš„å‘½ä»¤è¡Œå‘½ä»¤ã€‚</p><p>è®©æˆ‘ä»¬åœ¨ <code>~/.vim</code> ä¸‹åˆ›å»ºä¸€ä¸ªå­æ–‡ä»¶å¤¹ï¼Œå–åä¸º <code>/settings</code>ï¼ˆ<code>~/.vim/settings</code>ï¼‰ã€‚åå­—å¯ä»¥å–ä¸ºä»»æ„æ‚¨å–œæ¬¢çš„åå­—ã€‚</p><p>ç„¶åä½ åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹åˆ›å»º4ä¸ªæ–‡ä»¶ï¼š</p><ul><li>ç¬¬ä¸‰æ–¹æ’ä»¶ (<code>~/.vim/settings/plugins.vim</code>).</li><li>é€šç”¨è®¾ç½® (<code>~/.vim/settings/configs.vim</code>).</li><li>è‡ªå®šä¹‰å‡½æ•° (<code>~/.vim/settings/functions.vim</code>).</li><li>é”®ç›˜æ˜ å°„ (<code>~/.vim/settings/mappings.vim</code>) .</li></ul><p>åœ¨ <code>~/.vimrc</code> é‡Œé¢æ·»åŠ :</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">source <span class="hljs-variable">$HOME</span><span class="hljs-regexp">/.vim/</span>settings/plugins.vim<br>source <span class="hljs-variable">$HOME</span><span class="hljs-regexp">/.vim/</span>settings/configs.vim<br>source <span class="hljs-variable">$HOME</span><span class="hljs-regexp">/.vim/</span>settings/functions.vim<br>source <span class="hljs-variable">$HOME</span><span class="hljs-regexp">/.vim/</span>settings/mappings.vim<br></code></pre></td></tr></table></figure><p>åœ¨ <code>~/.vim/settings/plugins.vim</code> é‡Œé¢:</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs leaf">call plug<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">begin</span><span class="hljs-params">(&#x27;~/.<span class="hljs-variable">vim</span>/<span class="hljs-variable">plugged</span>&#x27;)</span></span><br>  Plug &#x27;mattn/emmet-vim&#x27;<br>  Plug &#x27;preservim/nerdtree&#x27;<br>call plug<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">end</span><span class="hljs-params">()</span></span><br></code></pre></td></tr></table></figure><p>åœ¨ <code>~/.vim/settings/configs.vim</code> é‡Œé¢:</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">set</span> nocompatible<br><span class="hljs-built_in">set</span> relativenumber<br><span class="hljs-built_in">set</span> number<br></code></pre></td></tr></table></figure><p>åœ¨ <code>~/.vim/settings/functions.vim</code> é‡Œé¢:</p><figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs isbl"><span class="hljs-variable">function</span><span class="hljs-variable">!</span> <span class="hljs-function"><span class="hljs-title">ToggleNumber</span>()</span><br>  <span class="hljs-function"><span class="hljs-title">if</span>(&amp;<span class="hljs-variable">relativenumber</span> == <span class="hljs-number">1</span>)</span><br>    <span class="hljs-variable">set</span> <span class="hljs-variable">norelativenumber</span><br>  <span class="hljs-variable"><span class="hljs-keyword">else</span></span><br>    <span class="hljs-variable">set</span> <span class="hljs-variable">relativenumber</span><br>  <span class="hljs-variable"><span class="hljs-keyword">endif</span></span><br><span class="hljs-variable">endfunc</span><br></code></pre></td></tr></table></figure><p>åœ¨ <code>~/.vim/settings/mappings.vim</code> é‡Œé¢:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">inoremap</span> jk <span class="hljs-symbol">&lt;esc&gt;</span><br><span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;silent&gt;</span> <span class="hljs-symbol">&lt;C-f&gt;</span> :GFiles<span class="hljs-symbol">&lt;CR&gt;</span><br><span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;Leader&gt;</span><span class="hljs-keyword">tn</span> :<span class="hljs-keyword">call</span> ToggleNumber()<span class="hljs-symbol">&lt;CR&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™æ ·æ‚¨çš„vimrcæ–‡ä»¶ä¾ç„¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œä½†ç°åœ¨å®ƒåªæœ‰4è¡Œäº†ã€‚</p><p>ä½¿ç”¨è¿™æ ·çš„è®¾ç½®ï¼Œæ‚¨å¯ä»¥è½»æ˜“çŸ¥é“åˆ°å“ªå»ä¿®æ”¹é…ç½®ã€‚å¦‚æœæ‚¨è¦æ·»åŠ ä¸€äº›é”®ç›˜æ˜ å°„ï¼Œå°±å°†å®ƒä»¬æ·»åŠ åœ¨ <code>/mappings.vim</code> æ–‡ä»¶ä¸­ã€‚ä»¥åï¼Œå½“æ‚¨çš„vimrcå˜å¤§æ—¶ï¼Œæ‚¨æ€»æ˜¯å¯ä»¥æ–°å»ºå‡ ä¸ªå­æ–‡ä»¶æ¥ç¼©å°å®ƒçš„å¤§å°ã€‚æ¯”å¦‚ï¼Œå¦‚æœæ‚¨æƒ³ä¸ºä¸»é¢˜é…è‰²åˆ›å»ºç›¸å…³è®¾ç½®ï¼Œæ‚¨å¯ä»¥æ·»åŠ  <code>~/.vim/settings/themes.vim</code>ã€‚</p><h3 id="ä¿æŒå•ç‹¬çš„ä¸€ä¸ªVimrcæ–‡ä»¶"><a href="#ä¿æŒå•ç‹¬çš„ä¸€ä¸ªVimrcæ–‡ä»¶" class="headerlink" title="ä¿æŒå•ç‹¬çš„ä¸€ä¸ªVimrcæ–‡ä»¶"></a>ä¿æŒå•ç‹¬çš„ä¸€ä¸ªVimrcæ–‡ä»¶</h3><p>å¦‚æœæ‚¨å€¾å‘äºä¿æŒä¸€ä¸ªå•ç‹¬çš„vimrcæ–‡ä»¶ï¼Œä»¥ä½¿å®ƒæ›´åŠ ä¾¿äºæºå¸¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ ‡å¿—æŠ˜å è®©å®ƒä¿æŒæœ‰åºã€‚åœ¨vimrcæ–‡ä»¶çš„é¡¶éƒ¨æ·»åŠ ä¸€ä¸‹å†…å®¹ï¼š</p><figure class="highlight handlebars"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs handlebars"><span class="language-xml">&quot; setup folds </span><span class="hljs-template-variable">&#123;&#123;&#123;</span><br><span class="hljs-template-variable"><span class="hljs-name">augroup</span> filetype_vim</span><br><span class="hljs-template-variable">  autocmd!</span><br><span class="hljs-template-variable">  autocmd FileType vim setlocal <span class="hljs-attr">foldmethod</span>=marker</span><br><span class="hljs-template-variable">augroup END</span><br><span class="hljs-template-variable"><span class="hljs-string">&quot; &#125;&#125;&#125;</span></span><br></code></pre></td></tr></table></figure><p>Vimèƒ½å¤Ÿæ£€æµ‹å½“å‰bufferæ‰€å±çš„æ–‡ä»¶ç±»å‹ (<code>:set filetype?</code>). å¦‚æœå‘ç°å±äº <code>vim</code> ç±»å‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ ‡å¿—æŠ˜å ã€‚å›æƒ³ä¸€ä¸ªæ ‡å¿—æŠ˜å çš„ç”¨æ³•ï¼Œå®ƒä½¿ç”¨ <code>&#123;&#123;&#123;` å’Œ `&#125;&#125;&#125;</code> æ¥æŒ‡æ˜æŠ˜å çš„å¼€å§‹å’Œç»“æŸã€‚</p><p>æ·»åŠ  <code>&#123;&#123;&#123;` å’Œ `&#125;&#125;&#125;</code> æ ‡å¿—å°†æ‚¨çš„vimrcæ–‡ä»¶å…¶ä»–éƒ¨åˆ†æŠ˜å èµ·æ¥ã€‚(åˆ«å¿˜äº†ä½¿ç”¨ <code>&quot;</code> å¯¹æ ‡å¿—è¿›è¡Œæ³¨é‡Š):</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-comment">&quot; setup folds &#123;&#123;&#123;</span><br><span class="hljs-keyword">augroup</span> filetype_vim<br>  autocmd!<br>  <span class="hljs-keyword">autocmd</span> FileType <span class="hljs-keyword">vim</span> <span class="hljs-keyword">setlocal</span> foldmethod=marker<br><span class="hljs-keyword">augroup</span> END<br><span class="hljs-comment">&quot; &#125;&#125;&#125;</span><br><br><span class="hljs-comment">&quot; plugins &#123;&#123;&#123;</span><br><span class="hljs-keyword">call</span> plug#begin(<span class="hljs-string">&#x27;~/.vim/plugged&#x27;</span>)<br>  Plug <span class="hljs-string">&#x27;mattn/emmet-vim&#x27;</span><br>  Plug <span class="hljs-string">&#x27;preservim/nerdtree&#x27;</span><br><span class="hljs-keyword">call</span> plug#end()<br><span class="hljs-comment">&quot; &#125;&#125;&#125;</span><br><br><span class="hljs-comment">&quot; configs &#123;&#123;&#123;</span><br><span class="hljs-keyword">set</span> nocompatible<br><span class="hljs-keyword">set</span> relativenumber<br><span class="hljs-keyword">set</span> <span class="hljs-keyword">number</span><br><span class="hljs-comment">&quot; &#125;&#125;&#125;</span><br><br><span class="hljs-comment">&quot; functions &#123;&#123;&#123;</span><br><span class="hljs-keyword">function!</span> <span class="hljs-title">ToggleNumber</span><span class="hljs-params">()</span><br>  <span class="hljs-keyword">if</span>(&amp;relativenumber == <span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">set</span> norelativenumber<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-keyword">set</span> relativenumber<br>  <span class="hljs-keyword">endif</span><br>endfunc<br><span class="hljs-comment">&quot; &#125;&#125;&#125;</span><br><br><span class="hljs-comment">&quot; mappings &#123;&#123;&#123;</span><br><span class="hljs-keyword">inoremap</span> jk <span class="hljs-symbol">&lt;esc&gt;</span><br><span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;silent&gt;</span> <span class="hljs-symbol">&lt;C-f&gt;</span> :GFiles<span class="hljs-symbol">&lt;CR&gt;</span><br><span class="hljs-keyword">nnoremap</span> <span class="hljs-symbol">&lt;Leader&gt;</span><span class="hljs-keyword">tn</span> :<span class="hljs-keyword">call</span> ToggleNumber()<span class="hljs-symbol">&lt;CR&gt;</span><br><span class="hljs-comment">&quot; &#125;&#125;&#125;</span><br></code></pre></td></tr></table></figure><p>æ‚¨çš„vimrcæ–‡ä»¶å°†ä¼šçœ‹èµ·æ¥ç±»ä¼¼ä¸‹é¢ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ada">+<span class="hljs-comment">-- 6 lines: setup folds -----</span><br><br>+<span class="hljs-comment">-- 6 lines: plugins ---------</span><br><br>+<span class="hljs-comment">-- 5 lines: configs ---------</span><br><br>+<span class="hljs-comment">-- 9 lines: functions -------</span><br><br>+<span class="hljs-comment">-- 5 lines: mappings --------</span><br></code></pre></td></tr></table></figure><h2 id="å¯åŠ¨Vimæ—¶åŠ è½½-x2F-ä¸åŠ è½½Vimrcå’Œæ’ä»¶"><a href="#å¯åŠ¨Vimæ—¶åŠ è½½-x2F-ä¸åŠ è½½Vimrcå’Œæ’ä»¶" class="headerlink" title="å¯åŠ¨Vimæ—¶åŠ è½½&#x2F;ä¸åŠ è½½Vimrcå’Œæ’ä»¶"></a>å¯åŠ¨Vimæ—¶åŠ è½½&#x2F;ä¸åŠ è½½Vimrcå’Œæ’ä»¶</h2><p>å¦‚æœæ‚¨è¦å¯åŠ¨Vimæ—¶ï¼Œæ—¢ä¸åŠ è½½Vimrcï¼Œä¹Ÿä¸åŠ è½½æ’ä»¶ï¼Œè¿è¡Œï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">vim -u <span class="hljs-built_in">NONE</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨è¦å¯åŠ¨Vimæ—¶ï¼Œä¸åŠ è½½Vimrcï¼Œä½†åŠ è½½æ’ä»¶ï¼Œè¿è¡Œï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">vim -u NORC</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨è¦å¯åŠ¨Vimæ—¶ï¼ŒåŠ è½½Vimrcï¼Œä½†ä¸åŠ è½½æ’ä»¶ï¼Œè¿è¡Œ</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">vim <span class="hljs-comment">--noplugin</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨è¦Vimå¯åŠ¨åŠ è½½ä¸€ä¸ª <em>å…¶ä»–çš„</em> vimrc, æ¯”å¦‚ <code>~/.vimrc-backup</code>, è¿è¡Œ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim -u ~/.vimrc-backup<br></code></pre></td></tr></table></figure><h2 id="èªæ˜åœ°é…ç½®Vimrc"><a href="#èªæ˜åœ°é…ç½®Vimrc" class="headerlink" title="èªæ˜åœ°é…ç½®Vimrc"></a>èªæ˜åœ°é…ç½®Vimrc</h2><p>Vimrcæ˜¯å®šåˆ¶Vimæ—¶çš„ä¸€ä¸ªé‡è¦ç»„ä»¶ï¼Œå­¦ä¹ æ„å»ºæ‚¨çš„Vimrcæœ€å¥½æ˜¯é¦–å…ˆé˜…è¯»ä»–äººçš„vimrcæ–‡ä»¶ï¼Œç„¶åé€æ¸åœ°å»ºç«‹è‡ªå·±çš„ã€‚æœ€å¥½çš„vimrcå¹¶ä¸æ˜¯è°è°è°ä½¿ç”¨çš„ï¼Œè€Œæ˜¯æœ€é€‚åˆæ‚¨çš„å·¥ä½œéœ€è¦å’Œç¼–è¾‘é£æ ¼çš„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-Vimè½¯ä»¶åŒ…</title>
    <link href="/2022/04/05/Vim/ch23_vim_packages/"/>
    <url>/2022/04/05/Vim/ch23_vim_packages/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬22ç« -Vimè½¯ä»¶åŒ…"><a href="#ç¬¬22ç« -Vimè½¯ä»¶åŒ…" class="headerlink" title="ç¬¬22ç«  Vimè½¯ä»¶åŒ…"></a>ç¬¬22ç«  Vimè½¯ä»¶åŒ…</h1><p>åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘æåˆ°ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ç®¡ç†å™¨æ¥å®‰è£…æ’ä»¶ã€‚ä»Vim 8å¼€å§‹ï¼ŒVimè‡ªå¸¦äº†ä¸€ä¸ªå†…ç½®çš„æ’ä»¶ç®¡ç†å™¨ï¼Œåå« <em>è½¯ä»¶åŒ…ï¼ˆpackagesï¼‰</em>ã€‚åœ¨æœ¬ç« ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨Vimè½¯ä»¶åŒ…æ¥å®‰è£…æ’ä»¶ã€‚</p><p>è¦çœ‹æ‚¨çš„Vimç¼–è¯‘ç‰ˆæœ¬æ˜¯å¦èƒ½å¤Ÿä½¿ç”¨è½¯ä»¶åŒ…ï¼Œè¿è¡Œ <code>:version</code>ã€‚ç„¶åæŸ¥çœ‹æ˜¯å¦æœ‰ <code>+packages</code>å±æ€§ã€‚å¦å¤–ï¼Œæ‚¨ä¹Ÿå¯ä»¥è¿è¡Œ <code>:echo has(&#39;packages&#39;)</code>ï¼ˆå¦‚æœè¿”å›1ï¼Œè¡¨ç¤ºå¯ä»¥ä½¿ç”¨è½¯ä»¶åŒ…ï¼‰ã€‚</p><h2 id="åŒ…ç›®å½•"><a href="#åŒ…ç›®å½•" class="headerlink" title="åŒ…ç›®å½•"></a>åŒ…ç›®å½•</h2><p>åœ¨æ ¹ç›®å½•ä¸‹æŸ¥çœ‹æ‚¨æ˜¯å¦æœ‰ä¸€ä¸ª <code>~/.vim</code> æ–‡ä»¶å¤¹ã€‚å¦‚æœæ²¡æœ‰å°±æ–°å»ºä¸€ä¸ªã€‚åœ¨æ–‡ä»¶å¤¹é‡Œé¢ï¼Œåˆ›å»ºä¸€ä¸ªå­æ–‡ä»¶å¤¹å–å <code>pack</code>(<code>~/.vim/pack/</code>)ã€‚Vimä¼šåœ¨è¿™ä¸ªå­æ–‡ä»¶å¤¹å†…è‡ªåŠ¨æœç´¢æ’ä»¶ã€‚</p><h2 id="ä¸¤ç§åŠ è½½æ–¹å¼"><a href="#ä¸¤ç§åŠ è½½æ–¹å¼" class="headerlink" title="ä¸¤ç§åŠ è½½æ–¹å¼"></a>ä¸¤ç§åŠ è½½æ–¹å¼</h2><p>Vimè½¯ä»¶åŒ…æœ‰ä¸¤ç§åŠ è½½æœºåˆ¶ï¼šè‡ªåŠ¨åŠ è½½å’Œæ‰‹åŠ¨åŠ è½½ã€‚</p><h3 id="è‡ªåŠ¨åŠ è½½"><a href="#è‡ªåŠ¨åŠ è½½" class="headerlink" title="è‡ªåŠ¨åŠ è½½"></a>è‡ªåŠ¨åŠ è½½</h3><p>è¦æƒ³è®©Vimå¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½æ’ä»¶ï¼Œä½ éœ€è¦å°†å®ƒä»¬æ”¾ç½®åœ¨ <code>start/</code>å­ç›®å½•ä¸­ã€‚è·¯å¾„çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/*/</span>start/<br></code></pre></td></tr></table></figure><p>ç°åœ¨æ‚¨å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆåœ¨<code>pack/</code> å’Œ <code>start/</code> ä¹‹é—´æœ‰ä¸€ä¸ª <code>*</code> ï¼Ÿè¿™ä¸ªæ˜Ÿå·å¯ä»¥æ˜¯ä»»æ„åå­—ã€‚è®©æˆ‘ä»¬å°†å®ƒå–ä¸º<code>packdemo/</code>ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/packdemo/</span>start/<br></code></pre></td></tr></table></figure><p>è®°ä½ï¼Œå¦‚æœæ‚¨å¿½ç•¥è¿™ä¸€ç‚¹ï¼Œç”¨ä¸‹é¢çš„è·¯å¾„ä»£æ›¿çš„è¯ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/start/</span><br></code></pre></td></tr></table></figure><p>è½¯ä»¶åŒ…ç³»ç»Ÿæ˜¯ä¸ä¼šæ­£å¸¸å·¥ä½œçš„ã€‚Â å¿…é¡»åœ¨<code>pack/</code> å’Œ <code>start/</code>ä¹‹é—´æ·»åŠ ä¸€ä¸ªåå­—æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚</p><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè®©æˆ‘ä»¬å°è¯•å®‰è£… [NERDTree](<a href="https://github.com/preservim/nThe">https://github.com/preservim/nThe</a> package system wonâ€™t work. It is imperative to put a name between <code>pack/</code> and <code>start/</code>.erdtree) æ’ä»¶ã€‚ç”¨ä»»æ„æ–¹æ³•è¿›å…¥ <code>start/</code> ç›®å½•ï¼ˆ<code>cd ~/.vim/pack/packdemo/start/</code>ï¼‰ï¼Œç„¶åå°†NERDTreeçš„ä»“åº“å…‹éš†ä¸‹æ¥ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/preservim/</span>nerdtree.git<br></code></pre></td></tr></table></figure><p>å®Œæˆäº†ï¼æ‚¨å·²ç»å®Œæˆäº†å®‰è£…ã€‚ä¸‹ä¸€æ¬¡æ‚¨å¯åŠ¨Vimï¼Œæ‚¨å¯ä»¥ç«‹å³æ‰§è¡Œ NERDTree å‘½ä»¤ <code>:NERDTreeToggle</code>ã€‚</p><p>åœ¨ <code>~/.vim/pack/*/start/</code> ç›®å½•ä¸­ï¼Œæ‚¨æƒ³å…‹éš†å¤šå°‘æ’ä»¶ä»“åº“å°±å…‹éš†å¤šå°‘ã€‚Vimå°†ä¼šè‡ªåŠ¨åŠ è½½æ¯ä¸€ä¸ªæ’ä»¶ã€‚å¦‚æœæ‚¨åˆ é™¤äº†å…‹éš†çš„ä»“åº“ï¼ˆ<code>rm -rf nerdtree</code>ï¼‰ï¼Œé‚£ä¹ˆæ’ä»¶å°±å¤±æ•ˆäº†ã€‚</p><h3 id="æ‰‹åŠ¨åŠ è½½"><a href="#æ‰‹åŠ¨åŠ è½½" class="headerlink" title="æ‰‹åŠ¨åŠ è½½"></a>æ‰‹åŠ¨åŠ è½½</h3><p>è¦æƒ³åœ¨Vimå¯åŠ¨æ—¶æ‰‹åŠ¨åŠ è½½æ’ä»¶ï¼Œæ‚¨å¾—å°†ç›¸å…³æ’ä»¶æ”¾ç½®åœ¨ <code>opt/</code> ç›®å½•ä¸­ï¼Œç±»ä¼¼äºè‡ªåŠ¨åŠ è½½ï¼Œè¿™ä¸ªè·¯å¾„çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/*/</span>opt/<br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬ç»§ç»­ä½¿ç”¨å‰é¢çš„ <code>packdemo/</code> è¿™ä¸ªåå­—ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/packdemo/</span>opt/<br></code></pre></td></tr></table></figure><p>è¿™ä¸€æ¬¡ï¼Œè®©æˆ‘ä»¬å®‰è£…<a href="https://github.com/vim/killersheep">killersheep</a> æ¸¸æˆï¼ˆéœ€è¦Vim8.2ä»¥ä¸Šç‰ˆæœ¬ï¼‰ã€‚è¿›å…¥<code>opt/</code> ç›®å½•(<code>cd ~/.vim/pack/packdemo/opt/</code>) ç„¶åå…‹éš†ä»“åº“ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/vim/</span>killersheep.git<br></code></pre></td></tr></table></figure><p>å¯åŠ¨Vimã€‚æ‰§è¡Œæ¸¸æˆçš„å‘½ä»¤æ˜¯ <code>:KillKillKill</code>ã€‚è¯•ç€è¿è¡Œä¸€ä¸‹ã€‚Vimå°†ä¼šæç¤ºè¿™ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç¼–è¾‘å‘½ä»¤ã€‚æ‚¨éœ€è¦é¦–å…ˆ <em>æ‰‹åŠ¨</em> åŠ è½½æ’ä»¶ï¼Œè¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:packadd</span> killersheep<br></code></pre></td></tr></table></figure><p>ç°åœ¨å†è¿è¡Œä¸€ä¸‹ <code>:KillKillKill</code> ã€‚å‘½ä»¤å·²ç»å¯ä»¥ä½¿ç”¨äº†ã€‚</p><p>æ‚¨å¯èƒ½å¥½å¥‡ï¼Œâ€œä¸ºä»€ä¹ˆæˆ‘éœ€è¦æ‰‹åŠ¨åŠ è½½æ’ä»¶ï¼Ÿå¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½å²‚ä¸æ˜¯æ›´å¥½ï¼Ÿâ€</p><p>å¾ˆå¥½çš„é—®é¢˜ã€‚æœ‰æ—¶å€™æœ‰äº›æ’ä»¶æˆ‘ä»¬å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ—¶å€™éƒ½åœ¨ç”¨ï¼Œæ¯”å¦‚ KillerSheep æ¸¸æˆã€‚æ‚¨å¯èƒ½ä¸ä¼šæƒ³è¦åŠ è½½10ä¸ªä¸åŒçš„æ¸¸æˆå¯¼è‡´Vimå¯åŠ¨å˜æ…¢ã€‚ä½†æ˜¯å¶å°”å½“æ‚¨è§‰å¾—ä¹å‘³çš„æ—¶å€™ï¼Œæ‚¨å¯èƒ½æƒ³è¦ç©å‡ ä¸ªæ¸¸æˆï¼Œä½¿ç”¨æ‰‹åŠ¨åŠ è½½ä¸€äº›éå¿…é¡»çš„æ’ä»¶ã€‚</p><p>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æœ‰æ¡ä»¶çš„åŠ è½½æ’ä»¶ã€‚å¯èƒ½æ‚¨åŒæ—¶ä½¿ç”¨äº†Neovimå’ŒVimï¼Œæœ‰ä¸€äº›æ’ä»¶æ˜¯ä¸ºNeoVimä¼˜åŒ–è¿‡çš„ã€‚æ‚¨å¯ä»¥æ·»åŠ ç±»ä¼¼ä¸‹åˆ—çš„å†…å®¹åˆ°æ‚¨çš„vimrcä¸­ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">if</span> <span class="hljs-built_in">has</span>(<span class="hljs-string">&#x27;nvim&#x27;</span>)<br>  packadd! neovim-<span class="hljs-keyword">only</span>-plugin<br><span class="hljs-keyword">else</span><br>  packadd! generic-<span class="hljs-keyword">vim</span>-plugin<br><span class="hljs-keyword">endif</span><br></code></pre></td></tr></table></figure><h2 id="ç»„ç»‡ç®¡ç†è½¯ä»¶åŒ…"><a href="#ç»„ç»‡ç®¡ç†è½¯ä»¶åŒ…" class="headerlink" title="ç»„ç»‡ç®¡ç†è½¯ä»¶åŒ…"></a>ç»„ç»‡ç®¡ç†è½¯ä»¶åŒ…</h2><p>å›æƒ³ä¸€ä¸‹ï¼Œè¦ä½¿ç”¨Vimçš„è½¯ä»¶åŒ…ç³»ç»Ÿå¿…é¡»æœ‰ä»¥ä¸‹éœ€æ±‚ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/*/</span>start/<br></code></pre></td></tr></table></figure><p>æˆ–è€…:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/*/</span>opt/<br></code></pre></td></tr></table></figure><p>å®é™…ä¸Šï¼Œ<code>*</code>æ˜Ÿå·å¯ä»¥ä½¿ <em>ä»»æ„</em> åå­—ï¼Œè¿™ä¸ªåå­—å°±å¯ä»¥ç”¨æ¥ç®¡ç†æ‚¨çš„æ’ä»¶ã€‚å‡è®¾æ‚¨æƒ³å°†æ‚¨çš„æ’ä»¶æ ¹æ®ç±»å‹ï¼ˆé¢œè‰²ã€è¯­æ³•ã€æ¸¸æˆï¼‰åˆ†ç»„ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/colors/</span><br>~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/syntax/</span><br>~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/games/</span><br></code></pre></td></tr></table></figure><p>æ‚¨ä»ç„¶å¯ä»¥ä½¿ç”¨å„ä¸ªç›®å½•ä¸‹çš„ <code>start/</code> å’Œ <code>opt/</code> ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/colors/</span>start/<br>~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/colors/</span>opt/<br><br>~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/syntax/</span>start/<br>~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/syntax/</span>opt/<br><br>~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/games/</span>start/<br>~<span class="hljs-regexp">/.vim/</span>pack<span class="hljs-regexp">/games/</span>opt/<br></code></pre></td></tr></table></figure><h2 id="èªæ˜åœ°æ·»åŠ æ’ä»¶"><a href="#èªæ˜åœ°æ·»åŠ æ’ä»¶" class="headerlink" title="èªæ˜åœ°æ·»åŠ æ’ä»¶"></a>èªæ˜åœ°æ·»åŠ æ’ä»¶</h2><p>æ‚¨å¯èƒ½å¥½å¥‡ï¼ŒVimè½¯ä»¶åŒ…æ˜¯å¦è®©ä¸€äº›æµè¡Œçš„æ’ä»¶ç®¡ç†å™¨ï¼Œæ¯”å¦‚ vim-pathogen, vundle.vim, dein.vim, aè¿˜æœ‰vim-plugé¢ä¸´æ·˜æ±°ï¼Ÿ</p><p>ç­”æ¡ˆæ°¸è¿œæ˜¯ï¼šâ€œçœ‹æƒ…å†µè€Œå®šã€‚â€</p><p>æˆ‘ä»ç„¶ä½¿ç”¨vim-plugï¼Œå› ä¸ºä½¿ç”¨å®ƒæ·»åŠ ã€åˆ é™¤ã€æ›´æ–°æ’ä»¶å¾ˆå®¹æ˜“ã€‚å¦‚æœæ‚¨ä½¿ç”¨äº†å¾ˆå¤šæ’ä»¶ï¼Œæ’ä»¶ç®¡ç†å™¨çš„å¥½å¤„æ›´åŠ æ˜æ˜¾ï¼Œå› ä¸ºä½¿ç”¨å®ƒå¯ä»¥å¯¹å¾ˆå¤šæ’ä»¶è¿›è¡ŒåŒæ—¶æ›´æ–°ã€‚æœ‰äº›æ’ä»¶ç®¡ç†å™¨åŒæ—¶ä¹Ÿæä¾›äº†ä¸€äº›å¼‚æ­¥åŠŸèƒ½ã€‚</p><p>å¦‚æœæ‚¨æ˜¯æç®€ä¸»ä¹‰è€…ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹Vimè½¯ä»¶åŒ…ã€‚å¦‚æœæ‚¨æ˜¯ä¸€åæ’ä»¶é‡åº¦ä½¿ç”¨è€…ï¼Œæ‚¨å¯èƒ½éœ€è¦ä¸€ä¸ªæ’ä»¶ç®¡ç†å™¨ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-Vim Rumtime</title>
    <link href="/2022/04/05/Vim/ch24_vim_runtime/"/>
    <url>/2022/04/05/Vim/ch24_vim_runtime/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬24ç« -Vim-Rumtime"><a href="#ç¬¬24ç« -Vim-Rumtime" class="headerlink" title="ç¬¬24ç«  Vim Rumtime"></a>ç¬¬24ç«  Vim Rumtime</h1><p>åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘æåˆ°Vimä¼šè‡ªåŠ¨æŸ¥æ‰¾ä¸€äº›ç‰¹æ®Šçš„è·¯å¾„ï¼Œæ¯”å¦‚åœ¨<code>~/.vim/</code> ä¸­çš„ <code>pack/</code>(ç¬¬23ç« ) <code>compiler/</code>ï¼ˆç¬¬19ç« ï¼‰ã€‚è¿™äº›éƒ½æ˜¯Vim runtimeè·¯å¾„çš„ä¾‹å­ã€‚</p><p>é™¤äº†ä¸Šé¢æåˆ°çš„ä¸¤ä¸ªï¼ŒVimè¿˜æœ‰æ›´å¤šruntimeè·¯å¾„ã€‚åœ¨æœ¬ç« ï¼Œæ‚¨å°†å­¦ä¹ å…³äºVim runtimeè·¯å¾„çš„é«˜å±‚æ¬¡æ¦‚è¿°ã€‚æœ¬ç« çš„ç›®æ ‡æ˜¯å‘æ‚¨å±•ç¤ºå®ƒä»¬ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨ã€‚çŸ¥é“è¿™äº›çŸ¥è¯†èƒ½å¤Ÿå¸®æ‚¨æ›´è¿›ä¸€æ­¥ç†è§£å’Œå®šåˆ¶Vimã€‚</p><h2 id="Runtimeè·¯å¾„"><a href="#Runtimeè·¯å¾„" class="headerlink" title="Runtimeè·¯å¾„"></a>Runtimeè·¯å¾„</h2><p>åœ¨ä¸€å°Unixæœºå™¨ä¸­ï¼Œå…¶ä¸­ä¸€ä¸ªvim runtimeè·¯å¾„å°±æ˜¯ <code>$HOME/.vim/</code> ï¼ˆå¦‚æœæ‚¨ç”¨çš„æ˜¯å…¶ä»–æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚Windowsï¼Œæ‚¨çš„è·¯å¾„å¯èƒ½æœ‰æ‰€ä¸åŒï¼‰ã€‚è¦æŸ¥çœ‹ä¸åŒçš„æ“ä½œç³»ç»Ÿæœ‰ä»€ä¹ˆæ ·çš„runtimeè·¯å¾„ï¼ŒæŸ¥é˜… <code>:h runtimepath</code>ã€‚åœ¨æœ¬ç« ï¼Œæˆ‘å°†ä½¿ç”¨ <code>~/.vim/</code> ä½œä¸ºé»˜è®¤çš„runtimeè·¯å¾„ã€‚</p><h2 id="Pluginè„šæœ¬"><a href="#Pluginè„šæœ¬" class="headerlink" title="Pluginè„šæœ¬"></a>Pluginè„šæœ¬</h2><p>Vimæœ‰ä¸€ä¸ªruntimeè·¯å¾„ pluginï¼Œæ¯æ¬¡Vimå¯åŠ¨æ—¶éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªè·¯å¾„ä¸­çš„æ‰€æœ‰è„šæœ¬ã€‚ä¸è¦æŠŠè¿™ä¸ªåå­— â€œpluginâ€ å’ŒVimçš„å¤–éƒ¨æ’ä»¶ï¼ˆexternal pluginsï¼Œæ¯”å¦‚NERDTree, fzf.vim, ç­‰)ææ··äº†ã€‚</p><p>è¿›å…¥ <code>~/.vim/</code> ç›®å½•ï¼Œç„¶ååˆ›å»º <code>plugin/</code> å­ç›®å½•ã€‚ åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼š <code>donut.vim</code> å’Œ <code>chocolate.vim</code>ã€‚</p><p>åœ¨ <code>~/.vim/plugin/donut.vim</code>é‡Œé¢:</p><figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;donut!&quot;</span><br></code></pre></td></tr></table></figure><p>åœ¨ <code>~/.vim/plugin/chocolate.vim</code>é‡Œé¢:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;chocolate!&quot;</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨å…³é—­Vimã€‚ä¸‹æ¬¡æ‚¨å¯åŠ¨Vimï¼Œæ‚¨å°†ä¼šçœ‹åˆ° <code>&quot;donut!&quot;</code> å’Œ <code>:chocolate!</code> çš„æ˜¾ç¤ºã€‚æ­¤ plugin runtimeè·¯å¾„å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€äº›åˆå§‹åŒ–è„šæœ¬ã€‚</p><h2 id="æ–‡ä»¶ç±»å‹æ£€æµ‹"><a href="#æ–‡ä»¶ç±»å‹æ£€æµ‹" class="headerlink" title="æ–‡ä»¶ç±»å‹æ£€æµ‹"></a>æ–‡ä»¶ç±»å‹æ£€æµ‹</h2><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œä¸ºä¿è¯æ£€æµ‹èƒ½æ­£å¸¸è¿è¡Œï¼Œç¡®ä¿åœ¨æ‚¨çš„vimrcä¸­è‡³å°‘åŒ…å«äº†ä¸‹åˆ—çš„è¡Œï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">filetype</span> plugin <span class="hljs-built_in">indent</span> <span class="hljs-keyword">on</span><br></code></pre></td></tr></table></figure><p>æŸ¥é˜… <code>:h filetype-overview</code> äº†è§£æ›´å¤šä¿¡æ¯ã€‚æœ¬è´¨ä¸Šï¼Œè¿™æ¡ä»£ç å¼€å¯Vimçš„æ–‡ä»¶ç±»å‹æ£€æµ‹ã€‚</p><p>å½“æ‚¨æ‰“å¼€ä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼ŒVimé€šå¸¸çŸ¥é“è¿™ä¸ªæ–‡ä»¶æ˜¯ä»€ä¹ˆç±»å‹ã€‚å¦‚æœæ‚¨æœ‰ä¸€ä¸ªæ–‡ä»¶ <code>hello.rb</code>ï¼Œè¿è¡Œ <code>:set filetype?</code> ä¼šè¿”å›æ­£ç¡®çš„ç›¸åº” <code>filetype=ruby</code>ã€‚</p><p>VimçŸ¥é“å¦‚ä½•æ£€æµ‹ â€œå¸¸è§â€ çš„æ–‡ä»¶ç±»å‹ï¼ˆRuby, Python, Javascript, ç­‰ï¼‰ã€‚ä½†å¦‚æœæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ–‡ä»¶ä¼šæ€æ ·å‘¢ï¼Ÿæ‚¨éœ€è¦å‘Šè¯‰Vimå»æ£€æµ‹å®ƒï¼Œå¹¶ç»™å®ƒæŒ‡æ´¾ä¸€ä¸ªæ­£ç¡®çš„æ–‡ä»¶ç±»å‹ã€‚</p><p>æœ‰ä¸¤ç§æ£€æµ‹æ–¹æ³•ï¼šä½¿ç”¨æ–‡ä»¶åå’Œä½¿ç”¨æ–‡ä»¶å†…å®¹</p><h3 id="æ–‡ä»¶åæ£€æµ‹"><a href="#æ–‡ä»¶åæ£€æµ‹" class="headerlink" title="æ–‡ä»¶åæ£€æµ‹"></a>æ–‡ä»¶åæ£€æµ‹</h3><p>æ–‡ä»¶åæ£€æµ‹ä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶çš„æ–‡ä»¶åæ¥æ£€æµ‹æ–‡ä»¶ç±»å‹ã€‚å½“æ‚¨æ‰“å¼€ <code>hello.rb</code>æ–‡ä»¶æ—¶ï¼ŒVimä¾é æ‰©å±•å <code>.rb</code> çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªRubyæ–‡ä»¶ã€‚</p><p>æœ‰ä¸¤ç§æ–¹æ³•å®ç°æ–‡ä»¶åæ£€æµ‹ï¼šä¸€æ˜¯ä½¿ç”¨ <code>ftdetect</code> runtimeç›®å½•ï¼ŒäºŒæ˜¯ä½¿ç”¨ <code>filetype.vim</code> runtimeæ–‡ä»¶ã€‚æˆ‘ä»¬ä¸¤ä¸ªéƒ½çœ‹ä¸€çœ‹ã€‚</p><h4 id="ftdetect"><a href="#ftdetect" class="headerlink" title="ftdetect/"></a><code>ftdetect/</code></h4><p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¤æ€ªï¼ˆä½†ä¼˜é›…ï¼‰çš„åå­—ï¼Œ<code>hello.chocodonut</code>ã€‚å½“æ‚¨æ‰“å¼€å®ƒåè¿è¡Œ <code>:set filetype?</code> ï¼Œå› ä¸ºå®ƒçš„åç¼€åä¸æ˜¯å¸¸è§çš„æ–‡ä»¶åï¼ŒVimä¸çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆç±»å‹ï¼Œä¼šè¿”å› <code>filetype=</code>ã€‚</p><p>æ‚¨éœ€è¦æŒ‡ç¤ºVimå°†æ‰€æœ‰ä»¥ <code>.chocodonut</code>ç»“å°¾çš„æ–‡ä»¶è®¾ç½®ä¸º â€œchocodonutâ€ç±»å‹çš„æ–‡ä»¶ã€‚åœ¨runtimeè·¯å¾„æ ¹ç›®å½•(<code>~/.vim/</code>)åˆ›å»ºä¸€ä¸ªå­ç›®å½•ï¼Œåä¸º <code>ftdetect/</code> ã€‚åœ¨å­ç›®å½•é‡Œé¢ï¼Œå†åˆ›å»ºä¸€ä¸ªåå« <code>chocodonut.vim</code> çš„æ–‡ä»¶ï¼ˆ<code>~/.vim/ftdetect/chocodonut.vim</code>ï¼‰ï¼Œåœ¨æ–‡ä»¶é‡Œé¢ï¼Œæ·»åŠ ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">autocmd BufNewFile,BufRead *.chocodonut <span class="hljs-built_in">set</span> <span class="hljs-attribute">filetype</span>=chocodonut<br></code></pre></td></tr></table></figure><p>å½“æ‚¨åˆ›å»ºæ–°bufferæˆ–æ‰“å¼€æ–°bufferæ—¶ï¼Œäº‹ä»¶<code>BufNewFile</code> å’Œ <code>BufRead</code> å°±ä¼šè¢«è§¦å‘ã€‚ <code>*.chocodonut</code> æ„æ€æ˜¯åªæœ‰å½“æ–°æ‰“å¼€çš„bufferæ–‡ä»¶ååç¼€æ˜¯ <code>.chocodonut</code> æ—¶äº‹ä»¶æ‰ä¼šè¢«è§¦å‘ã€‚æœ€åï¼Œ<code>set filetype=chocodonut</code> å‘½ä»¤å°†æ–‡ä»¶ç±»å‹è®¾ç½®ä¸ºchocodonutç±»å‹ã€‚</p><p>é‡å¯Vimã€‚æ–°å»ºä¸€ä¸ª <code>hello.chocodonut</code> æ–‡ä»¶ç„¶åè¿è¡Œ <code>:set filetype?</code>ã€‚å®ƒå°†è¿”å› <code>filetype=chocodonut</code>.</p><p>å¥½æäº†ï¼åªè¦æ‚¨æƒ³ï¼Œæ‚¨å¯ä»¥å°†ä»»æ„å¤šçš„æ–‡ä»¶æ”¾ç½®åœ¨ <code>ftdetect/</code> ä¸­ã€‚ä»¥åï¼Œå¦‚æœæ‚¨æƒ³æ‰©å±•æ‚¨çš„ donut æ–‡ä»¶ç±»å‹ï¼Œä½ å¯ä»¥æ·»åŠ  <code>ftdetect/strawberrydonut.vim</code>, <code>ftdetect/plaindonut.vim</code> ç­‰ç­‰ã€‚</p><p>åœ¨Vimä¸­ï¼Œå®é™…ä¸Šæœ‰ä¸¤ç§æ–¹æ³•è®¾ç½®æ–‡ä»¶ç±»å‹ã€‚å…¶ä¸­ç»™ä¸€ä¸ªæ˜¯æ‚¨åˆšåˆšä½¿ç”¨çš„ <code>set filetype=chocodonut</code>ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯è¿è¡Œ <code>setfiletype chocodonut</code>ã€‚å‰ä¸€ä¸ªå‘½ä»¤ <code>set filetype=chocodonut</code> å°† <em>æ€»æ˜¯</em> è®¾ç½®æ–‡ä»¶ç±»å‹ä¸ºchocodonutã€‚ è€Œåè€…<code>setfiletype chocodonut</code>åªæœ‰å½“æ–‡ä»¶ç±»å‹å°šæœªè®¾ç½®æ—¶ï¼Œæ‰ä¼šå°†æ–‡ä»¶ç±»å‹è®¾ç½®ä¸ºchocodonutã€‚</p><h4 id="æ–‡ä»¶ç±»å‹æ–‡ä»¶"><a href="#æ–‡ä»¶ç±»å‹æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶ç±»å‹æ–‡ä»¶"></a>æ–‡ä»¶ç±»å‹æ–‡ä»¶</h4><p>ç¬¬äºŒç§æ–‡ä»¶ç±»å‹æ£€æµ‹éœ€è¦ä½ åˆ›å»ºä¸€ä¸ªåä¸º <code>filetype.vim</code>çš„æ–‡ä»¶ï¼Œå¹¶å°†å®ƒæ”¾ç½®åœ¨æ ¹ç›®å½•(<code>~/.vim/filetype.vim</code>)ã€‚åœ¨æ–‡ä»¶å†…æ·»åŠ ä¸€ä¸‹å†…å®¹ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">autocmd BufNewFile,BufRead *.plaindonut <span class="hljs-built_in">set</span> <span class="hljs-attribute">filetype</span>=plaindonut<br></code></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªåä¸º <code>hello.plaindonut</code> çš„æ–‡ä»¶ã€‚å½“ä½ æ‰“å¼€å®ƒåè¿è¡Œ <code>:set filetype?</code> Vimä¼šæ˜¾ç¤ºæ­£ç¡®çš„è‡ªå®šä¹‰æ–‡ä»¶ç±»å‹ <code>filetype=plaindonut</code>ã€‚</p><p>å¤ªå¥½äº†ï¼Œä¿®æ”¹ç”Ÿæ•ˆäº†ã€‚å¦å¤–ï¼Œå¦‚æœæ‚¨ä»”ç»†çœ‹çœ‹ <code>filetype.vim</code> ï¼Œæ‚¨ä¼šå‘ç°å½“æ‚¨æ‰“å¼€<code>hello.plaindonut</code>æ—¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ–‡ä»¶è¿è¡Œäº†å¤šæ¬¡ã€‚ä¸ºé˜²æ­¢è¿™ä¸€ç‚¹ï¼Œæ‚¨å¯ä»¥æ·»åŠ ä¸€ä¸ªå®ˆå«ï¼Œè®©ä¸»è„šæœ¬åªè¿è¡Œä¸€æ¬¡ã€‚æ›´æ–° <code>filetype.vim</code>:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">if</span> <span class="hljs-built_in">exists</span>(<span class="hljs-string">&quot;did_load_filetypes&quot;</span>)<br>  <span class="hljs-keyword">finish</span><br><span class="hljs-keyword">endif</span><br><br><span class="hljs-keyword">augroup</span> donutfiletypedetection<br>  autocmd! BufRead,BufNewFile *.plaindonut <span class="hljs-keyword">setfiletype</span> plaindonut<br><span class="hljs-keyword">augroup</span> END<br></code></pre></td></tr></table></figure><p><code>finish</code> æ˜¯ä¸€ä¸ªVimå‘½ä»¤ï¼Œç”¨æ¥åœæ­¢æ‰§è¡Œå‰©ä½™çš„è„šæœ¬ã€‚è¡¨è¾¾å¼<code>&quot;did_load_filetypes&quot;</code> å¹¶ <em>ä¸æ˜¯</em> ä¸€ä¸ªVimå†…ç½®å‡½æ•°ã€‚å®ƒå®é™…ä¸Šæ˜¯<code>$VIMRUNTIME/filetype.vim</code> ä¸­çš„ä¸€ä¸ªå…¨å±€å˜é‡ã€‚å¦‚æœæ‚¨å¥½å¥‡ï¼Œè¿è¡Œ<code>:e $VIMRUNTIME/filetype.vim</code>ã€‚æ‚¨å°†ä¼šå‘ç°ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">if</span> <span class="hljs-built_in">exists</span>(<span class="hljs-string">&quot;did_load_filetypes&quot;</span>)<br>  <span class="hljs-keyword">finish</span><br><span class="hljs-keyword">endif</span><br><br><span class="hljs-keyword">let</span> did_load_filetypes = <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>å½“Vimè°ƒç”¨è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œå®ƒä¼šå®šä¹‰ <code>did_load_filetypes</code> å˜é‡ï¼Œå¹¶å°†å®ƒè®¾ç½®ä¸º 1 ã€‚åœ¨Vimä¸­ï¼Œ1 è¡¨ç¤ºçœŸã€‚ä½ å¯ä»¥è¯•ç€è¯»å®Œ <code>filetype.vim</code> å‰©ä½™çš„å†…å®¹ï¼Œçœ‹çœ‹æ‚¨æ˜¯å¦èƒ½å¤Ÿç†è§£å½“Vimè°ƒç”¨å®ƒæ—¶å¹²äº†ä»€ä¹ˆã€‚</p><h3 id="æ–‡ä»¶ç±»å‹è„šæœ¬"><a href="#æ–‡ä»¶ç±»å‹è„šæœ¬" class="headerlink" title="æ–‡ä»¶ç±»å‹è„šæœ¬"></a>æ–‡ä»¶ç±»å‹è„šæœ¬</h3><p>è®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•åŸºäºæ–‡ä»¶å†…å®¹æ£€æµ‹æ–‡ä»¶ç±»å‹ã€‚</p><p>å‡è®¾æ‚¨æœ‰ä¸€ä¸ªæ— æ‰©å±•åçš„æ–‡ä»¶çš„é›†åˆã€‚è¿™äº›æ–‡ä»¶å”¯ä¸€ç›¸åŒçš„åœ°æ–¹æ˜¯ï¼Œç¬¬ä¸€è¡Œéƒ½æ˜¯ä»¥ â€œdonutifyâ€ å¼€å¤´ã€‚æ‚¨ç°åœ¨æƒ³ç»™è¿™äº›æ–‡ä»¶æŒ‡æ´¾ä¸€ä¸ª <code>donut</code> çš„æ–‡ä»¶ç±»å‹ã€‚åˆ›å»ºæ–°æ–‡ä»¶ï¼Œèµ·åä¸º <code>sugardonut</code>, <code>glazeddonut</code>, è¿˜æœ‰ <code>frieddonut</code>ï¼ˆæ²¡æœ‰æ‰©å±•åï¼‰ã€‚åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸‹åˆ—å†…å®¹ï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">donutify</span><br></code></pre></td></tr></table></figure><p>å½“æ‚¨åœ¨<code>sugardonut</code>ä¸­è¿è¡Œ <code>:set filetype?</code>ï¼ŒVimæ— æ³•çŸ¥é“åº”è¯¥ç»™è¿™ä¸ªæ–‡ä»¶æŒ‡æ´¾ä»€ä¹ˆæ–‡ä»¶ç±»å‹ï¼Œä¼šè¿”å› <code>filetype=</code>ã€‚</p><p>åœ¨runtimeæ ¹ç›®å½•ï¼Œæ·»åŠ ä¸€ä¸ª <code>scripts.vim</code> æ–‡ä»¶(<code>~/.vim/scripts.vim</code>)ï¼Œåœ¨æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸€ä¸‹å†…å®¹ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">if</span> <span class="hljs-built_in">did_filetype</span>()<br>  <span class="hljs-keyword">finish</span><br><span class="hljs-keyword">endif</span><br><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">getline</span>(<span class="hljs-number">1</span>) =~ <span class="hljs-string">&#x27;^\\&lt;donutify\\&gt;&#x27;</span><br>  <span class="hljs-keyword">setfiletype</span> donut<br><span class="hljs-keyword">endif</span><br></code></pre></td></tr></table></figure><p>å‡½æ•° <code>getline(1)</code> è¿”å›æ–‡ä»¶ç¬¬ä¸€è¡Œçš„å†…å®¹ã€‚å®ƒæ£€æŸ¥ç¬¬ä¸€è¡Œæ˜¯å¦ä»¥ â€œdonutifyâ€ å¼€å¤´ã€‚å‡½æ•° <code>did_filetype()</code> æ˜¯Vimçš„å†…ç½®å‡½æ•°ï¼Œå½“ä¸€ä¸ªä¸æ–‡ä»¶ç±»å‹ç›¸å…³çš„äº‹ä»¶å‘ç”Ÿè‡³å°‘ä¸€æ¬¡æ—¶ï¼Œå®ƒè¿”å›çœŸã€‚å®ƒç”¨æ¥åšå®ˆå«ï¼Œé˜²æ­¢æ–‡ä»¶ç±»å‹äº‹ä»¶åå¤è¿è¡Œã€‚</p><p>æ‰“å¼€æ–‡ä»¶ <code>sugardonut</code> ç„¶åè¿è¡Œ <code>:set filetype?</code>ï¼ŒVimç°åœ¨è¿”å› <code>filetype=donut</code>ã€‚å¦‚æœæ‚¨æ‰“å¼€å¦å¤–ä¸€ä¸ªdonutæ–‡ä»¶ (<code>glazeddonut</code> å’Œ <code>frieddonut</code>)ï¼ŒVimåŒæ ·ä¼šå°†å®ƒä»¬çš„æ–‡ä»¶ç±»å‹å®šä¹‰ä¸º <code>donut</code> ç±»å‹ã€‚</p><p>æ³¨æ„ï¼Œ<code>scripts.vim</code> ä»…å½“Vimæ‰“å¼€ä¸€ä¸ªæœªçŸ¥æ–‡ä»¶ç±»å‹çš„æ–‡ä»¶æ—¶æ‰ä¼šè¿è¡Œã€‚å¦‚æœVimæ‰“å¼€ä¸€ä¸ªå·²çŸ¥æ–‡ä»¶ç±»å‹çš„æ–‡ä»¶ï¼Œ<code>scripts.vim</code> å°†ä¸ä¼šè¿è¡Œã€‚</p><h2 id="æ–‡ä»¶ç±»å‹æ’ä»¶"><a href="#æ–‡ä»¶ç±»å‹æ’ä»¶" class="headerlink" title="æ–‡ä»¶ç±»å‹æ’ä»¶"></a>æ–‡ä»¶ç±»å‹æ’ä»¶</h2><p>å¦‚æœæ‚¨æƒ³è®©Vimä»…å½“æ‚¨æ‰“å¼€ä¸€ä¸ª chocodonut æ–‡ä»¶æ—¶æ‰è¿è¡Œ chocodonut ç›¸å…³çš„ç‰¹æ®Šè„šæœ¬ï¼Œè€Œå½“æ‚¨æ‰“å¼€çš„æ˜¯ plaindonut æ–‡ä»¶æ—¶ï¼ŒVimå°±ä¸è¿è¡Œè¿™äº›è„šæœ¬ã€‚èƒ½å¦åšåˆ°å‘¢ï¼Ÿ</p><p>æ‚¨å¯ä»¥ä½¿ç”¨æ–‡ä»¶ç±»å‹æ’ä»¶runtimeè·¯å¾„(<code>~/.vim/ftplugin/</code>)æ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚Vimä¼šåœ¨è¿™ä¸ªç›®å½•ä¸­æŸ¥æ‰¾ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„æ–‡ä»¶åä¸æ‚¨æ‰“å¼€çš„æ–‡ä»¶ç±»å‹ä¸€æ ·ã€‚åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œèµ·åä¸º<code>chocodonut.vim</code> (<code>~/.vim/ftplugin/chocodonut.vim</code>):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Calling from chocodonut ftplugin&quot;</span><br></code></pre></td></tr></table></figure><p>åˆ›å»ºå¦ä¸€ä¸ª ftplugin æ–‡ä»¶ï¼Œèµ·åä¸º<code>plaindonut.vim</code> (<code>~/.vim/ftplugin/plaindonut.vim</code>):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Calling from plaindonut ftplugin&quot;</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæ¯æ¬¡æ‚¨æ‰“å¼€ä¸€ä¸ª chocodonut ç±»å‹çš„æ–‡ä»¶æ—¶ï¼ŒVimä¼šè¿è¡Œ <code>~/.vim/ftplugin/chocodonut.vim</code>ä¸­çš„è„šæœ¬ã€‚æ¯æ¬¡æ‚¨æ‰“å¼€ plaindonut ç±»å‹çš„æ–‡ä»¶æ—¶ï¼ŒVimä¼šè¿è¡Œ <code>~/.vim/ftplugin/plaindonut.vim</code> ä¸­çš„è„šæœ¬ã€‚</p><p>ä¸€ä¸ªè­¦å‘Šï¼šæ¯å½“ä¸€ä¸ªbufferçš„æ–‡ä»¶ç±»å‹è¢«è®¾ç½®æ—¶(æ¯”å¦‚ï¼Œ<code>set filetype=chocodonut</code>)ï¼Œä¸Šè¿°è„šæœ¬å°±ä¼šè¿è¡Œä¸€æ¬¡ã€‚å¦‚æœæ‚¨æ‰“å¼€3ä¸ªä¸åŒçš„ chocodonut æ–‡ä»¶ï¼Œè¯¥è„šæœ¬å°†è¿è¡Œ <em>æ€»å…±</em> 3æ¬¡ã€‚</p><h2 id="ç¼©è¿›æ–‡ä»¶"><a href="#ç¼©è¿›æ–‡ä»¶" class="headerlink" title="ç¼©è¿›æ–‡ä»¶"></a>ç¼©è¿›æ–‡ä»¶</h2><p>Vimæœ‰ä¸€ä¸ª ç¼©è¿›runtimeè·¯å¾„ï¼Œå…¶å·¥ä½œæ–¹å¼ä¸ftpluginç±»ä¼¼ï¼ŒVimä¹Ÿä¼šåœ¨è¿™ä¸ªç›®å½•ä¸­æŸ¥æ‰¾ä¸€ä¸ªä¸æ‰“å¼€çš„æ–‡ä»¶ç±»å‹åå­—ä¸€æ ·çš„æ–‡ä»¶ã€‚ç¼©è¿›runtimeè·¯å¾„çš„ç›®çš„æ˜¯å­˜å‚¨ç¼©è¿›ç›¸å…³çš„ä»£ç ã€‚å¦‚æœæ‚¨æœ‰æ–‡ä»¶ <code>~/.vim/indent/chocodonut.vim</code>ï¼Œå®ƒä»…å½“æ‚¨æ‰“å¼€ä¸€ä¸ª chocodonut ç±»å‹çš„æ–‡ä»¶æ—¶æ‰§è¡Œã€‚æ‚¨å¯ä»¥å°† chocodonut æ–‡ä»¶ä¸­ç¼©è¿›ç›¸å…³çš„ä»£ç å­˜å‚¨åœ¨è¿™é‡Œã€‚</p><h2 id="é¢œè‰²"><a href="#é¢œè‰²" class="headerlink" title="é¢œè‰²"></a>é¢œè‰²</h2><p>Vim æœ‰ä¸€ä¸ªé¢œè‰²runtimeè·¯å¾„ (<code>~/.vim/colors/</code>) ï¼Œç”¨æ¥å­˜å‚¨é¢œè‰²ä¸»é¢˜ã€‚è¿™ä¸ªç›®å½•ä¸­çš„ä»»ä½•æ–‡ä»¶éƒ½ä¼šåœ¨å‘½ä»¤è¡Œå‘½ä»¤ <code>:color</code> ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚</p><p>å¦‚æœæ‚¨æœ‰ä¸€ä¸ªæ–‡ä»¶ <code>~/.vim/colors/beautifulprettycolors.vim</code>ï¼Œå½“æ‚¨è¿è¡Œ <code>:color</code> ç„¶åæŒ‰ Tabï¼Œæ‚¨å°†ä¼šçœ‹åˆ° <code>beautifulprettycolors</code> å‡ºç°åœ¨é¢œè‰²é€‰é¡¹ä¸­ã€‚  å¦‚æœæ‚¨æƒ³æ·»åŠ è‡ªå·±çš„é¢œè‰²ä¸»é¢˜ï¼Œå°±æ”¾åœ¨è¿™ä¸ªåœ°æ–¹ã€‚</p><p>å¦‚æœæ‚¨æƒ³çœ‹å…¶ä»–äººåšçš„é¢œè‰²ä¸»é¢˜ï¼Œæœ‰ä¸€ä¸ªå¥½åœ°æ–¹å€¼å¾—æ¨èï¼š<a href="https://vimcolors.com/">vimcolors</a>ã€‚</p><h2 id="è¯­æ³•é«˜äº®"><a href="#è¯­æ³•é«˜äº®" class="headerlink" title="è¯­æ³•é«˜äº®"></a>è¯­æ³•é«˜äº®</h2><p>Vimæœ‰ä¸€ä¸ªè¯­æ³•runtimeè·¯å¾„ (<code>~/.vim/syntax/</code>)ï¼Œç”¨æ¥å®šä¹‰è¯­æ³•é«˜äº®ã€‚</p><p>å‡è®¾æ‚¨æœ‰ä¸€ä¸ªæ–‡ä»¶ <code>hello.chocodonut</code>ï¼Œåœ¨æ–‡ä»¶é‡Œé¢æœ‰ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs clojure">(<span class="hljs-name">donut</span> <span class="hljs-string">&quot;tasty&quot;</span>)<br>(<span class="hljs-name">donut</span> <span class="hljs-string">&quot;savory&quot;</span>)<br></code></pre></td></tr></table></figure><p>è™½ç„¶Vimç°åœ¨çŸ¥é“äº†æ­£ç¡®çš„æ–‡ä»¶ç±»å‹ï¼Œä½†æ‰€æœ‰çš„æ–‡æœ¬éƒ½æ˜¯ç›¸åŒçš„é¢œè‰²ã€‚è®©æˆ‘ä»¬æ·»åŠ è¯­æ³•é«˜äº®è§„åˆ™ï¼Œä½¿ â€œdonutâ€ å…³é”®è¯é«˜äº®æ˜¾ç¤ºã€‚åˆ›å»ºä¸€ä¸ªæ–°çš„ chocodonut è¯­æ³•æ–‡ä»¶ <code>~/.vim/syntax/chocodonut.vim</code>ï¼Œåœ¨æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs lasso">syntax <span class="hljs-built_in">keyword</span> donutKeyword donut<br><br>highlight <span class="hljs-keyword">link</span> donutKeyword <span class="hljs-built_in">Keyword</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨é‡æ–°æ‰“å¼€ <code>hello.chocodonut</code> æ–‡ä»¶ï¼Œå…³é”®è¯ <code>donut</code> å·²ç»é«˜äº®æ˜¾ç¤ºäº†ã€‚</p><p>æœ¬ç« ä¸ä¼šè¯¦ç»†ä»‹ç»è¯­æ³•é«˜äº®ã€‚å®ƒæ˜¯ä¸€ä¸ªåºå¤§çš„ä¸»é¢˜ã€‚å¦‚æœæ‚¨æ„Ÿå…´è¶£ï¼Œå¯ä»¥æŸ¥é˜… <code>:h syntax.txt</code>ã€‚</p><p><a href="https://github.com/sheerun/vim-polyglot">vim-polyglot</a> æ’ä»¶éå¸¸çš„æ£’ï¼Œå®ƒæä¾›äº†å¾ˆå¤šæµè¡Œçš„ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•é«˜äº®ã€‚</p><h2 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h2><p>å¦‚æœæ‚¨å†™äº†ä¸€ä¸ªæ’ä»¶ï¼Œæ‚¨è¿˜å¾—åˆ›å»ºä¸€ä¸ªæ‚¨è‡ªå·±çš„æ–‡æ¡£ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ–‡æ¡£runtimeè·¯å¾„å®Œæˆè¿™ä¸ªã€‚</p><p>è®©æˆ‘ä»¬ä¸º chocodonut å’Œ plaindonut å…³é”®å­—åˆ›å»ºä¸€ä¸ªåŸºæœ¬æ–‡æ¡£ã€‚åˆ›å»ºæ–‡ä»¶ <code>donut.txt</code> (<code>~/.vim/doc/donut.txt</code>)ã€‚åœ¨æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸€ä¸‹å†…å®¹ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-comment">*chocodonut* Delicious chocolate donut</span><br><br><span class="hljs-comment">*plaindonut* No choco goodness but still delicious nonetheless</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨è¯•ç€æœç´¢ <code>chocodonut</code> æˆ– <code>plaindonut</code> (<code>:h chocodonut</code> æˆ– <code>:h plaindonut</code>)ï¼Œæ‚¨æ‰¾ä¸åˆ°ä»»ä½•ä¸œè¥¿ã€‚</p><p>é¦–å…ˆï¼Œä½ éœ€è¦è¿è¡Œ <code>:helptags</code>æ¥åˆ›å»ºæ–°çš„å¸®åŠ©å…¥å£ã€‚è¿è¡Œ <code>:helptags ~/.vim/doc/</code></p><p>ç°åœ¨ï¼Œå¦‚æœæ‚¨è¿è¡Œ <code>:h chocodonut</code> æˆ– <code>:h plaindonut</code>ï¼Œæ‚¨å°†æ‰¾åˆ°ä¸Šé¢é‚£äº›æ–°çš„å¸®åŠ©å…¥å£ã€‚æ³¨æ„ï¼Œç°åœ¨æ–‡ä»¶æ˜¯åªè¯»çš„ï¼Œè€Œä¸”ç±»å‹æ˜¯ â€œhelpâ€ã€‚</p><h2 id="å»¶æ—¶åŠ è½½è„šæœ¬"><a href="#å»¶æ—¶åŠ è½½è„šæœ¬" class="headerlink" title="å»¶æ—¶åŠ è½½è„šæœ¬"></a>å»¶æ—¶åŠ è½½è„šæœ¬</h2><p>åˆ°ç°åœ¨ï¼Œæœ¬ç« æ‚¨å­¦åˆ°çš„æ‰€æœ‰runtimeè·¯å¾„éƒ½æ˜¯è‡ªåŠ¨è¿è¡Œçš„ã€‚å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨åŠ è½½ä¸€ä¸ªè„šæœ¬ï¼Œå¯ä½¿ç”¨ autoload runtimeè·¯å¾„ã€‚</p><p>åˆ›å»ºä¸€ä¸ªç›®å½•åä¸º autoload(<code>~/.vim/autoload/</code>)ã€‚åœ¨ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œèµ·åä¸º <code>tasty.vim</code> (<code>~/.vim/autoload/tasty.vim</code>)ã€‚åœ¨æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;tasty.vim global&quot;</span><br><br><span class="hljs-keyword">function</span> tasty<span class="hljs-comment">#donut()</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;tasty#donut&quot;</span><br>endfunction<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œå‡½æ•°åæ˜¯ <code>tasty#donut</code> è€Œä¸æ˜¯ <code>donut()</code>ã€‚è¦æƒ³ä½¿ç”¨autoloadåŠŸèƒ½ï¼Œäº•å·(<code>#</code>)æ˜¯å¿…é¡»çš„ã€‚åœ¨ä½¿ç”¨autoloadåŠŸèƒ½æ—¶ï¼Œå‡½æ•°çš„å‘½åæƒ¯ä¾‹æ˜¯ï¼š</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs leaf">function fileName<span class="hljs-function"><span class="hljs-keyword">#</span><span class="hljs-title">functionName</span><span class="hljs-params">()</span></span><br>  ...<br>endfunction<br></code></pre></td></tr></table></figure><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæ–‡ä»¶åæ˜¯ <code>tasty.vim</code>ï¼Œè€Œå‡½æ•°åæ˜¯<code>donut</code>ã€‚</p><p>è¦è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>call</code> å‘½ä»¤ã€‚è®©æˆ‘ä»¬callè¿™ä¸ªå‡½æ•° <code>:call tasty#donut()</code>ã€‚</p><p>æ‚¨ç¬¬ä¸€æ¬¡è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œæ‚¨åº”å½“ä¼š <em>åŒæ—¶</em> çœ‹åˆ°ä¸¤æ¡ä¿¡æ¯ (â€œtasty.vim globalâ€ å’Œ â€œtasty#donutâ€) ã€‚åé¢å†è°ƒç”¨ <code>tasty#donut</code> å‡½æ•°ï¼Œå°†åªä¼šæ˜¾ç¤º â€œtesty#donutâ€ã€‚</p><p>å½“æ‚¨åœ¨Vimä¸­æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸åƒå‰é¢è¯´çš„runtimeè·¯å¾„ï¼Œautoloadè„šæœ¬ä¸ä¼šè¢«è‡ªåŠ¨åŠ è½½ã€‚ä»…å½“æ‚¨æ˜¾å¼åœ°è°ƒç”¨ <code>tasty#donut()</code>ï¼ŒVimæ‰ä¼šæŸ¥æ‰¾æ–‡ä»¶<code>tasty.vim</code>ï¼Œç„¶ååŠ è½½æ–‡ä»¶ä¸­çš„å†…å®¹ï¼ŒåŒ…æ‹¬å‡½æ•° <code>tasty#donut()</code>ã€‚æœ‰äº›å‡½æ•°ä¼šå ç”¨å¤§é‡èµ„æºï¼Œä½†æˆ‘ä»¬åˆä¸å¸¸ç”¨ï¼Œè¿™æ—¶å€™ Autoload runtimeè·¯å¾„å°±æ˜¯æœ€ä½³çš„è§£å†³æ–¹æ¡ˆã€‚ </p><p>æ‚¨å¯ä»¥åœ¨autoloadç›®å½•ä»»æ„æ·»åŠ åµŒå¥—çš„ç›®å½•ã€‚å¦‚æœæ‚¨æœ‰ä¸€ä¸ªruntimeè·¯å¾„ <code>~/.vim/autoload/one/two/three/tasty.vim</code>ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>:call one#two#three#tasty#donut()</code>æ¥è°ƒç”¨å‡½æ•°ã€‚</p><h2 id="Afterè„šæœ¬"><a href="#Afterè„šæœ¬" class="headerlink" title="Afterè„šæœ¬"></a>Afterè„šæœ¬</h2><p>Vimæœ‰ä¸€ä¸ª after runtimeè·¯å¾„ (<code>~/.vim/after/</code>) ï¼Œå®ƒçš„ç»“æ„æ˜¯ <code>~/.vim/</code>çš„é•œåƒã€‚åœ¨æ­¤ç›®å½•ä¸­çš„ä»»ä½•è„šæœ¬éƒ½ä¼šæœ€åæ‰§è¡Œï¼Œæ‰€ä»¥å¼€å‘è€…é€šå¸¸ä½¿ç”¨è¿™ä¸ªè·¯å¾„æ¥é‡è½½è„šæœ¬ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœæ‚¨æƒ³é‡è½½ <code>plugin/chocolate.vim</code> ä¸­çš„è„šæœ¬ï¼Œæ‚¨å¯ä»¥åˆ›å»º<code>~/.vim/after/plugin/chocolate.vim</code>æ¥æ”¾ç½®é‡è½½è„šæœ¬ã€‚Vimå°†ä¼šå…ˆè¿è¡Œ <code>~/.vim/plugin/chocolate.vim</code>ï¼Œ <em>ç„¶åè¿è¡Œ</em> <code>~/.vim/after/plugin/chocolate.vim</code></p><h2 id="VIMRUNTIME"><a href="#VIMRUNTIME" class="headerlink" title="$VIMRUNTIME"></a>$VIMRUNTIME</h2><p>Vimæœ‰ä¸€ä¸ªç¯å¢ƒå˜é‡ <code>$VIMRUNTIME</code> ç”¨æ¥åŠ è½½é»˜è®¤è„šæœ¬å’Œæ”¯æŒæ–‡ä»¶ã€‚æ‚¨å¯ä»¥è¿è¡Œ <code>:e $VIMRUNTIME</code>æŸ¥çœ‹ã€‚</p><p>å®ƒçš„ç»“æ„åº”è¯¥çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰ã€‚å®ƒåŒ…å«çš„å¾ˆå¤šruntimeè·¯å¾„éƒ½æ˜¯æˆ‘ä»¬æœ¬ç« å‰é¢å­¦è¿‡çš„ã€‚</p><p>å›æƒ³ç¬¬22ç« ï¼Œå½“æ‚¨æ‰“å¼€Vimæ—¶ï¼Œå®ƒä¼šåœ¨6ä¸ªä¸åŒçš„ä½ç½®æŸ¥æ‰¾vimrcæ–‡ä»¶ã€‚å½“æ—¶æˆ‘è¯´æœ€åä¸€ä¸ªä½ç½®å°±æ˜¯ <code>$VIMRUNTIME/default.vim</code>ï¼Œå¦‚æœVimåœ¨å‰5ä¸ªä½ç½®æŸ¥æ‰¾ç”¨æˆ·vimrcæ–‡ä»¶å¤±è´¥ï¼Œå°±ä¼šä½¿ç”¨<code>default.vim</code> ä½œä¸ºvimrcã€‚</p><p>ä¸çŸ¥æ‚¨æ˜¯å¦å°è¯•è¿‡ï¼Œè¿è¡ŒVimæ˜¯ä¸åŠ è½½æ¯”å¦‚vim-polyglotä¹‹ç±»çš„è¯­æ³•æ’ä»¶ï¼Œä½†æ‚¨çš„æ–‡ä»¶ä¾ç„¶æœ‰è¯­æ³•é«˜äº®?è¿™æ˜¯å› ä¸ºå½“Vimåœ¨runtimeè·¯å¾„æŸ¥æ‰¾è¯­æ³•æ–‡ä»¶å¤±è´¥æ—¶ï¼Œä¼šä»<code>$VIMRUNTIME</code> çš„è¯­æ³•ç›®å½•ä¸­æŸ¥æ‰¾è¯­æ³•æ–‡ä»¶ã€‚</p><p>æŸ¥é˜… <code>:h $VIMRUNTIME</code>äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><h2 id="Runtimepathé€‰é¡¹"><a href="#Runtimepathé€‰é¡¹" class="headerlink" title="Runtimepathé€‰é¡¹"></a>Runtimepathé€‰é¡¹</h2><p>è¿è¡Œ <code>:set runtimepath?</code>ï¼Œå¯ä»¥æŸ¥çœ‹æ‚¨çš„runtimeè·¯å¾„ã€‚</p><p>å¦‚æœæ‚¨ä½¿ç”¨ Vim-Plug æˆ–å…¶ä»–æµè¡Œçš„ç¬¬ä¸‰æ–¹æ’ä»¶ç®¡ç†å™¨ï¼Œå®ƒåº”è¯¥ä¼šæ˜¾ç¤ºä¸€ä¸ªç›®å½•åˆ—è¡¨ã€‚æ¯”å¦‚ï¼Œæˆ‘çš„æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">runtimepath=~<span class="hljs-regexp">/.vim,~/</span>.vim<span class="hljs-regexp">/plugged/</span>vim-signify,~<span class="hljs-regexp">/.vim/</span>plugged<span class="hljs-regexp">/base16-vim,~/</span>.vim<span class="hljs-regexp">/plugged/</span>fzf.vim,~<span class="hljs-regexp">/.vim/</span>plugged<span class="hljs-regexp">/fzf,~/</span>.vim<span class="hljs-regexp">/plugged/</span>vim-gutentags,~<span class="hljs-regexp">/.vim/</span>plugged<span class="hljs-regexp">/tcomment_vim,~/</span>.vim<span class="hljs-regexp">/plugged/</span>emmet-vim,~<span class="hljs-regexp">/.vim/</span>plugged<span class="hljs-regexp">/vim-fugitive,~/</span>.vim<span class="hljs-regexp">/plugged/</span>vim-sensible,~<span class="hljs-regexp">/.vim/</span>plugged/lightline.vim, ...<br></code></pre></td></tr></table></figure><p>æ’ä»¶ç®¡ç†å™¨åšäº†ä¸€ä»¶äº‹ï¼Œå°±æ˜¯å°†æ¯ä¸ªæ’ä»¶æ·»åŠ åˆ°runtimeè·¯å¾„ä¸­ã€‚æ¯ä¸ªruntimeè·¯å¾„éƒ½æœ‰ä¸€ä¸ªç±»ä¼¼ <code>~/.vim/</code>çš„ç›®å½•ç»“æ„ã€‚</p><p>å¦‚æœæ‚¨æœ‰ä¸€ä¸ªç›®å½• <code>~/box/of/donuts/</code>ï¼Œç„¶åæ‚¨æƒ³å°†è¿™ä¸ªç›®å½•æ·»åŠ åˆ°æ‚¨çš„runtimeè·¯å¾„ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨vimrcä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">set rtp+=<span class="hljs-variable">$HOME</span><span class="hljs-regexp">/box/</span>of<span class="hljs-regexp">/donuts/</span><br></code></pre></td></tr></table></figure><p>å¦‚æœåœ¨ <code>~/box/of/donuts/</code> é‡Œé¢ï¼Œæ‚¨æœ‰ä¸€ä¸ªpluginç›®å½• (<code>~/box/of/donuts/plugin/hello.vim</code>) ä»¥åŠftpluginç›®å½• (<code>~/box/of/donuts/ftplugin/chocodonut.vim</code>)ï¼Œå½“æ‚¨æ‰“å¼€Vimæ—¶ï¼ŒVimå°†ä¼šè¿è¡Œ <code>plugin/hello.vim</code> ä¸­æ‰€æœ‰è„šæœ¬ã€‚åŒæ ·ï¼Œå½“æ‚¨æ‰“å¼€ä¸€ä¸ª chocodonut æ–‡ä»¶æ—¶ï¼ŒVim å°†ä¼šè¿è¡Œ <code>ftplugin/chocodonut.vim</code>ã€‚</p><p>è‡ªå·±è¯•ç€åšä¸€ä¸‹ï¼šåˆ›å»ºä¸€ä¸ªä»»æ„ç›®å½•ï¼Œç„¶åå°†å®ƒæ·»åŠ åˆ°æ‚¨çš„ runtimepathä¸­ã€‚æ·»åŠ ä¸€äº›æˆ‘ä»¬æœ¬ç« å­¦åˆ°çš„runtimeè·¯å¾„ã€‚ç¡®ä¿å®ƒä»¬æŒ‰é¢„æœŸå·¥ä½œã€‚</p><h2 id="èªæ˜åœ°å­¦ä¹ Runtime"><a href="#èªæ˜åœ°å­¦ä¹ Runtime" class="headerlink" title="èªæ˜åœ°å­¦ä¹ Runtime"></a>èªæ˜åœ°å­¦ä¹ Runtime</h2><p>èŠ±ç‚¹æ—¶é—´é˜…è¯»æœ¬ç« ï¼Œè¿˜æœ‰è®¤çœŸç ”ç©¶ä¸€ä¸‹è¿™äº›runtimeè·¯å¾„ã€‚çœ‹ä¸€ä¸‹çœŸå®ç¯å¢ƒä¸‹runtimeè·¯å¾„æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚æµè§ˆä¸€ä¸‹æ‚¨æœ€å–œæ¬¢çš„Vimæ’ä»¶ä»“åº“ï¼Œä»”ç»†ç ”ç©¶ä¸€ä¸‹å®ƒçš„ç›®å½•ç»“æ„ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿç†è§£å®ƒä»¬ä¸­çš„ç»å¤§éƒ¨åˆ†ã€‚è¯•ç€é¢†ä¼šé‡ç‚¹å¹¶è·Ÿç€åšã€‚ç°åœ¨æ‚¨å·²ç»ç†è§£äº†Vimçš„ç›®å½•ç»“æ„ï¼Œæ‚¨å¯ä»¥å‡†å¤‡å­¦ä¹ Vimscriptäº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-æ‰“å¼€å’Œæœç´¢æ–‡ä»¶</title>
    <link href="/2022/04/05/Vim/ch03_searching_files/"/>
    <url>/2022/04/05/Vim/ch03_searching_files/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬3ç« -æ‰“å¼€å’Œæœç´¢æ–‡ä»¶"><a href="#ç¬¬3ç« -æ‰“å¼€å’Œæœç´¢æ–‡ä»¶" class="headerlink" title="ç¬¬3ç«  æ‰“å¼€å’Œæœç´¢æ–‡ä»¶"></a>ç¬¬3ç«  æ‰“å¼€å’Œæœç´¢æ–‡ä»¶</h1><p>æœ¬ç« çš„ç›®çš„æ˜¯å‘æ‚¨ä»‹ç»å¦‚ä½•åœ¨Vimä¸­å¿«é€Ÿæœç´¢ï¼Œèƒ½å¤Ÿå¿«é€Ÿæœç´¢æ˜¯æé«˜æ‚¨çš„Vimå·¥ä½œæ•ˆç‡çš„é‡è¦é€”å¾„ã€‚å½“æˆ‘è§£å†³äº†å¦‚ä½•å¿«é€Ÿæœç´¢æ–‡ä»¶è¿™ä¸ªé—®é¢˜åï¼Œæˆ‘å°±å†³å®šæ”¹ä¸ºå®Œå…¨ä½¿ç”¨Vimæ¥å·¥ä½œã€‚</p><p>æœ¬ç« åˆ’åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€æ˜¯å¦‚ä½•ä¸ä¾èµ–æ’ä»¶æœç´¢ï¼›äºŒæ˜¯ä½¿ç”¨<a href="https://github.com/junegunn/fzf.vim">fzfæ’ä»¶</a>æœç´¢ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p><h2 id="æ‰“å¼€å’Œç¼–è¾‘æ–‡ä»¶"><a href="#æ‰“å¼€å’Œç¼–è¾‘æ–‡ä»¶" class="headerlink" title="æ‰“å¼€å’Œç¼–è¾‘æ–‡ä»¶"></a>æ‰“å¼€å’Œç¼–è¾‘æ–‡ä»¶</h2><p>è¦åœ¨Vimä¸­æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>:edit</code>ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">edit</span> file.txt<br></code></pre></td></tr></table></figure><p>å¦‚æœ<code>file.txt</code>å·²ç»å­˜åœ¨ï¼Œå°±ä¼šæ‰“å¼€<code>file.txt</code>bufferã€‚å¦‚æœ<code>file.txt</code>ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°bufferåä¸º<code>file.txt</code>ã€‚</p><p><code>:edit</code>å‘½ä»¤æ”¯æŒä½¿ç”¨<code>&lt;Tab&gt;</code>è¿›è¡Œè‡ªåŠ¨è¡¥å…¨ã€‚æ¯”å¦‚ï¼Œå¦‚æœæ‚¨çš„æ–‡ä»¶ä½äº<a href="https://rubyonrails.org/">Rails</a>åº”ç”¨æ§åˆ¶å™¨çš„ç”¨æˆ·æ§åˆ¶å™¨ç›®å½•<code>./app/controllers/users_controllers.rb</code>å†…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>&lt;Tab&gt;</code>å¯¹æ–‡ä»¶è·¯å¾„åè¿›è¡Œå¿«é€Ÿæ‰©å±•ã€‚</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">:<span class="hljs-keyword">edit</span> a&lt;<span class="hljs-built_in">Tab</span>&gt;c&lt;<span class="hljs-built_in">Tab</span>&gt;u&lt;<span class="hljs-built_in">Tab</span>&gt;<br></code></pre></td></tr></table></figure><p><code>:edit</code>å¯ä»¥æ¥æ”¶é€šé…ç¬¦å‚æ•°ã€‚<code>*</code>åŒ¹é…å½“å‰ç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ã€‚å¦‚æœæ‚¨åªæƒ³æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹åç¼€åä¸º<code>.yml</code>çš„æ–‡ä»¶ï¼š</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">:<span class="hljs-keyword">edit</span> *.yml&lt;<span class="hljs-built_in">Tab</span>&gt;<br></code></pre></td></tr></table></figure><p>Vimå°†åˆ—å‡ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰<code>.yml</code>æ–‡ä»¶ä¾›æ‚¨é€‰æ‹©ã€‚</p><p>æ‚¨å¯ä»¥ä½¿ç”¨<code>**</code>è¿›è¡Œé€’å½’çš„æœç´¢ã€‚å¦‚æœæ‚¨æƒ³æŸ¥æ‰¾å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰<code>*.md</code>æ–‡ä»¶ï¼Œä½†æ‚¨ä¸çŸ¥é“åœ¨å“ªä¸ªç›®å½•ï¼Œæ‚¨å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">edit</span> **/*.md<span class="hljs-symbol">&lt;Tab&gt;</span><br></code></pre></td></tr></table></figure><p><code>:edit</code>å¯ä»¥ç”¨äºè¿è¡Œ<code>netrw</code>ï¼ˆVimçš„å†…ç½®æ–‡ä»¶æµè§ˆå™¨ï¼‰ã€‚ä½¿ç”¨æ–¹æ³•æ˜¯ï¼Œç»™<code>:edit</code>ä¸€ä¸ªç›®å½•å‚æ•°è€Œä¸æ˜¯æ–‡ä»¶åå°±è¡Œäº†ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">edit</span> .<br>:<span class="hljs-built_in">edit</span> test/unit/<br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨findå‘½ä»¤æœç´¢æ–‡ä»¶"><a href="#ä½¿ç”¨findå‘½ä»¤æœç´¢æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨findå‘½ä»¤æœç´¢æ–‡ä»¶"></a>ä½¿ç”¨findå‘½ä»¤æœç´¢æ–‡ä»¶</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨<code>:find</code>å‘½ä»¤æœç´¢æ–‡ä»¶ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:<span class="hljs-keyword">find</span> <span class="hljs-keyword">package</span>.json<br>:<span class="hljs-keyword">find</span> app<span class="hljs-regexp">/controllers/u</span>sers_controller.rb<br></code></pre></td></tr></table></figure><p><code>:find</code>å‘½ä»¤åŒæ ·æ”¯æŒè‡ªåŠ¨è¡¥å…¨ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">find</span> <span class="hljs-keyword">p</span><span class="hljs-symbol">&lt;Tab&gt;</span>                <span class="hljs-comment">&quot; to find package.json</span><br>:<span class="hljs-keyword">find</span> <span class="hljs-keyword">a</span><span class="hljs-symbol">&lt;Tab&gt;</span><span class="hljs-keyword">c</span><span class="hljs-symbol">&lt;Tab&gt;</span><span class="hljs-keyword">u</span><span class="hljs-symbol">&lt;Tab&gt;</span>    <span class="hljs-comment">&quot; to find app/controllers/users_controller.rb</span><br></code></pre></td></tr></table></figure><p>æ‚¨å¯èƒ½æ³¨æ„åˆ°<code>:find</code>å’Œ<code>:edit</code>çœ‹èµ·æ¥å¾ˆåƒã€‚å®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><h2 id="Find-å’Œ-Path"><a href="#Find-å’Œ-Path" class="headerlink" title="Find å’Œ Path"></a>Find å’Œ Path</h2><p>ä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼Œ<code>:find</code>å‘½ä»¤æ ¹æ®<code>path</code>é€‰é¡¹é…ç½®çš„è·¯å¾„æŸ¥æ‰¾æ–‡ä»¶ï¼Œè€Œ<code>:edit</code>ä¸ä¼šã€‚è®©æˆ‘ä»¬äº†è§£ä¸€ç‚¹å…³äº<code>path</code>é€‰é¡¹çš„çŸ¥è¯†ã€‚ä¸€æ—¦æ‚¨å­¦ä¼šå¦‚ä½•ä¿®æ”¹æ‚¨çš„è·¯å¾„ï¼Œ<code>:find</code>å‘½ä»¤èƒ½å˜æˆä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æœç´¢å·¥å…·ã€‚å…ˆæŸ¥çœ‹ä¸€ä¸‹æ‚¨çš„<code>path</code>æ˜¯ä»€ä¹ˆï¼š</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">:<span class="hljs-built_in">set</span> <span class="hljs-built_in">path</span>?<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨çš„<code>path</code>å†…å®¹å¾ˆå¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">path=.,<span class="hljs-regexp">/usr/i</span>nclude,,<br></code></pre></td></tr></table></figure><ul><li><code>.</code> æ„æ€æ˜¯åœ¨å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹æœç´¢ã€‚(è¯‘è€…æ³¨ï¼šæ³¨æ„ä¸æ˜¯å‘½ä»¤è¡Œè¾“å…¥pwdè¿”å›çš„å½“å‰ç›®å½•ï¼Œè€Œæ˜¯ <strong>å½“å‰æ‰€æ‰“å¼€çš„æ–‡ä»¶</strong> æ‰€åœ¨çš„ç›®å½•)</li><li><code>,</code> means to search in the current directory.(è¯‘è€…æ³¨ï¼šæ­¤å¤„è²Œä¼¼ä½œè€…æœ‰ç‚¹å°é”™è¯¯ï¼Œé€—å·<code>,</code>åº”è¯¥æ˜¯è¡¨ç¤ºè·¯å¾„ä¹‹é—´çš„åˆ†å‰²ç¬¦ã€‚è¿ç»­çš„ä¸¤ä¸ª<code>,,</code>ï¼ˆä¸¤ä¸ªé€—å·ä¹‹é—´ä¸ºç©ºï¼‰æ‰è¡¨ç¤ºå½“å‰ç›®å½•)</li><li><code>/usr/include</code> è¡¨ç¤ºåœ¨Cç¼–è¯‘å™¨å¤´æ–‡ä»¶ç›®å½•ä¸‹æœç´¢ã€‚</li></ul><p>å‰ä¸¤ä¸ªé…ç½®éå¸¸é‡è¦ï¼Œç¬¬3ä¸ªç°åœ¨å¯ä»¥è¢«å¿½ç•¥ã€‚æ‚¨è¿™é‡Œåº”è¯¥è®°ä½çš„æ˜¯ï¼šæ‚¨å¯ä»¥ä¿®æ”¹æ‚¨è‡ªå·±çš„è·¯å¾„ã€‚è®©æˆ‘ä»¬å‡è®¾æ‚¨çš„é¡¹ç›®ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs stylus">app/<br>  assets/<br>  controllers/<br>    application_controller<span class="hljs-selector-class">.rb</span><br>    comments_controller<span class="hljs-selector-class">.rb</span><br>    users_controller<span class="hljs-selector-class">.rb</span><br>    ...<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æƒ³ä»æ ¹ç›®å½•è·³åˆ°<code>users_controller.rb</code>ï¼Œæ‚¨å°†ä¸å¾—ä¸ç»è¿‡å¥½å‡ å±‚ç›®å½•ï¼ˆæŒ‰å¥½å‡ æ¬¡<code>&lt;Tab&gt;</code>ï¼‰ã€‚ä¸€èˆ¬è¯´æ¥ï¼Œå½“æ‚¨å¤„ç†ä¸€ä¸ªframeworkæ—¶ï¼Œ90%çš„æ—¶é—´æ‚¨éƒ½åœ¨æŸä¸ªç‰¹å®šçš„ç›®å½•ä¸‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨åªå…³å¿ƒå¦‚ä½•ç”¨æœ€å°‘çš„æŒ‰é”®è·³åˆ°<code>controllers/</code>ç›®å½•ã€‚é‚£ä¹ˆ<code>path</code>è®¾ç½®å¯ä»¥å‡å°‘è¿™ä¸ªé€”ç¨‹ã€‚</p><p>æ‚¨åªéœ€è¦å°†<code>app/controllers/</code>æ·»åŠ åˆ°å½“å‰<code>path</code>é€‰é¡¹ã€‚ä»¥ä¸‹æ˜¯æ“ä½œæ­¥éª¤ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:set path+=app<span class="hljs-regexp">/controllers/</span><br></code></pre></td></tr></table></figure><p>ç°åœ¨æ‚¨çš„è·¯å¾„å·²ç»æ›´æ–°ï¼Œå½“æ‚¨è¾“å…¥<code>:find u&lt;Tab&gt;</code>æ—¶ï¼ŒVimå°†ä¼šåœ¨<code>app/controllers/</code>ç›®å½•å†…æœç´¢æ‰€æœ‰ä»¥â€uâ€å¼€å¤´çš„æ–‡ä»¶ã€‚</p><p>å¦‚æœæ‚¨æœ‰ä¸€ä¸ªåµŒå¥—çš„ç›®å½•<code>controllers/</code>ï¼Œæ¯”å¦‚<code>app/controllers/account/users_controller.rb</code>ï¼ŒVimå°±æ‰¾ä¸åˆ°<code>users_controllers</code>äº†ã€‚æ‚¨å¿…é¡»æ”¹ä¸ºæ·»åŠ <code>:set path+=app/controllers/**</code>ï¼Œè¿™æ ·è‡ªåŠ¨è¡¥å…¨æ‰ä¼šæ‰¾åˆ°<code>users_controller.rb</code>ã€‚è¿™å¤ªæ£’äº†ï¼æ‚¨ç°åœ¨å¯ä»¥åªéœ€è¦æŒ‰1æ¬¡é”®å°±å¯æ‰¾åˆ°users controllerã€‚</p><p>æ‚¨å¯èƒ½ä¼šæƒ³å°†æ•´ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹æ·»åŠ åˆ°<code>path</code>ä¸­ï¼Œè¿™æ ·å½“æ‚¨æŒ‰<code>&lt;Tab&gt;</code>ï¼ŒVimå°†åœ¨æ‰€æœ‰æ–‡ä»¶å¤¹å†…æœç´¢æ‚¨è¦æ‰¾çš„æ–‡ä»¶ï¼Œå°±åƒè¿™æ ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:<span class="hljs-built_in">set</span> path+=<span class="hljs-variable">$PWD</span>/**<br></code></pre></td></tr></table></figure><p><code>$PWD</code> è¡¨ç¤ºçš„æ˜¯å½“å‰å·¥ä½œç›®å½•ã€‚å¦‚æœæ‚¨å°è¯•å°†æ•´ä¸ªé¡¹ç›®è·¯å¾„åŠ åˆ°<code>path</code>ä¸­ï¼Œå¹¶å¸Œæœ›è®©æ‰€æœ‰æ–‡ä»¶åå¯ä»¥ç”¨<code>&lt;Tab&gt;</code>è¡¥å…¨ï¼Œè™½ç„¶å¯¹äºå°é¡¹ç›®æ²¡é—®é¢˜ï¼Œä½†å¦‚æœæ‚¨çš„é¡¹ç›®ä¸­åŒ…å«å¤§é‡æ–‡ä»¶æ—¶ï¼Œè¿™ä¼šæ˜¾è‘—é™ä½æ‚¨çš„æœç´¢é€Ÿåº¦ã€‚æˆ‘å»ºè®®ä»…ä»…å°†æ‚¨æœ€å¸¸è®¿é—®çš„æ–‡ä»¶&#x2F;ç›®å½•æ·»åŠ åˆ°<code>path</code>ã€‚ï¼ˆè¯‘è€…æ³¨ï¼šä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºç³»ç»Ÿç¯å¢ƒä¸ä¸€æ ·çš„åŸå› ï¼Œè¯‘è€…ä½¿ç”¨çš„æ˜¯windowsä¸‹çš„Vim8.2ï¼Œ$PWD è¿™ä¸ªç¯å¢ƒå˜é‡åœ¨è¯‘è€…çš„vimä¸­ä¸èµ·ä½œç”¨ï¼Œå¿…é¡»åœ¨vimrcæ–‡ä»¶ä¸­æ·»åŠ ä¸€å¥<code>let $PWD=getcwd()</code>æ‰è¡Œï¼‰ã€‚</p><p>æ‚¨å¯ä»¥å°†<code>set path+=&#123;æ‚¨éœ€è¦æ·»åŠ çš„ç›®å½•&#125;</code>æ·»åŠ åˆ°æ‚¨çš„vimrcæ–‡ä»¶ä¸­ã€‚æ›´æ–°<code>path</code>ä»…èŠ±è´¹å‡ ç§’é’Ÿï¼Œä½†å¯ä»¥ä¸ºæ‚¨çš„å·¥ä½œèŠ‚çœå¾ˆå¤šæ—¶é—´ã€‚</p><h2 id="ä½¿ç”¨Grepå‘½ä»¤åœ¨æ–‡ä»¶ä¸­æœç´¢"><a href="#ä½¿ç”¨Grepå‘½ä»¤åœ¨æ–‡ä»¶ä¸­æœç´¢" class="headerlink" title="ä½¿ç”¨Grepå‘½ä»¤åœ¨æ–‡ä»¶ä¸­æœç´¢"></a>ä½¿ç”¨Grepå‘½ä»¤åœ¨æ–‡ä»¶ä¸­æœç´¢</h2><p>å¦‚æœæ‚¨æƒ³åœ¨æ–‡ä»¶å†…éƒ¨æŸ¥æ‰¾ï¼ˆæœç´¢æ–‡ä»¶ä¸­çš„è¯å¥ï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨grepã€‚Vimæœ‰ä¸¤ä¸ªæ–¹æ³•å¯ä»¥å®Œæˆè¿™ä¸ªå·¥ä½œï¼š</p><ul><li>å†…ç½®grep ï¼ˆ<code>:vim</code>ã€‚æ²¡é”™ï¼Œå°±æ˜¯<code>:vim</code>ï¼Œå®ƒæ˜¯<code>:vimgrep</code>çš„ç®€å†™ï¼‰ã€‚</li><li>å¤–éƒ¨grep (<code>:grep</code>)ã€‚</li></ul><p>è®©æˆ‘ä»¬é¦–å…ˆä»”ç»†çœ‹çœ‹å†…ç½®grepã€‚<code>:vim</code>æœ‰ä»¥ä¸‹è¯­æ³•ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:vim <span class="hljs-regexp">/pattern/</span> <span class="hljs-keyword">file</span><br></code></pre></td></tr></table></figure><ul><li><code>/pattern/</code> æ˜¯æ‚¨è¦æœç´¢çš„å†…å®¹çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</li><li><code>file</code> æ˜¯æ–‡ä»¶å‚æ•°ã€‚æ‚¨å¯ä»¥ä¼ å…¥å¤šä¸ªå‚æ•°ã€‚Vimå°†åœ¨æ–‡ä»¶ä¸­æœç´¢æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹ã€‚ç±»ä¼¼äº<code>:find</code>ï¼Œæ‚¨å¯ä»¥ä¼ å…¥*å’Œ**é€šé…ç¬¦ã€‚</li></ul><p>æ¯”å¦‚ï¼Œè¦åœ¨<code>app/controllers/</code>ç›®å½•ä¸‹æ‰€æœ‰rubyæ–‡ä»¶(<code>.rb</code>)ä¸­ï¼ŒæŸ¥æ‰¾æ‰€æœ‰çš„â€breakfastâ€å­—ç¬¦ä¸²:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:vim <span class="hljs-regexp">/breakfast/</span> app<span class="hljs-regexp">/controllers/</span>**/*.rb<br></code></pre></td></tr></table></figure><p>è¾“å…¥ä¸Šé¢çš„å‘½ä»¤åï¼Œæ‚¨å°†ä¼šè¢«å¯¼èˆªåˆ°ç¬¬ä¸€ä¸ªç»“æœã€‚Vimçš„<code>vim</code>æœç´¢å‘½ä»¤ä½¿ç”¨<code>quickfix</code>è¿›è¡Œå¤„ç†ã€‚è¦æŸ¥çœ‹æ‰€æœ‰æœç´¢ç»“æœï¼Œè¿è¡Œ<code>:copen</code>ä¼šæ‰“å¼€ä¸€ä¸ª<code>quickfix</code>çª—å£ã€‚ä¸‹é¢æœ‰ä¸€äº›æœ‰ç”¨çš„quickfixå‘½ä»¤ï¼Œå¯ä»¥è®©æ‚¨æé«˜æ•ˆç‡ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:copen</span>        æ‰“å¼€quickfixçª—å£<br><span class="hljs-symbol">:cclose</span>       å…³é—­quickfixçª—å£<br><span class="hljs-symbol">:cnext</span>        è·³åˆ°ä¸‹ä¸€ä¸ªé”™è¯¯<br><span class="hljs-symbol">:cprevious</span>    è·³åˆ°å‰ä¸€ä¸ªé”™è¯¯<br><span class="hljs-symbol">:colder</span>       è·³åˆ°æ—§çš„é”™è¯¯åˆ—è¡¨<br><span class="hljs-symbol">:cnewer</span>       è·³åˆ°æ–°çš„é”™è¯¯åˆ—è¡¨<br></code></pre></td></tr></table></figure><p>è¦äº†è§£æ›´å¤šå…³äºquickfixçš„ä¿¡æ¯ï¼Œä½¿ç”¨<code>:h quickfix</code>æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ã€‚</p><p>æ‚¨å¯èƒ½æ³¨æ„åˆ°è¿è¡Œå†…ç½®grep(<code>:vim</code>)å‘½ä»¤æ—¶ï¼Œå¦‚æœåŒ¹é…ç»“æœæ•°é‡è¾ƒå¤šæ—¶ç³»ç»Ÿé€Ÿåº¦ä¼šå˜æ…¢ã€‚è¿™æ˜¯å› ä¸ºVimå°†æ¯ä¸€ä¸ªæœç´¢ç»“æœè¯»å…¥å†…å­˜ã€‚VimåŠ è½½æ¯ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶å°±åƒå®ƒä»¬è¢«ç¼–è¾‘ä¸€æ ·ã€‚å¦‚æœVimæŸ¥åˆ°å¤§é‡æ–‡ä»¶ï¼Œå®ƒå°†æ¶ˆè€—å¾ˆå¤šå†…å­˜ã€‚</p><p>è®©æˆ‘ä»¬è°ˆè°ˆå¤–ç½®grepã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä½¿ç”¨ç»ˆç«¯å‘½ä»¤<code>grep</code>ã€‚è¦æƒ³åœ¨<code>app/controllers/</code>ç›®å½•ä¸­æœç´¢å­—ç¬¦ä¸²â€lunchâ€ï¼Œæ‚¨å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:<span class="hljs-keyword">grep</span> -R <span class="hljs-string">&quot;lunch&quot;</span> app<span class="hljs-regexp">/controllers/</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œä¸æ˜¯ä½¿ç”¨<code>/pattern/</code>ï¼Œå®ƒéµå¾ªçš„æ˜¯ç»ˆç«¯grepçš„è¯­æ³•<code>&quot;pattern&quot;</code>ï¼Œå®ƒåŒæ ·ä½¿ç”¨â€™quickfixâ€™æ¥æ˜¾ç¤ºæ‰€æœ‰çš„åŒ¹é…ç»“æœã€‚</p><p>Vimä½¿ç”¨<code>grepprg</code>å˜é‡æ¥å†³å®šè¿è¡Œ<code>:grep</code>æ—¶ï¼Œåº”è¯¥ä½¿ç”¨å“ªä¸ªå¤–éƒ¨ç¨‹åºã€‚æ‰€ä»¥æ‚¨å¹¶ä¸æ˜¯éå¾—ä½¿ç”¨ç»ˆç«¯çš„<code>grep</code>å‘½ä»¤ã€‚ç¨åæˆ‘å°†ä¸ºæ‚¨æ¼”ç¤ºå¦‚ä½•æ”¹å˜å¤–éƒ¨grepç¨‹åºçš„é»˜è®¤å€¼ã€‚</p><h2 id="ç”¨Netrwæµè§ˆæ–‡ä»¶"><a href="#ç”¨Netrwæµè§ˆæ–‡ä»¶" class="headerlink" title="ç”¨Netrwæµè§ˆæ–‡ä»¶"></a>ç”¨Netrwæµè§ˆæ–‡ä»¶</h2><p><code>netrw</code>æ˜¯Vimçš„å†…ç½®æ–‡ä»¶æµè§ˆå™¨ï¼Œå½“æŸ¥çœ‹é¡¹ç›®çš„ç›®å½•ç»“æ„æ—¶å¾ˆæœ‰ç”¨ã€‚è¦è¿è¡Œ<code>netrw</code>ï¼Œæ‚¨éœ€è¦åœ¨æ‚¨çš„<code>.vimrc</code>ä¸­åšä»¥ä¸‹è®¾ç½®ï¼š</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">set</span> nocp<br>filetype <span class="hljs-keyword">plugin</span> <span class="hljs-keyword">on</span><br></code></pre></td></tr></table></figure><p>ç”±äº<code>netrw</code>æ˜¯ä¸€ä¸ªå¾ˆå®½æ³›çš„è¯é¢˜ï¼Œæˆ‘å°†ç´§ç´§ä»‹ç»å®ƒçš„åŸºæœ¬ç”¨æ³•ï¼Œè¿™åº”è¯¥å·²ç»è¶³å¤Ÿäº†ã€‚æ‚¨å¯ä»¥åœ¨å¯åŠ¨Vimæ—¶è¿è¡Œ<code>netrw</code>ï¼Œåªéœ€è¦ä¼ ç»™Vimä¸€ä¸ªç›®å½•å‚æ•°ï¼ˆè€Œä¸æ˜¯æ–‡ä»¶å‚æ•°ï¼‰å°±è¡Œäº†ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim .<br>vim src<span class="hljs-regexp">/client/</span><br>vim app<span class="hljs-regexp">/controllers/</span><br></code></pre></td></tr></table></figure><p>è¦æƒ³ä»Vimå†…éƒ¨è¿è¡Œ<code>netrw</code>ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>:edit</code>å‘½ä»¤ï¼Œä¼ ç»™ä»–ä¸€ä¸ªç›®å½•è€Œä¸æ˜¯æ–‡ä»¶åï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">:<span class="hljs-built_in">edit</span> .<br>:<span class="hljs-built_in">edit</span> src/client/<br>:<span class="hljs-built_in">edit</span> app/controllers/<br></code></pre></td></tr></table></figure><p>ä¹Ÿæœ‰å…¶ä»–æ–¹æ³•ï¼Œä¸éœ€è¦ä¼ é€’ç›®å½•å‚æ•°å°±è¿è¡Œ<code>netrw</code>çª—å£ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">:Explore     ä»å½“å‰æ–‡ä»¶å¯åŠ¨netrwã€‚<br><span class="hljs-meta">:Sexplore    Sex_Plore?ä¸æ˜¯å¼€ç©ç¬‘:)ï¼Œåœ¨é¡¶éƒ¨æ°´å¹³åˆ†å‰²çš„çª—å£æ‰“å¼€netrwã€‚</span><br>:Vexplore    åœ¨å·¦ä¾§å‚ç›´åˆ†å‰²çš„çª—å£æ‰“å¼€netrwã€‚<br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥ä½¿ç”¨VimåŠ¨ä½œ(motionsï¼Œåœ¨åé¢çš„ç« èŠ‚ä¸­å°†è¯¦ç»†è®²è¿°)åœ¨<code>netrw</code>ä¸­å¯¼èˆªã€‚å¦‚æœæ‚¨è¦åˆ›å»ºã€åˆ é™¤ã€é‡å‘½åæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œä¸‹é¢æœ‰ä¸€äº›å…³äº<code>netrw</code>çš„æœ‰ç”¨å‘½ä»¤ï¼š</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl"><span class="hljs-comment">%    åˆ›å»ºæ–°æ–‡ä»¶</span><br>d    åˆ›å»ºæ–°ç›®å½•<br>R    é‡å‘½åæ–‡ä»¶/ç›®å½•<br>D    åˆ é™¤æ–‡ä»¶/ç›®å½•<br></code></pre></td></tr></table></figure><p><code>:h netrw</code> çš„ä¿¡æ¯éå¸¸å¤æ‚ï¼Œå¦‚æœæ‚¨æœ‰æ—¶é—´å¯ä»¥çœ‹çœ‹ã€‚</p><p>å¦‚æœæ‚¨è§‰å¾— <code>netrw</code> è¿‡äºå•è°ƒä¹å‘³ï¼Œ<a href="https://github.com/tpope/vim-vinegar">vim-vinegar</a>æ˜¯netrwçš„ä¸€ä¸ªæ”¹è¿›æ’ä»¶ã€‚å¦‚æœæ‚¨æƒ³æ‰¾ä¸€ä¸ªä¸åŒçš„æ–‡ä»¶æµè§ˆå™¨ï¼Œ<a href="https://github.com/preservim/nerdtree">NERDTree</a> æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚å»çœ‹çœ‹å§ã€‚</p><h2 id="Fzfæ’ä»¶"><a href="#Fzfæ’ä»¶" class="headerlink" title="Fzfæ’ä»¶"></a>Fzfæ’ä»¶</h2><p>æ‚¨ç°åœ¨å·²ç»å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨Vimçš„å†…ç½®å·¥å…·å»æœç´¢æ–‡ä»¶ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ç”¨æ’ä»¶å®ç°è¿™äº›åŠŸèƒ½å§ã€‚</p><p>ç°ä»£æ–‡æœ¬ç¼–è¾‘å™¨ç›¸æ¯”Vimï¼Œæœ‰ä¸€ä¸ªåŠŸèƒ½è®¾è®¡å¾—å¾ˆå¥½ï¼Œé‚£å°±æ˜¯æ–‡ä»¶æœç´¢å’Œæ¨¡ç³Šæœç´¢çš„ç®€åŒ–ã€‚åœ¨æœ¬ç« çš„ä¸‹åŠéƒ¨åˆ†ï¼Œæˆ‘å°†å‘æ‚¨æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨<a href="https://github.com/junegunn/fzf.vim">fzf.vim</a>æ’ä»¶ï¼Œåœ¨Vimä¸­è½»æ¾å®ç°åŠŸèƒ½å¼ºå¤§çš„æœç´¢åŠŸèƒ½ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>é¦–å…ˆï¼Œç¡®ä¿æ‚¨ä¸‹è½½äº†<a href="https://github.com/junegunn/fzf">fzf</a>å’Œ<a href="https://github.com/BurntSushi/ripgrep">ripgrep</a>ã€‚æŒ‰ç…§å®ƒä»¬åœ¨githubä»“åº“ä¸Šçš„æŒ‡ä»¤ä¸€æ­¥æ­¥åšã€‚æˆåŠŸå®‰è£…åï¼Œå‘½ä»¤<code>fzf</code>å’Œ<code>rg</code>åº”è¯¥å°±å¯ä»¥ç”¨äº†ã€‚</p><p>Ripgrepæ˜¯ä¸€ä¸ªç±»ä¼¼grepï¼ˆä»åå­—ä¸Šå°±çœ‹å¾—å‡ºï¼‰çš„æœç´¢å·¥å…·ã€‚ä¸€èˆ¬è¯´æ¥ï¼Œå®ƒæ¯”grepè¦å¿«ï¼Œè€Œä¸”è¿˜æœ‰å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ã€‚Fzfæ˜¯ä¸€ä¸ªå¤šç”¨é€”çš„å‘½ä»¤è¡Œæ¨¡ç³Šæœç´¢å·¥å…·ï¼Œæ‚¨å¯ä»¥è®²å®ƒä¸å…¶ä»–å‘½ä»¤è”åˆèµ·æ¥ä½¿ç”¨ï¼ŒåŒ…æ‹¬ripgrepã€‚è”åˆèµ·æ¥åï¼Œå®ƒä»¬æˆä¸ºä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æœç´¢å·¥å…·ã€‚</p><p>Fzfé»˜è®¤å¹¶ä¸ä½¿ç”¨ripgrepï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¾ç½®<code>FZF_DEFAULT_COMMAND</code>å˜é‡å‘Šè¯‰fzfä½¿ç”¨ripgrepå‘½ä»¤ã€‚åœ¨æˆ‘çš„<code>.zshrc</code>ï¼ˆå¦‚æœæ‚¨ç”¨bashï¼Œåº”è¯¥æ˜¯<code>.bashrc</code>ï¼‰æ–‡ä»¶å†…ï¼Œæˆ‘æœ‰ä»¥ä¸‹è®¾ç½®ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">if</span><span class="hljs-built_in"> type </span>rg &amp;&gt; /dev/<span class="hljs-literal">null</span>; then<br>  <span class="hljs-built_in">export</span> <span class="hljs-attribute">FZF_DEFAULT_COMMAND</span>=<span class="hljs-string">&#x27;rg --files&#x27;</span><br>  <span class="hljs-built_in">export</span> <span class="hljs-attribute">FZF_DEFAULT_OPTS</span>=<span class="hljs-string">&#x27;-m&#x27;</span><br>fi<br></code></pre></td></tr></table></figure><p>æ³¨æ„<code>FZF_DEFAULT_OPTS</code>å˜é‡ä¸­çš„<code>-m</code>ã€‚è¿™ä¸ªè®¾ç½®å…è®¸æˆ‘ä»¬æŒ‰ä¸‹<code>&lt;Tab</code>æˆ–<code>&lt;Shift-Tab&gt;</code>åè¿›è¡Œå¤šé‡é€‰æ‹©ã€‚å¦‚æœä»…æƒ³è®©fzfåœ¨Vimä¸­èƒ½å¤Ÿå·¥ä½œï¼Œè¿™ä¸ªè®¾ç½®ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„è®¾ç½®ã€‚å½“æ‚¨æƒ³åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œæœç´¢å’Œæ›¿æ¢ï¼Œè¿›è¡Œå°‘é‡ä¿®æ”¹æ—¶ï¼Œå®ƒä¼šå¾ˆæ–¹ä¾¿ã€‚fzfå‘½ä»¤å¯ä»¥æ¥æ”¶å¾ˆå¤šæ ‡å¿—ï¼Œä½†æˆ‘ä¸ä¼šå†è¿™é‡Œè®²ã€‚è¦æƒ³äº†è§£æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://github.com/junegunn/fzf#usage">fzfâ€™s ä»“åº“</a>ï¼Œæˆ–è€…ä½¿ç”¨<code>man fzf</code>ã€‚è¦æƒ³è®©fzfä½¿ç”¨ripgrepï¼Œæ‚¨è‡³å°‘å¾—æœ‰è¿™ä¸ªè®¾ç½®<code>export FZF_DEFAULT_COMMAND=&#39;rg&#39;</code>ã€‚</p><p>å®‰è£…å¥½äº†fzfå’Œripgrepåï¼Œè®©æˆ‘ä»¬å†å®‰è£…fzfçš„æ’ä»¶ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯<a href="https://github.com/junegunn/vim-plug">vim-plug</a>æ’ä»¶ç®¡ç†å™¨ï¼Œå½“ç„¶æ‚¨å¯ä»¥ä½¿ç”¨å…¶ä»–æ’ä»¶ç®¡ç†å™¨ã€‚</p><p>å°†ä¸‹åˆ—é…ç½®æ·»åŠ åˆ°æ‚¨çš„<code>.vimrc</code>ä¸­ã€‚å› ä¸ºæ‚¨éœ€è¦ä½¿ç”¨<a href="https://github.com/junegunn/fzf.vim">fzf.vim</a>æ’ä»¶ã€‚ï¼ˆåŒæ ·æ˜¯ç”±fzfçš„ä½œè€…åœ¨ç»´æŠ¤ï¼‰</p><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sml"><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;junegunn</span>/fzf.vim&#x27;<br><span class="hljs-type">Plug</span> <span class="hljs-symbol">&#x27;junegunn</span>/fzf&#x27;, &#123; <span class="hljs-symbol">&#x27;do&#x27;</span>: &#123; -&gt; fzf#install<span class="hljs-literal">()</span> &#125; &#125;<br></code></pre></td></tr></table></figure><p>æ·»åŠ åï¼Œæ‚¨éœ€è¦æ‰“å¼€vimï¼Œè¿è¡Œ<code>:PlugInstall</code>ã€‚è¿™æ¡å‘½ä»¤å°†ä¼šå®‰è£…æ‰€æœ‰æ‚¨åœ¨<code>vimrc</code>æ–‡ä»¶ä¸­å®šä¹‰äº†ä½†å°šæœªå®‰è£…çš„æ’ä»¶ã€‚Â åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œå°†ä¼šå®‰è£…<code>fzf.vim</code>å’Œ<code>fzf</code>ã€‚</p><p>è¦äº†è§£æ›´å¤šå…³äºæ­¤æ’ä»¶çš„ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹<a href="https://github.com/junegunn/fzf/blob/master/README-VIM.md">fzf.vim çš„ä»“åº“</a>ã€‚</p><h2 id="Fzfçš„è¯­æ³•"><a href="#Fzfçš„è¯­æ³•" class="headerlink" title="Fzfçš„è¯­æ³•"></a>Fzfçš„è¯­æ³•</h2><p>è¦æƒ³é«˜æ•ˆçš„ä½¿ç”¨fzfï¼Œæ‚¨é¦–å…ˆå¾—äº†è§£ä¸€äº›fzfçš„åŸºç¡€è¯­æ³•ã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™ä¸ªåˆ—è¡¨æ¯”è¾ƒçŸ­ï¼š</p><ul><li><code>^</code> è¡¨ç¤ºå‰ç¼€ç²¾ç¡®åŒ¹é…ã€‚è¦æœç´¢ä¸€ä¸ªä»¥â€welcomeâ€å¼€å¤´çš„çŸ­è¯­ï¼š<code>^welcom</code>ã€‚</li><li><code>$</code> è¡¨ç¤ºåç¼€ç²¾ç¡®åŒ¹é…ã€‚è¦æœç´¢ä¸€ä¸ªä»¥â€my friendsâ€ç»“å°¾çš„çŸ­è¯­ï¼š<code>friends$</code>ã€‚</li><li><code>&#39;</code> è¡¨ç¤ºç²¾ç¡®åŒ¹é…ã€‚è¦æœç´¢çŸ­è¯­â€welcom my friendsâ€ï¼š<code>&#39;welcom my friends</code>ã€‚</li><li><code>|</code> è¡¨ç¤ºâ€æˆ–è€…â€åŒ¹é…ã€‚è¦æœç´¢â€friendsâ€æˆ–â€foesâ€ï¼š<code>friends | foes</code>ã€‚</li><li><code>!</code> è¡¨ç¤ºåå‘åŒ¹é…ã€‚è¦æœç´¢ä¸€ä¸ªåŒ…å«â€welcomeâ€ä½†ä¸åŒ…å«â€friendsâ€çš„çŸ­è¯­ï¼š<code>welcome !friends</code>ã€‚</li></ul><p>æ‚¨å¯ä»¥æ··åˆèµ·æ¥ä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œ<code>^hello | ^welcome friends$</code>å°†æœç´¢ä»¥â€welcomeâ€æˆ–â€helloâ€å¼€å¤´ï¼Œå¹¶ä¸”ä»¥â€friendsâ€ç»“æŸçš„çŸ­è¯­ã€‚</p><h2 id="æŸ¥æ‰¾æ–‡ä»¶"><a href="#æŸ¥æ‰¾æ–‡ä»¶" class="headerlink" title="æŸ¥æ‰¾æ–‡ä»¶"></a>æŸ¥æ‰¾æ–‡ä»¶</h2><p>è¦æƒ³åœ¨Vimå†…ä½¿ç”¨fzf.vimæ’ä»¶æœç´¢æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>:Files</code>æ–¹æ³•ã€‚åœ¨Vimä¸­è¿è¡Œ<code>:Files</code>ï¼Œæ‚¨å°†çœ‹åˆ°fzfæœç´¢æç¤ºç¬¦ã€‚</p><p>å› ä¸ºæ‚¨å°†é¢‘ç¹åœ°ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œæœ€å¥½å»ºç«‹ä¸€ä¸ªé”®ç›˜æ˜ å°„ï¼Œæˆ‘æŠŠå®ƒæ˜ å°„åˆ°<code>Ctrl-f</code>ã€‚åœ¨æˆ‘çš„vimrcé…ç½®ä¸­ï¼Œæœ‰è¿™ä¸ªè®¾ç½®ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">nnoremap &lt;silent&gt; &lt;C-f&gt; <span class="hljs-symbol">:Files&lt;CR&gt;</span><br></code></pre></td></tr></table></figure><h2 id="åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾"><a href="#åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾" class="headerlink" title="åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾"></a>åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾</h2><p>è¦æƒ³åœ¨æ–‡ä»¶å†…éƒ¨æœç´¢ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>:Rg</code>å‘½ä»¤ã€‚</p><p>åŒæ ·ï¼Œå› ä¸ºæ‚¨å¯èƒ½å°†é¢‘ç¹çš„ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œè®©æˆ‘ä»¬ç»™å®ƒä¸€ä¸ªé”®ç›˜æ˜ å°„ã€‚æˆ‘çš„æ˜ å°„åœ¨<code>&lt;Leader&gt;f</code>ã€‚</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">nnoremap &lt;silent&gt; &lt;<span class="hljs-title class_">Leader</span>&gt;f <span class="hljs-symbol">:Rg&lt;CR&gt;</span><br></code></pre></td></tr></table></figure><h2 id="å…¶ä»–æœç´¢"><a href="#å…¶ä»–æœç´¢" class="headerlink" title="å…¶ä»–æœç´¢"></a>å…¶ä»–æœç´¢</h2><p>Fzf.vimæä¾›äº†è®¸å¤šå…¶ä»–å‘½ä»¤ã€‚è¿™é‡Œæˆ‘ä¸ä¼šä¸€ä¸ªä¸ªä»”ç»†è®²ï¼Œæ‚¨å¯ä»¥å»<a href="https://github.com/junegunn/fzf.vim#commands">è¿™é‡Œ</a>æŸ¥çœ‹æ›´å¤šä¿¡æ¯ã€‚</p><p>è¿™æ˜¯æˆ‘çš„fzfé”®ç›˜æ˜ å°„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml">nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>b :Buffers<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">C-f</span>&gt;</span> :Files<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>f :Rg<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>/ :BLines<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>&#x27; :Marks<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>g :Commits<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>H :Helptags<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>hh :History<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>h: :History:<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br>nnoremap <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">Leader</span>&gt;</span>h/ :History/<span class="hljs-tag">&lt;<span class="hljs-name">CR</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="å°†Grepæ›¿æ¢ä¸ºRg"><a href="#å°†Grepæ›¿æ¢ä¸ºRg" class="headerlink" title="å°†Grepæ›¿æ¢ä¸ºRg"></a>å°†Grepæ›¿æ¢ä¸ºRg</h2><p>æ­£å¦‚å‰é¢æåˆ°çš„ï¼ŒVimæœ‰ä¸¤ç§æ–¹æ³•åœ¨æ–‡ä»¶å†…æœç´¢ï¼š<code>:vim</code>å’Œ<code>:grep</code>ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code>grepprg</code>è¿™ä¸ªå…³é”®å­—é‡æ–°æŒ‡å®š<code>:grep</code>ä½¿ç”¨çš„å¤–éƒ¨æœç´¢å·¥å…·ã€‚æˆ‘å°†å‘æ‚¨æ¼”ç¤ºå¦‚ä½•è®¾ç½®Vimï¼Œä½¿å¾—å½“è¿è¡Œ<code>:grep</code>å‘½ä»¤æ—¶ï¼Œä½¿ç”¨ripgrepä»£æ›¿ç»ˆç«¯çš„grepã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è®¾ç½®<code>grepprg</code>æ¥ä½¿<code>:grep</code>ä½¿ç”¨ripgrepã€‚å°†ä¸‹åˆ—è®¾ç½®æ·»åŠ åˆ°æ‚¨çš„vimrcï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">set</span> grepprg=rg\ <span class="hljs-params">--vimgrep</span>\ <span class="hljs-params">--smart-case</span>\ <span class="hljs-params">--follow</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¸€äº›é€‰é¡¹å¯ä»¥éšæ„ä¿®æ”¹ï¼è¦æƒ³äº†è§£æ›´å¤šå…³äºè¿™äº›é€‰é¡¹çš„å«ä¹‰ï¼Œè¯·ä½¿ç”¨<code>man rg</code>äº†è§£è¯¦æƒ…ã€‚</p><p>å½“æ‚¨æ›´æ–°<code>grepprg</code>é€‰é¡¹åï¼Œç°åœ¨å½“æ‚¨è¿è¡Œ<code>:grep</code>ï¼Œå®ƒå°†å®é™…è¿è¡Œ<code>rg --vimgrep --smart-case --follow</code>è€Œä¸æ˜¯<code>grep</code>ã€‚å¦‚æœæ‚¨æƒ³ä½¿ç”¨ripgrepæœç´¢â€donutâ€ï¼Œæ‚¨å¯ä»¥è¿è¡Œä¸€æ¡æ›´ç®€æ´çš„å‘½ä»¤<code>:grep &quot;donut&quot;</code>ï¼Œè€Œä¸æ˜¯<code>:grep &quot;donut&quot; . -R</code></p><p>å°±åƒè€çš„<code>:grep</code>ä¸€æ ·ï¼Œæ–°çš„<code>:grep</code>åŒæ ·ä½¿ç”¨quickfixçª—å£æ¥æ˜¾ç¤ºç»“æœã€‚</p><p>æ‚¨å¯èƒ½å¥½å¥‡ï¼Œâ€œå¾ˆå¥½ï¼Œä½†æˆ‘ä»æ²¡åœ¨Vimä¸­ä½¿ç”¨è¿‡<code>:grep</code>ï¼Œä¸ºä»€ä¹ˆæˆ‘ä¸èƒ½ç›´æ¥ä½¿ç”¨<code>:Rg</code>å‘½ä»¤åœ¨æ–‡ä»¶ä¸­æœç´¢å‘¢ï¼Ÿç©¶ç«Ÿä»€ä¹ˆæ—¶å€™æˆ‘å¿…é¡»ä½¿ç”¨<code>:grep</code>ï¼Ÿâ€ã€‚</p><p>è¿™ä¸ªé—®é¢˜é—®å¾—å¾ˆå¥½ã€‚åœ¨Vimä¸­ï¼Œå½“æ‚¨éœ€è¦åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œæœç´¢å’Œæ›¿æ¢æ—¶ï¼Œæ‚¨å¯èƒ½å¿…é¡»ä½¿ç”¨<code>:grep</code>è¿™ä¸ªå‘½ä»¤ã€‚æˆ‘é©¬ä¸Šå°±ä¼šè®²è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="åœ¨å¤šæ–‡ä»¶ä¸­æœç´¢å’Œæ›¿æ¢"><a href="#åœ¨å¤šæ–‡ä»¶ä¸­æœç´¢å’Œæ›¿æ¢" class="headerlink" title="åœ¨å¤šæ–‡ä»¶ä¸­æœç´¢å’Œæ›¿æ¢"></a>åœ¨å¤šæ–‡ä»¶ä¸­æœç´¢å’Œæ›¿æ¢</h2><p>ç°ä»£æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ¯”å¦‚VSCodeä¸­ï¼Œåœ¨å¤šä¸ªæ–‡ä»¶ä¸­æœç´¢å’Œæ›¿æ¢ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¾ˆç®€å•çš„äº‹æƒ…ã€‚åœ¨è¿™ä¸€èŠ‚ï¼Œæˆ‘å°†å‘æ‚¨æ¼”ç¤ºå¦‚ä½•åœ¨Vimä¸­è½»æ¾å®ç°è¿™ä¸ªã€‚</p><p>ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯åœ¨æ‚¨çš„é¡¹ç›®ä¸­æ›¿æ¢ <strong>æ‰€æœ‰</strong> çš„åŒ¹é…çŸ­å¥ã€‚æ‚¨å¾—ä½¿ç”¨<code>:grep</code>å‘½ä»¤ã€‚å¦‚æœæ‚¨æƒ³å°†æ‰€æœ‰â€pizzaâ€æ›¿æ¢ä¸ºâ€donutâ€ï¼Œä¸‹é¢æ˜¯æ“ä½œæ–¹æ³•ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:<span class="hljs-keyword">grep</span> <span class="hljs-string">&quot;pizza&quot;</span><br>:cfdo %s<span class="hljs-regexp">/pizza/</span>donut/g | update<br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™æ¡å‘½ä»¤ï¼š</p><ol><li><code>:grep pizza</code>ä½¿ç”¨ripgrepå»æœç´¢æ‰€æœ‰â€pizzaâ€ï¼ˆé¡ºå¸¦è¯´ä¸€å¥ï¼Œå°±ç®—æ‚¨ä¸ç»™<code>grepprg</code>é‡æ–°èµ‹å€¼è®©å®ƒä½¿ç”¨ripgrepï¼Œè¿™æ¡å‘½ä»¤ä¾ç„¶æœ‰æ•ˆï¼Œä½†æ‚¨å¯èƒ½ä¸å¾—ä¸ä½¿ç”¨<code>:grep &quot;pizza&quot; . -R</code>å‘½ä»¤ï¼Œè€Œä¸æ˜¯<code>:grep &quot;pizza&quot;</code>ï¼‰ã€‚</li><li><code>:cfdo</code>ä¼šåœ¨æ‚¨çš„quickfixåˆ—è¡¨ä¸­æ‰€æœ‰æ–‡ä»¶é‡Œï¼Œæ‰§è¡Œæ‚¨ä¼ é€’ç»™å®ƒçš„å‘½ä»¤ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ‚¨çš„å‘½ä»¤æ˜¯ä¸€æ¡æ›¿æ¢å‘½ä»¤<code>%s/pizza/donut/g</code>ã€‚ç®¡é“ç¬¦å·(<code>|</code>)æ˜¯ä¸€ä¸ªé“¾æ¥æ“ä½œç¬¦ã€‚å‘½ä»¤<code>update</code>åœ¨æ¯ä¸ªæ–‡ä»¶è¢«æ›¿æ¢åï¼Œç«‹åˆ»ä¿å­˜ã€‚åœ¨åé¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘å°†æ·±å…¥ä»‹ç»æ›¿æ¢å‘½ä»¤ã€‚</li></ol><p>ç¬¬äºŒä¸ªæ–¹æ³•æ˜¯åœ¨æ‚¨é€‰æ‹©æ–‡ä»¶ä¸­æ‰§è¡Œæœç´¢å’Œæ›¿æ¢ã€‚ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨é€‰æ‹©æ‚¨æƒ³æ‰§è¡Œæœç´¢å’Œæ›¿æ¢çš„æ–‡ä»¶ã€‚ä¸‹é¢æ˜¯æ“ä½œæ–¹æ³•ï¼š</p><ol><li>é¦–å…ˆæ¸…ç©ºæ‚¨çš„bufferã€‚è®©æ‚¨çš„bufferåˆ—è¡¨ä»…åŒ…å«æ‚¨æ‰€éœ€è¦çš„æ–‡ä»¶ï¼Œè¿™ä¸€ç‚¹å¾ˆæœ‰å¿…è¦ã€‚æ‚¨å¯ä»¥é‡å¯Vimï¼Œä¹Ÿå¯ä»¥è¿è¡Œ<code>:%bd | e#</code>å‘½ä»¤ï¼ˆ<code>%bd</code>å…³é—­æ‰€æœ‰bufferï¼Œè€Œ<code>e#</code>æ‰“å¼€æ‚¨å½“å‰æ‰€åœ¨çš„æ–‡ä»¶ï¼‰ã€‚</li><li>è¿è¡Œ<code>:Files</code>ã€‚</li><li>é€‰æ‹©å¥½æ‚¨æƒ³æœç´¢-æ›¿æ¢çš„æ–‡ä»¶ã€‚è¦é€‰æ‹©å¤šä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨<code>&lt;Tab&gt;</code>æˆ–<code>&lt;Shift-Tab&gt;</code>ã€‚å½“ç„¶ï¼Œæ‚¨å¿…é¡»ä½¿å¤šæ–‡ä»¶æ ‡å¿—(<code>-m</code>)ä½äº<code>FZF_DEFAULT_OPTS</code>ä¸­ã€‚</li><li>è¿è¡Œ<code>:bufdo %s/pizza/donut/g | update</code>ã€‚å‘½ä»¤<code>:bufdo %s/pizza/donut/g | update</code>çœ‹èµ·æ¥å’Œå‰é¢çš„<code>:cfdo %s/pizza/donut/g | update</code>å¾ˆåƒï¼ŒåŒºåˆ«åœ¨äºï¼Œ(<code>:cfdo</code>)æ›¿æ¢æ‰€æœ‰quickfixä¸­çš„å®ä½“ï¼Œè€Œ(<code>:bufdo</code>)æ›¿æ¢æ‰€æœ‰bufferä¸­çš„å®ä½“ã€‚</li></ol><h2 id="ç”¨èªæ˜çš„æ–¹æ³•å­¦ä¹ æœç´¢"><a href="#ç”¨èªæ˜çš„æ–¹æ³•å­¦ä¹ æœç´¢" class="headerlink" title="ç”¨èªæ˜çš„æ–¹æ³•å­¦ä¹ æœç´¢"></a>ç”¨èªæ˜çš„æ–¹æ³•å­¦ä¹ æœç´¢</h2><p>åœ¨æ–‡æœ¬ç¼–è¾‘æ—¶ï¼Œæœç´¢æ˜¯ä¸€ä¸ªå¾ˆå®ç”¨çš„æŠ€å·§ã€‚å­¦ä¼šåœ¨Vimä¸­å¦‚ä½•æœç´¢ï¼Œå°†æ˜¾è‘—æé«˜æ‚¨çš„æ–‡æœ¬ç¼–è¾‘å·¥ä½œæµç¨‹æ•ˆç‡ã€‚</p><p>Fzf.vimæ’ä»¶å°±åƒä¸€ä¸ªæ¸¸æˆè§„åˆ™æ”¹å˜è€…ã€‚æˆ‘æ— æ³•æƒ³è±¡ä½¿ç”¨Vimæ²¡æœ‰å®ƒçš„æƒ…æ™¯ã€‚å½“æœ€å¼€å§‹ä½¿ç”¨Vimæ—¶ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¥½çš„æœç´¢å·¥å…·ï¼Œæˆ‘æƒ³æ˜¯éå¸¸é‡è¦çš„ã€‚æˆ‘çœ‹è§å¾ˆå¤šäººè¿‡æ¸¡åˆ°Vimæ—¶çš„è‰°éš¾å†ç¨‹ï¼Œå°±æ˜¯å› ä¸ºVimç¼ºå°‘äº†ç°ä»£ç¼–è¾‘å™¨æ‰€æ‹¥æœ‰çš„ä¸€äº›å…³é”®åŠŸèƒ½ç‰¹æ€§ï¼Œæ¯”å¦‚ç®€å•å¿«æ·ä¸”åŠŸèƒ½å¼ºå¤§çš„æœç´¢åŠŸèƒ½ã€‚æˆ‘å¸Œæœ›æœ¬ç« å°†å¸®åŠ©æ‚¨æ›´è½»æ¾åœ°å‘Vimè¿‡æ¸¡ã€‚</p><p>æ‚¨åŒæ—¶ä¹Ÿçœ‹åˆ°äº†Vimçš„æ‰©å±•æ€§ï¼Œå³ä½¿ç”¨æ’ä»¶æˆ–å¤–éƒ¨ç¨‹åºæ‰©å±•æœç´¢åŠŸèƒ½çš„èƒ½åŠ›ã€‚å°†æ¥ï¼Œè®°ä½æ‚¨æƒ³åœ¨Vimä¸­æ‹“å±•çš„åŠŸèƒ½ã€‚å¾ˆæœ‰å¯èƒ½å·²ç»æœ‰äººå†™å¥½äº†ç›¸å…³æ’ä»¶ï¼Œå·²ç»æœ‰ç°æˆçš„ç¨‹åºäº†ã€‚ä¸‹ä¸€ç« ï¼Œæ‚¨å°†å­¦ä¹ Vimä¸­éå¸¸é‡è¦çš„ä¸»é¢˜ï¼šVimè¯­æ³•ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-åœ¨æ–‡ä»¶ä¸­ç§»åŠ¨</title>
    <link href="/2022/04/05/Vim/ch05_moving_in_file/"/>
    <url>/2022/04/05/Vim/ch05_moving_in_file/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬05ç« -åœ¨æ–‡ä»¶ä¸­ç§»åŠ¨"><a href="#ç¬¬05ç« -åœ¨æ–‡ä»¶ä¸­ç§»åŠ¨" class="headerlink" title="ç¬¬05ç«  åœ¨æ–‡ä»¶ä¸­ç§»åŠ¨"></a>ç¬¬05ç«  åœ¨æ–‡ä»¶ä¸­ç§»åŠ¨</h1><p>ä¸€å¼€å§‹ï¼Œé€šè¿‡é”®ç›˜ç§»åŠ¨ä¼šè®©ä½ æ„Ÿè§‰ç‰¹åˆ«æ…¢ç‰¹åˆ«ä¸è‡ªåœ¨ï¼Œä½†æ˜¯ä¸è¦æ”¾å¼ƒï¼ä¸€æ—¦ä½ ä¹ æƒ¯äº†å®ƒï¼Œæ¯”èµ·é¼ æ ‡ä½ å¯ä»¥æ›´å¿«çš„åœ¨æ–‡ä»¶ä¸­å»åˆ°ä»»ä½•åœ°æ–¹ã€‚</p><p>è¿™ä¸€ç« ï¼Œä½ å°†å­¦ä¹ å¿…è¦çš„ç§»åŠ¨ä»¥åŠå¦‚ä½•é«˜æ•ˆçš„ä½¿ç”¨å®ƒä»¬ã€‚ è®°ä½ï¼Œè¿™ä¸€ç« æ‰€è®²çš„å¹¶ä¸æ˜¯Vimçš„å…¨éƒ¨ç§»åŠ¨å‘½ä»¤(motions)ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä»‹ç»æœ‰ç”¨çš„ç§»åŠ¨æ¥å¿«é€Ÿæé«˜æ•ˆç‡ã€‚ å¦‚æœä½ éœ€è¦å­¦ä¹ æ›´å¤šçš„ç§»åŠ¨å‘½ä»¤ï¼ŒæŸ¥çœ‹<code>:h motion.txt</code>ã€‚</p><h2 id="å­—ç¬¦å¯¼èˆª"><a href="#å­—ç¬¦å¯¼èˆª" class="headerlink" title="å­—ç¬¦å¯¼èˆª"></a>å­—ç¬¦å¯¼èˆª</h2><p>æœ€åŸºæœ¬çš„ç§»åŠ¨å•å…ƒæ˜¯ä¸Šä¸‹å·¦å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><pre><code class="hljs mipsasm">h   å·¦<br><span class="hljs-keyword">j </span>  ä¸‹<br>k   ä¸Š<br>l   å³<br></code></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡æ–¹å‘é”®è¿›è¡Œç§»åŠ¨ï¼Œå¦‚æœä½ åªæ˜¯åˆå­¦è€…ï¼Œä½¿ç”¨ä»»ä½•ä½ è§‰å¾—æœ€èˆ’æœçš„æ–¹æ³•éƒ½æ²¡æœ‰å…³ç³»ã€‚</p><p>æˆ‘æ›´å–œæ¬¢<code>hjkl</code>å› ä¸ºæˆ‘çš„å³æ‰‹å¯ä»¥ä¿æŒåœ¨é”®ç›˜ä¸Šçš„é»˜è®¤å§¿åŠ¿ï¼Œè¿™æ ·åšå¯ä»¥è®©æˆ‘æ›´å¿«çš„æ•²åˆ°å‘¨å›´çš„é”®ã€‚ ä¸ºäº†ä¹ æƒ¯å®ƒï¼Œæˆ‘å®é™…ä¸Šåœ¨åˆšå¼€å§‹çš„æ—¶å€™é€šè¿‡<code>~/.vimrc</code>å…³é—­äº†æ–¹å‘é”®ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">noremap</span> <span class="hljs-symbol">&lt;Up&gt;</span> <span class="hljs-symbol">&lt;NOP&gt;</span><br><span class="hljs-keyword">noremap</span> <span class="hljs-symbol">&lt;Down&gt;</span> <span class="hljs-symbol">&lt;NOP&gt;</span><br><span class="hljs-keyword">noremap</span> <span class="hljs-symbol">&lt;Left&gt;</span> <span class="hljs-symbol">&lt;NOP&gt;</span><br><span class="hljs-keyword">noremap</span> <span class="hljs-symbol">&lt;Right&gt;</span> <span class="hljs-symbol">&lt;NOP&gt;</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿæœ‰ä¸€äº›æ’ä»¶å¯ä»¥å¸®åŠ©æ”¹æ‰è¿™ä¸ªåä¹ æƒ¯ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå«<a href="https://github.com/takac/vim-hardtime">vim-hardtime</a>ã€‚ è®©æˆ‘æ„Ÿåˆ°æƒŠè®¶çš„æ˜¯ï¼Œæˆ‘åªç”¨äº†å‡ å¤©å°±ä¹ æƒ¯äº†ä½¿ç”¨<code>hjkl</code>ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœä½ æƒ³çŸ¥é“ä¸ºä»€ä¹ˆVimä½¿ç”¨<code>hjkl</code>è¿›è¡Œç§»åŠ¨ï¼Œ<em>è¿™å®é™…ä¸Šæ˜¯å› ä¸ºBill Joyå†™VIç”¨çš„Lear-Siegler ADM-3Aç»ˆç«¯æ²¡æœ‰æ–¹å‘é”®ï¼Œè€Œæ˜¯æŠŠ<code>hjkl</code>å½“åšæ–¹å‘é”®</em>ã€‚</p><p>å¦‚æœä½ æƒ³ç§»åŠ¨åˆ°é™„è¿‘çš„æŸä¸ªåœ°æ–¹ï¼Œæ¯”å¦‚ä»ä¸€ä¸ªå•è¯çš„ä¸€ä¸ªéƒ¨åˆ†ç§»åŠ¨åˆ°å¦ä¸€ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä¼šä½¿ç”¨<code>h</code>å’Œ<code>l</code>ã€‚ å¦‚æœæˆ‘éœ€è¦åœ¨å¯è§çš„èŒƒå›´å†…ä¸Šä¸‹ç§»åŠ¨å‡ è¡Œï¼Œæˆ‘ä¼šä½¿ç”¨<code>j</code>å’Œ<code>k</code>ã€‚ å¦‚æœæˆ‘æƒ³å»æ›´è¿œçš„åœ°æ–¹ï¼Œæˆ‘å€¾å‘äºä½¿ç”¨å…¶ä»–ç§»åŠ¨å‘½ä»¤ã€‚</p><h2 id="ç›¸å¯¹è¡Œå·"><a href="#ç›¸å¯¹è¡Œå·" class="headerlink" title="ç›¸å¯¹è¡Œå·"></a>ç›¸å¯¹è¡Œå·</h2><p>æˆ‘è§‰å¾—è®¾ç½®<code>number</code>å’Œ<code>relativenumber</code>éå¸¸æœ‰ç”¨ï¼Œä½ å¯ä»¥åœ¨<code>~/.vimrc</code>ä¸­è®¾ç½®:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript"><span class="hljs-keyword">set</span> relativenumber <span class="hljs-built_in">number</span><br></code></pre></td></tr></table></figure><p>è¿™å°†ä¼šå±•ç¤ºå½“å‰è¡Œå·å’Œå…¶ä»–è¡Œç›¸å¯¹å½“å‰è¡Œçš„è¡Œå·ã€‚</p><p>ä¸ºä»€ä¹ˆè¿™ä¸ªåŠŸèƒ½æœ‰ç”¨å‘¢ï¼Ÿè¿™ä¸ªåŠŸèƒ½èƒ½å¤Ÿå¸®åŠ©æˆ‘çŸ¥é“æˆ‘ç¦»æˆ‘çš„ç›®æ ‡ä½ç½®å·®äº†å¤šå°‘è¡Œï¼Œæœ‰äº†å®ƒæˆ‘å¯ä»¥å¾ˆè½»æ¾çš„çŸ¥é“æˆ‘çš„ç›®æ ‡è¡Œåœ¨æˆ‘ä¸‹æ–¹12è¡Œï¼Œå› æ­¤æˆ‘å¯ä»¥ä½¿ç”¨<code>12j</code>å»å‰å¾€ã€‚ å¦åˆ™ï¼Œå¦‚æœæˆ‘åœ¨69è¡Œï¼Œæˆ‘çš„ç›®æ ‡æ˜¯81è¡Œï¼Œæˆ‘éœ€è¦å»è®¡ç®—81-69&#x3D;12è¡Œï¼Œè¿™å¤ªè´¹åŠ²äº†ï¼Œå½“æˆ‘éœ€è¦å»ä¸€ä¸ªåœ°æ–¹æ—¶ï¼Œæˆ‘éœ€è¦æ€è€ƒçš„éƒ¨åˆ†è¶Šå°‘è¶Šå¥½ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ª100%çš„ä¸ªäººåå¥½ï¼Œä½ å¯ä»¥å°è¯•<code>relativenumber</code>&#x2F;<code>norelativenumber</code>ï¼Œ<code>number</code>&#x2F;<code>nonumber</code> ç„¶åé€‰æ‹©è‡ªå·±è§‰å¾—æœ€æœ‰ç”¨çš„ã€‚</p><h2 id="å¯¹ç§»åŠ¨è®¡æ•°"><a href="#å¯¹ç§»åŠ¨è®¡æ•°" class="headerlink" title="å¯¹ç§»åŠ¨è®¡æ•°"></a>å¯¹ç§»åŠ¨è®¡æ•°</h2><p>åœ¨ç»§ç»­ä¹‹å‰ï¼Œè®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹â€è®¡æ•°â€å‚æ•°ã€‚ ä¸€ä¸ªç§»åŠ¨(motion)å¯ä»¥æ¥å—ä¸€ä¸ªæ•°å­—å‰ç¼€ä½œä¸ºå‚æ•°ï¼Œä¸Šé¢æˆ‘æåˆ°çš„ä½ å¯ä»¥é€šè¿‡<code>12j</code>å‘ä¸‹ç§»åŠ¨12è¡Œï¼Œå…¶ä¸­<code>12j</code>ä¸­çš„<code>12</code>å°±æ˜¯è®¡æ•°æ•°å­—ã€‚</p><p>ä½ ä½¿ç”¨å¸¦è®¡æ•°çš„ç§»åŠ¨çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-string">[è®¡æ•°]</span> + ç§»åŠ¨<br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥æŠŠè¿™ä¸ªåº”ç”¨åˆ°æ‰€æœ‰ç§»åŠ¨ä¸Šï¼Œå¦‚æœä½ æƒ³å‘å³ç§»åŠ¨9ä¸ªå­—ç¬¦ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>9l</code>æ¥ä»£æ›¿æŒ‰9æ¬¡<code>l</code>ã€‚ å½“ä½ å­¦åˆ°äº†æ›´å¤šçš„åŠ¨ä½œæ—¶ï¼Œä½ éƒ½å¯ä»¥è¯•è¯•ç»™å®šè®¡æ•°å‚æ•°ã€‚</p><h2 id="å•è¯å¯¼èˆª"><a href="#å•è¯å¯¼èˆª" class="headerlink" title="å•è¯å¯¼èˆª"></a>å•è¯å¯¼èˆª</h2><p>æˆ‘ä»¬ç°åœ¨ç§»åŠ¨ä¸€ä¸ªæ›´é•¿çš„å•å…ƒï¼šå•è¯(word)ã€‚ ä½ å¯ä»¥é€šè¿‡<code>w</code>ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å§‹ï¼Œé€šè¿‡<code>e</code>ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„ç»“å°¾ï¼Œé€šè¿‡<code>b</code>ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯çš„å¼€å§‹ï¼Œé€šè¿‡<code>ge</code>ç§»åŠ¨åˆ°å‰ä¸€ä¸ªå•è¯çš„ç»“å°¾ã€‚</p><p>å¦å¤–ï¼Œä¸ºäº†å’Œä¸Šé¢è¯´çš„å•è¯(word)åšä¸ªåŒºåˆ†ï¼Œè¿˜æœ‰ä¸€ç§ç§»åŠ¨çš„å•å…ƒï¼šè¯ç»„(WORD)ã€‚ ä½ å¯ä»¥é€šè¿‡<code>W</code>ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè¯ç»„çš„å¼€å§‹ï¼Œé€šè¿‡<code>E</code>ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè¯ç»„çš„ç»“å°¾ï¼Œé€šè¿‡<code>B</code>ç§»åŠ¨åˆ°å‰ä¸€ä¸ªè¯ç»„çš„å¼€å¤´ï¼Œé€šè¿‡<code>gE</code>ç§»åŠ¨åˆ°å‰ä¸€ä¸ªè¯ç»„çš„ç»“å°¾ã€‚ ä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©äº†è¯ç»„å’Œå•è¯è¿™ä¸¤ä¸ªè¯ï¼Œç›¸ä¼¼ä½†æœ‰äº›åŒºåˆ†ã€‚</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs armasm">wç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´<br>Wç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè¯ç»„çš„å¼€å¤´<br>eç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„ç»“å°¾<br>Eç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªè¯ç»„çš„ç»“å°¾<br><span class="hljs-keyword">b</span>ç§»åŠ¨åˆ°å‰ä¸€ä¸ªå•è¯çš„å¼€å¤´<br><span class="hljs-keyword">B</span>ç§»åŠ¨åˆ°å‰ä¸€ä¸ªè¯ç»„çš„å¼€å¤´<br><span class="hljs-symbol">ge</span>ç§»åŠ¨åˆ°å‰ä¸€ä¸ªå•è¯çš„ç»“å°¾<br><span class="hljs-symbol">gE</span>ç§»åŠ¨åˆ°å‰ä¸€ä¸ªè¯ç»„çš„ç»“å°¾<br></code></pre></td></tr></table></figure><p>è¯ç»„å’Œå•è¯åˆ°åº•æœ‰ä»€ä¹ˆç›¸åŒå’Œä¸åŒå‘¢ï¼Ÿå•è¯å’Œè¯ç»„éƒ½æŒ‰ç…§éç©ºå­—ç¬¦è¢«åˆ†å‰²ï¼Œä¸€ä¸ªå•è¯æŒ‡çš„æ˜¯ä¸€ä¸ªåªåŒ…å«<code>a-zA-Z0-9</code>å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªè¯ç»„æŒ‡çš„æ˜¯ä¸€ä¸ªåŒ…å«é™¤äº†ç©ºå­—ç¬¦(åŒ…æ‹¬ç©ºæ ¼ï¼Œtabï¼ŒEOL)ä»¥å¤–çš„å­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚ ä½ å¯ä»¥é€šè¿‡<code>:h word</code>å’Œ<code>:h WORD</code>äº†è§£æ›´å¤šã€‚</p><p>ä¾‹å¦‚ï¼Œå‡å¦‚ä½ æœ‰ä¸‹é¢è¿™æ®µå†…å®¹ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const hello <span class="hljs-operator">=</span> <span class="hljs-string">&quot;world&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>å½“ä½ å…‰æ ‡ä½äºè¿™è¡Œçš„å¼€å¤´æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡<code>l</code>èµ°åˆ°è¡Œå°¾ï¼Œä½†æ˜¯ä½ éœ€è¦æŒ‰21ä¸‹ï¼Œä½¿ç”¨<code>w</code>ï¼Œä½ éœ€è¦6ä¸‹ï¼Œä½¿ç”¨<code>W</code>åªéœ€è¦4ä¸‹ã€‚ å•è¯å’Œè¯ç»„éƒ½æ˜¯çŸ­è·ç¦»ç§»åŠ¨çš„å¾ˆå¥½çš„é€‰æ‹©ã€‚</p><p>ç„¶è€Œï¼Œä¹‹åä½ å¯ä»¥é€šè¿‡å½“å‰è¡Œå¯¼èˆªåªæŒ‰ä¸€æ¬¡ä»<code>c</code>ç§»åŠ¨åˆ°<code>;</code>ã€‚</p><h2 id="å½“å‰è¡Œå¯¼èˆª"><a href="#å½“å‰è¡Œå¯¼èˆª" class="headerlink" title="å½“å‰è¡Œå¯¼èˆª"></a>å½“å‰è¡Œå¯¼èˆª</h2><p>å½“ä½ åœ¨è¿›è¡Œç¼–è¾‘çš„æ—¶å€™ï¼Œä½ ç»å¸¸éœ€è¦æ°´å¹³åœ°åœ¨ä¸€è¡Œä¸­ç§»åŠ¨ï¼Œä½ å¯ä»¥é€šè¿‡<code>0</code>è·³åˆ°æœ¬è¡Œç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œé€šè¿‡<code>$</code>è·³åˆ°æœ¬è¡Œæœ€åä¸€ä¸ªå­—ç¬¦ã€‚ å¦å¤–ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>^</code>è·³åˆ°æœ¬è¡Œç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ï¼Œé€šè¿‡<code>g_</code>è·³åˆ°æœ¬è¡Œæœ€åä¸€ä¸ªéç©ºå­—ç¬¦ã€‚ å¦‚æœä½ æƒ³å»å½“å‰è¡Œçš„ç¬¬nåˆ—ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>n|</code>ã€‚</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-number">0</span>è·³åˆ°æœ¬è¡Œç¬¬ä¸€ä¸ªå­—ç¬¦<br>^è·³åˆ°æœ¬è¡Œç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦<br>g_      è·³åˆ°æœ¬è¡Œæœ€åä¸€ä¸ªéç©ºå­—ç¬¦<br>$è·³åˆ°æœ¬è¡Œæœ€åä¸€ä¸ªå­—ç¬¦<br><span class="hljs-built_in">n</span>|      è·³åˆ°æœ¬è¡Œç¬¬<span class="hljs-built_in">n</span>åˆ—<br></code></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥åœ¨æœ¬è¡Œé€šè¿‡<code>f</code>å’Œ<code>t</code>è¿›è¡Œè¡Œå†…æœç´¢ï¼Œ<code>f</code>å’Œ<code>t</code>çš„åŒºåˆ«åœ¨äº<code>f</code>ä¼šåœåœ¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„å­—æ¯ä¸Šï¼Œ<code>t</code>ä¼šåœåœ¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„å­—æ¯å‰ã€‚ å› æ­¤å¦‚æœä½ æƒ³è¦æœç´¢å¹¶åœç•™åœ¨â€hâ€ä¸Šï¼Œä½¿ç”¨<code>fh</code>ã€‚ å¦‚æœä½ æƒ³æœç´¢ç¬¬ä¸€ä¸ªâ€hâ€å¹¶åœç•™åœ¨å®ƒçš„å‰ä¸€ä¸ªå­—æ¯ä¸Šï¼Œå¯ä»¥ä½¿ç”¨<code>th</code>ã€‚ å¦‚æœä½ æƒ³å»ä¸‹ä¸€ä¸ªè¡Œå†…åŒ¹é…çš„ä½ç½®ï¼Œä½¿ç”¨<code>;</code>ï¼Œå¦‚æœä½ æƒ³å»å‰ä¸€ä¸ªè¡Œå†…åŒ¹é…çš„ä½ç½®ï¼Œä½¿ç”¨<code>,</code>ã€‚</p><p><code>F</code>å’Œ<code>T</code>æ˜¯<code>f</code>å’Œ<code>t</code>å¯¹åº”çš„å‘åæœç´¢ç‰ˆæœ¬ã€‚å¦‚æœæƒ³å‘å‰æœç´¢â€hâ€ï¼Œå¯ä»¥ä½¿ç”¨<code>Fh</code>ï¼Œä½¿ç”¨<code>;</code>ï¼Œä¿æŒç›¸åŒçš„æœç´¢æ–¹å‘æœç´¢ä¸‹ä¸€ä¸ªåŒ¹é…çš„å­—æ¯ã€‚ æ³¨æ„ï¼Œ<code>;</code>ä¸æ˜¯æ€»æ˜¯å‘åæœç´¢ï¼Œ<code>;</code>è¡¨ç¤ºçš„æ˜¯ä¸Šä¸€æ¬¡æœç´¢çš„æ–¹å‘ï¼Œå› æ­¤å¦‚æœä½ ä½¿ç”¨çš„<code>F</code>ï¼Œé‚£ä¹ˆä½¿ç”¨<code>;</code>æ—¶å°†ä¼šå‘å‰æœç´¢ä½¿ç”¨<code>,</code>æ—¶å‘åæœç´¢ã€‚</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs excel">f   åœ¨åŒä¸€è¡Œå‘åæœç´¢ç¬¬ä¸€ä¸ªåŒ¹é…<br>F   åœ¨åŒä¸€è¡Œå‘å‰æœç´¢ç¬¬ä¸€ä¸ªåŒ¹é…<br><span class="hljs-built_in">t</span>   åœ¨åŒä¸€è¡Œå‘åæœç´¢ç¬¬ä¸€ä¸ªåŒ¹é…ï¼Œå¹¶åœåœ¨åŒ¹é…å‰<br><span class="hljs-built_in">T</span>   åœ¨åŒä¸€è¡Œå‘å‰æœç´¢ç¬¬ä¸€ä¸ªåŒ¹é…ï¼Œå¹¶åœåœ¨åŒ¹é…å‰<br>;   åœ¨åŒä¸€è¡Œé‡å¤æœ€è¿‘ä¸€æ¬¡æœç´¢<br>,   åœ¨åŒä¸€è¡Œå‘ç›¸åæ–¹å‘é‡å¤æœ€è¿‘ä¸€æ¬¡æœç´¢<br></code></pre></td></tr></table></figure><p>å›åˆ°ä¸Šä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">const hello <span class="hljs-operator">=</span> <span class="hljs-string">&quot;world&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>å½“ä½ çš„å…‰æ ‡ä½äºè¡Œçš„å¼€å¤´æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‰ä¸€æ¬¡é”®<code>$</code>å»å¾€è¡Œå°¾çš„æœ€åä¸€ä¸ªå­—ç¬¦â€;â€ã€‚ å¦‚æœæƒ³å»å¾€â€worldâ€ä¸­çš„â€wâ€ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>fw</code>ã€‚ ä¸€ä¸ªå»ºè®®æ˜¯ï¼Œåœ¨è¡Œå†…ç›®æ ‡é™„è¿‘é€šè¿‡å¯»æ‰¾é‡å¤å‡ºç°æœ€å°‘çš„å­—æ¯ä¾‹å¦‚â€jâ€ï¼Œâ€xâ€ï¼Œâ€zâ€æ¥å‰å¾€è¡Œä¸­çš„è¯¥ä½ç½®æ›´å¿«ã€‚</p><h2 id="å¥å­å’Œæ®µè½å¯¼èˆª"><a href="#å¥å­å’Œæ®µè½å¯¼èˆª" class="headerlink" title="å¥å­å’Œæ®µè½å¯¼èˆª"></a>å¥å­å’Œæ®µè½å¯¼èˆª</h2><p>æ¥ä¸‹æ¥ä¸¤ä¸ªç§»åŠ¨çš„å•å…ƒæ˜¯å¥å­å’Œæ®µè½ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬æ¥èŠèŠå¥å­ã€‚ ä¸€ä¸ªå¥å­çš„å®šä¹‰æ˜¯ä»¥<code>.!?</code>å’Œè·Ÿç€çš„ä¸€ä¸ªæ¢è¡Œç¬¦æˆ–ç©ºæ ¼ï¼Œtabç»“å°¾çš„ã€‚ ä½ å¯ä»¥é€šè¿‡<code>)</code>å’Œ<code>(</code>è·³åˆ°ä¸‹ä¸€ä¸ªå’Œä¸Šä¸€ä¸ªå¥å­ã€‚</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-comment">(   è·³åˆ°å‰ä¸€ä¸ªå¥å­</span><br><span class="hljs-comment">)</span>   è·³åˆ°ä¸‹ä¸€ä¸ªå¥å­<br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€äº›ä¾‹å­ï¼Œä½ è§‰å¾—å“ªäº›å­—æ®µæ˜¯å¥å­å“ªäº›ä¸æ˜¯? å¯ä»¥å°è¯•åœ¨Vimä¸­ç”¨<code>(</code>å’Œ<code>)</code>æ„Ÿå—ä¸€ä¸‹ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">I</span> am <span class="hljs-selector-tag">a</span> sentence. <span class="hljs-selector-tag">I</span> am another sentence because <span class="hljs-selector-tag">I</span> end with <span class="hljs-selector-tag">a</span> period. <span class="hljs-selector-tag">I</span> am still <span class="hljs-selector-tag">a</span> sentence when ending with an exclamation point! What about question <span class="hljs-selector-tag">mark</span>? <span class="hljs-selector-tag">I</span> am not quite <span class="hljs-selector-tag">a</span> sentence because of the hyphen - and neither semicolon ; nor colon :<br><br>There is an empty line above me.<br><br></code></pre></td></tr></table></figure><p>å¦å¤–ï¼Œå¦‚æœä½ çš„Vimä¸­é‡åˆ°äº†æ— æ³•å°†ä¸€ä¸ªä»¥<code>.</code>ç»“å°¾çš„å­—æ®µå¹¶ä¸”åé¢è·Ÿç€ä¸€ä¸ªç©ºè¡Œçš„è¿™ç§æƒ…å†µåˆ¤æ–­ä¸ºä¸€ä¸ªå¥å­çš„é—®é¢˜ï¼Œä½ å¯èƒ½å¤„äº<code>compatible</code>çš„æ¨¡å¼ã€‚ è¿è¡Œ<code>:set nocompatible</code>å¯ä»¥ä¿®å¤ã€‚ åœ¨Viä¸­ï¼Œä¸€ä¸ªå¥å­æ˜¯ä»¥<strong>ä¸¤ä¸ª</strong>ç©ºæ ¼ç»“å°¾çš„ï¼Œä½ åº”è¯¥æ€»æ˜¯ä¿æŒçš„<code>nocompatible</code>çš„è®¾ç½®ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è®¨è®ºä»€ä¹ˆæ˜¯æ®µè½ã€‚ ä¸€ä¸ªæ®µè½å¯ä»¥ä»ä¸€ä¸ªç©ºè¡Œä¹‹åå¼€å§‹ï¼Œä¹Ÿå¯ä»¥ä»æ®µè½é€‰é¡¹(<code>paragraphs</code>)ä¸­â€å­—ç¬¦å¯¹â€æ‰€æŒ‡å®šçš„æ®µè½å®çš„æ¯ä¸ªé›†åˆå¼€å§‹ã€‚</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="hljs-template-variable">&#123;   è·³è½¬åˆ°ä¸Šä¸€ä¸ªæ®µè½</span><br><span class="hljs-template-variable">&#125;</span><span class="language-xml">   è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ®µè½</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯æ®µè½å®ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œé‡è¦çš„æ˜¯ä¸€ä¸ªæ®µè½æ€»æ˜¯ä»¥ä¸€ä¸ªç©ºè¡Œå¼€å§‹å’Œç»“å°¾ï¼Œ åœ¨å¤§å¤šæ•°æ—¶å€™æ€»æ˜¯å¯¹çš„ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹è¿™ä¸ªä¾‹å­ã€‚ ä½ å¯ä»¥å°è¯•ç€ä½¿ç”¨<code>&#125;</code>å’Œ<code>&#123;</code>è¿›è¡Œå¯¼èˆªï¼Œä¹Ÿå¯ä»¥è¯•ä¸€è¯•<code>()</code>è¿™æ ·çš„å¥å­å¯¼èˆªã€‚</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs applescript">Hello. How are you? I am great, thanks!<br>Vim <span class="hljs-keyword">is</span> awesome.<br>It may <span class="hljs-keyword">not</span> easy <span class="hljs-keyword">to</span> learn <span class="hljs-keyword">it</span> <span class="hljs-keyword">at</span> <span class="hljs-keyword">first</span>...- <span class="hljs-keyword">but</span> we are <span class="hljs-keyword">in</span> this together. Good luck!<br><br>Hello again.<br><br>Try <span class="hljs-keyword">to</span> move <span class="hljs-keyword">around</span> <span class="hljs-keyword">with</span> ), (, &#125;, <span class="hljs-keyword">and</span> &#123;. Feel how they work.<br>You got this.<br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥é€šè¿‡<code>:h setence</code>å’Œ<code>:h paragraph</code>äº†è§£æ›´å¤šã€‚</p><h2 id="åŒ¹é…å¯¼èˆª"><a href="#åŒ¹é…å¯¼èˆª" class="headerlink" title="åŒ¹é…å¯¼èˆª"></a>åŒ¹é…å¯¼èˆª</h2><p>ç¨‹åºå‘˜ç»å¸¸ç¼–è¾‘å«æœ‰ä»£ç çš„æ–‡ä»¶ï¼Œè¿™ç§æ–‡ä»¶å†…å®¹ä¼šåŒ…å«å¤§é‡çš„å°æ‹¬å·ï¼Œä¸­æ‹¬å·å’Œå¤§æ‹¬å·ï¼Œå¹¶ä¸”å¯èƒ½ä¼šæŠŠä½ æè¿·ç³Šä½ å½“å‰åˆ°åº•åœ¨å“ªå¯¹æ‹¬å·é‡Œã€‚ è®¸å¤šç¼–ç¨‹è¯­è¨€éƒ½ç”¨åˆ°äº†å°æ‹¬å·ï¼Œä¸­æ‹¬å·å’Œå¤§æ‹¬å·ï¼Œä½ å¯èƒ½ä¼šè¿·å¤±äºå…¶ä¸­ã€‚ å¦‚æœä½ åœ¨å®ƒä»¬ä¸­çš„æŸä¸€å¯¹æ‹¬å·ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡<code>%</code>è·³åˆ°å…¶ä¸­ä¸€ä¸ªæ‹¬å·æˆ–å¦ä¸€ä¸ªä¸Š(å¦‚æœå­˜åœ¨)ã€‚ ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹æ³•å¼„æ¸…ä½ æ˜¯å¦å„ä¸ªæ‹¬å·éƒ½æˆå¯¹åŒ¹é…äº†ã€‚</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl"><span class="hljs-comment">%    Navigate to another match, usually works for (), [], &#123;&#125;</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥çœ‹ä¸€æ®µSchemeä»£ç ç¤ºä¾‹å› ä¸ºå®ƒç”¨äº†å¤§é‡çš„å°æ‹¬å·ã€‚ ä½ å¯ä»¥åœ¨æ‹¬å·ä¸­ç”¨<code>%</code>ç§»åŠ¨</p><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scheme">(<span class="hljs-name"><span class="hljs-built_in">define</span></span> (<span class="hljs-name">fib</span> n)<br>  (<span class="hljs-name"><span class="hljs-built_in">cond</span></span> ((<span class="hljs-name"><span class="hljs-built_in">=</span></span> n <span class="hljs-number">0</span>) <span class="hljs-number">0</span>)<br>        ((<span class="hljs-name"><span class="hljs-built_in">=</span></span> n <span class="hljs-number">1</span>) <span class="hljs-number">1</span>)<br>        (<span class="hljs-name"><span class="hljs-built_in">else</span></span><br>          (<span class="hljs-name"><span class="hljs-built_in">+</span></span> (<span class="hljs-name">fib</span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> n <span class="hljs-number">1</span>)) (<span class="hljs-name">fib</span> (<span class="hljs-name"><span class="hljs-built_in">-</span></span> n <span class="hljs-number">2</span>)))<br>        )))<br></code></pre></td></tr></table></figure><p>æˆ‘ä¸ªäººå–œæ¬¢ä½¿ç”¨ç±»ä¼¼<a href="https://github.com/frazrepo/vim-rainbow">vim-rainbow</a>è¿™æ ·çš„å¯è§†åŒ–æŒ‡ç¤ºæ’ä»¶æ¥ä½œä¸º<code>%</code>çš„è¡¥å……ã€‚ é€šè¿‡<code>:h %</code>äº†è§£æ›´å¤šã€‚</p><h2 id="è¡Œå·å¯¼èˆª"><a href="#è¡Œå·å¯¼èˆª" class="headerlink" title="è¡Œå·å¯¼èˆª"></a>è¡Œå·å¯¼èˆª</h2><p>ä½ å¯ä»¥é€šè¿‡<code>nG</code>è°ƒåˆ°è¡Œå·ä¸º<code>n</code>çš„è¡Œï¼Œä¾‹å¦‚å¦‚æœä½ æƒ³è·³åˆ°ç¬¬7è¡Œï¼Œä½ å¯ä»¥ä½¿ç”¨<code>7G</code>ï¼Œè·³åˆ°ç¬¬ä¸€è¡Œä½¿ç”¨<code>gg</code>æˆ–<code>1G</code>ï¼Œè·³åˆ°æœ€åä¸€è¡Œä½¿ç”¨<code>G</code>ã€‚</p><p>æœ‰æ—¶ä½ ä¸çŸ¥é“ä½ æƒ³å»çš„ä½ç½®çš„å…·ä½“è¡Œå·ï¼Œä½†æ˜¯çŸ¥é“å®ƒå¤§æ¦‚åœ¨æ•´ä¸ªæ–‡ä»¶çš„70%å·¦å³çš„ä½ç½®ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>70%</code>è·³è¿‡å»ï¼Œå¯ä»¥ä½¿ç”¨<code>50%</code>è·³åˆ°æ–‡ä»¶çš„ä¸­é—´ã€‚</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs excel">gg      è·³è½¬åˆ°ç¬¬ä¸€è¡Œ<br>G       è·³è½¬åˆ°æœ€åä¸€è¡Œ<br>nG      è·³è½¬åˆ°ç¬¬<span class="hljs-built_in">n</span>è¡Œ<br><span class="hljs-built_in">n</span>%      è·³åˆ°æ–‡ä»¶çš„<span class="hljs-built_in">n</span>%<br></code></pre></td></tr></table></figure><p>å¦å¤–ï¼Œå¦‚æœä½ æƒ³çœ‹æ–‡ä»¶æ€»è¡Œæ•°ï¼Œå¯ä»¥ç”¨<code>CTRL-g</code>æŸ¥çœ‹ã€‚</p><h2 id="çª—æ ¼å¯¼èˆª"><a href="#çª—æ ¼å¯¼èˆª" class="headerlink" title="çª—æ ¼å¯¼èˆª"></a>çª—æ ¼å¯¼èˆª</h2><p>ä¸ºäº†ç§»åŠ¨åˆ°å½“å‰çª—æ ¼çš„é¡¶éƒ¨ï¼Œä¸­é—´ï¼Œåº•éƒ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>H</code>ï¼Œ<code>M</code>å’Œ<code>L</code>ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥ç»™<code>H</code>å’Œ<code>L</code>ä¼ ä¸€ä¸ªæ•°å­—å‰ç¼€ã€‚ å¦‚æœä½ è¾“å…¥<code>10H</code>ä½ ä¼šè·³è½¬åˆ°çª—æ ¼é¡¶éƒ¨å¾€ä¸‹æ•°10è¡Œçš„ä½ç½®ï¼Œå¦‚æœä½ è¾“å…¥<code>3L</code>ï¼Œä½ ä¼šè·³è½¬åˆ°è·ç¦»å½“å‰çª—æ ¼çš„åº•éƒ¨ä¸€è¡Œå‘ä¸Šæ•°3è¡Œçš„ä½ç½®ã€‚</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs excel">H   è·³è½¬åˆ°å±å¹•çš„é¡¶éƒ¨<br>M   è·³è½¬åˆ°å±å¹•çš„ä¸­é—´<br>L   è·³è½¬åˆ°å±å¹•çš„åº•éƒ¨<br>nH  è·³è½¬åˆ°è·ç¦»é¡¶éƒ¨<span class="hljs-built_in">n</span>è¡Œçš„ä½ç½®<br>nL  è·³è½¬åˆ°è·ç¦»åº•éƒ¨<span class="hljs-built_in">n</span>è¡Œçš„ä½ç½®<br></code></pre></td></tr></table></figure><h2 id="æ»šåŠ¨"><a href="#æ»šåŠ¨" class="headerlink" title="æ»šåŠ¨"></a>æ»šåŠ¨</h2><p>åœ¨æ–‡ä»¶ä¸­æ»šåŠ¨ï¼Œä½ æœ‰ä¸‰ç§é€Ÿåº¦å¯ä»¥é€‰æ‹©ï¼š æ»šåŠ¨ä¸€æ•´é¡µ(<code>CTRL-F</code>&#x2F;<code>CTRL-B</code>)ï¼Œæ»šåŠ¨åŠé¡µ(<code>CTRL-D</code>&#x2F;<code>CTRL-U</code>)ï¼Œæ»šåŠ¨ä¸€è¡Œ<code>CTRL-E</code>&#x2F;<code>CTRL-Y</code>)ã€‚</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">Ctrl</span>-e    å‘ä¸‹æ»šåŠ¨ä¸€è¡Œ<br><span class="hljs-symbol">Ctrl</span>-d    å‘ä¸‹æ»šåŠ¨åŠå±<br><span class="hljs-symbol">Ctrl</span>-f    å‘ä¸‹æ»šåŠ¨ä¸€å±<br><span class="hljs-symbol">Ctrl</span>-y    å‘ä¸Šæ»šåŠ¨ä¸€è¡Œ<br><span class="hljs-symbol">Ctrl</span>-u    å‘ä¸Šæ»šåŠ¨åŠå±<br><span class="hljs-symbol">Ctrl</span>-<span class="hljs-keyword">b</span>    å‘ä¸Šæ»šåŠ¨ä¸€å±<br></code></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ç›¸å¯¹å½“å‰è¡Œè¿›è¡Œæ»šåŠ¨</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">zt</span>    å°†å½“å‰è¡Œç½®äºå±å¹•é¡¶éƒ¨é™„è¿‘<br>zz    å°†å½“å‰è¡Œç½®äºå±å¹•ä¸­å¤®<br>zb    å°†å½“å‰è¡Œç½®äºå±å¹•åº•éƒ¨<br></code></pre></td></tr></table></figure><h2 id="æœç´¢å¯¼èˆª"><a href="#æœç´¢å¯¼èˆª" class="headerlink" title="æœç´¢å¯¼èˆª"></a>æœç´¢å¯¼èˆª</h2><p>é€šå¸¸ï¼Œä½ å·²ç»çŸ¥é“è¿™ä¸ªæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªå­—æ®µï¼Œä½ å¯ä»¥é€šè¿‡æœç´¢å¯¼èˆªéå¸¸å¿«é€Ÿçš„å®šä½ä½ çš„ç›®æ ‡ã€‚ ä½ å¯ä»¥é€šè¿‡<code>/</code>å‘ä¸‹æœç´¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>?</code>å‘ä¸Šæœç´¢ä¸€ä¸ªå­—æ®µã€‚ ä½ å¯ä»¥é€šè¿‡<code>n</code>é‡å¤æœ€è¿‘ä¸€æ¬¡æœç´¢ï¼Œ<code>N</code>å‘åæ–¹å‘é‡å¤æœ€è¿‘ä¸€æ¬¡æœç´¢ã€‚</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs excel">/   å‘åæœç´¢ä¸€ä¸ªåŒ¹é…<br>?   å‘å‰æœç´ ä¸€ä¸ªåŒ¹é…<br><span class="hljs-built_in">n</span>   é‡å¤ä¸Šä¸€æ¬¡æœç´¢(å’Œä¸Šä¸€æ¬¡æ–¹å‘ç›¸åŒ)<br><span class="hljs-built_in">N</span>   é‡å¤ä¸Šä¸€æ¬¡æœç´¢(å’Œä¸Šä¸€æ¬¡æ–¹å‘ç›¸å)<br></code></pre></td></tr></table></figure><p>å‡è®¾ä½ æœ‰ä¸€ä¸‹æ–‡æœ¬ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let one <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;</span><br>let two <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-comment">;</span><br><span class="hljs-attribute">one</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;01&quot;</span><span class="hljs-comment">;</span><br><span class="hljs-attribute">one</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;one&quot;</span><span class="hljs-comment">;</span><br>let onetwo <span class="hljs-operator">=</span> <span class="hljs-number">12</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥é€šè¿‡<code>/let</code>æœç´¢â€letâ€ï¼Œç„¶åé€šè¿‡<code>n</code>å¿«é€Ÿçš„é‡å¤æœç´¢ä¸‹ä¸€ä¸ªâ€letâ€ï¼Œå¦‚æœéœ€è¦å‘ç›¸åæ–¹å‘æœç´¢ï¼Œå¯ä»¥ä½¿ç”¨<code>N</code>ã€‚ å¦‚æœä½ ç”¨<code>?let</code>æœç´¢ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªå‘å‰çš„æœç´¢ï¼Œè¿™æ—¶ä½ ä½¿ç”¨<code>n</code>ï¼Œå®ƒä¼šç»§ç»­å‘å‰æœç´¢ï¼Œå°±å’Œ<code>?</code>çš„æ–¹å‘ä¸€è‡´ã€‚(<code>N</code>å°†ä¼šå‘åæœç´¢â€letâ€)ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡<code>:set hlsearch</code>è®¾ç½®æœç´¢é«˜äº®ã€‚ è¿™æ ·ï¼Œå½“ä½ æœç´¢<code>/let</code>ï¼Œå®ƒå°†é«˜äº®æ–‡ä»¶ä¸­æ‰€æœ‰åŒ¹é…çš„å­—æ®µã€‚ å¦å¤–ï¼Œå¦‚æœä½ é€šè¿‡<code>:set incsearch</code>è®¾ç½®äº†å¢é‡æœç´¢ï¼Œå®ƒå°†åœ¨ä½ è¾“å…¥æ—¶ä¸æ–­åŒ¹é…çš„è¾“å…¥çš„å†…å®¹ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒ¹é…çš„å­—æ®µä¼šä¸€ç›´é«˜äº®åˆ°ä½ æœç´¢å¦ä¸€ä¸ªå­—æ®µï¼Œè¿™æœ‰æ—¶å€™å¾ˆçƒ¦äººï¼Œå¦‚æœä½ å¸Œæœ›å–æ¶ˆé«˜äº®ï¼Œå¯ä»¥ä½¿ç”¨<code>:nohlsearch</code>ã€‚ å› ä¸ºæˆ‘ç»å¸¸ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä¼šè®¾ç½®ä¸€ä¸ªæ˜ å°„ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">nnoremap &lt;esc&gt;&lt;esc&gt; <span class="hljs-symbol">:noh&lt;return&gt;&lt;esc&gt;</span><br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥é€šè¿‡<code>*</code>å¿«é€Ÿçš„å‘å‰æœç´¢å…‰æ ‡ä¸‹çš„æ–‡æœ¬ï¼Œé€šè¿‡<code>#</code>å¿«é€Ÿå‘åæœç´¢å…‰æ ‡ä¸‹çš„æ–‡æœ¬ã€‚ å¦‚æœä½ çš„å…‰æ ‡ä½äºä¸€ä¸ªå­—ç¬¦ä¸²â€oneâ€ä¸Šï¼ŒæŒ‰ä¸‹<code>*</code>ç›¸å½“äº<code>/\&lt;one\&gt;</code>ã€‚<br><code>/\&lt;one\&gt;</code>ä¸­çš„<code>\&lt;</code>å’Œ<code>\&gt;</code>è¡¨ç¤ºæ•´è¯åŒ¹é…ï¼Œä½¿å¾—ä¸€ä¸ªæ›´é•¿çš„åŒ…å«â€oneâ€çš„å•è¯ä¸ä¼šè¢«åŒ¹é…ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šåŒ¹é…â€oneâ€ï¼Œä½†ä¸ä¼šåŒ¹é…â€onetwoâ€ã€‚ å¦‚æœä½ çš„å…‰æ ‡åœ¨â€oneâ€ä¸Šå¹¶ä¸”ä½ æƒ³å‘åæœç´¢å®Œå…¨æˆ–éƒ¨åˆ†åŒ¹é…çš„å•è¯ï¼Œä¾‹å¦‚â€oneâ€å’Œâ€onetwoâ€ï¼Œä½ å¯ä»¥ç”¨<code>g*</code>æ›¿ä»£<code>*</code>ã€‚</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs 1c">*   å‘åæŸ¥æ‰¾å…‰æ ‡æ‰€åœ¨çš„å®Œæ•´å•è¯<br><span class="hljs-meta">#   å‘å‰æŸ¥æ‰¾å…‰æ ‡æ‰€åœ¨çš„å®Œæ•´å•è¯</span><br>g*  å‘åæœç´¢å…‰æ ‡æ‰€åœ¨çš„å•è¯<br>g<span class="hljs-meta">#  å‘å‰æœç´¢å…‰æ ‡æ‰€åœ¨çš„å•è¯</span><br></code></pre></td></tr></table></figure><h2 id="ä½ç½®æ ‡è®°"><a href="#ä½ç½®æ ‡è®°" class="headerlink" title="ä½ç½®æ ‡è®°"></a>ä½ç½®æ ‡è®°</h2><p>ä½ å¯ä»¥é€šè¿‡æ ‡è®°ä¿å­˜å½“å‰ä½ç½®å¹¶åœ¨ä¹‹åå›åˆ°è¿™ä¸ªä½ç½®ï¼Œå°±åƒæ–‡æœ¬ç¼–è¾‘ä¸­çš„ä¹¦ç­¾ã€‚ ä½ å¯ä»¥é€šè¿‡<code>mx</code>è®¾ç½®ä¸€ä¸ªæ ‡è®°ï¼Œå…¶ä¸­<code>x</code>å¯ä»¥æ˜¯<code>a-zA-Z</code>ã€‚ æœ‰ä¸¤ç§åŠæ³•èƒ½å›åˆ°æ ‡è®°çš„ä½ç½®ï¼š ç”¨<code> `x</code>ç²¾ç¡®å›åˆ°(è¡Œå’Œåˆ—)ï¼Œæˆ–è€…ç”¨<code>&#39;x</code>å›åˆ°è¡Œçº§ä½ç½®ã€‚</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">ma    ç”¨<span class="hljs-keyword">a</span>æ ‡ç­¾æ ‡è®°ä¸€ä¸ªä½ç½®<br>`<span class="hljs-keyword">a</span>    ç²¾ç¡®å›åˆ°<span class="hljs-keyword">a</span>æ ‡ç­¾çš„ä½ç½®(è¡Œå’Œåˆ—)<br><span class="hljs-string">&#x27;a    è·³è½¬åˆ°aæ ‡ç­¾çš„è¡Œ</span><br></code></pre></td></tr></table></figure><p><code>a-z</code>çš„æ ‡ç­¾å’Œ<code>A-Z</code>çš„æ ‡ç­¾å­˜åœ¨ä¸€ä¸ªåŒºåˆ«ï¼Œå°å†™å­—æ¯æ˜¯å±€éƒ¨æ ‡ç­¾ï¼Œå¤§å†™å­—æ¯æ˜¯å…¨å±€æ ‡ç­¾(ä¹Ÿç§°æ–‡ä»¶æ ‡è®°)ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆè¯´è¯´å±€éƒ¨æ ‡è®°ã€‚ æ¯ä¸ªbufferå¯ä»¥æœ‰è‡ªå·±çš„ä¸€å¥—å±€éƒ¨æ ‡è®°ï¼Œå¦‚æœæ‰“å¼€äº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œæˆ‘å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­è®¾ç½®æ ‡è®°â€aâ€(<code>ma</code>)ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­è®¾ç½®å¦ä¸€ä¸ªæ ‡è®°â€aâ€(<code>ma</code>)ã€‚</p><p>ä¸åƒä½ å¯ä»¥åœ¨æ¯ä¸ªbufferä¸­è®¾ç½®ä¸€å¥—å±€éƒ¨æ ‡ç­¾ï¼Œä½ åªèƒ½è®¾ç½®ä¸€å¥—å…¨å±€æ ‡ç­¾ã€‚ å¦‚æœä½ åœ¨<code>myFile.txt</code>ä¸­è®¾ç½®äº†æ ‡ç­¾<code>mA</code>ï¼Œä¸‹ä¸€æ¬¡ä½ åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­è®¾ç½®<code>mA</code>æ—¶ï¼ŒAæ ‡ç­¾çš„ä½ç½®ä¼šè¢«è¦†ç›–ã€‚ å…¨å±€æ ‡ç­¾æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œå³ä½¿ä½ åœ¨ä¸åŒçš„é¡¹ç›®çº¢ï¼Œä½ ä¹Ÿå¯ä»¥è·³è½¬åˆ°ä»»ä½•ä¸€ä¸ªå…¨å±€æ ‡ç­¾ä¸Šï¼Œå…¨å±€æ ‡ç­¾å¯ä»¥å¸®åŠ©ä½ åœ¨æ–‡ä»¶é—´åˆ‡æ¢ã€‚</p><p>ä½¿ç”¨<code>:marks</code>æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ï¼Œä½ ä¹Ÿè®¸ä¼šæ³¨æ„åˆ°é™¤äº†<code>a-zA-Z</code>ä»¥å¤–è¿˜æœ‰åˆ«çš„æ ‡ç­¾ï¼Œå…¶ä¸­æœ‰ä¸€äº›ä¾‹å¦‚ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-string">&#x27;&#x27;</span>   åœ¨å½“å‰<span class="hljs-built_in">buffer</span>ä¸­è·³è½¬å›åˆ°ä¸Šä¸€æ¬¡è·³è½¬å‰çš„æœ€åä¸€è¡Œ<br><span class="hljs-string">``</span>  åœ¨å½“å‰<span class="hljs-built_in">buffer</span>ä¸­è·³è½¬å›åˆ°ä¸Šä¸€æ¬¡è·³è½¬å‰çš„æœ€åä¸€ä¸ªä½ç½®<br><span class="hljs-string">`[  è·³è½¬åˆ°ä¸Šä¸€æ¬¡ä¿®æ”¹æˆ–æ‹·è´çš„æ–‡æœ¬çš„å¼€å¤´</span><br><span class="hljs-string">`</span>]  è·³è½¬åˆ°ä¸Šä¸€æ¬¡ä¿®æ”¹æˆ–æ‹·è´çš„æ–‡æœ¬çš„ç»“å°¾<br><span class="hljs-string">`&lt;  è·³è½¬åˆ°æœ€è¿‘ä¸€æ¬¡å¯è§†æ¨¡å¼ä¸‹é€‰æ‹©çš„éƒ¨åˆ†çš„å¼€å¤´</span><br><span class="hljs-string">`</span>&gt;  è·³è½¬åˆ°æœ€è¿‘ä¸€æ¬¡å¯è§†æ¨¡å¼ä¸‹é€‰æ‹©çš„éƒ¨åˆ†çš„ç»“å°¾<br><span class="hljs-string">`0  è·³è½¬åˆ°é€€å‡ºVimå‰ç¼–è¾‘çš„æœ€åä¸€ä¸ªæ–‡ä»¶</span><br></code></pre></td></tr></table></figure><p>é™¤äº†ä¸Šé¢åˆ—ä¸¾çš„ï¼Œè¿˜æœ‰æ›´å¤šæ ‡è®°ï¼Œæˆ‘ä¸ä¼šåœ¨è¿™ä¸€ä¸€åˆ—ä¸¾å› ä¸ºæˆ‘è§‰å¾—å®ƒä»¬å¾ˆå°‘ç”¨åˆ°ï¼Œä¸è¿‡å¦‚æœä½ å¾ˆå¥½å¥‡ï¼Œä½ å¯ä»¥é€šè¿‡<code>: marks</code>æŸ¥çœ‹ã€‚</p><h2 id="è·³è½¬"><a href="#è·³è½¬" class="headerlink" title="è·³è½¬"></a>è·³è½¬</h2><p>æœ€åï¼Œæˆ‘ä»¬èŠèŠVimä¸­çš„è·³è½¬ä½ é€šè¿‡ä»»æ„çš„ç§»åŠ¨å¯ä»¥åœ¨ä¸åŒæ–‡ä»¶ä¸­æˆ–è€…åŒä¸€ä¸ªçš„æ–‡ä»¶çš„ä¸åŒéƒ¨åˆ†é—´è·³è½¬ã€‚ ç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç§»åŠ¨éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªè·³è½¬ã€‚ ä½¿ç”¨<code>j</code>å‘ä¸‹ç§»åŠ¨ä¸€è¡Œå°±ä¸è¢«çœ‹åšä¸€ä¸ªè·³è½¬ï¼Œå³ä½¿ä½ ä½¿ç”¨<code>10j</code>å‘ä¸‹ç§»åŠ¨10è¡Œï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªè·³è½¬ã€‚ ä½†æ˜¯ä½ é€šè¿‡<code>10G</code>å»å¾€ç¬¬10è¡Œè¢«ç®—ä½œä¸€ä¸ªè·³è½¬ã€‚</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">&#x27;   è·³è½¬åˆ°æ ‡è®°çš„è¡Œ<br>`   è·³è½¬åˆ°æ ‡è®°çš„ä½ç½®(è¡Œå’Œåˆ—)<br>G   è·³è½¬åˆ°è¡Œ<br>/   å‘åæœç´¢<br>?   å‘å‰æœç´¢<br>n   é‡å¤ä¸Šä¸€æ¬¡æœç´¢ï¼Œç›¸åŒæ–¹å‘<br>N   é‡å¤ä¸Šä¸€æ¬¡æœç´¢ï¼Œç›¸åæ–¹å‘<br>%   æŸ¥æ‰¾åŒ¹é…<br>(   è·³è½¬ä¸Šä¸€ä¸ªå¥å­<br>)   è·³è½¬ä¸‹ä¸€ä¸ªå¥å­<br>&#123;   è·³è½¬ä¸Šä¸€ä¸ªæ®µè½<br>&#125;   è·³è½¬ä¸‹ä¸€ä¸ªæ®µè½<br>L   è·³è½¬åˆ°å½“å‰å±å¹•çš„æœ€åä¸€è¡Œ<br>M   è·³è½¬åˆ°å½“å‰å±å¹•çš„ä¸­é—´<br>H   è·³è½¬åˆ°å½“å‰å±å¹•çš„ç¬¬ä¸€è¡Œ<br>[[  è·³è½¬åˆ°ä¸Šä¸€ä¸ªå°èŠ‚<br>]]  è·³è½¬åˆ°ä¸‹ä¸€ä¸ªå°èŠ‚<br>:s  æ›¿æ¢<br>:<span class="hljs-keyword">tag</span>  <span class="hljs-title">è·³è½¬åˆ°tag</span>å®šä¹‰<br></code></pre></td></tr></table></figure><p>æˆ‘ä¸å»ºè®®ä½ æŠŠä¸Šé¢è¿™ä¸ªåˆ—è¡¨è®°ä¸‹æ¥ï¼Œä¸€ä¸ªå¤§è‡´çš„è§„åˆ™æ˜¯ï¼Œä»»ä½•å¤§äºä¸€ä¸ªå•è¯æˆ–è¶…è¿‡å½“å‰è¡Œå¯¼èˆªçš„ç§»åŠ¨éƒ½å¯èƒ½æ˜¯ä¸€ä¸ªè·³è½¬ã€‚ Vimä¿ç•™äº†ä½ ç§»åŠ¨å‰ä½ç½®çš„è®°å½•ï¼Œä½ å¯ä»¥é€šè¿‡<code>:jumps</code>æŸ¥çœ‹è¿™ä¸ªåˆ—è¡¨ï¼Œå¦‚æœæƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥æŸ¥çœ‹<code>:h jump-motions</code>ã€‚</p><p>ä¸ºä»€ä¹ˆè·³è½¬æœ‰ç”¨å‘¢? å› ä¸ºä½ å¯ä»¥åœ¨è·³è½¬åˆ—è¡¨ä¸­é€šè¿‡<code>Ctrl-o</code>å’Œ<code>Ctrl-i</code>åœ¨è®°å½•ä¹‹é—´å‘ä¸Šæˆ–å‘ä¸‹è·³è½¬åˆ°å¯¹åº”ä½ç½®ã€‚ ä½ å¯ä»¥åœ¨ä¸åŒæ–‡ä»¶ä¸­è¿›è¡Œè·³è½¬ï¼Œè¿™å°†æ˜¯æˆ‘ä¹‹åä¼šè®²çš„éƒ¨åˆ†ã€‚</p><h2 id="èªæ˜åœ°å­¦ä¹ å¯¼èˆª"><a href="#èªæ˜åœ°å­¦ä¹ å¯¼èˆª" class="headerlink" title="èªæ˜åœ°å­¦ä¹ å¯¼èˆª"></a>èªæ˜åœ°å­¦ä¹ å¯¼èˆª</h2><p>å¦‚æœä½ æ˜¯Vimçš„æ–°æ‰‹ï¼Œè¿™æœ‰å¾ˆå¤šå€¼å¾—ä½ å­¦ï¼Œæˆ‘ä¸æœŸæœ›ä»»ä½•äººèƒ½å¤Ÿç«‹åˆ»è®°ä½æ¯æ ·çŸ¥è¯†ç‚¹ï¼Œåšåˆ°ä¸ç”¨æ€è€ƒå°±èƒ½æ‰§è¡Œè¿™éœ€è¦ä¸€äº›æ—¶é—´ã€‚</p><p>æˆ‘æƒ³ï¼Œæœ€å¥½çš„å¼€å§‹çš„åŠæ³•å°±æ˜¯ä»ä¸€äº›å°‘é‡çš„å¿…è¦çš„ç§»åŠ¨å¼€å§‹è®°ã€‚ æˆ‘æ¨èä½ ä»<code>h,j,k,l,w,b,G,/,?,n</code>å¼€å§‹ï¼Œä¸æ–­åœ°é‡å¤è¿™10ä¸ªç§»åŠ¨çŸ¥é“å½¢æˆè‚Œè‚‰è®°å¿†ï¼Œè¿™èŠ±ä¸äº†å¤šå°‘æ—¶é—´ã€‚</p><p>ä¸ºäº†è®©ä½ æ›´æ“…é•¿å¯¼èˆªï¼Œæˆ‘æœ‰ä¸¤ä¸ªå»ºè®®ï¼š</p><ol><li>æ³¨æ„é‡å¤çš„åŠ¨ä½œã€‚ å¦‚æœä½ å‘ç°ä½ è‡ªå·±åœ¨é‡å¤çš„ä½¿ç”¨<code>l</code>ï¼Œä½ å¯ä»¥å»æ‰¾ä¸€ä¸ªæ–¹æ³•è®©ä½ å‰è¿›çš„æ›´å¿«ï¼Œç„¶åä½ ä¼šå‘ç°ä½ å¯ä»¥ç”¨<code>w</code>åœ¨å•è¯é—´ç§»åŠ¨ã€‚ å¦‚æœä½ å‘ç°ä½ è‡ªå·±çš„é‡å¤çš„ä½¿ç”¨<code>w</code>ï¼Œä½ å¯ä»¥çœ‹çœ‹æ˜¯å¦æœ‰ä¸€ç§æ–¹æ³•èƒ½è®©ä½ ç›´æ¥åˆ°è¡Œå°¾ï¼Œç„¶åä½ ä¼šæƒ³åˆ°å¯ä»¥ç”¨<code>$</code>ã€‚ å¦‚æœä½ å¯ä»¥å£è¯­åŒ–çš„è¡¨è¾¾ä½ çš„éœ€æ±‚ï¼ŒVimä¸­å¤§æ¦‚å°±ä¼šæœ‰ä¸€ç§æ–¹æ³•å»å®Œæˆå®ƒã€‚</li><li>å½“ä½ å­¦ä¹ ä»»ä½•ä¸€ä¸ªæ–°çš„ç§»åŠ¨æ—¶ï¼Œå¤šéœ€è¦èŠ±ä¸€å®šçš„æ—¶é—´ç›´åˆ°ä½ å¯ä»¥ä¸ç»è¿‡æ€è€ƒç›´æ¥å®Œæˆå®ƒã€‚</li></ol><p>æœ€åï¼Œä¸ºäº†æé«˜æ•ˆç‡ä½ ä¸éœ€è¦çŸ¥é“æ‰€æœ‰çš„Vimçš„å‘½ä»¤ï¼Œå¤§å¤šæ•°Vimç”¨æˆ·ä¹Ÿéƒ½ä¸çŸ¥é“ï¼Œä½ åªéœ€è¦å­¦ä¹ å½“ä¸‹èƒ½å¤Ÿå¸®åŠ©ä½ å®Œæˆä»»åŠ¡çš„å‘½ä»¤ã€‚</p><p>æ…¢æ…¢æ¥ï¼Œå¯¼èˆªæŠ€å·§æ˜¯Vimä¸­å¾ˆé‡è¦çš„æŠ€å·§ï¼Œæ¯å¤©å­¦ä¸€ç‚¹å¹¶ä¸”æŠŠå®ƒå­¦å¥½ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VIM-æœç´¢å’Œæ›¿æ¢</title>
    <link href="/2022/04/05/Vim/ch12_search_and_substitute/"/>
    <url>/2022/04/05/Vim/ch12_search_and_substitute/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¬¬12ç« -æœç´¢å’Œæ›¿æ¢"><a href="#ç¬¬12ç« -æœç´¢å’Œæ›¿æ¢" class="headerlink" title="ç¬¬12ç«  æœç´¢å’Œæ›¿æ¢"></a>ç¬¬12ç«  æœç´¢å’Œæ›¿æ¢</h1><p>æœ¬ç« æ¶µç›–ä¸¤ä¸ªç‹¬ç«‹ä½†ç›¸å…³çš„æ¦‚å¿µ:æœç´¢å’Œæ›¿ä»£ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæ‚¨å¾—åŸºäºæ–‡æœ¬çš„å…±åŒæ¨¡å¼æœç´¢å¤§é‡çš„å†…å®¹ã€‚é€šè¿‡å­¦ä¹ å¦‚ä½•åœ¨æœç´¢å’Œæ›¿æ¢ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è€Œä¸æ˜¯å­—é¢å­—ç¬¦ä¸²ï¼Œæ‚¨å°†èƒ½å¤Ÿå¿«é€Ÿå®šä½ä»»ä½•æ–‡æœ¬ã€‚</p><p>é™„å¸¦è¯´æ˜ä¸€ä¸‹ï¼Œåœ¨æœ¬ç« ä¸­ï¼Œå½“è°ˆè®ºæœç´¢æ—¶ï¼Œæˆ‘å°†ä¸»è¦ä½¿ç”¨<code>/</code>ã€‚æ‚¨ä½¿ç”¨<code>/</code>è¿›è¡Œçš„æ‰€æœ‰æ“ä½œä¹Ÿå¯ä»¥ä½¿ç”¨<code>?</code>å®Œæˆã€‚</p><h2 id="æ™ºèƒ½åŒºåˆ†å¤§å°å†™"><a href="#æ™ºèƒ½åŒºåˆ†å¤§å°å†™" class="headerlink" title="æ™ºèƒ½åŒºåˆ†å¤§å°å†™"></a>æ™ºèƒ½åŒºåˆ†å¤§å°å†™</h2><p>å°è¯•åŒ¹é…æœç´¢è¯çš„å¤§å°å†™å¯èƒ½ä¼šå¾ˆæ£˜æ‰‹ã€‚å¦‚æœè¦æœç´¢æ–‡æœ¬â€Learn Vimâ€ï¼Œåˆ™å¾ˆå®¹æ˜“æŠŠå­—æ¯çš„å¤§å°å†™è¾“é”™ï¼Œä»è€Œå¾—åˆ°é”™è¯¯çš„æœç´¢ç»“æœã€‚å¦‚æœå¯ä»¥åŒ¹é…ä»»ä½•æƒ…å†µï¼Œä¼šä¸ä¼šæ›´è½»æ¾ï¼Œæ›´å®‰å…¨ï¼Ÿè¿™æ˜¯é€‰é¡¹<code>ignorecase</code>é—ªäº®çš„åœ°æ–¹ã€‚åªéœ€åœ¨ vimrc ä¸­æ·»åŠ <code>set ignorecase</code>ï¼Œæ‰€æœ‰æœç´¢è¯å°±ä¸åŒºåˆ†å¤§å°å†™ã€‚ç°åœ¨ï¼Œæ‚¨ä¸å¿…å†æ‰§è¡Œ<code>/Learn Vim</code>äº†ã€‚ <code>/learn vim</code>å°†èµ·ä½œç”¨ã€‚</p><p>ä½†æ˜¯ï¼Œæœ‰æ—¶æ‚¨éœ€è¦æœç´¢ç‰¹å®šå¤§å°å†™çš„çŸ­è¯­ã€‚ä¸€ç§æ–¹æ³•æ˜¯ç”¨ <code>set noignorecase</code> å…³é—­<code>ignorecase</code>é€‰é¡¹ï¼Œä½†æ˜¯æ¯æ¬¡éœ€è¦æœç´¢åŒºåˆ†å¤§å°å†™çš„çŸ­è¯­æ—¶ï¼Œéƒ½å¾—åå¤åœ°æ‰“å¼€å’Œå…³é—­è¿™ä¸ªé€‰é¡¹ã€‚</p><p>ä¸ºé¿å…åå¤å¼€å…³<code>ignorecase</code>é€‰é¡¹ï¼ŒVim æœ‰ä¸€ä¸ª<code>smartcase</code>é€‰é¡¹ã€‚æ‚¨å¯ä»¥å°†<code>ignorecase</code>å’Œ<code>smartcase</code>é€‰é¡¹ç»“åˆèµ·æ¥ï¼Œå½“æ‚¨è¾“å…¥çš„æœç´¢è¯å…¨éƒ¨æ˜¯å°å†™æ—¶ï¼Œè¿›è¡Œå¤§å°å†™ä¸æ•æ„Ÿæœç´¢ï¼›è€Œå½“æœç´¢è¯ <strong>è‡³å°‘æœ‰1ä¸ªå¤§å†™å­—æ¯æ—¶</strong>ï¼Œè¿›è¡Œå¤§å°å†™æ•æ„Ÿæœç´¢ã€‚</p><p>åœ¨æ‚¨çš„ vimrc ä¸­ï¼Œæ·»åŠ :</p><figure class="highlight gams"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs gams"><span class="hljs-keyword">set</span> ignorecase <span class="hljs-comment">smartcase</span><br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æœ‰è¿™äº›æ–‡å­—:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hello</span><br><span class="hljs-attribute">HELLO</span><br><span class="hljs-attribute">Hello</span><br></code></pre></td></tr></table></figure><ul><li><code>/hello</code> åŒ¹é…â€helloâ€ï¼Œâ€HELLOâ€å’Œâ€Helloâ€ã€‚</li><li><code>/HELLO</code> ä»…åŒ¹é…â€HELLOâ€ã€‚</li><li><code>/Hello</code> ä»…åŒ¹é…â€Helloâ€ã€‚</li></ul><p>æœ‰ä¸€ä¸ªç¼ºç‚¹ã€‚å› ä¸ºç°åœ¨å½“æ‚¨æ‰§è¡Œ<code>/hello</code>æ—¶ï¼ŒVim å°†è¿›è¡Œå¤§å°å†™ä¸æ•æ„Ÿæœç´¢,é‚£å¦‚æœåªéœ€è¦æœç´¢å°å†™å­—ç¬¦ä¸²æ€ä¹ˆåŠï¼Ÿæ‚¨å¯ä»¥åœ¨æœç´¢è¯å‰ä½¿ç”¨<code>\C</code>æ¨¡å¼æ¥å‘Šè¯‰ Vimï¼Œåç»­æœç´¢è¯å°†åŒºåˆ†å¤§å°å†™ã€‚å¦‚æœæ‰§è¡Œ<code>/\Chello</code>ï¼Œå®ƒå°†ä¸¥æ ¼åŒ¹é…â€helloâ€ï¼Œè€Œä¸æ˜¯â€HELLOâ€æˆ–â€Helloâ€ã€‚</p><h2 id="ä¸€è¡Œä¸­çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­—ç¬¦"><a href="#ä¸€è¡Œä¸­çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­—ç¬¦" class="headerlink" title="ä¸€è¡Œä¸­çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­—ç¬¦"></a>ä¸€è¡Œä¸­çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå­—ç¬¦</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨<code>^</code>åŒ¹é…è¡Œä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶ä½¿ç”¨<code>$</code>åŒ¹é…è¡Œä¸­çš„æœ€åä¸€ä¸ªå­—ç¬¦ã€‚</p><p>å¦‚æœæ‚¨æœ‰ä»¥ä¸‹æ–‡å­—:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hello hello</span><br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥ä½¿ç”¨<code>/^hello</code>æ¥å®šä½ç¬¬ä¸€ä¸ªâ€helloâ€ã€‚ â€˜^â€™åé¢çš„å­—ç¬¦å¿…é¡»æ˜¯ä¸€è¡Œä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ è¦å®šä½æœ€åä¸€ä¸ªâ€helloâ€ï¼Œè¯·è¿è¡Œ<code>/hello$</code>ã€‚ â€˜$â€˜ ä¹‹å‰çš„å­—ç¬¦å¿…é¡»æ˜¯ä¸€è¡Œä¸­çš„æœ€åä¸€ä¸ªå­—ç¬¦ã€‚</p><p>å¦‚æœæ‚¨æœ‰ä»¥ä¸‹æ–‡å­—:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">hello hello <span class="hljs-keyword">friend</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œ<code>/hello$</code>å°†åŒ¹é…ä¸åˆ°ä»»ä½•å†…å®¹ï¼Œå› ä¸ºâ€friendâ€æ˜¯è¯¥è¡Œçš„æœ€åä¸€é¡¹ï¼Œè€Œä¸æ˜¯â€helloâ€ã€‚</p><h2 id="é‡å¤æœç´¢"><a href="#é‡å¤æœç´¢" class="headerlink" title="é‡å¤æœç´¢"></a>é‡å¤æœç´¢</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨<code>//</code>é‡å¤ä¸Šä¸€ä¸ªæœç´¢ã€‚å¦‚æœæ‚¨åªæ˜¯æœç´¢<code>/hello</code>ï¼Œåˆ™è¿è¡Œ<code>//</code>ç­‰åŒäºè¿è¡Œ<code>/hello</code>ã€‚æ­¤å¿«æ·é”®å¯ä»¥ä¸ºæ‚¨èŠ‚çœä¸€äº›æŒ‰é”®æ“ä½œï¼Œå°¤å…¶æ˜¯åœ¨æ‚¨åˆšæœç´¢äº†ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²çš„æƒ…å†µä¸‹ã€‚å¦å¤–ï¼Œå›æƒ³ä¸€ä¸‹å‰é¢çš„ç« èŠ‚ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨<code>n</code>å’Œ<code>N</code>åˆ†åˆ«ä»¥ç›¸åŒæ–¹å‘å’Œç›¸åæ–¹å‘é‡å¤ä¸Šä¸€æ¬¡æœç´¢ã€‚</p><p>å¦‚æœæ‚¨æƒ³å¿«é€Ÿå›å¿†èµ· ç¬¬<em>n</em>ä¸ªæœ€è¿‘ä½¿ç”¨çš„æœç´¢å­—æ€ä¹ˆåŠï¼Ÿæ‚¨å¯ä»¥å…ˆæŒ‰<code>/</code>ï¼Œç„¶åæŒ‰<code>up</code>&#x2F;<code>down</code>æ–¹å‘é”®ï¼ˆæˆ–<code>Ctrl-N</code>&#x2F;<code>Ctrl-P</code>ï¼‰ï¼Œå¿«é€Ÿéå†æœç´¢å†å²ï¼Œç›´åˆ°æ‰¾åˆ°æ‰€éœ€çš„æœç´¢è¯ã€‚è¦æŸ¥çœ‹æ‰€æœ‰æœç´¢å†å²ï¼Œå¯ä»¥è¿è¡Œ<code>:history /</code>ã€‚</p><p>åœ¨æœç´¢è¿‡ç¨‹ä¸­åˆ°è¾¾æ–‡ä»¶æœ«å°¾æ—¶ï¼ŒVim ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯:<code>&quot;æœç´¢åˆ°è¾¾åº•éƒ¨,æœªæ‰¾åˆ°åŒ¹é…é¡¹:&#123;your-search&#125;&quot;</code>(<code>&quot;Search hit the BOTTOM without match for: &#123;your-search&#125;&quot;</code>)ã€‚æœ‰æ—¶è¿™ä¸ªç‰¹æ€§èƒ½æˆä¸ºä¸€ä¸ªå®‰å…¨å®ˆå«ï¼Œå¯ä»¥é˜²æ­¢è¿‡åº¦æœç´¢ï¼Œä½†æ˜¯æœ‰æ—¶æ‚¨åˆæƒ³å°†æœç´¢é‡æ–°å¾ªç¯åˆ°é¡¶éƒ¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨<code>set wrapscan</code>é€‰é¡¹ä½¿ Vim åœ¨åˆ°è¾¾æ–‡ä»¶æœ«å°¾æ—¶å›åˆ°æ–‡ä»¶é¡¶éƒ¨è¿›è¡Œæœç´¢ã€‚è¦å…³é—­æ­¤åŠŸèƒ½ï¼Œè¯·æ‰§è¡Œ<code>set nowrapscan</code>ã€‚</p><h2 id="ä½¿ç”¨å€™é€‰è¯æœç´¢"><a href="#ä½¿ç”¨å€™é€‰è¯æœç´¢" class="headerlink" title="ä½¿ç”¨å€™é€‰è¯æœç´¢"></a>ä½¿ç”¨å€™é€‰è¯æœç´¢</h2><p>ä¸€æ¬¡æœç´¢å¤šä¸ªå•è¯å±äºæ—¥å¸¸æ“ä½œã€‚ å¦‚æœæ‚¨éœ€è¦æœç´¢â€hello vimâ€æˆ–â€hola vimâ€ï¼Œè€Œä¸æ˜¯â€salve vimâ€æˆ–â€bonjour vimâ€ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>|</code>æˆ–è¿ç®—ç¬¦ã€‚</p><p>ç»™äºˆè¿™æ ·ä¸€æ®µæ–‡æœ¬:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim">hello <span class="hljs-keyword">vim</span><br>hola <span class="hljs-keyword">vim</span><br>salve <span class="hljs-keyword">vim</span><br>bonjour <span class="hljs-keyword">vim</span><br></code></pre></td></tr></table></figure><p>è¦åŒæ—¶åŒ¹é…â€helloâ€å’Œâ€holaâ€ï¼Œå¯ä»¥æ‰§è¡Œ<code>/hello\|hola</code>ã€‚ æ‚¨å¿…é¡»ä½¿ç”¨ï¼ˆ<code>\</code>ï¼‰è½¬ä¹‰ï¼ˆ<code>|</code>ï¼‰æˆ–è¿ç®—ç¬¦ï¼Œå¦åˆ™ Vim å°†æŒ‰å­—é¢æ„ä¹‰æœç´¢å­—ç¬¦ä¸²â€|â€ã€‚</p><p>å¦‚æœæ‚¨ä¸æƒ³æ¯æ¬¡éƒ½è¾“å…¥<code>\|</code>ï¼Œåˆ™å¯ä»¥åœ¨æœç´¢å¼€å§‹æ—¶ä½¿ç”¨<code>magic</code>è¯­æ³•ï¼ˆ<code>\v</code>ï¼‰:<code>/\vhello|hola</code>ã€‚ æˆ‘ä¸ä¼šåœ¨æœ¬ç« ä¸­è¯¦ç»†ä»‹ç»<code>magic</code>ï¼Œä½†æ˜¯æœ‰äº†<code>\v</code>ï¼Œæ‚¨å°±ä¸å¿…å†è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦äº†ã€‚ è¦äº†è§£æœ‰å…³<code>\v</code>çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·éšæ—¶æŸ¥çœ‹<code>:h \v</code>ã€‚</p><h2 id="è®¾ç½®æ¨¡å¼åŒ¹é…çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®"><a href="#è®¾ç½®æ¨¡å¼åŒ¹é…çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®" class="headerlink" title="è®¾ç½®æ¨¡å¼åŒ¹é…çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®"></a>è®¾ç½®æ¨¡å¼åŒ¹é…çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®</h2><p>ä¹Ÿè®¸æ‚¨éœ€è¦æœç´¢çš„æ–‡æœ¬æ˜¯å¤åˆè¯çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœæ‚¨æœ‰è¿™äº›æ–‡å­—:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-number">11</span>vi<span class="hljs-name">m22</span><br>vi<span class="hljs-name">m22</span><br><span class="hljs-number">11</span>vim<br>vim<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨ä»…éœ€è¦é€‰æ‹©ä»¥â€11â€å¼€å§‹ã€ä»¥â€22â€ç»“æŸçš„â€vimâ€ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>\zs</code>ï¼ˆå¼€å§‹åŒ¹é…ï¼‰å’Œ<code>\ze</code>ï¼ˆç»“æŸåŒ¹é…ï¼‰è¿ç®—ç¬¦ã€‚ æ‰§è¡Œ:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">/11</span>\zsvim\ze22<br></code></pre></td></tr></table></figure><p>Vimä»ç„¶ä¼šåŒ¹é…æ•´ä¸ªæ¨¡å¼â€11vim22â€ï¼Œä½†æ˜¯ä»…é«˜äº®æ˜¾ç¤ºä»‹äº<code>\zs</code>å’Œ<code>\ze</code>ä¹‹é—´çš„å†…å®¹ã€‚ å¦ä¸€ä¸ªä¾‹å­:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">foobar</span><br><span class="hljs-attribute">foobaz</span><br></code></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦åœ¨â€foobazâ€ä¸­æœç´¢â€fooâ€ï¼Œè€Œä¸æ˜¯åœ¨â€foobarâ€ä¸­æœç´¢ï¼Œè¯·è¿è¡Œ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/foo\zebaz<br></code></pre></td></tr></table></figure><h2 id="æœç´¢å­—ç¬¦ç»„"><a href="#æœç´¢å­—ç¬¦ç»„" class="headerlink" title="æœç´¢å­—ç¬¦ç»„"></a>æœç´¢å­—ç¬¦ç»„</h2><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‚¨æ‰€æœ‰çš„æœç´¢å­—éƒ½æ˜¯å­—é¢å†…å®¹ã€‚åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæ‚¨å¯èƒ½å¿…é¡»ä½¿ç”¨é€šç”¨æ¨¡å¼æ¥æŸ¥æ‰¾æ–‡æœ¬ã€‚æœ€åŸºæœ¬çš„æ¨¡å¼æ˜¯å­—ç¬¦ç»„<code>[ ]</code>ã€‚</p><p>å¦‚æœæ‚¨éœ€è¦æœç´¢ä»»ä½•æ•°å­—ï¼Œåˆ™å¯èƒ½ä¸æƒ³æ¯ä¸€æ¬¡éƒ½è¾“å…¥<code>/0\|1\|2\|3\|4\|5\|6\|7\|8\|9\|0</code>ã€‚ç›¸åï¼Œè¯·ä½¿ç”¨<code>/[0-9]</code>æ¥åŒ¹é…ä¸€ä½æ•°å­—ã€‚ <code>0-9</code>è¡¨è¾¾å¼è¡¨ç¤º Vim å°è¯•åŒ¹é…çš„æ•°å­—èŒƒå›´æ˜¯ 0-9ï¼Œå› æ­¤ï¼Œå¦‚æœè¦æŸ¥æ‰¾ 1 åˆ° 5 ä¹‹é—´çš„æ•°å­—ï¼Œè¯·ä½¿ç”¨<code>/[1-5]</code>ã€‚</p><p>æ•°å­—ä¸æ˜¯ Vim å¯ä»¥æŸ¥æ‰¾çš„å”¯ä¸€æ•°æ®ç±»å‹ã€‚æ‚¨ä¹Ÿå¯ä»¥æ‰§è¡Œ<code>/[a-z]</code>æ¥æœç´¢å°å†™å­—æ¯ï¼Œè€Œ<code>/[A-Z]</code>æ¥æœç´¢å¤§å†™å­—æ¯ã€‚</p><p>æ‚¨å¯ä»¥å°†è¿™äº›èŒƒå›´ç»„åˆåœ¨ä¸€èµ·ã€‚å¦‚æœæ‚¨éœ€è¦æœç´¢æ•°å­— 0-9 ä»¥åŠä» a åˆ° fï¼ˆåå…­è¿›åˆ¶ï¼‰çš„å°å†™å­—æ¯å’Œå¤§å†™å­—æ¯ï¼Œå¯ä»¥æ‰§è¡Œ<code>/[0-9a-fA-F]</code>ã€‚</p><p>è¦è¿›è¡Œå¦å®šæœç´¢ï¼Œå¯ä»¥åœ¨å­—ç¬¦èŒƒå›´æ‹¬å·å†…æ·»åŠ <code>^</code>ã€‚è¦æœç´¢éæ•°å­—ï¼Œè¯·è¿è¡Œ<code>/[^0-9]</code>ï¼ŒVimä¼šåŒ¹é…ä»»ä½•å­—ç¬¦ï¼Œåªè¦å®ƒä¸æ˜¯æ•°å­—å³å¯ã€‚è¯·æ³¨æ„ï¼ŒèŒƒå›´æ‹¬å·å†…çš„è„±ç¬¦å·ï¼ˆ<code>^</code>ï¼‰ä¸è¡Œé¦–ä½ç½®ç¬¦å·ï¼ˆä¾‹å¦‚:<code>/^hello</code>ï¼‰ä¸åŒã€‚å¦‚æœæ’å…¥å·åœ¨ä¸€å¯¹æ–¹æ‹¬å·ä¹‹å¤–ï¼Œå¹¶ä¸”æ˜¯æœç´¢è¯ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ™è¡¨ç¤ºâ€ä¸€è¡Œä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦â€ã€‚å¦‚æœæ’å…¥ç¬¦å·åœ¨ä¸€å¯¹æ–¹æ‹¬å·å†…ï¼Œå¹¶ä¸”æ˜¯æ–¹æ‹¬å·å†…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œåˆ™è¡¨ç¤ºå¦å®šæœç´¢è¿ç®—ç¬¦ã€‚ <code>/^abc</code>åŒ¹é…è¡Œä¸­çš„ç¬¬ä¸€ä¸ªâ€abcâ€ï¼Œè€Œ<code>/[^abc]</code>åŒ¹é…é™¤â€aâ€ï¼Œâ€bâ€æˆ–â€câ€ä»¥å¤–çš„ä»»ä½•å­—ç¬¦ã€‚</p><h2 id="æœç´¢é‡å¤å­—ç¬¦"><a href="#æœç´¢é‡å¤å­—ç¬¦" class="headerlink" title="æœç´¢é‡å¤å­—ç¬¦"></a>æœç´¢é‡å¤å­—ç¬¦</h2><p>å¦‚æœéœ€è¦åœ¨æ­¤æ–‡æœ¬ä¸­æœç´¢ä¸¤ä½æ•°:</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-number">1</span>aa<br><span class="hljs-number">11</span><span class="hljs-keyword">a</span><br><span class="hljs-number">111</span><br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥ä½¿ç”¨<code>/[0-9][0-9]</code>æ¥åŒ¹é…ä¸¤ä½æ•°å­—å­—ç¬¦ï¼Œä½†æ˜¯è¯¥æ–¹æ³•éš¾ä»¥æ‰©å±•ã€‚ å¦‚æœæ‚¨éœ€è¦åŒ¹é…äºŒåä¸ªæ•°å­—æ€ä¹ˆåŠï¼Ÿ æ‰“å­— 20 æ¬¡[[0-9]]å¹¶ä¸æ˜¯ä¸€ç§æœ‰è¶£çš„ä½“éªŒã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ‚¨éœ€è¦ä¸€ä¸ª<code>count</code>å‚æ•°ã€‚</p><p>æ‚¨å¯ä»¥å°†<code>count</code>ä¼ é€’ç»™æ‚¨çš„æœç´¢ã€‚ å®ƒå…·æœ‰ä»¥ä¸‹è¯­æ³•:</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="hljs-template-variable">&#123;n,m&#125;</span><br></code></pre></td></tr></table></figure><p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œå½“åœ¨ Vim ä¸­ä½¿ç”¨å®ƒä»¬æ—¶ï¼Œè¿™äº›<code>count</code>å‘¨å›´çš„èŠ±æ‹¬å·éœ€è¦è¢«è½¬ä¹‰ã€‚ <code>count</code> è¿ç®—ç¬¦æ”¾åœ¨æ‚¨è¦é€’å¢çš„å•ä¸ªå­—ç¬¦ä¹‹åã€‚</p><p>è¿™æ˜¯<code>count</code>è¯­æ³•çš„å››ç§ä¸åŒå˜ä½“: </p><ul><li><code>&#123;n&#125;</code>æ˜¯ç²¾ç¡®åŒ¹é…ã€‚ <code>/[0-9]\&#123;2\&#125;</code>åŒ¹é…ä¸¤ä¸ªæ•°å­—:â€11â€ï¼Œä»¥åŠâ€111â€ä¸­çš„â€11â€ã€‚</li><li><code>&#123;n,m&#125;</code>æ˜¯èŒƒå›´åŒ¹é…ã€‚ <code>/[0-9]\&#123;2,3\&#125;</code>åŒ¹é… 2 åˆ° 3 ä½æ•°å­—:â€11â€å’Œâ€111â€ã€‚ </li><li><code>&#123;,m&#125;</code>æ˜¯ä¸Šé™åŒ¹é…ã€‚ <code>/[0-9]\&#123;,3\&#125;</code>åŒ¹é…æœ€å¤š 3 ä¸ªæ•°å­—:â€1â€ï¼Œâ€11â€å’Œâ€111â€ã€‚</li><li><code>&#123;n,&#125;</code>æ˜¯ä¸‹é™åŒ¹é…ã€‚ <code>/[0-9]\&#123;2,\&#125;</code>åŒ¹é…æœ€å°‘ 2 ä¸ªæˆ–å¤šä¸ªæ•°å­—:â€11â€å’Œâ€111â€ã€‚</li></ul><p>è®¡æ•°å‚æ•°<code>\&#123;0,\&#125;</code>ï¼ˆé›¶æˆ–å¤šä¸ªï¼‰å’Œ<code>\&#123;1,\&#125;</code>ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰æ˜¯æœ€å¸¸è§çš„æœç´¢æ¨¡å¼ï¼ŒVim ä¸ºå®ƒä»¬æä¾›äº†ç‰¹æ®Šçš„æ“ä½œç¬¦:<code>*</code>å’Œ<code>+</code>ï¼ˆ <code>+</code>éœ€è¦è¢«è½¬ä¹‰ï¼Œè€Œ<code>*</code> å¯ä»¥æ­£å¸¸è¿è¡Œè€Œæ— éœ€è½¬ä¹‰ï¼‰ã€‚ å¦‚æœæ‰§è¡Œ<code>/[0-9]*</code>ï¼ŒåŠŸèƒ½ä¸<code>/[0-9]\&#123;0,\&#125;</code>ç›¸åŒã€‚ å®ƒæœç´¢é›¶ä¸ªæˆ–å¤šä¸ªæ•°å­—ï¼Œä¼šåŒ¹é…â€â€ï¼Œâ€1â€ï¼Œâ€123â€ã€‚ é¡ºä¾¿è¯´ä¸€å¥ï¼Œå®ƒä¹Ÿå°†åŒ¹é…éæ•°å­—ï¼Œä¾‹å¦‚â€aâ€ï¼Œå› ä¸ºåœ¨æŠ€æœ¯ä¸Šï¼Œå­—æ¯â€aâ€ä¸­çš„æ•°å­—ä¸ªæ•°ä¸ºé›¶ã€‚ åœ¨ä½¿ç”¨â€*â€œä¹‹å‰ï¼Œè¯·ä»”ç»†è€ƒè™‘ã€‚ å¦‚æœæ‰§è¡Œ<code>/[0-9]\+</code>ï¼Œåˆ™ä¸<code>/[0-9]\&#123;1,\&#125;</code>ç›¸åŒã€‚ å®ƒæœç´¢ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—ï¼Œå°†åŒ¹é…â€1â€å’Œâ€12â€ã€‚</p><h2 id="é¢„å®šä¹‰çš„å­—ç¬¦ç»„"><a href="#é¢„å®šä¹‰çš„å­—ç¬¦ç»„" class="headerlink" title="é¢„å®šä¹‰çš„å­—ç¬¦ç»„"></a>é¢„å®šä¹‰çš„å­—ç¬¦ç»„</h2><p>Vim ä¸ºå¸¸è§å­—ç¬¦ç»„ï¼ˆä¾‹å¦‚æ•°å­—å’Œå­—æ¯ï¼‰æä¾›äº†ç®€å†™ã€‚ æˆ‘ä¸ä¼šåœ¨è¿™é‡Œé€ä¸€ä»‹ç»ï¼Œä½†å¯ä»¥åœ¨<code>:h /character-classes</code>ä¸­æ‰¾åˆ°å®Œæ•´åˆ—è¡¨ã€‚ ä¸‹é¢æ˜¯æœ‰ç”¨çš„éƒ¨åˆ†:</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livescript"><span class="hljs-string">\d</span>    æ•°å­—[<span class="hljs-number">0</span>-<span class="hljs-number">9</span>]<br><span class="hljs-string">\D</span>    éæ•°å­—[^ <span class="hljs-number">0</span>-<span class="hljs-number">9</span>]<br><span class="hljs-string">\s</span>    ç©ºæ ¼å­—ç¬¦ï¼ˆç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼‰<br><span class="hljs-string">\S</span>    éç©ºç™½å­—ç¬¦ï¼ˆé™¤ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦ï¼‰<br><span class="hljs-string">\w</span>    å•è¯å­—ç¬¦[<span class="hljs-number">0</span>-<span class="hljs-number">9</span>A-Za-z_]<br><span class="hljs-string">\l</span>    å°å†™å­—æ¯[a-z]<br><span class="hljs-string">\u</span>    å¤§å†™å­—ç¬¦[A-Z]<br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥åƒä½¿ç”¨æ™®é€šå­—ç¬¦ç»„ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚ è¦æœç´¢ä»»ä½•ä¸€ä½æ•°å­—ï¼Œå¯ä»¥ä½¿ç”¨<code>/\d</code>ä»¥è·å¾—æ›´ç®€æ´çš„è¯­æ³•ï¼Œè€Œä¸ä½¿ç”¨<code>/[0-9]</code>ã€‚</p><h2 id="æœç´¢ç¤ºä¾‹ï¼šåœ¨ä¸€å¯¹ç›¸ä¼¼å­—ç¬¦ä¹‹é—´æ•è·æ–‡æœ¬"><a href="#æœç´¢ç¤ºä¾‹ï¼šåœ¨ä¸€å¯¹ç›¸ä¼¼å­—ç¬¦ä¹‹é—´æ•è·æ–‡æœ¬" class="headerlink" title="æœç´¢ç¤ºä¾‹ï¼šåœ¨ä¸€å¯¹ç›¸ä¼¼å­—ç¬¦ä¹‹é—´æ•è·æ–‡æœ¬"></a>æœç´¢ç¤ºä¾‹ï¼šåœ¨ä¸€å¯¹ç›¸ä¼¼å­—ç¬¦ä¹‹é—´æ•è·æ–‡æœ¬</h2><p>å¦‚æœè¦æœç´¢ç”±åŒå¼•å·å¼•èµ·æ¥çš„çŸ­è¯­:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;Vim is awesome!&quot;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œè¿™ä¸ª:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">`/<span class="hljs-string">&quot;[^&quot;</span>]\+<span class="hljs-string">&quot;`</span><br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹:</p><ul><li><code>&quot;</code> æ˜¯å­—é¢åŒå¼•å·ã€‚å®ƒåŒ¹é…ç¬¬ä¸€ä¸ªåŒå¼•å·ã€‚</li><li><code>[^&quot;]</code> è¡¨ç¤ºé™¤åŒå¼•å·å¤–çš„ä»»ä½•å­—ç¬¦ï¼Œåªè¦ä¸æ˜¯åŒå¼•å·ï¼Œå®ƒå°±ä¸ä»»ä½•å­—æ¯æ•°å­—å’Œç©ºæ ¼å­—ç¬¦åŒ¹é…ã€‚</li><li><code>\+</code>è¡¨ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªã€‚å› ä¸ºå®ƒçš„å‰é¢æ˜¯<code>[^&quot;]</code>ï¼Œå› æ­¤ Vim æŸ¥æ‰¾ä¸€ä¸ªæˆ–å¤šä¸ªä¸æ˜¯åŒå¼•å·çš„å­—ç¬¦ã€‚</li><li><code>&quot;</code> æ˜¯å­—é¢åŒå¼•å·ã€‚å®ƒä¸å³åŒå¼•å·åŒ¹é…ã€‚</li></ul><p>å½“çœ‹åˆ°ç¬¬ä¸€ä¸ª<code>&quot;</code>æ—¶ï¼Œå®ƒå¼€å§‹æ¨¡å¼æ•è·ã€‚Vim åœ¨ä¸€è¡Œä¸­çœ‹åˆ°ç¬¬äºŒä¸ªåŒå¼•å·æ—¶ï¼Œå®ƒåŒ¹é…ç¬¬äºŒä¸ª<code>&quot;</code>æ¨¡å¼å¹¶åœæ­¢æ¨¡å¼æ•è·ã€‚åŒæ—¶ï¼Œä¸¤ä¸ªåŒå¼•å·ä¹‹é—´çš„æ‰€æœ‰éåŒå¼•å·å­—ç¬¦éƒ½è¢«<code>[^&quot;]\+</code> æ¨¡å¼æ•è·ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯çŸ­è¯­â€Vim is awesome!â€ã€‚è¿™æ˜¯ä¸€ä¸ªé€šç”¨æ¨¡å¼ï¼ˆå…¶å®å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼‰ç”¨äºæ•è· <strong>ç”±ä¸€å¯¹ç±»ä¼¼çš„å®šç•Œç¬¦åŒ…å›´çš„çŸ­è¯­</strong>ã€‚</p><ul><li>è¦æ•è·è¢«å•å¼•å·åŒ…å›´çš„çŸ­è¯­ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>/&#39;[^&#39;]\+&#39;</code></li><li>è¦æ•è·ä¸º0åŒ…å›´çš„çŸ­è¯­ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>/0[^0]\+0</code></li></ul><h2 id="æœç´¢ç¤ºä¾‹ï¼šæ•è·ç”µè¯å·ç "><a href="#æœç´¢ç¤ºä¾‹ï¼šæ•è·ç”µè¯å·ç " class="headerlink" title="æœç´¢ç¤ºä¾‹ï¼šæ•è·ç”µè¯å·ç "></a>æœç´¢ç¤ºä¾‹ï¼šæ•è·ç”µè¯å·ç </h2><p>å¦‚æœè¦åŒ¹é…ä»¥è¿å­—ç¬¦(<code>-</code>)åˆ†éš”çš„ç¾å›½ç”µè¯å·ç ï¼Œä¾‹å¦‚<code>123-456-7890</code>ï¼Œåˆ™å¯ä»¥ä½¿ç”¨:</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">/\d\</span><span class="hljs-template-variable">&#123;3\&#125;</span><span class="language-xml">-\d\</span><span class="hljs-template-variable">&#123;3\&#125;</span><span class="language-xml">-\d\</span><span class="hljs-template-variable">&#123;4\&#125;</span><br></code></pre></td></tr></table></figure><p>ç¾å›½ç”µè¯å·ç çš„ç»„æˆæ˜¯ï¼šé¦–å…ˆæ˜¯ä¸‰ä½æ•°å­—ï¼Œå…¶åæ˜¯å¦å¤–ä¸‰ä½æ•°å­—ï¼Œæœ€åæ˜¯å¦å¤–å››ä½æ•°å­—ã€‚ è®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹:</p><ul><li><code>\d\&#123;3\&#125;</code>ä¸ç²¾ç¡®é‡å¤ä¸‰æ¬¡çš„æ•°å­—åŒ¹é…</li><li><code>-</code>æ˜¯å­—é¢çš„è¿å­—ç¬¦</li></ul><p>ä¸ºé¿å…è½¬ä¹‰ï¼Œå¯ä½¿ç”¨<code>\v</code>:</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">/\v\d</span><span class="hljs-template-variable">&#123;3&#125;</span><span class="language-xml">-\d</span><span class="hljs-template-variable">&#123;3&#125;</span><span class="language-xml">-\d</span><span class="hljs-template-variable">&#123;4&#125;</span><br></code></pre></td></tr></table></figure><p>æ­¤æ¨¡å¼è¿˜å¯ç”¨äºæ•è·ä»»ä½•é‡å¤çš„æ•°å­—ï¼Œä¾‹å¦‚ IP åœ°å€å’Œé‚®æ”¿ç¼–ç ã€‚</p><p>è¿™æ¶µç›–äº†æœ¬ç« çš„æœç´¢éƒ¨åˆ†ã€‚ ç°åœ¨å¼€å§‹è®²æ›¿æ¢ã€‚</p><h2 id="åŸºæœ¬æ›¿æ¢"><a href="#åŸºæœ¬æ›¿æ¢" class="headerlink" title="åŸºæœ¬æ›¿æ¢"></a>åŸºæœ¬æ›¿æ¢</h2><p>Vim çš„æ›¿ä»£å‘½ä»¤æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å‘½ä»¤ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾å’Œæ›¿æ¢ä»»ä½•æ¨¡å¼ã€‚ æ›¿æ¢è¯­æ³•ä¸º:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:s<span class="hljs-regexp">/&#123;old-pattern&#125;/</span>&#123;<span class="hljs-keyword">new</span>-pattern&#125;/<br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªåŸºæœ¬ç”¨æ³•å¼€å§‹ã€‚ å¦‚æœæ‚¨æœ‰ä»¥ä¸‹æ–‡å­—:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> good<br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬ç”¨â€awesomeâ€ä»£æ›¿â€goodâ€ï¼Œå› ä¸º Vim å¾ˆæ£’ã€‚ è¿è¡Œ<code>:s/good/awesome/.</code>æ‚¨åº”è¯¥çœ‹åˆ°:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> <span class="hljs-keyword">is</span> awesome<br></code></pre></td></tr></table></figure><h2 id="é‡å¤æœ€åä¸€æ¬¡æ›¿æ¢"><a href="#é‡å¤æœ€åä¸€æ¬¡æ›¿æ¢" class="headerlink" title="é‡å¤æœ€åä¸€æ¬¡æ›¿æ¢"></a>é‡å¤æœ€åä¸€æ¬¡æ›¿æ¢</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨æ™®é€šæ¨¡å¼å‘½ä»¤<code>&amp;</code>æˆ–è¿è¡Œ<code>:s</code>æ¥é‡å¤æœ€åä¸€ä¸ªæ›¿ä»£å‘½ä»¤ã€‚ å¦‚æœæ‚¨åˆšåˆšè¿è¡Œ<code>:s/good/awesome/</code>ï¼Œåˆ™è¿è¡Œ<code>&amp;</code>æˆ–<code>:s</code>å°†ä¼šé‡å¤æ‰§è¡Œã€‚</p><p>å¦å¤–ï¼Œåœ¨æœ¬ç« å‰é¢ï¼Œæˆ‘æåˆ°æ‚¨å¯ä»¥ä½¿ç”¨<code>//</code>æ¥é‡å¤å…ˆå‰çš„æœç´¢æ¨¡å¼ã€‚ æ­¤æŠ€å·§å¯ç”¨äºæ›¿ä»£å‘½ä»¤ã€‚ å¦‚æœ<code>/good</code>æ˜¯æœ€è¿‘è¢«æ›¿æ¢çš„å•è¯ï¼Œé‚£ä¹ˆå°†ç¬¬ä¸€ä¸ªæ›¿æ¢æ¨¡å¼å‚æ•°ç•™ä¸ºç©ºç™½ï¼Œä¾‹å¦‚åœ¨<code>:s//awesome/</code>ä¸­ï¼Œåˆ™ä¸è¿è¡Œ<code>:s/good/awesome/</code>ç›¸åŒã€‚</p><h2 id="æ›¿æ¢èŒƒå›´"><a href="#æ›¿æ¢èŒƒå›´" class="headerlink" title="æ›¿æ¢èŒƒå›´"></a>æ›¿æ¢èŒƒå›´</h2><p>å°±åƒè®¸å¤š Ex å‘½ä»¤ä¸€æ ·ï¼Œæ‚¨å¯ä»¥å°†èŒƒå›´å‚æ•°ä¼ é€’ç»™æ›¿æ¢å‘½ä»¤ã€‚ è¯­æ³•ä¸º:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">:[range]s<span class="hljs-regexp">/old/</span><span class="hljs-keyword">new</span>/<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æœ‰ä»¥ä¸‹è¡¨è¾¾å¼:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let one <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;</span><br>let two <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-comment">;</span><br>let three <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-comment">;</span><br>let four <span class="hljs-operator">=</span> <span class="hljs-number">4</span><span class="hljs-comment">;</span><br>let five <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è¦å°†ç¬¬3è¡Œåˆ°ç¬¬5è¡Œä¸­çš„â€letâ€æ›¿æ¢ä¸ºâ€constâ€ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œ:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:<span class="hljs-number">3</span>,<span class="hljs-number">5</span>s<span class="hljs-regexp">/let/</span>const/<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€äº›ä½ å¯ä»¥ä½¿ç”¨çš„èŒƒå›´å‚æ•°çš„å˜ä½“:</p><ul><li><code>:,3/let/const/</code> - å¦‚æœé€—å·å‰æ²¡æœ‰ç»™å‡ºä»»ä½•å†…å®¹ï¼Œåˆ™è¡¨ç¤ºå½“å‰è¡Œã€‚ ä»å½“å‰è¡Œæ›¿æ¢åˆ°ç¬¬ 3 è¡Œã€‚</li><li><code>:1,s/let/const/</code> - å¦‚æœé€—å·åæ²¡æœ‰ç»™å‡ºä»»ä½•å†…å®¹ï¼Œå®ƒä¹Ÿä»£è¡¨å½“å‰è¡Œã€‚ ä»ç¬¬ 1 è¡Œæ›¿æ¢åˆ°å½“å‰è¡Œã€‚</li><li><code>:3s/let/const/</code> - å¦‚æœä»…ç»™å‡ºä¸€ä¸ªå€¼ä½œä¸ºèŒƒå›´ï¼ˆä¸å¸¦é€—å·ï¼‰ï¼Œåˆ™ä»…åœ¨è¯¥è¡Œè¿›è¡Œæ›¿æ¢ã€‚</li></ul><p>åœ¨ Vim ä¸­ï¼Œ<code>%</code>é€šå¸¸è¡¨ç¤ºæ•´ä¸ªæ–‡ä»¶ã€‚ å¦‚æœè¿è¡Œ<code>:%s/let/const/</code>ï¼Œå®ƒå°†åœ¨æ‰€æœ‰è¡Œä¸Šè¿›è¡Œæ›¿æ¢ã€‚è¯·è®°ä½è¿™ä¸ªèŒƒå›´å‚æ•°è¯­æ³•ï¼Œåœ¨åé¢ç« èŠ‚ä¸­å¾ˆå¤šå‘½ä»¤è¡Œå‘½ä»¤éƒ½éµå¾ªè¿™ä¸ªè¯­æ³•ã€‚</p><h2 id="æ¨¡å¼åŒ¹é…"><a href="#æ¨¡å¼åŒ¹é…" class="headerlink" title="æ¨¡å¼åŒ¹é…"></a>æ¨¡å¼åŒ¹é…</h2><p>æ¥ä¸‹æ¥çš„å‡ èŠ‚å°†ä»‹ç»åŸºæœ¬çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ ä¸°å¯Œçš„æ¨¡å¼çŸ¥è¯†å¯¹äºæŒæ¡æ›¿æ¢å‘½ä»¤è‡³å…³é‡è¦ã€‚</p><p>å¦‚æœæ‚¨å…·æœ‰ä»¥ä¸‹è¡¨è¾¾å¼:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let one <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;</span><br>let two <span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-comment">;</span><br>let three <span class="hljs-operator">=</span> <span class="hljs-number">3</span><span class="hljs-comment">;</span><br>let four <span class="hljs-operator">=</span> <span class="hljs-number">4</span><span class="hljs-comment">;</span><br>let five <span class="hljs-operator">=</span> <span class="hljs-number">5</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è¦åœ¨æ•°å­—å‘¨å›´æ·»åŠ ä¸€å¯¹åŒå¼•å·:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:%s/</span>\d/<span class="hljs-string">&quot;\0&quot;</span>/<br></code></pre></td></tr></table></figure><p>ç»“æœ:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let one <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-comment">;</span><br>let two <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-comment">;</span><br>let three <span class="hljs-operator">=</span> <span class="hljs-string">&quot;3&quot;</span><span class="hljs-comment">;</span><br>let four <span class="hljs-operator">=</span> <span class="hljs-string">&quot;4&quot;</span><span class="hljs-comment">;</span><br>let five <span class="hljs-operator">=</span> <span class="hljs-string">&quot;5&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹å‘½ä»¤:</p><ul><li><code>:%s</code> å®šä½æ•´ä¸ªæ–‡ä»¶ä»¥æ‰§è¡Œæ›¿æ¢ã€‚</li><li><code>\d</code> æ˜¯ Vim çš„é¢„å®šä¹‰æ•°å­—èŒƒå›´ç®€å†™(ç±»ä¼¼ä½¿ç”¨<code>[0-9]</code>)ã€‚</li><li><code>&quot;\0&quot;</code> åŒå¼•å·æ˜¯åŒå¼•å·çš„å­—é¢å€¼ã€‚ <code>\0</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œä»£è¡¨â€æ•´ä¸ªåŒ¹é…çš„æ¨¡å¼â€ã€‚ æ­¤å¤„åŒ¹é…çš„æ¨¡å¼æ˜¯å•ä¸ªæ•°å­—<code>\d</code>ã€‚</li></ul><p>å¦å¤–ï¼Œ<code>&amp;</code>ä¹ŸåŒæ ·ä»£è¡¨â€æ•´ä¸ªåŒ¹é…çš„æ¨¡å¼â€ï¼Œå°±åƒ<code>\0</code>ä¸€æ ·ã€‚ <code>:s/\d/&quot;&amp;&quot;/</code>ä¹Ÿå¯ä»¥ã€‚</p><p>è®©æˆ‘ä»¬è€ƒè™‘å¦ä¸€ä¸ªä¾‹å­ã€‚ ç»™å‡ºä»¥ä¸‹è¡¨è¾¾å¼ï¼Œæ‚¨éœ€è¦å°†æ‰€æœ‰çš„â€letâ€å’Œå˜é‡åäº¤æ¢ä½ç½®:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">one let <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-comment">;</span><br>two let <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-comment">;</span><br>three let <span class="hljs-operator">=</span> <span class="hljs-string">&quot;3&quot;</span><span class="hljs-comment">;</span><br>four let <span class="hljs-operator">=</span> <span class="hljs-string">&quot;4&quot;</span><span class="hljs-comment">;</span><br>five let <span class="hljs-operator">=</span> <span class="hljs-string">&quot;5&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>ä¸ºæ­¤ï¼Œè¯·è¿è¡Œ:</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs taggerscript">:%s/<span class="hljs-symbol">\(</span>\w\+<span class="hljs-symbol">\)</span> <span class="hljs-symbol">\(</span>\w\+<span class="hljs-symbol">\)</span>/\2 \1/<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‘½ä»¤åŒ…å«å¤ªå¤šçš„åæ–œæ ï¼Œå¾ˆéš¾é˜…è¯»ã€‚ ä½¿ç”¨<code>\v</code>è¿ç®—ç¬¦æ›´æ–¹ä¾¿:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:%s/</span>\v(\w+) (\w+)/\<span class="hljs-number">2</span> \<span class="hljs-number">1</span>/<br></code></pre></td></tr></table></figure><p>ç»“æœ:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let one <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-comment">;</span><br>let two <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-comment">;</span><br>let three <span class="hljs-operator">=</span> <span class="hljs-string">&quot;3&quot;</span><span class="hljs-comment">;</span><br>let four <span class="hljs-operator">=</span> <span class="hljs-string">&quot;4&quot;</span><span class="hljs-comment">;</span><br>let five <span class="hljs-operator">=</span> <span class="hljs-string">&quot;5&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>å¤ªå¥½äº†ï¼ è®©æˆ‘ä»¬åˆ†è§£è¯¥å‘½ä»¤:</p><ul><li><code>:%s</code> å®šä½æ–‡ä»¶ä¸­çš„æ‰€æœ‰è¡Œä»¥æ‰§è¡Œæ›¿æ¢æ“ä½œ</li><li><code>(\w+) (\w+)</code>å¯¹æ¨¡å¼è¿›è¡Œåˆ†ç»„ã€‚<code>\w</code>æ˜¯ Vim é¢„å®šä¹‰çš„å•è¯å­—ç¬¦èŒƒå›´ç®€å†™(<code>[0-9A-Za-z_]</code>)ä¹‹ä¸€ã€‚ åŒ…å›´<code>\w</code>çš„<code>()</code>å°†åŒ¹é…çš„å•è¯å­—ç¬¦è¿›è¡Œåˆ†ç»„ã€‚ è¯·æ³¨æ„ä¸¤ä¸ªåˆ†ç»„ä¹‹é—´çš„ç©ºé—´ã€‚ <code>(\w+) (\w+)</code> æ•è·ä¸¤ä¸ªåˆ†ç»„ã€‚ åœ¨ç¬¬ä¸€è¡Œä¸Šï¼Œç¬¬ä¸€ç»„æ•è·â€letâ€ï¼Œç¬¬äºŒç»„æ•è·â€oneâ€ã€‚(è‹±æ–‡ç‰ˆä¸­ï¼Œä½œè€…å†™æˆäº†ï¼šç¬¬ä¸€ç»„æ•è·â€oneâ€ï¼Œç¬¬äºŒç»„æ•è·â€twoâ€ï¼Œå¯èƒ½æ˜¯ä½œè€…ä¸å°å¿ƒçš„é”™è¯¯)ã€‚</li><li><code>\2 \1</code> ä»¥ç›¸åçš„é¡ºåºè¿”å›æ•è·çš„ç»„ã€‚ <code>\2</code>åŒ…å«æ•è·çš„å­—ç¬¦ä¸²â€letâ€ï¼Œè€Œ<code>\1</code>åŒ…å«å­—ç¬¦ä¸²â€oneâ€ã€‚ ä½¿<code>\2 \1</code>è¿”å›å­—ç¬¦ä¸²â€let oneâ€ã€‚</li></ul><p>å›æƒ³ä¸€ä¸‹ï¼Œ<code>\0</code>ä»£è¡¨æ•´ä¸ªåŒ¹é…çš„æ¨¡å¼ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨<code>( )</code>å°†åŒ¹é…çš„å­—ç¬¦ä¸²åˆ†æˆè¾ƒå°çš„ç»„ã€‚ æ¯ä¸ªç»„éƒ½ç”±<code>\1</code>, <code>\2</code>, <code>\3</code>ç­‰è¡¨ç¤ºã€‚</p><p>è®©æˆ‘ä»¬å†ä¸¾ä¸€ä¸ªä¾‹å­æ¥å·©å›ºè¿™ä¸€åŒ¹é…åˆ†ç»„çš„æ¦‚å¿µã€‚ å¦‚æœæ‚¨æœ‰ä»¥ä¸‹æ•°å­—:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">123<br>456<br>789<br></code></pre></td></tr></table></figure><p>è¦é¢ å€’é¡ºåºï¼Œè¯·è¿è¡Œ:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">:<span class="hljs-meta">%</span>s/\v<span class="hljs-comment">(\d)</span><span class="hljs-comment">(\d)</span><span class="hljs-comment">(\d)</span>/\<span class="hljs-number">3</span>\<span class="hljs-number">2</span>\<span class="hljs-number">1</span>/<br></code></pre></td></tr></table></figure><p>ç»“æœæ˜¯:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">321<br>654<br>987<br></code></pre></td></tr></table></figure><p>æ¯ä¸ª<code>(\d)</code>éƒ½åŒ¹é…ä¸€ä¸ªæ•°å­—å¹¶åˆ›å»ºä¸€ä¸ªåˆ†ç»„ã€‚ åœ¨ç¬¬ä¸€è¡Œä¸Šï¼Œç¬¬ä¸€ä¸ª<code>(\d)</code>çš„å€¼ä¸ºâ€1â€ï¼Œç¬¬äºŒä¸ª<code>(\d)</code>çš„å€¼ä¸ºâ€2â€ï¼Œç¬¬ä¸‰ä¸ª<code>(\d)</code>çš„å€¼ä¸ºâ€3â€ã€‚ å®ƒä»¬å­˜å‚¨åœ¨å˜é‡<code>\1</code>ï¼Œ<code>\2</code>å’Œ<code>\3</code>ä¸­ã€‚ åœ¨æ›¿æ¢çš„ååŠéƒ¨åˆ†ï¼Œæ–°æ¨¡å¼<code>\3\2\1</code>åœ¨ç¬¬ä¸€è¡Œä¸Šäº§ç”Ÿâ€321â€å€¼ã€‚</p><p>ç›¸åï¼Œå¦‚æœæ‚¨è¿è¡Œä¸‹é¢çš„å‘½ä»¤:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:%s/</span>\v(\d\d)(\d)/\<span class="hljs-number">2</span>\<span class="hljs-number">1</span>/<br></code></pre></td></tr></table></figure><p>æ‚¨å°†è·å¾—ä¸åŒçš„ç»“æœ:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs">312<br>645<br>978<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºæ‚¨ç°åœ¨åªæœ‰ä¸¤ä¸ªç»„ã€‚ è¢«<code>(\d\d)</code>æ•è·çš„ç¬¬ä¸€ç»„å­˜å‚¨åœ¨<code>\1</code>å†…ï¼Œå…¶å€¼ä¸ºâ€12â€ã€‚ ç”±<code>(\d)</code>æ•è·çš„ç¬¬äºŒç»„å­˜å‚¨åœ¨<code>\2</code>å†…éƒ¨ï¼Œå…¶å€¼ä¸ºâ€3â€ã€‚ ç„¶åï¼Œ<code>\2\1</code>è¿”å›â€312â€ã€‚</p><h2 id="æ›¿æ¢æ ‡å¿—"><a href="#æ›¿æ¢æ ‡å¿—" class="headerlink" title="æ›¿æ¢æ ‡å¿—"></a>æ›¿æ¢æ ‡å¿—</h2><p>å¦‚æœæ‚¨æœ‰ä»¥ä¸‹å¥å­:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">chocolate pancake, strawberry pancake, <span class="hljs-keyword">blueberry </span>pancake<br></code></pre></td></tr></table></figure><p>è¦å°†æ‰€æœ‰ pancakes æ›¿æ¢ä¸º donutï¼Œæ‚¨ä¸èƒ½åªè¿è¡Œ:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:s/pancake/donut</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‘½ä»¤å°†ä»…æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œè¿”å›çš„ç»“æœæ˜¯:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">chocolate donut, strawberry pancake, <span class="hljs-keyword">blueberry </span>pancake<br></code></pre></td></tr></table></figure><p>æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ã€‚ ä¸€ï¼Œæ‚¨å¯ä»¥å†è¿è¡Œä¸¤æ¬¡æ›¿ä»£å‘½ä»¤ã€‚ äºŒï¼Œæ‚¨å¯ä»¥å‘å…¶ä¼ é€’å…¨å±€(<code>g</code>)æ ‡å¿—æ¥æ›¿æ¢ä¸€è¡Œä¸­çš„æ‰€æœ‰åŒ¹é…é¡¹ã€‚</p><p>è®©æˆ‘ä»¬è°ˆè°ˆå…¨å±€æ ‡å¿—ã€‚ è¿è¡Œ:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:s/pancake/donut/g</span><br></code></pre></td></tr></table></figure><p>Vim è¿…é€Ÿå°†æ‰€æœ‰â€pancakeâ€æ›¿æ¢ä¸ºâ€donutâ€ã€‚ å…¨å±€å‘½ä»¤æ˜¯æ›¿ä»£å‘½ä»¤æ¥å—çš„å‡ ä¸ªæ ‡å¿—ä¹‹ä¸€ã€‚ æ‚¨åœ¨æ›¿ä»£å‘½ä»¤çš„æœ«å°¾ä¼ é€’æ ‡å¿—ã€‚ è¿™æ˜¯æœ‰ç”¨çš„æ ‡å¿—çš„åˆ—è¡¨:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css">&amp;    é‡ç”¨ä¸Šä¸€ä¸ªæ›¿ä»£å‘½ä»¤ä¸­çš„æ ‡å¿—ã€‚ å¿…é¡»ä½œä¸ºç¬¬ä¸€ä¸ªæ ‡å¿—ä¼ é€’ã€‚<br>g    æ›¿æ¢è¡Œä¸­çš„æ‰€æœ‰åŒ¹é…é¡¹ã€‚<br>c    è¦æ±‚æ›¿ä»£ç¡®è®¤ã€‚<br>e    é˜²æ­¢æ›¿æ¢å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚<br><span class="hljs-selector-tag">i</span>    æ‰§è¡Œä¸åŒºåˆ†å¤§å°å†™çš„æ›¿æ¢<br><span class="hljs-selector-tag">I</span>    æ‰§è¡ŒåŒºåˆ†å¤§å°å†™çš„æ›¿æ¢<br></code></pre></td></tr></table></figure><p>æˆ‘ä¸Šé¢æ²¡æœ‰åˆ—å‡ºæ›´å¤šæ ‡å¿—ã€‚ è¦äº†è§£æ‰€æœ‰æ ‡å¿—ï¼Œè¯·æŸ¥çœ‹<code>:h s_flags</code>ã€‚</p><p>é¡ºä¾¿è¯´ä¸€å¥ï¼Œé‡å¤æ›¿æ¢å‘½ä»¤ï¼ˆ<code>&amp;</code>å’Œ<code>:s</code>ï¼‰ä¸ä¿ç•™æ ‡å¿—ã€‚ è¿è¡Œ<code>&amp;</code>åªä¼šé‡å¤<code>:s/pancake/donut/</code>è€Œæ²¡æœ‰<code>g</code>ã€‚ è¦ä½¿ç”¨æ‰€æœ‰æ ‡å¿—å¿«é€Ÿé‡å¤æœ€åä¸€ä¸ªæ›¿ä»£å‘½ä»¤ï¼Œè¯·è¿è¡Œ<code>:&amp;&amp;</code>ã€‚</p><h2 id="æ›´æ”¹å®šç•Œç¬¦"><a href="#æ›´æ”¹å®šç•Œç¬¦" class="headerlink" title="æ›´æ”¹å®šç•Œç¬¦"></a>æ›´æ”¹å®šç•Œç¬¦</h2><p>å¦‚æœæ‚¨éœ€è¦ç”¨é•¿è·¯å¾„æ›¿æ¢ URL:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//my</span>site.com<span class="hljs-regexp">/a/</span>b<span class="hljs-regexp">/c/</span>d/e<br></code></pre></td></tr></table></figure><p>è¦ç”¨å•è¯â€helloâ€ä»£æ›¿å®ƒï¼Œè¯·è¿è¡Œ:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">:s/https:\/\/mysite.com\/a\/b\/c\/d\/e/hello/<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¾ˆéš¾è¯´å‡ºå“ªäº›æ­£æ–œæ ï¼ˆ<code>/</code>ï¼‰æ˜¯æ›¿æ¢æ¨¡å¼çš„ä¸€éƒ¨åˆ†ï¼Œå“ªäº›æ˜¯åˆ†éš”ç¬¦ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•å•å­—èŠ‚å­—ç¬¦ï¼ˆé™¤å­—æ¯ï¼Œæ•°å­—æˆ–<code>&quot;</code>ï¼Œ<code>|</code>å’Œ<code>\</code>ä¹‹å¤–çš„å­—ç¬¦ï¼‰æ¥æ›´æ”¹å®šç•Œç¬¦ã€‚è®©æˆ‘ä»¬å°†å®ƒä»¬æ›¿æ¢ä¸º<code>+</code>ã€‚ä¸Šé¢çš„æ›¿æ¢å‘½ä»¤å¯ä»¥é‡å†™ä¸º :</p><figure class="highlight mercury"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mercury">:s+https:<span class="hljs-built_in">\/</span><span class="hljs-built_in">\/</span>mysite.com<span class="hljs-built_in">\/</span>a<span class="hljs-built_in">\/</span>b<span class="hljs-built_in">\/</span>c<span class="hljs-built_in">\/</span>d<span class="hljs-built_in">\/</span>e+hello+<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæ›´å®¹æ˜“çœ‹åˆ°åˆ†éš”ç¬¦åœ¨å“ªé‡Œã€‚</p><h2 id="ç‰¹æ®Šæ›¿æ¢"><a href="#ç‰¹æ®Šæ›¿æ¢" class="headerlink" title="ç‰¹æ®Šæ›¿æ¢"></a>ç‰¹æ®Šæ›¿æ¢</h2><p>æ‚¨è¿˜å¯ä»¥ä¿®æ”¹è¦æ›¿æ¢çš„æ–‡æœ¬çš„å¤§å°å†™ã€‚ ç»™å‡ºä»¥ä¸‹è¡¨è¾¾å¼ï¼Œæ‚¨çš„ä»»åŠ¡æ˜¯å°†æ‰€æœ‰å˜é‡åæ¯”å¦‚ â€œoneâ€, â€œtwoâ€, â€œthreeâ€ç­‰ï¼Œæ”¹æˆå¤§å†™:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let one <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-comment">;</span><br>let two <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-comment">;</span><br>let three <span class="hljs-operator">=</span> <span class="hljs-string">&quot;3&quot;</span><span class="hljs-comment">;</span><br>let four <span class="hljs-operator">=</span> <span class="hljs-string">&quot;4&quot;</span><span class="hljs-comment">;</span><br>let five <span class="hljs-operator">=</span> <span class="hljs-string">&quot;5&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è¯·è¿è¡Œ:</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-meta">%</span>s/\v<span class="hljs-comment">(\w+)</span> <span class="hljs-comment">(\w+)</span>/\<span class="hljs-number">1</span> \U\<span class="hljs-number">2</span>/<br></code></pre></td></tr></table></figure><p>ä½ ä¼šå¾—åˆ°:</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs abnf">let ONE <span class="hljs-operator">=</span> <span class="hljs-string">&quot;1&quot;</span><span class="hljs-comment">;</span><br>let TWO <span class="hljs-operator">=</span> <span class="hljs-string">&quot;2&quot;</span><span class="hljs-comment">;</span><br>let THREE <span class="hljs-operator">=</span> <span class="hljs-string">&quot;3&quot;</span><span class="hljs-comment">;</span><br>let FOUR <span class="hljs-operator">=</span> <span class="hljs-string">&quot;4&quot;</span><span class="hljs-comment">;</span><br>let FIVE <span class="hljs-operator">=</span> <span class="hljs-string">&quot;5&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>è¿™æ˜¯è¯¥å‘½ä»¤çš„ç»†åˆ†:</p><ul><li><code>(\w+) (\w+)</code>æ•è·å‰ä¸¤ä¸ªåŒ¹é…çš„åˆ†ç»„ï¼Œä¾‹å¦‚â€letâ€å’Œâ€oneâ€ã€‚</li><li><code>\1</code>è¿”å›ç¬¬ä¸€ä¸ªç»„çš„å€¼â€letâ€</li><li><code>\U\2</code>å¤§å†™(<code>\U</code>)ç¬¬äºŒç»„(<code>\2</code>)ã€‚</li></ul><p>è¯¥å‘½ä»¤çš„çªé—¨æ˜¯è¡¨è¾¾å¼<code>\U\2</code>ã€‚<code>\U</code>å°†åé¢è·Ÿç€çš„å­—ç¬¦å˜ä¸ºå¤§å†™ã€‚</p><p>è®©æˆ‘ä»¬å†ä¸¾ä¸€ä¸ªä¾‹å­ã€‚ å‡è®¾æ‚¨æ­£åœ¨ç¼–å†™ Vim ä¹¦ç±ï¼Œå¹¶ä¸”éœ€è¦å°†ä¸€è¡Œä¸­æ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™ã€‚</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">vim is <span class="hljs-keyword">the</span> greatest <span class="hljs-keyword">text</span> editor <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">whole</span> galaxy<br></code></pre></td></tr></table></figure><p>æ‚¨å¯ä»¥è¿è¡Œ:</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:s<span class="hljs-regexp">/\&lt;./</span>\U&amp;/g<br></code></pre></td></tr></table></figure><p>ç»“æœ:</p><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">Vim</span> <span class="hljs-variable">Is</span> <span class="hljs-variable">The</span> <span class="hljs-variable">Greatest</span> <span class="hljs-built_in">Text</span> <span class="hljs-variable">Editor</span> <span class="hljs-built_in">In</span> <span class="hljs-variable">The</span> <span class="hljs-variable">Whole</span> <span class="hljs-variable">Galaxy</span><br></code></pre></td></tr></table></figure><p>ç»†ç›®å¦‚ä¸‹:</p><ul><li><code>:s</code> æ›¿æ¢å½“å‰è¡Œ</li><li><code>\&lt;.</code> ç”±ä¸¤éƒ¨åˆ†ç»„æˆ:<code>\&lt;</code>åŒ¹é…å•è¯çš„å¼€å¤´ï¼Œ<code>.</code>åŒ¹é…ä»»ä½•å­—ç¬¦ã€‚ <code>\&lt;</code>è¿ç®—ç¬¦ä½¿åé¢è·Ÿç€çš„å­—ç¬¦è¡¨ç¤ºå•è¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ ç”±äº<code>.</code>æ˜¯ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œå› æ­¤å®ƒå°†åŒ¹é…ä»»æ„å•è¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚</li><li><code>\U&amp;</code> å°†åç»­ç¬¦å·å­åºåˆ—<code>&amp;</code>å¤§å†™ã€‚ å›æƒ³ä¸€ä¸‹ï¼Œ<code>&amp;</code>ï¼ˆæˆ–<code>\0</code>ï¼‰ä»£è¡¨æ•´ä¸ªåŒ¹é…ã€‚ è¿™é‡Œå®ƒåŒ¹é…å•è¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚</li><li><code>g</code>å…¨å±€æ ‡å¿—ã€‚ æ²¡æœ‰å®ƒï¼Œæ­¤å‘½ä»¤å°†ä»…æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚ æ‚¨éœ€è¦æ›¿æ¢æ­¤è¡Œä¸Šçš„æ¯ä¸ªåŒ¹é…é¡¹ã€‚</li></ul><p>è¦äº†è§£æ›¿æ¢çš„ç‰¹æ®Šæ›¿æ¢ç¬¦å·ï¼ˆå¦‚<code>\u</code>å’Œ<code>\U</code>ï¼‰çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹<code>:h sub-replace-special</code>ã€‚</p><h2 id="å€™é€‰æ¨¡å¼"><a href="#å€™é€‰æ¨¡å¼" class="headerlink" title="å€™é€‰æ¨¡å¼"></a>å€™é€‰æ¨¡å¼</h2><p>æœ‰æ—¶æ‚¨éœ€è¦åŒæ—¶åŒ¹é…å¤šä¸ªæ¨¡å¼ã€‚ å¦‚æœæ‚¨æœ‰ä»¥ä¸‹é—®å€™:</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim">hello <span class="hljs-keyword">vim</span><br>hola <span class="hljs-keyword">vim</span><br>salve <span class="hljs-keyword">vim</span><br>bonjour <span class="hljs-keyword">vim</span><br></code></pre></td></tr></table></figure><p>æ‚¨ä»…éœ€åœ¨åŒ…å«å•è¯â€helloâ€æˆ–â€holaâ€çš„è¡Œä¸Šç”¨â€friendâ€ä»£æ›¿â€vimâ€ã€‚å›æƒ³ä¸€æƒ³æœ¬ç« å‰é¢çš„çŸ¥è¯†ç‚¹ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>|</code> æ¥åˆ†éš”å¯é€‰çš„æ¨¡å¼:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:%s/</span>\v(hello|hola) vim)/\<span class="hljs-number">1</span> friend/g<br></code></pre></td></tr></table></figure><p>ç»“æœ:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">hello <span class="hljs-keyword">friend</span><br>hola <span class="hljs-keyword">friend</span><br>salve vim<br>bonjour vim<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯ç»†åˆ†:</p><ul><li><code>%s</code> åœ¨æ–‡ä»¶çš„æ¯ä¸€è¡Œä¸Šè¿è¡Œæ›¿ä»£å‘½ä»¤ã€‚</li><li><code>(hello|hola)</code> åŒ¹é…*â€œhelloâ€æˆ–â€holaâ€ï¼Œå¹¶å°†å…¶è§†ä¸ºä¸€ä¸ªç»„ã€‚</li><li><code>vim</code> æ˜¯å­—é¢æ„æ€â€vimâ€ã€‚</li><li><code>\1</code> æ˜¯ç¬¬ä¸€ä¸ªåŒ¹é…ç»„ï¼Œå®ƒæ˜¯æ–‡æœ¬â€helloâ€æˆ–â€holaâ€ã€‚</li><li><code>friend</code> æ˜¯å­—é¢çš„â€œæœ‹å‹â€ã€‚</li></ul><h2 id="æŒ‡å®šæ›¿æ¢æ¨¡å¼çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®"><a href="#æŒ‡å®šæ›¿æ¢æ¨¡å¼çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®" class="headerlink" title="æŒ‡å®šæ›¿æ¢æ¨¡å¼çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®"></a>æŒ‡å®šæ›¿æ¢æ¨¡å¼çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®</h2><p>å›æƒ³ä¸€ä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>\zs</code>å’Œ<code>\ze</code>æ¥æŒ‡å®šä¸€ä¸ªåŒ¹é…çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚è¿™ä¸ªæŠ€æœ¯åœ¨æ›¿æ¢æ“ä½œä¸­åŒæ ·æœ‰æ•ˆï¼Œå¦‚æœä½ æœ‰ä»¥ä¸‹æ–‡æœ¬ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">chocolate pancake<br>strawberry <span class="hljs-keyword">sweetcake</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">blueberry </span>hotcake<br></code></pre></td></tr></table></figure><p>è¦æƒ³å°†â€hotcakeâ€ä¸­çš„â€cakeâ€æ›¿æ¢ä¸ºâ€dogâ€ï¼Œå¾—åˆ°â€hotdogâ€:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:%s/hot</span>\zscake/dog/g<br></code></pre></td></tr></table></figure><p>ç»“æœæ˜¯ï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">chocolate pancake<br>strawberry <span class="hljs-keyword">sweetcake</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">blueberry </span>hotdog<br></code></pre></td></tr></table></figure><h2 id="è´ªå©ªä¸éè´ªå©ª"><a href="#è´ªå©ªä¸éè´ªå©ª" class="headerlink" title="è´ªå©ªä¸éè´ªå©ª"></a>è´ªå©ªä¸éè´ªå©ª</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢æŠ€å·§ï¼Œåœ¨æŸè¡Œä¸­æ›¿æ¢ç¬¬nä¸ªåŒ¹é…ï¼š</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">One Mississippi, <span class="hljs-literal">two</span> Mississippi, <span class="hljs-literal">three</span> Mississippi, <span class="hljs-literal">four</span> Mississippi, <span class="hljs-literal">five</span> Mississippi.<br></code></pre></td></tr></table></figure><p>è¦æƒ³å°†ç¬¬3ä¸ªâ€Mississippiâ€æ›¿æ¢ä¸º â€œArkansasâ€ï¼Œè¿è¡Œï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">:s/\<span class="hljs-title function_">v</span>(<span class="hljs-params">.&#123;-&#125;\zsMississippi</span>)&#123;<span class="hljs-number">3</span>&#125;/<span class="hljs-title class_">Arkansas</span>/g<br></code></pre></td></tr></table></figure><p>å‘½ä»¤åˆ†è§£ï¼š</p><ul><li><code>:s/</code> æ›¿æ¢å‘½ä»¤ã€‚</li><li><code>\v</code> é­”æœ¯å…³é”®å­—ï¼Œä½¿æ‚¨ä¸å¿…è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ã€‚</li><li><code>.</code> åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ã€‚</li><li><code>&#123;-&#125;</code> è¡¨ç¤ºä½¿ç”¨éè´ªå©ªæ¨¡å¼åŒ¹é…å‰é¢çš„0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚</li><li><code>\zsMississippi</code> ä½¿å¾—ä»â€Mississippiâ€å¼€å§‹æ•è·åŒ¹é…ã€‚</li><li><code>(...)&#123;3&#125;</code> æŸ¥æ‰¾ç¬¬3ä¸ªåŒ¹é…</li></ul><p>åœ¨æœ¬ç« å‰é¢çš„å†…å®¹ä¸­ï¼Œä½ å·²ç»çœ‹åˆ°è¿‡<code>&#123;3&#125;</code>è¿™æ ·çš„è¯­æ³•ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>&#123;3&#125;</code>å°†ç²¾ç¡®åŒ¹é…ç¬¬3ä¸ªåŒ¹é…ã€‚è¿™é‡Œçš„æ–°æŠ€å·§æ˜¯<code>&#123;-&#125;</code>ã€‚å®ƒè¡¨ç¤ºè¿›è¡Œéè´ªå©ªåŒ¹é…ã€‚å®ƒä¼šæ‰¾åˆ°ç¬¦åˆç»™å®šæ¨¡å¼çš„æœ€çŸ­çš„åŒ¹é…ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>(.&#123;-&#125;Mississippi)</code>åŒ¹é…ä»¥ä»»æ„å­—ç¬¦å¼€å§‹ã€æ•°é‡æœ€å°‘çš„â€Mississippiâ€ã€‚å¯¹æ¯”<code>(.*Mississippi)</code>ï¼Œåè€…ä¼šæ‰¾åˆ°ç¬¦åˆç»™å®šæ¨¡å¼çš„æœ€é•¿åŒ¹é…ã€‚</p><p>å¦‚æœæ‚¨ä½¿ç”¨<code>(.&#123;-&#125;Mississippi)</code>ï¼Œä½ ä¼šå¾—åˆ°5ä¸ªåŒ¹é…ï¼šâ€One Mississippiâ€, â€œTwo Mississippiâ€,ç­‰ã€‚å¦‚æœæ‚¨ä½¿ç”¨<code>(.*Mississippi)</code>ï¼Œæ‚¨åªä¼šå¾—åˆ°1ä¸ªåŒ¹é…ï¼šæœ€åä¸€ä¸ª â€œMississippiâ€ã€‚<code>*</code>è¡¨ç¤ºè´ªå©ªåŒ¹é…ï¼Œè€Œ<code>&#123;-&#125;</code>è¡¨ç¤ºéè´ªå©ªåŒ¹é…ã€‚è¦æƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥æŸ¥çœ‹ <code>:h /\&#123;-</code> å’Œ <code>:h non-greedy</code>ã€‚</p><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚å¦‚æœæ‚¨æœ‰ä»¥ä¸‹å­—ç¬¦ä¸²ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">abc1de1<br></code></pre></td></tr></table></figure><p>ç”¨è´ªå©ªæ¨¡å¼åŒ¹é… â€œabc1de1â€ ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/a.*1<br></code></pre></td></tr></table></figure><p>ç”¨éè´ªå©ªæ¨¡å¼åŒ¹é… â€œabc1â€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/a.\&#123;-&#125;1<br></code></pre></td></tr></table></figure><p>å› æ­¤ï¼Œå¦‚æœæ‚¨éœ€è¦å°†æœ€é•¿çš„åŒ¹é…è½¬ä¸ºå¤§å†™ï¼ˆè´ªå©ªæ¨¡å¼ï¼‰ï¼Œè¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:s/a</span>.*<span class="hljs-number">1</span>/\U&amp;/g<br></code></pre></td></tr></table></figure><p>ä¼šå¾—åˆ°ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">ABC1DE1<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨éœ€è¦å°†æœ€çŸ­çš„åŒ¹é…è½¬ä¸ºå¤§å†™ï¼ˆéè´ªå©ªæ¨¡å¼ï¼‰ï¼Œè¿è¡Œï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:s/a</span>.\&#123;-&#125;<span class="hljs-number">1</span>/\U&amp;/g<br></code></pre></td></tr></table></figure><p>ä¼šå¾—åˆ°ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">ABC1de1<br></code></pre></td></tr></table></figure><p>å¦‚æœæ‚¨æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦è´ªå©ªæ¨¡å¼ä¸éè´ªå©ªæ¨¡å¼è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œå¯èƒ½ä¼šæŠŠä½ ç»•æ™•ã€‚å›´ç»•ä¸åŒçš„ç»„åˆå»å®éªŒï¼ŒçŸ¥é“æ‚¨æ˜ç™½è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚</p><h2 id="è·¨å¤šä¸ªæ–‡ä»¶æ›¿æ¢"><a href="#è·¨å¤šä¸ªæ–‡ä»¶æ›¿æ¢" class="headerlink" title="è·¨å¤šä¸ªæ–‡ä»¶æ›¿æ¢"></a>è·¨å¤šä¸ªæ–‡ä»¶æ›¿æ¢</h2><p>æœ€åï¼Œè®©æˆ‘ä»¬å­¦ä¹ å¦‚ä½•åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ›¿æ¢çŸ­è¯­ã€‚å¯¹äºæœ¬èŠ‚ï¼Œå‡è®¾æ‚¨æœ‰ä¸¤ä¸ªæ–‡ä»¶: <code>food.txt</code> å’Œ <code>animal.txt</code>.</p><p><code>food.txt</code>å†…:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">corn dog</span><br><span class="hljs-attribute">hot dog</span><br><span class="hljs-attribute">chili dog</span><br></code></pre></td></tr></table></figure><p><code>animal.txt</code>å†…:</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">large</span> dog<br><span class="hljs-keyword">medium</span> dog<br><span class="hljs-keyword">small</span> dog<br></code></pre></td></tr></table></figure><p>å‡è®¾æ‚¨çš„ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs inform7">â”œ food.txt<br>â”œ <span class="hljs-keyword">animal</span>.txt<br></code></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œç”¨<code>:args</code>åŒæ—¶æ•è·â€food.txtâ€å’Œâ€animal.txtâ€åˆ°å‚æ•°åˆ—è¡¨ä¸­ã€‚å›é¡¾å‰é¢çš„ç« èŠ‚ï¼Œ<code>:args</code>å¯ç”¨äºåˆ›å»ºæ–‡ä»¶ååˆ—è¡¨ã€‚åœ¨ Vim ä¸­æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œå…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯åœ¨Vimå†…éƒ¨è¿è¡Œ:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:args</span> *.txt                  æ•è·å½“å‰ä½ç½®çš„æ‰€æœ‰txtæ–‡ä»¶<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ä¸€ä¸‹ï¼Œå½“æ‚¨è¿è¡Œ<code>:args</code>æ—¶ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ï¼š</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-comment">[food.txt]</span> <span class="hljs-keyword">animal</span>.txt<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæ‰€æœ‰çš„ç›¸å…³æ–‡ä»¶éƒ½å·²ç»å­˜å‚¨åœ¨å‚æ•°åˆ—è¡¨ä¸­ï¼Œæ‚¨å¯ä»¥ç”¨ <code>:argdo</code> å‘½ä»¤è·¨å¤šæ–‡ä»¶æ›¿æ¢ï¼Œè¿è¡Œï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">:argdo %s<span class="hljs-regexp">/dog/</span>chicken/<br></code></pre></td></tr></table></figure><p>è¿™æ¡å‘½ä»¤å¯¹æ‰€æœ‰<code>:args</code>åˆ—è¡¨ä¸­çš„æ–‡ä»¶æ‰§è¡Œæ›¿æ¢æ“ä½œã€‚æœ€ç»ˆï¼Œå­˜å‚¨ä¿®æ”¹çš„æ–‡ä»¶ï¼š</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">:<span class="hljs-keyword">argdo</span> <span class="hljs-keyword">update</span><br></code></pre></td></tr></table></figure><p><code>:args</code> å’Œ <code>:argdo</code> æ˜¯ä¸¤ä¸ªæœ‰ç”¨çš„å·¥å…·ï¼Œç”¨äºè·¨å¤šæ–‡ä»¶æ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤ã€‚å¯ä»¥ç”¨å…¶ä»–å‘½ä»¤ç»“åˆå°è¯•ä¸€ä¸‹ï¼</p><h2 id="ç”¨å®è·¨å¤šä¸ªæ–‡ä»¶æ›¿æ¢"><a href="#ç”¨å®è·¨å¤šä¸ªæ–‡ä»¶æ›¿æ¢" class="headerlink" title="ç”¨å®è·¨å¤šä¸ªæ–‡ä»¶æ›¿æ¢"></a>ç”¨å®è·¨å¤šä¸ªæ–‡ä»¶æ›¿æ¢</h2><p>å¦å¤–ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç”¨å®è·¨å¤šä¸ªæ–‡ä»¶è¿è¡Œæ›¿ä»£å‘½ä»¤ã€‚æ‰§è¡Œ:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:args</span> *.txt<br>qq<br><span class="hljs-symbol">:%s/dog/chicken/g</span><br><span class="hljs-symbol">:wnext</span><br>q<br><span class="hljs-number">99</span><span class="hljs-variable">@q</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯æ­¥éª¤çš„ç»†åˆ†:</p><ul><li><code>:args *.txt</code> ä¼šå°†ç›¸å…³æ–‡ä»¶åˆ—å‡ºåˆ°<code>:args</code>åˆ—è¡¨ä¸­ã€‚</li><li><code>qq</code> å¯åŠ¨â€qâ€å¯„å­˜å™¨ä¸­çš„å®ã€‚</li><li><code>:%s/dog/chicken/g</code>åœ¨å½“å‰æ–‡ä»¶çš„æ‰€æœ‰è¡Œä¸Šç”¨â€chickenâ€æ›¿æ¢â€dogâ€ã€‚</li><li><code>:wnext</code> å†™å…¥ï¼ˆä¿å­˜ï¼‰æ–‡ä»¶ï¼Œç„¶åè½¬åˆ°<code>args</code>åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªæ–‡ä»¶ã€‚å°±åƒåŒæ—¶è¿è¡Œ<code>:w</code>å’Œ<code>:next</code>ä¸€æ ·ã€‚</li><li><code>q</code> åœæ­¢å®å½•åˆ¶ã€‚</li><li><code>99@q</code> æ‰§è¡Œå®ä¹åä¹æ¬¡ã€‚ Vim é‡åˆ°ç¬¬ä¸€ä¸ªé”™è¯¯åï¼Œå®ƒå°†åœæ­¢æ‰§è¡Œå®ï¼Œå› æ­¤ Vim å®é™…ä¸Šä¸ä¼šæ‰§è¡Œè¯¥å®ä¹åä¹æ¬¡ã€‚</li></ul><h2 id="ä»¥èªæ˜çš„æ–¹å¼å­¦ä¹ æœç´¢å’Œæ›¿æ¢"><a href="#ä»¥èªæ˜çš„æ–¹å¼å­¦ä¹ æœç´¢å’Œæ›¿æ¢" class="headerlink" title="ä»¥èªæ˜çš„æ–¹å¼å­¦ä¹ æœç´¢å’Œæ›¿æ¢"></a>ä»¥èªæ˜çš„æ–¹å¼å­¦ä¹ æœç´¢å’Œæ›¿æ¢</h2><p>è‰¯å¥½çš„æœç´¢èƒ½åŠ›æ˜¯ç¼–è¾‘çš„å¿…è¦æŠ€èƒ½ã€‚æŒæ¡æœç´¢åŠŸèƒ½ä½¿æ‚¨å¯ä»¥åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„çµæ´»æ€§æ¥æœç´¢æ–‡ä»¶ä¸­çš„ä»»ä½•æ¨¡å¼ã€‚èŠ±äº›æ—¶é—´å­¦ä¹ è¿™äº›ã€‚è¦æƒ³æŒæ¡æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‚¨å¿…é¡»åœ¨å®è·µä¸­å»ä¸æ–­åœ°ä½¿ç”¨å®ƒã€‚æˆ‘æ›¾ç»è¯»è¿‡ä¸€æœ¬å…³äºæ­£åˆ™è¡¨è¾¾å¼çš„ä¹¦ï¼Œå´æ²¡æœ‰çœŸæ­£å»åšï¼Œåæ¥æˆ‘å‡ ä¹å¿˜äº†è¯»çš„æ‰€æœ‰ä¸œè¥¿ã€‚ä¸»åŠ¨ç¼–ç æ˜¯æŒæ¡ä»»ä½•æŠ€èƒ½çš„æœ€ä½³æ–¹æ³•ã€‚</p><p>ä¸€ç§æé«˜æ¨¡å¼åŒ¹é…æŠ€èƒ½çš„å¥½æ–¹æ³•æ˜¯ï¼Œæ¯å½“æ‚¨éœ€è¦æœç´¢ä¸€ä¸ªæ¨¡å¼ä¸²æ—¶ï¼ˆä¾‹å¦‚â€hello 123â€ï¼‰ï¼Œä¸è¦ç›´æ¥æŸ¥è¯¢æ–‡å­—çš„å­—é¢å€¼(<code>/hello 123</code>)ï¼Œå»å°è¯•ä½¿ç”¨æ¨¡å¼ä¸²æ¥æœç´¢å®ƒ(æ¯”å¦‚<code>/\v(\l+) (\d+)</code>)ã€‚è¿™äº›æ­£åˆ™è¡¨è¾¾å¼æ¦‚å¿µä¸­çš„è®¸å¤šä¸ä»…åœ¨ä½¿ç”¨ Vim æ—¶ï¼Œä¹Ÿé€‚ç”¨äºå¸¸è§„ç¼–ç¨‹ã€‚</p><p>æ—¢ç„¶æ‚¨å·²ç»äº†è§£äº† Vim ä¸­çš„é«˜çº§æœç´¢å’Œæ›¿æ¢ï¼Œç°åœ¨è®©æˆ‘ä»¬å­¦ä¹ åŠŸèƒ½æœ€ä¸°å¯Œçš„å‘½ä»¤ä¹‹ä¸€ï¼Œå³å…¨å±€å‘½ä»¤ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VIM</tag>
      
      <tag>ç¼–è¾‘å™¨</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>

"use strict";(self.webpackChunkalndaly_github_io=self.webpackChunkalndaly_github_io||[]).push([[2412],{3881:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>c});var r=n(8101);const t={},l=r.createContext(t);function a(e){const s=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(l.Provider,{value:s},e.children)}},8183:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>i});const r=JSON.parse('{"id":"others/Clash","title":"Clash\u6559\u7a0b","description":"Clash \u5b98\u65b9\u5730\u5740","source":"@site/docs/others/Clash.md","sourceDirName":"others","slug":"/others/Clash","permalink":"/en/docs/others/Clash","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/others/Clash.md","tags":[],"version":"current","lastUpdatedAt":1742212854000,"frontMatter":{"title":"Clash\u6559\u7a0b"},"sidebar":"tutorialSidebar","previous":{"title":"Anaconda\u73af\u5883\u914d\u7f6e/\u57fa\u672c\u64cd\u4f5c","permalink":"/en/docs/others/Anaconda/basic-utils"},"next":{"title":"Curl\u547d\u4ee4\u4f7f\u7528","permalink":"/en/docs/others/Curl"}}');var t=n(5105),l=n(3881);const a={title:"Clash\u6559\u7a0b"},c=void 0,o={},i=[{value:"\u5b89\u88c5 Clash",id:"\u5b89\u88c5-clash",level:2},{value:"\u4fee\u6539\u914d\u7f6e",id:"\u4fee\u6539\u914d\u7f6e",level:2},{value:"<code>config.yml</code> \u914d\u7f6e\u793a\u4f8b",id:"configyml-\u914d\u7f6e\u793a\u4f8b",level:4},{value:"\u7f16\u5199 systemd \u670d\u52a1\u811a\u672c",id:"\u7f16\u5199-systemd-\u670d\u52a1\u811a\u672c",level:2},{value:"\u4e3a\u7528\u6237\u5e10\u6237\u8fd0\u884c clash \u7cfb\u7edf\u5b9e\u4f8b",id:"\u4e3a\u7528\u6237\u5e10\u6237\u8fd0\u884c-clash-\u7cfb\u7edf\u5b9e\u4f8b",level:2},{value:"\u91cd\u65b0\u52a0\u8f7d <code>systemd</code> \u6a21\u5757",id:"\u91cd\u65b0\u52a0\u8f7d-systemd-\u6a21\u5757",level:4},{value:"\u542f\u52a8 <code>clash</code> \u670d\u52a1",id:"\u542f\u52a8-clash-\u670d\u52a1",level:4},{value:"\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f",id:"\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f",level:4},{value:"\u95ee\u9898",id:"\u95ee\u9898",level:3}];function d(e){const s={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://github.com/Dreamacro/clash",children:"Clash \u5b98\u65b9\u5730\u5740"})}),"\n",(0,t.jsx)(s.h2,{id:"\u5b89\u88c5-clash",children:"\u5b89\u88c5 Clash"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["\u4e0b\u8f7d\u5bf9\u5e94\u7684 ",(0,t.jsx)(s.code,{children:"clash"})," \u7248\u672c"]}),"\n",(0,t.jsxs)(s.p,{children:["\u4e0b\u8f7d\u5730\u5740\uff1a",(0,t.jsx)(s.a,{href:"https://github.com/Dreamacro/clash/releases",children:"https://github.com/Dreamacro/clash/releases"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["\u89e3\u538b ",(0,t.jsx)(s.code,{children:"clash"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["\u5c06\u89e3\u538b\u51fa\u7684\u6587\u4ef6\u91cd\u547d\u540d\u6210 ",(0,t.jsx)(s.code,{children:"clash"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["\u5c06 ",(0,t.jsx)(s.code,{children:"clash"})," \u79fb\u52a8\u5230 ",(0,t.jsx)(s.code,{children:"/usr/bin/"})," \u76ee\u5f55\u4e0b"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["\u8d4b\u4e88 ",(0,t.jsx)(s.code,{children:"clash"})," \u53ef\u6267\u884c\u6743\u9650"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo chmod +x /usr/bin/clash\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["\u68c0\u67e5 ",(0,t.jsx)(s.code,{children:"clash"})," \u662f\u5426\u5b89\u88c5\u6210\u529f"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"clash -v\n"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"\u8fd4\u56de\u4ee5\u4e0b\u5185\u5bb9\u8bf4\u660e\u5b89\u88c5\u6210\u529f\uff1a"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-text",children:"Clash v0.13.0-0-g744728c linux 386 Sat Mar 30 06:23:03 UTC 2019\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"\u4fee\u6539\u914d\u7f6e",children:"\u4fee\u6539\u914d\u7f6e"}),"\n",(0,t.jsxs)(s.p,{children:["\u9ed8\u8ba4\u914d\u7f6e\u76ee\u5f55\u662f ",(0,t.jsx)(s.code,{children:"$HOME/.config/clash"})]}),"\n",(0,t.jsxs)(s.p,{children:["\u914d\u7f6e\u6587\u4ef6\u7684\u540d\u79f0\u662f ",(0,t.jsx)(s.code,{children:"config.yml"})]}),"\n",(0,t.jsxs)(s.p,{children:["\u5982\u679c\u8981\u4f7f\u7528\u5176\u4ed6\u76ee\u5f55\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,t.jsx)(s.code,{children:"-d"})," \u63a7\u5236\u914d\u7f6e\u76ee\u5f55"]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5f53\u524d\u76ee\u5f55\u4f5c\u4e3a\u914d\u7f6e\u76ee\u5f55"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"clash -d .\n"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"\u9ed8\u8ba4\u914d\u7f6e\u76ee\u5f55\u542f\u52a8"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"clash\n"})}),"\n",(0,t.jsxs)(s.h4,{id:"configyml-\u914d\u7f6e\u793a\u4f8b",children:[(0,t.jsx)(s.code,{children:"config.yml"})," \u914d\u7f6e\u793a\u4f8b"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:'# port of HTTP\nport: 7890\n\n# port of SOCKS5\nsocks-port: 7891\n\n# redir port for Linux and macOS\n# redir-port: 7892\n\nallow-lan: false\n\n# Rule / Global/ Direct (default is Rule)\nmode: Rule\n\n# set log level to stdout (default is info)\n# info / warning / error / debug / silent\nlog-level: info\n\n# A RESTful API for clash\nexternal-controller: 127.0.0.1:9090\n\n# you can put the static web resource (such as clash-dashboard) to a directory, and clash would serve in `${API}/ui`\n# input is a relative path to the configuration directory or an absolute path\n# external-ui: folder\n\n# Secret for RESTful API (Optional)\n# secret: ""\n\n# dns:\n  # enable: true # set true to enable dns (default is false)\n  # ipv6: false # default is false\n  # listen: 0.0.0.0:53\n  # enhanced-mode: redir-host\n  # nameserver:\n  #   - 114.114.114.114\n  #   - tls://dns.rubyfish.cn:853 # dns over tls\n  # fallback: # concurrent request with nameserver, fallback used when GEOIP country isn\'t CN\n  #   - tcp://1.1.1.1\n\nProxy:\n\n# shadowsocks\n# The types of cipher are consistent with go-shadowsocks2\n# support AEAD_AES_128_GCM AEAD_AES_192_GCM AEAD_AES_256_GCM AEAD_CHACHA20_POLY1305 AES-128-CTR AES-192-CTR AES-256-CTR AES-128-CFB AES-192-CFB AES-256-CFB CHACHA20-IETF XCHACHA20\n# In addition to what go-shadowsocks2 supports, it also supports chacha20 rc4-md5 xchacha20-ietf-poly1305\n- { name: "ss1", type: ss, server: server, port: 443, cipher: AEAD_CHACHA20_POLY1305, password: "password" }\n\n# old obfs configuration remove after prerelease\n- name: "ss2"\n  type: ss\n  server: server\n  port: 443\n  cipher: AEAD_CHACHA20_POLY1305\n  password: "password"\n  plugin: obfs\n  plugin-opts:\n    mode: tls # or http\n    # host: bing.com\n\n- name: "ss3"\n  type: ss\n  server: server\n  port: 443\n  cipher: AEAD_CHACHA20_POLY1305\n  password: "password"\n  plugin: v2ray-plugin\n  plugin-opts:\n    mode: websocket # no QUIC now\n    # tls: true # wss\n    # skip-cert-verify: true\n    # host: bing.com\n    # path: "/"\n    # headers:\n    #   custom: value\n\n# vmess\n# cipher support auto/aes-128-gcm/chacha20-poly1305/none\n- { name: "vmess", type: vmess, server: server, port: 443, uuid: uuid, alterId: 32, cipher: auto }\n# with tls\n- { name: "vmess", type: vmess, server: server, port: 443, uuid: uuid, alterId: 32, cipher: auto, tls: true }\n# with tls and skip-cert-verify\n- { name: "vmess", type: vmess, server: server, port: 443, uuid: uuid, alterId: 32, cipher: auto, tls: true, skip-cert-verify: true }\n# with ws-path and ws-headers\n- { name: "vmess", type: vmess, server: server, port: 443, uuid: uuid, alterId: 32, cipher: auto, network: ws, ws-path: /path, ws-headers: { Host: v2ray.com } }\n# with ws + tls\n- { name: "vmess", type: vmess, server: server, port: 443, uuid: uuid, alterId: 32, cipher: auto, network: ws, ws-path: /path, tls: true }\n\n# socks5\n- { name: "socks", type: socks5, server: server, port: 443 }\n# socks5 with authentication\n- { name: "socks", type: socks5, server: server, port: 443, username: "username", password: "password" }\n# with tls\n- { name: "socks", type: socks5, server: server, port: 443, tls: true }\n# with tls and skip-cert-verify\n- { name: "socks", type: socks5, server: server, port: 443, tls: true, skip-cert-verify: true }\n\n# http\n- { name: "http", type: http, server: server, port: 443 }\n# http with authentication\n- { name: "http", type: http, server: server, port: 443, username: "username", password: "password" }\n# with tls (https)\n- { name: "http", type: http, server: server, port: 443, tls: true }\n# with tls (https) and skip-cert-verify\n- { name: "http", type: http, server: server, port: 443, tls: true, skip-cert-verify: true }\n\nProxy Group:\n# url-test select which proxy will be used by benchmarking speed to a URL.\n- { name: "auto", type: url-test, proxies: ["ss1", "ss2", "vmess1"], url: "http://www.gstatic.com/generate_204", interval: 300 }\n\n# fallback select an available policy by priority. The availability is tested by accessing an URL, just like an auto url-test group.\n- { name: "fallback-auto", type: fallback, proxies: ["ss1", "ss2", "vmess1"], url: "http://www.gstatic.com/generate_204", interval: 300 }\n\n# load-balance: The request of the same eTLD will be dial on the same proxy.\n- { name: "load-balance", type: load-balance, proxies: ["ss1", "ss2", "vmess1"], url: "http://www.gstatic.com/generate_204", interval: 300 }\n\n# select is used for selecting proxy or proxy group\n# you can use RESTful API to switch proxy, is recommended for use in GUI.\n- { name: "Proxy", type: select, proxies: ["ss1", "ss2", "vmess1", "auto"] }\n\nRule:\n- DOMAIN-SUFFIX,google.com,auto\n- DOMAIN-KEYWORD,google,auto\n- DOMAIN,google.com,auto\n- DOMAIN-SUFFIX,ad.com,REJECT\n- IP-CIDR,127.0.0.0/8,DIRECT\n- SOURCE-IP-CIDR,192.168.1.201/32,DIRECT\n- GEOIP,CN,DIRECT\n# FINAL would remove after prerelease\n# you also can use `FINAL,Proxy` or `FINAL,,Proxy` now\n- MATCH,auto\n'})}),"\n",(0,t.jsx)(s.h2,{id:"\u7f16\u5199-systemd-\u670d\u52a1\u811a\u672c",children:"\u7f16\u5199 systemd \u670d\u52a1\u811a\u672c"}),"\n",(0,t.jsxs)(s.p,{children:["\u5728 ",(0,t.jsx)(s.code,{children:"/lib/systemd/system/"})," \u76ee\u5f55\u4e0b\u521b\u5efa ",(0,t.jsx)(s.code,{children:"clash@.service"})," \u6587\u4ef6"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo vim /lib/systemd/system/clash@.service\n"})}),"\n",(0,t.jsx)(s.p,{children:"\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9(\u4e0d\u7528\u4fee\u6539)\u5e76\u4fdd\u5b58:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-text",children:"[Unit]\nDescription=A rule based proxy in Go for %i.\nAfter=network.target\n\n[Service]\nType=simple\nUser=%i\nRestart=on-abort\nExecStart=/usr/bin/clash\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,t.jsx)(s.h2,{id:"\u4e3a\u7528\u6237\u5e10\u6237\u8fd0\u884c-clash-\u7cfb\u7edf\u5b9e\u4f8b",children:"\u4e3a\u7528\u6237\u5e10\u6237\u8fd0\u884c clash \u7cfb\u7edf\u5b9e\u4f8b"}),"\n",(0,t.jsxs)(s.h4,{id:"\u91cd\u65b0\u52a0\u8f7d-systemd-\u6a21\u5757",children:["\u91cd\u65b0\u52a0\u8f7d ",(0,t.jsx)(s.code,{children:"systemd"})," \u6a21\u5757"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"systemctl daemon-reload\n"})}),"\n",(0,t.jsxs)(s.h4,{id:"\u542f\u52a8-clash-\u670d\u52a1",children:["\u542f\u52a8 ",(0,t.jsx)(s.code,{children:"clash"})," \u670d\u52a1"]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"user"})," \u8868\u793a\u7684\u662f\u5f53\u524d\u7528\u6237\u540d"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"systemctl start clash@user\n"})}),"\n",(0,t.jsx)(s.p,{children:"\u4f8b\u5982\uff1a"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"systemctl start clash@sitoi\n"})}),"\n",(0,t.jsx)(s.h4,{id:"\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f",children:"\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"systemctl enable clash@user\n"})}),"\n",(0,t.jsx)(s.h3,{id:"\u95ee\u9898",children:"\u95ee\u9898"}),"\n",(0,t.jsx)(s.p,{children:"\u6743\u9650\u4e0d\u8db3"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"$ sudo systemctl status clash\n\n\u25cf clash.service - A rule based proxy in Go for shitao.\n   Loaded: loaded (/usr/lib/systemd/system/clash.service; disabled; vendor preset: disabled)\n   Active: failed (Result: exit-code) since Tue 2019-06-18 17:27:18 CST; 4s ago\n  Process: 6777 ExecStart=/usr/bin/clash (code=exited, status=203/EXEC)\n Main PID: 6777 (code=exited, status=203/EXEC)\n\nJun 18 17:27:18 localhost.localdomain systemd[1]: Started A rule based proxy in Go for shitao..\nJun 18 17:27:18 localhost.localdomain systemd[6777]: clash.service: Failed to execute command: Permission denied\nJun 18 17:27:18 localhost.localdomain systemd[6777]: clash.service: Failed at step EXEC spawning /usr/bin/clash: Permission denied\nJun 18 17:27:18 localhost.localdomain systemd[1]: clash.service: Main process exited, code=exited, status=203/EXEC\nJun 18 17:27:18 localhost.localdomain systemd[1]: clash.service: Failed with result 'exit-code'.\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u4fee\u6539 ",(0,t.jsx)(s.code,{children:"selinux"})," \u6210\u88ab\u52a8\u6a21\u5f0f"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo vim /etc/sysconfig/selinux\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-text",children:"SELINUX=permissive\n"})})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);
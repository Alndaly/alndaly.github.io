"use strict";(self.webpackChunkalndaly_github_io=self.webpackChunkalndaly_github_io||[]).push([[7678],{1404:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"others/cli-build/\u81ea\u5df1\u7684\u811a\u624b\u67b6","title":"\u642d\u5efa\u81ea\u5df1\u7684\u811a\u624b\u67b6","description":"\u642d\u5efa\u81ea\u5df1\u7684\u811a\u624b\u67b6","source":"@site/docs/others/cli-build/\u81ea\u5df1\u7684\u811a\u624b\u67b6.md","sourceDirName":"others/cli-build","slug":"/others/cli-build/\u81ea\u5df1\u7684\u811a\u624b\u67b6","permalink":"/docs/others/cli-build/\u81ea\u5df1\u7684\u811a\u624b\u67b6","draft":false,"unlisted":false,"editUrl":"https://github.com/Alndaly/alndaly.github.io/tree/main/packages/create-docusaurus/templates/shared/docs/others/cli-build/\u81ea\u5df1\u7684\u811a\u624b\u67b6.md","tags":[],"version":"current","lastUpdatedAt":1742396220000,"sidebarPosition":5,"frontMatter":{"title":"\u642d\u5efa\u81ea\u5df1\u7684\u811a\u624b\u67b6","sidebar_position":5},"sidebar":"anyThing","previous":{"title":"\u811a\u624b\u67b6\u5de5\u5177\u5e93","permalink":"/docs/others/cli-build/\u811a\u624b\u67b6\u5de5\u5177\u5e93"},"next":{"title":"\u8bbe\u8ba1\u6a21\u5f0f","permalink":"/docs/category/\u8bbe\u8ba1\u6a21\u5f0f"}}');var i=r(5105),c=r(3881);const o={title:"\u642d\u5efa\u81ea\u5df1\u7684\u811a\u624b\u67b6",sidebar_position:5},t=void 0,l={},a=[{value:"\u642d\u5efa\u81ea\u5df1\u7684\u811a\u624b\u67b6",id:"\u642d\u5efa\u81ea\u5df1\u7684\u811a\u624b\u67b6",level:2},{value:"\u521b\u5efa\u9879\u76ee",id:"\u521b\u5efa\u9879\u76ee",level:3},{value:"\u521b\u5efa\u811a\u624b\u67b6\u542f\u52a8\u547d\u4ee4",id:"\u521b\u5efa\u811a\u624b\u67b6\u542f\u52a8\u547d\u4ee4",level:3},{value:"\u5b89\u88c5\u4f9d\u8d56",id:"\u5b89\u88c5\u4f9d\u8d56",level:4},{value:"\u521b\u5efa\u547d\u4ee4",id:"\u521b\u5efa\u547d\u4ee4",level:3},{value:"\u6267\u884c\u547d\u4ee4",id:"\u6267\u884c\u547d\u4ee4",level:4},{value:"\u521b\u5efa\u66f4\u591a\u547d\u4ee4",id:"\u521b\u5efa\u66f4\u591a\u547d\u4ee4",level:4},{value:"\u5b8c\u5584\u5e2e\u52a9\u4fe1\u606f",id:"\u5b8c\u5584\u5e2e\u52a9\u4fe1\u606f",level:4},{value:"\u6253\u5370\u4e2a Logo",id:"\u6253\u5370\u4e2a-logo",level:4},{value:"\u8be2\u95ee\u7528\u6237\u95ee\u9898\u83b7\u53d6\u521b\u5efa\u6240\u9700\u4fe1\u606f",id:"\u8be2\u95ee\u7528\u6237\u95ee\u9898\u83b7\u53d6\u521b\u5efa\u6240\u9700\u4fe1\u606f",level:4},{value:"\u5982\u679c\u76ee\u5f55\u5df2\u5b58\u5728",id:"\u5982\u679c\u76ee\u5f55\u5df2\u5b58\u5728",level:5},{value:"\u5982\u4f55\u83b7\u53d6\u6a21\u7248\u4fe1\u606f",id:"\u5982\u4f55\u83b7\u53d6\u6a21\u7248\u4fe1\u606f",level:4},{value:"\u7528\u6237\u9009\u62e9\u6a21\u677f",id:"\u7528\u6237\u9009\u62e9\u6a21\u677f",level:4},{value:"\u7528\u6237\u9009\u62e9\u7248\u672c",id:"\u7528\u6237\u9009\u62e9\u7248\u672c",level:4},{value:"\u4e0b\u8f7d\u8fdc\u7a0b\u6a21\u677f",id:"\u4e0b\u8f7d\u8fdc\u7a0b\u6a21\u677f",level:4},{value:"\u53d1\u5e03\u9879\u76ee",id:"\u53d1\u5e03\u9879\u76ee",level:3}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"\u642d\u5efa\u81ea\u5df1\u7684\u811a\u624b\u67b6",children:"\u642d\u5efa\u81ea\u5df1\u7684\u811a\u624b\u67b6"}),"\n",(0,i.jsxs)(e.p,{children:["\u5148\u7ed9\u6211\u4eec\u7684\u811a\u624b\u67b6\u8d77\u4e2a\u540d\u5b57\u5427\uff0c\u6b63\u597d\u795d\u878d\u53f7\u767b\u9646\u4e86\u706b\u661f\uff0c\u4e0d\u5982\u5c31\u53eb\uff1a",(0,i.jsx)(e.code,{children:"zhurong-cli"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:".-') _  ('-. .-.             _  .-')                    .-') _             \n  (  OO) )( OO )  /            ( ( -O )                  ( OO ) )            \n,(_)----. ,--. ,--. ,--. ,--.   ,------.  .-'),-----. ,--./ ,--,'  ,----.     \n|       | |  | |  | |  | |  |   |   /`. '( OO'  .-.  '|   \\ |  |\\ '  .-./-')  \n'--.   /  |   .|  | |  | | .-') |  /  | |/   |  | |  ||    |  | )|  |_( O- ) \n(_/   /   |       | |  |_|( OO )|  |_.' |_) |  ||  ||  .     |/ |  | .--, \\ \n /   /___ |  .-.  | |  | | `-' /|  .  '.'  \\ |  | |  ||  |\\    | (|  | '. (_/ \n|        ||  | |  |('  '-'(_.-' |  |\\  \\    `'  '-'  '|  | \\   |  |  '--'  |  \n`--------'`--' `--'  `-----'    `--' '--'     `-----' `--'  `--'   `------' \n"})}),"\n",(0,i.jsx)(e.p,{children:"\u9700\u8981\u5b9e\u73b0\u54ea\u4e9b\u57fa\u672c\u529f\u80fd\uff1a"}),"\n",(0,i.jsxs)(e.p,{children:["\u901a\u8fc7 ",(0,i.jsx)(e.code,{children:"zr create <name>"})," \u547d\u4ee4\u542f\u52a8\u9879\u76ee"]}),"\n",(0,i.jsx)(e.p,{children:"\u8be2\u95ee\u7528\u6237\u9700\u8981\u9009\u62e9\u9700\u8981\u4e0b\u8f7d\u7684\u6a21\u677f"}),"\n",(0,i.jsx)(e.p,{children:"\u8fdc\u7a0b\u62c9\u53d6\u6a21\u677f\u6587\u4ef6"}),"\n",(0,i.jsx)(e.p,{children:"\u642d\u5efa\u6b65\u9aa4\u62c6\u89e3\uff1a"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"\u521b\u5efa\u9879\u76ee"}),"\n",(0,i.jsxs)(e.li,{children:["\u521b\u5efa\u811a\u624b\u67b6\u542f\u52a8\u547d\u4ee4\uff08\u4f7f\u7528",(0,i.jsx)(e.code,{children:"commander"}),"\uff09"]}),"\n",(0,i.jsxs)(e.li,{children:["\u8be2\u95ee\u7528\u6237\u95ee\u9898\u83b7\u53d6\u521b\u5efa\u6240\u9700\u4fe1\u606f\uff08\u4f7f\u7528",(0,i.jsx)(e.code,{children:"inquirer"}),"\uff09"]}),"\n",(0,i.jsxs)(e.li,{children:["\u4e0b\u8f7d\u8fdc\u7a0b\u6a21\u677f\uff08\u4f7f\u7528",(0,i.jsx)(e.code,{children:"download-git-repo"}),"\uff09"]}),"\n",(0,i.jsx)(e.li,{children:"\u53d1\u5e03\u9879\u76ee"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u521b\u5efa\u9879\u76ee",children:"\u521b\u5efa\u9879\u76ee"}),"\n",(0,i.jsxs)(e.p,{children:["\u53c2\u7167\u524d\u9762\u7684\u4f8b\u5b50\uff0c\u5148\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684",(0,i.jsx)(e.code,{children:"Node-Cli"}),"\u7ed3\u6784"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"zhurong-cli           \n\u251c\u2500 bin                \n\u2502  \u2514\u2500 cli.js  # \u542f\u52a8\u6587\u4ef6      \n\u251c\u2500 README.md          \n\u2514\u2500 package.json   \n"})}),"\n",(0,i.jsx)(e.p,{children:"\u914d\u7f6e\u811a\u624b\u67b6\u542f\u52a8\u6587\u4ef6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "name": "zhurong-cli",\n  "version": "1.0.0",\n  "description": "simple vue cli",\n  "main": "index.js",\n  "bin": {\n    "zr": "./bin/cli.js" // \u914d\u7f6e\u542f\u52a8\u6587\u4ef6\u8def\u5f84\uff0czr \u4e3a\u522b\u540d\n  },\n  "scripts": {\n    "test": "echo "Error: no test specified" && exit 1"\n  },\n  "author": {\n    "name": "T-Roc",\n    "email": "lxp_work@163.com"\n  },\n  "license": "MIT"\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u7b80\u5355\u7f16\u8f91\u4e00\u4e0b\u6211\u4eec\u7684",(0,i.jsx)(e.code,{children:"cli.js"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"#! /usr/bin/env node\n\nconsole.log('zhurong-cli working ~')\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\u8c03\u8bd5\uff0c\u4f7f\u7528",(0,i.jsx)(e.code,{children:"npm link"}),"\u94fe\u63a5\u5230\u5168\u5c40"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"~/Desktop/cli/zhurong-cli ->npm link\nnpm WARN zhurong-cli@1.0.0 No repository field.\n\nup to date in 1.327s\nfound 0 vulnerabilities\n\n/usr/local/bin/zr -> /usr/local/lib/node_modules/zhurong-cli/bin/cli.js\n/usr/local/lib/node_modules/zhurong-cli -> /Users/Desktop/cli/zhurong-cli\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5b8c\u6210\u4e4b\u540e\uff0c\u63a5\u7740\u6d4b\u8bd5\u4e00\u4e0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"~/Desktop/cli/zhurong-cli ->zr\nzhurong-cli working ~ # \u6253\u5370\u5185\u5bb9\n"})}),"\n",(0,i.jsx)(e.p,{children:"OK\uff0c\u5f97\u5230\u4e86\u6211\u4eec\u60f3\u8981\u7684\u6253\u5370\u5185\u5bb9\uff0c\u63a5\u4e0b\u6765"}),"\n",(0,i.jsx)(e.h3,{id:"\u521b\u5efa\u811a\u624b\u67b6\u542f\u52a8\u547d\u4ee4",children:"\u521b\u5efa\u811a\u624b\u67b6\u542f\u52a8\u547d\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u7b80\u5355\u5206\u6790\u4e00\u4e0b\u6211\u4eec\u8981\u600e\u4e48\u505a\uff1f"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\u9996\u5148\u6211\u4eec\u8981\u501f\u52a9",(0,i.jsx)(e.code,{children:"commander"}),"\u4f9d\u8d56\u53bb\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42"]}),"\n",(0,i.jsxs)(e.li,{children:["\u53c2\u7167",(0,i.jsx)(e.code,{children:"vue-cli"}),"\u5e38\u7528\u7684\u547d\u4ee4\u6709",(0,i.jsx)(e.code,{children:"create"}),"\u3001",(0,i.jsx)(e.code,{children:"config"}),"\u7b49\u7b49\uff0c\u5728\u6700\u65b0\u7248\u672c\u4e2d\u53ef\u4ee5\u4f7f\u7528",(0,i.jsx)(e.code,{children:"vue ui"}),"\u8fdb\u884c\u53ef\u89c6\u5316\u521b\u5efa"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u521b\u5efa\u7684\u5b58\u5728\uff0c\u9700\u8981\u63d0\u793a\u662f\u5426\u8986\u76d6"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u73b0\u5728\u5f00\u59cb\u5427"}),"\n",(0,i.jsx)(e.h4,{id:"\u5b89\u88c5\u4f9d\u8d56",children:"\u5b89\u88c5\u4f9d\u8d56"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"npm install commander --save\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e"}),"\n",(0,i.jsx)(e.h3,{id:"\u521b\u5efa\u547d\u4ee4",children:"\u521b\u5efa\u547d\u4ee4"}),"\n",(0,i.jsxs)(e.p,{children:["\u6253\u5f00",(0,i.jsx)(e.code,{children:"cli.js"}),"\u8fdb\u884c\u7f16\u8f91"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"#! /usr/bin/env node\n\nconst program = require('commander')\n\nprogram\n  // \u5b9a\u4e49\u547d\u4ee4\u548c\u53c2\u6570\n  .command('create <app-name>')\n  .description('create a new project')\n  // -f or --force \u4e3a\u5f3a\u5236\u521b\u5efa\uff0c\u5982\u679c\u521b\u5efa\u7684\u76ee\u5f55\u5b58\u5728\u5219\u76f4\u63a5\u8986\u76d6\n  .option('-f, --force', 'overwrite target directory if it exist')\n  .action((name, options) => {\n    // \u6253\u5370\u6267\u884c\u7ed3\u679c\n    console.log('name:',name,'options:',options)\n  })\n  \nprogram\n   // \u914d\u7f6e\u7248\u672c\u53f7\u4fe1\u606f\n  .version(`v${require('../package.json').version}`)\n  .usage('<command> [option]')\n  \n// \u89e3\u6790\u7528\u6237\u6267\u884c\u547d\u4ee4\u4f20\u5165\u53c2\u6570\nprogram.parse(process.argv);\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u547d\u4ee4\u884c\u8f93\u5165 zr\uff0c\u68c0\u67e5\u4e00\u4e0b\u547d\u4ee4\u662f\u5426\u521b\u5efa\u6210\u529f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"~/Desktop/cli/zhurong-cli ->zr\nUsage: zr <command> [option]\n\nOptions:\n  -V, --version                output the version number\n  -h, --help                   display help for command\n\nCommands:\n  create [options] <app-name>  create a new project\n  help [command]               display help for command\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6211\u4eec\u53ef\u4ee5\u770b\u5230 ",(0,i.jsx)(e.code,{children:"Commands"})," \u4e0b\u9762\u5df2\u7ecf\u6709\u4e86 ",(0,i.jsx)(e.code,{children:"create [options] <app-name>"}),"\uff0c\u63a5\u7740\u6267\u884c\u4e00\u4e0b\u8fd9\u4e2a\u547d\u4ee4"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"~/Desktop/cli/zhurong-cli ->zr create\nerror: missing required argument 'app-name'\n\n~/Desktop/cli/zhurong-cli ->zr create my-project\n\u6267\u884c\u7ed3\u679c >>> name: my-project options: {}\n\n~/Desktop/cli/zhurong-cli ->zr create my-project -f\n\u6267\u884c\u7ed3\u679c >>> name: my-project options: { force: true }\n\n~/Desktop/cli/zhurong-cli ->zr create my-project --force\n\u6267\u884c\u7ed3\u679c >>> name: my-project options: { force: true }\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6210\u529f\u62ff\u5230\u547d\u4ee4\u884c\u8f93\u5165\u4fe1\u606f"}),"\n",(0,i.jsx)(e.h4,{id:"\u6267\u884c\u547d\u4ee4",children:"\u6267\u884c\u547d\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u521b\u5efa lib \u6587\u4ef6\u5939\u5e76\u5728\u6587\u4ef6\u5939\u4e0b\u521b\u5efa create.js"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// lib/create.js\n\nmodule.exports = async function (name, options) {\n  // \u9a8c\u8bc1\u662f\u5426\u6b63\u5e38\u53d6\u5230\u503c\n  console.log('>>> create.js', name, options)\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728 cli.js \u4e2d\u4f7f\u7528 create.js"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// bin/cli.js\n\n......\nprogram\n  .command('create <app-name>')\n  .description('create a new project')\n  .option('-f, --force', 'overwrite target directory if it exist') // \u662f\u5426\u5f3a\u5236\u521b\u5efa\uff0c\u5f53\u6587\u4ef6\u5939\u5df2\u7ecf\u5b58\u5728\n  .action((name, options) => {\n    // \u5728 create.js \u4e2d\u6267\u884c\u521b\u5efa\u4efb\u52a1\n    require('../lib/create.js')(name, options)\n  })\n......\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6267\u884c\u4e00\u4e0b ",(0,i.jsx)(e.code,{children:"zr create my-project"}),"\uff0c\u6b64\u65f6\u5728 ",(0,i.jsx)(e.code,{children:"create.js"})," \u6b63\u5e38\u6253\u5370\u4e86\u6211\u4eec\u51fa\u5165\u7684\u4fe1\u606f"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"~/Desktop/cli/zhurong-cli -> zr create my-project\n>>> create.js\nmy-project {}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u521b\u5efa\u76ee\u5f55\u7684\u65f6\u5019\uff0c\u9700\u8981\u601d\u8003\u4e00\u4e2a\u95ee\u9898\uff1a\u76ee\u5f55\u662f\u5426\u5df2\u7ecf\u5b58\u5728\uff1f"}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u5b58\u5728"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\u5f53 ",(0,i.jsx)(e.code,{children:"{ force: true }"})," \u65f6\uff0c\u76f4\u63a5\u79fb\u9664\u539f\u6765\u7684\u76ee\u5f55\uff0c\u76f4\u63a5\u521b\u5efa"]}),"\n",(0,i.jsxs)(e.li,{children:["\u5f53 ",(0,i.jsx)(e.code,{children:"{ force: false }"})," \u65f6 \u8be2\u95ee\u7528\u6237\u662f\u5426\u9700\u8981\u8986\u76d6"]}),"\n",(0,i.jsx)(e.li,{children:"\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u76f4\u63a5\u521b\u5efa"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u91cc\u7528\u5230\u4e86",(0,i.jsx)(e.code,{children:"fs"}),"\u7684\u6269\u5c55\u5de5\u5177",(0,i.jsx)(e.a,{href:"https://github.com/jprichardson/node-fs-extra",children:(0,i.jsx)(e.code,{children:"fs-extra"})}),"\uff0c\u5148\u6765\u5b89\u88c5\u4e00\u4e0b"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"# fs-extra \u662f\u5bf9 fs \u6a21\u5757\u7684\u6269\u5c55\uff0c\u652f\u6301 promise \n$ npm install fs-extra --save\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6211\u4eec\u63a5\u7740\u5b8c\u5584\u4e00\u4e0b",(0,i.jsx)(e.code,{children:"create.js"}),"\u5185\u90e8\u7684\u5b9e\u73b0\u903b\u8f91"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// lib/create.js\n\nconst path = require('path')\nconst fs = require('fs-extra')\n\nmodule.exports = async function (name, options) {\n  // \u6267\u884c\u521b\u5efa\u547d\u4ee4\n\n  // \u5f53\u524d\u547d\u4ee4\u884c\u9009\u62e9\u7684\u76ee\u5f55\n  const cwd  = process.cwd();\n  // \u9700\u8981\u521b\u5efa\u7684\u76ee\u5f55\u5730\u5740\n  const targetAir  = path.join(cwd, name)\n\n  // \u76ee\u5f55\u662f\u5426\u5df2\u7ecf\u5b58\u5728\uff1f\n  if (fs.existsSync(targetAir)) {\n\n    // \u662f\u5426\u4e3a\u5f3a\u5236\u521b\u5efa\uff1f\n    if (options.force) {\n      await fs.remove(targetAir)\n    } else {\n      // TODO\uff1a\u8be2\u95ee\u7528\u6237\u662f\u5426\u786e\u5b9a\u8981\u8986\u76d6\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8be2\u95ee\u90e8\u5206\u7684\u903b\u8f91\uff0c\u6211\u4eec\u5c06\u5728\u4e0b\u6587\u7ee7\u7eed\u5b8c\u5584"}),"\n",(0,i.jsx)(e.h4,{id:"\u521b\u5efa\u66f4\u591a\u547d\u4ee4",children:"\u521b\u5efa\u66f4\u591a\u547d\u4ee4"}),"\n",(0,i.jsx)(e.p,{children:"\u5982\u679c\u60f3\u6dfb\u52a0\u5176\u4ed6\u547d\u4ee4\u4e5f\u662f\u540c\u6837\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u8fd9\u91cc\u5c31\u4e0d\u6269\u5c55\u8bf4\u660e\u4e86\uff0c\u793a\u4f8b\u5982\u4e0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// bin/cli.js\n\n// \u914d\u7f6e config \u547d\u4ee4\nprogram\n  .command('config [value]')\n  .description('inspect and modify the config')\n  .option('-g, --get <path>', 'get value from option')\n  .option('-s, --set <path> <value>')\n  .option('-d, --delete <path>', 'delete option from config')\n  .action((value, options) => {\n    console.log(value, options)\n  })\n\n// \u914d\u7f6e ui \u547d\u4ee4\nprogram\n  .command('ui')\n  .description('start add open roc-cli ui')\n  .option('-p, --port <port>', 'Port used for the UI Server')\n  .action((option) => {\n    console.log(option)\n  })\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u5b8c\u5584\u5e2e\u52a9\u4fe1\u606f",children:"\u5b8c\u5584\u5e2e\u52a9\u4fe1\u606f"}),"\n",(0,i.jsxs)(e.p,{children:["\u6211\u4eec\u5148\u770b\u4e00\u4e0b",(0,i.jsx)(e.code,{children:"vue-cli"}),"\u6267\u884c",(0,i.jsx)(e.code,{children:"--help"}),"\u6253\u5370\u7684\u4fe1\u606f"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://pic4.zhimg.com/v2-105f6ba721c2424764f00410e9c26d6f_r.jpg",alt:""})}),"\n",(0,i.jsxs)(e.p,{children:["\u5bf9\u6bd4",(0,i.jsx)(e.code,{children:"zr --help"}),"\u6253\u5370\u7684\u7ed3\u679c\uff0c\u7ed3\u5c3e\u5904\u5c11\u4e86\u4e00\u6761\u8bf4\u660e\u4fe1\u606f\uff0c\u8fd9\u91cc\u6211\u4eec\u505a\u8865\u5145\uff0c\u91cd\u70b9\u9700\u8981\u6ce8\u610f\u8bf4\u660e\u4fe1\u606f\u662f\u5e26\u6709\u989c\u8272\u7684\uff0c\u8fd9\u91cc\u5c31\u9700\u8981\u7528\u5230\u6211\u4eec\u5de5\u5177\u5e93\u91cc\u9762\u7684",(0,i.jsx)(e.code,{children:"chalk"}),"\u6765\u5904\u7406"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// bin/cli.js\n\nprogram\n  // \u76d1\u542c --help \u6267\u884c\n  .on('--help', () => {\n    // \u65b0\u589e\u8bf4\u660e\u4fe1\u606f\n    console.log(`\\r\\nRun ${chalk.cyan(`zr <command> --help`)} for detailed usage of given command\\r\\n`)\n  })\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u6253\u5370\u4e2a-logo",children:"\u6253\u5370\u4e2a Logo"}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c\u6b64\u65f6\u6211\u4eec\u60f3\u7ed9\u811a\u624b\u67b6\u6574\u4e2aLogo\uff0c\u5de5\u5177\u5e93\u91cc\u7684",(0,i.jsx)(e.a,{href:"https://github.com/cmatsuoka/figlet",children:(0,i.jsx)(e.code,{children:"figlet"})}),"\u5c31\u662f\u5e72\u8fd9\u4e2a\u7684"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// bin/cli.js\n\nprogram\n  .on('--help', () => {\n    // \u4f7f\u7528 figlet \u7ed8\u5236 Logo\n    console.log('\\r\\n' + figlet.textSync('zhurong', {\n      font: 'Ghost',\n      horizontalLayout: 'default',\n      verticalLayout: 'default',\n      width: 80,\n      whitespaceBreak: true\n    }));\n    // \u65b0\u589e\u8bf4\u660e\u4fe1\u606f\n    console.log(`\\r\\nRun ${chalk.cyan(`roc <command> --help`)} show details\\r\\n`)\n  })\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6211\u4eec\u518d\u770b\u770b\u6b64\u65f6\u7684",(0,i.jsx)(e.code,{children:"zr --help"}),"\u6253\u5370\u51fa\u6765\u7684\u662f\u4e2a\u4ec0\u4e48\u6837\u5b50"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://pic3.zhimg.com/v2-60fb8dc533c364c12600009e093e72f6_r.jpg",alt:""})}),"\n",(0,i.jsx)(e.p,{children:"\u770b\u8d77\u6765\u8fd8\u662f\u633a\u4e0d\u9519\u7684\uff0c\u54c8\u54c8"}),"\n",(0,i.jsx)(e.h4,{id:"\u8be2\u95ee\u7528\u6237\u95ee\u9898\u83b7\u53d6\u521b\u5efa\u6240\u9700\u4fe1\u606f",children:"\u8be2\u95ee\u7528\u6237\u95ee\u9898\u83b7\u53d6\u521b\u5efa\u6240\u9700\u4fe1\u606f"}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u91cc\u53ec\u5524\u6211\u4eec\u7684\u8001\u670b\u53cb",(0,i.jsx)(e.code,{children:"inquirer"}),"\uff0c\u8ba9\u4ed6\u6765\u5e2e\u6211\u4eec\u89e3\u51b3\u547d\u4ee4\u884c\u4ea4\u4e92\u7684\u95ee\u9898"]}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u4e0b\u6765\u6211\u4eec\u8981\u505a\u7684\uff1a"}),"\n",(0,i.jsx)(e.p,{children:"\u4e0a\u4e00\u6b65\u9057\u7559\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8be2\u95ee\u7528\u6237\u662f\u5426\u8986\u76d6\u5df2\u5b58\u5728\u7684\u76ee\u5f55"}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u6237\u9009\u62e9\u6a21\u677f"}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u6237\u9009\u62e9\u7248\u672c"}),"\n",(0,i.jsx)(e.li,{children:"\u83b7\u53d6\u4e0b\u8f7d\u6a21\u677f\u7684\u94fe\u63a5"}),"\n",(0,i.jsx)(e.li,{children:"\u8be2\u95ee\u662f\u5426\u8986\u76d6\u5df2\u5b58\u5728\u7684\u76ee\u5f55"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u91cc\u89e3\u51b3\u4e0a\u4e00\u6b65\u9057\u7559\u7684\u95ee\u9898\uff1a"}),"\n",(0,i.jsx)(e.h5,{id:"\u5982\u679c\u76ee\u5f55\u5df2\u5b58\u5728",children:"\u5982\u679c\u76ee\u5f55\u5df2\u5b58\u5728"}),"\n",(0,i.jsxs)(e.p,{children:["\u5f53",(0,i.jsx)(e.code,{children:"{ force: false }"}),"\u65f6, \u8be2\u95ee\u7528\u6237\u662f\u5426\u9700\u8981\u8986\u76d6"]}),"\n",(0,i.jsx)(e.p,{children:"\u903b\u8f91\u5b9e\u9645\u4e0a\u5df2\u7ecf\u5b8c\u6210\uff0c\u8fd9\u91cc\u8865\u5145\u4e00\u4e0b\u8be2\u95ee\u7684\u5185\u5bb9"}),"\n",(0,i.jsx)(e.p,{children:"\u9996\u9009\u6765\u5b89\u88c5\u4e00\u4e0b inquirer"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"npm install inquirer --save\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u7136\u540e\u8be2\u95ee\u7528\u6237\u662f\u5426\u8fdb\u884c Overwrite"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// lib/create.js\n\nconst path = require('path')\n\n// fs-extra \u662f\u5bf9 fs \u6a21\u5757\u7684\u6269\u5c55\uff0c\u652f\u6301 promise \u8bed\u6cd5\nconst fs = require('fs-extra')\nconst inquirer = require('inquirer')\n\nmodule.exports = async function (name, options) {\n  // \u6267\u884c\u521b\u5efa\u547d\u4ee4\n\n  // \u5f53\u524d\u547d\u4ee4\u884c\u9009\u62e9\u7684\u76ee\u5f55\n  const cwd  = process.cwd();\n  // \u9700\u8981\u521b\u5efa\u7684\u76ee\u5f55\u5730\u5740\n  const targetAir  = path.join(cwd, name)\n\n  // \u76ee\u5f55\u662f\u5426\u5df2\u7ecf\u5b58\u5728\uff1f\n  if (fs.existsSync(targetAir)) {\n\n    // \u662f\u5426\u4e3a\u5f3a\u5236\u521b\u5efa\uff1f\n    if (options.force) {\n      await fs.remove(targetAir)\n    } else {\n\n      // \u8be2\u95ee\u7528\u6237\u662f\u5426\u786e\u5b9a\u8981\u8986\u76d6\n      let { action } = await inquirer.prompt([\n        {\n          name: 'action',\n          type: 'list',\n          message: 'Target directory already exists Pick an action:',\n          choices: [\n            {\n              name: 'Overwrite',\n              value: 'overwrite'\n            },{\n              name: 'Cancel',\n              value: false\n            }\n          ]\n        }\n      ])\n\n      if (!action) {\n        return;\n      } else if (action === 'overwrite') {\n        // \u79fb\u9664\u5df2\u5b58\u5728\u7684\u76ee\u5f55\n        console.log(`\\r\\nRemoving...`)\n        await fs.remove(targetAir)\n      }\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4eec\u6765\u6d4b\u8bd5\u4e00\u4e0b\uff1a"}),"\n",(0,i.jsxs)(e.p,{children:["\u5728\u5f53\u524d\u76ee\u5f55\uff0c\u5373\u547d\u4ee4\u884c\u4e2d\u663e\u793a\u7684\u76ee\u5f55\u4e0b\u624b\u52a8\u521b\u5efa2\u4e2a\u76ee\u5f55\uff0c\u8fd9\u91cc\u968f\u4fbf\u53d6\u540d\u4e3a",(0,i.jsx)(e.code,{children:"my-project"}),"\u548c",(0,i.jsx)(e.code,{children:"my-project2"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u6267\u884c",(0,i.jsx)(e.code,{children:"zr create my-project"}),"\uff0c\u6548\u679c\u5982\u4e0b"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6267\u884c",(0,i.jsx)(e.code,{children:"zr create my-project2 --f"}),"\uff0c\u53ef\u4ee5\u76f4\u63a5\u770b\u5230",(0,i.jsx)(e.code,{children:"my-project2"}),"\u88ab\u79fb\u9664"]}),"\n",(0,i.jsxs)(e.admonition,{type:"caution",children:[(0,i.jsx)(e.p,{children:"\u4e3a\u4ec0\u4e48\u8fd9\u91cc\u53ea\u505a\u79fb\u9664\uff1f"}),(0,i.jsx)(e.p,{children:"\u56e0\u4e3a\u540e\u9762\u83b7\u53d6\u5230\u6a21\u677f\u5730\u5740\u540e\uff0c\u4e0b\u8f7d\u7684\u65f6\u5019\u4f1a\u76f4\u63a5\u521b\u5efa\u9879\u76ee\u76ee\u5f55"})]}),"\n",(0,i.jsx)(e.h4,{id:"\u5982\u4f55\u83b7\u53d6\u6a21\u7248\u4fe1\u606f",children:"\u5982\u4f55\u83b7\u53d6\u6a21\u7248\u4fe1\u606f"}),"\n",(0,i.jsxs)(e.p,{children:["\u6a21\u677f\u6211\u5df2\u7ecf\u4e0a\u4f20\u5230",(0,i.jsx)(e.a,{href:"https://github.com/zhurong-cli",children:"\u8fdc\u7a0b\u4ed3\u5e93"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"vue3.0-template"}),"\u7248\u672c\u4fe1\u606f"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"vue-template"}),"\u7248\u672c\u4fe1\u606f"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"github"}),"\u63d0\u4f9b\u4e86"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"api.github.com/orgs/zhuron\u2026"}),"\u63a5\u53e3\u83b7\u53d6\u6a21\u677f\u4fe1\u606f"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"api.github.com/repos/zhuro\u2026"}),"\u63a5\u53e3\u83b7\u53d6\u7248\u672c\u4fe1\u606f"]}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u4eec\u5728 lib \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a http.js \u4e13\u95e8\u5904\u7406\u6a21\u677f\u548c\u7248\u672c\u4fe1\u606f\u7684\u83b7\u53d6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// lib/http.js\n\n// \u901a\u8fc7 axios \u5904\u7406\u8bf7\u6c42\nconst axios = require('axios')\n\naxios.interceptors.response.use(res => {\n  return res.data;\n})\n\n\n/**\n * \u83b7\u53d6\u6a21\u677f\u5217\u8868\n * @returns Promise\n */\nasync function getRepoList() {\n  return axios.get('https://api.github.com/orgs/zhurong-cli/repos')\n}\n\n/**\n * \u83b7\u53d6\u7248\u672c\u4fe1\u606f\n * @param {string} repo \u6a21\u677f\u540d\u79f0\n * @returns Promise\n */\nasync function  getTagList(repo) {\n  return axios.get(`https://api.github.com/repos/zhurong-cli/${repo}/tags`)\n}\n\nmodule.exports = {\n  getRepoList,\n  getTagList\n}\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u7528\u6237\u9009\u62e9\u6a21\u677f",children:"\u7528\u6237\u9009\u62e9\u6a21\u677f"}),"\n",(0,i.jsxs)(e.p,{children:["\u6211\u4eec\u4e13\u95e8\u65b0\u5efa\u4e00\u4e2a",(0,i.jsx)(e.code,{children:"Generator.js"}),"\u6765\u5904\u7406\u9879\u76ee\u521b\u5efa\u903b\u8f91"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// lib/Generator.js\n\nclass Generator {\n  constructor (name, targetDir){\n    // \u76ee\u5f55\u540d\u79f0\n    this.name = name;\n    // \u521b\u5efa\u4f4d\u7f6e\n    this.targetDir = targetDir;\n  }\n\n  // \u6838\u5fc3\u521b\u5efa\u903b\u8f91\n  create(){\n\n  }\n}\n\nmodule.exports = Generator;\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5728",(0,i.jsx)(e.code,{children:"create.js"}),"\u4e2d\u5f15\u5165",(0,i.jsx)(e.code,{children:"Generator"}),"\u7c7b"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// lib/create.js\n\n...\nconst Generator = require('./Generator')\n\nmodule.exports = async function (name, options) {\n  // \u6267\u884c\u521b\u5efa\u547d\u4ee4\n\n  // \u5f53\u524d\u547d\u4ee4\u884c\u9009\u62e9\u7684\u76ee\u5f55\n  const cwd  = process.cwd();\n  // \u9700\u8981\u521b\u5efa\u7684\u76ee\u5f55\u5730\u5740\n  const targetAir  = path.join(cwd, name)\n\n  // \u76ee\u5f55\u662f\u5426\u5df2\u7ecf\u5b58\u5728\uff1f\n  if (fs.existsSync(targetAir)) {\n    ...\n  }\n\n  // \u521b\u5efa\u9879\u76ee\n  const generator = new Generator(name, targetAir);\n\n  // \u5f00\u59cb\u521b\u5efa\u9879\u76ee\n  generator.create()\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u7740\u6765\u5199\u8be2\u95ee\u7528\u6237\u9009\u62e9\u6a21\u7248\u90fd\u903b\u8f91"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// lib/Generator.js\n\nconst { getRepoList } = require('./http')\nconst ora = require('ora')\nconst inquirer = require('inquirer')\n\n// \u6dfb\u52a0\u52a0\u8f7d\u52a8\u753b\nasync function wrapLoading(fn, message, ...args) {\n  // \u4f7f\u7528 ora \u521d\u59cb\u5316\uff0c\u4f20\u5165\u63d0\u793a\u4fe1\u606f message\n  const spinner = ora(message);\n  // \u5f00\u59cb\u52a0\u8f7d\u52a8\u753b\n  spinner.start();\n\n  try {\n    // \u6267\u884c\u4f20\u5165\u65b9\u6cd5 fn\n    const result = await fn(...args);\n    // \u72b6\u6001\u4e3a\u4fee\u6539\u4e3a\u6210\u529f\n    spinner.succeed();\n    return result; \n  } catch (error) {\n    // \u72b6\u6001\u4e3a\u4fee\u6539\u4e3a\u5931\u8d25\n    spinner.fail('Request failed, refetch ...')\n  } \n}\n\nclass Generator {\n  constructor (name, targetDir){\n    // \u76ee\u5f55\u540d\u79f0\n    this.name = name;\n    // \u521b\u5efa\u4f4d\u7f6e\n    this.targetDir = targetDir;\n  }\n\n  // \u83b7\u53d6\u7528\u6237\u9009\u62e9\u7684\u6a21\u677f\n  // 1\uff09\u4ece\u8fdc\u7a0b\u62c9\u53d6\u6a21\u677f\u6570\u636e\n  // 2\uff09\u7528\u6237\u9009\u62e9\u81ea\u5df1\u65b0\u4e0b\u8f7d\u7684\u6a21\u677f\u540d\u79f0\n  // 3\uff09return \u7528\u6237\u9009\u62e9\u7684\u540d\u79f0\n\n  async getRepo() {\n    // 1\uff09\u4ece\u8fdc\u7a0b\u62c9\u53d6\u6a21\u677f\u6570\u636e\n    const repoList = await wrapLoading(getRepoList, 'waiting fetch template');\n    if (!repoList) return;\n\n    // \u8fc7\u6ee4\u6211\u4eec\u9700\u8981\u7684\u6a21\u677f\u540d\u79f0\n    const repos = repoList.map(item => item.name);\n\n    // 2\uff09\u7528\u6237\u9009\u62e9\u81ea\u5df1\u65b0\u4e0b\u8f7d\u7684\u6a21\u677f\u540d\u79f0\n    const { repo } = await inquirer.prompt({\n      name: 'repo',\n      type: 'list',\n      choices: repos,\n      message: 'Please choose a template to create project'\n    })\n\n    // 3\uff09return \u7528\u6237\u9009\u62e9\u7684\u540d\u79f0\n    return repo;\n  }\n\n  // \u6838\u5fc3\u521b\u5efa\u903b\u8f91\n  // 1\uff09\u83b7\u53d6\u6a21\u677f\u540d\u79f0\n  // 2\uff09\u83b7\u53d6 tag \u540d\u79f0\n  // 3\uff09\u4e0b\u8f7d\u6a21\u677f\u5230\u6a21\u677f\u76ee\u5f55\n  async create(){\n\n    // 1\uff09\u83b7\u53d6\u6a21\u677f\u540d\u79f0\n    const repo = await this.getRepo()\n    \n    console.log('\u7528\u6237\u9009\u62e9\u4e86\uff0crepo=' + repo)\n  }\n}\n\nmodule.exports = Generator;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6d4b\u8bd5\u4e00\u4e0b\uff0c\u770b\u770b\u73b0\u5728\u662f\u4e2a\u4ec0\u4e48\u6837\u5b50"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://pic3.zhimg.com/v2-84dc257ae7a83ce6f8b83e0cb8ee7d22_r.jpg",alt:""})}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u9009\u62e9\u4e86\u9ed8\u8ba4\u7684 vue-template\uff0c\u6b64\u65f6"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://pic1.zhimg.com/v2-9a113ea6fa1eacfd7a58de25c423bf9c_r.jpg",alt:""})}),"\n",(0,i.jsx)(e.p,{children:"\u6210\u529f\u62ff\u5230\u6a21\u677f\u540d\u79f0 repo \u7684\u7ed3\u679c \u270c\ufe0f"}),"\n",(0,i.jsx)(e.h4,{id:"\u7528\u6237\u9009\u62e9\u7248\u672c",children:"\u7528\u6237\u9009\u62e9\u7248\u672c"}),"\n",(0,i.jsx)(e.p,{children:"\u8fc7\u7a0b\u548c\u9009\u62e9\u6a21\u7248\u4ed3\u5e93\u7c7b\u4f3c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// lib/generator.js\n\nconst { getRepoList, getTagList } = require('./http')\n...\n\n// \u6dfb\u52a0\u52a0\u8f7d\u52a8\u753b\nasync function wrapLoading(fn, message, ...args) {\n  ...\n}\n\nclass Generator {\n  constructor (name, targetDir){\n    // \u76ee\u5f55\u540d\u79f0\n    this.name = name;\n    // \u521b\u5efa\u4f4d\u7f6e\n    this.targetDir = targetDir;\n  }\n\n  // \u83b7\u53d6\u7528\u6237\u9009\u62e9\u7684\u6a21\u677f\n  // 1\uff09\u4ece\u8fdc\u7a0b\u62c9\u53d6\u6a21\u677f\u6570\u636e\n  // 2\uff09\u7528\u6237\u9009\u62e9\u81ea\u5df1\u65b0\u4e0b\u8f7d\u7684\u6a21\u677f\u540d\u79f0\n  // 3\uff09return \u7528\u6237\u9009\u62e9\u7684\u540d\u79f0\n\n  async getRepo() {\n    ...\n  }\n\n  // \u83b7\u53d6\u7528\u6237\u9009\u62e9\u7684\u7248\u672c\n  // 1\uff09\u57fa\u4e8e repo \u7ed3\u679c\uff0c\u8fdc\u7a0b\u62c9\u53d6\u5bf9\u5e94\u7684 tag \u5217\u8868\n  // 2\uff09\u7528\u6237\u9009\u62e9\u81ea\u5df1\u9700\u8981\u4e0b\u8f7d\u7684 tag\n  // 3\uff09return \u7528\u6237\u9009\u62e9\u7684 tag\n\n  async getTag(repo) {\n    // 1\uff09\u57fa\u4e8e repo \u7ed3\u679c\uff0c\u8fdc\u7a0b\u62c9\u53d6\u5bf9\u5e94\u7684 tag \u5217\u8868\n    const tags = await wrapLoading(getTagList, 'waiting fetch tag', repo);\n    if (!tags) return;\n    \n    // \u8fc7\u6ee4\u6211\u4eec\u9700\u8981\u7684 tag \u540d\u79f0\n    const tagsList = tags.map(item => item.name);\n\n    // 2\uff09\u7528\u6237\u9009\u62e9\u81ea\u5df1\u9700\u8981\u4e0b\u8f7d\u7684 tag\n    const { tag } = await inquirer.prompt({\n      name: 'tag',\n      type: 'list',\n      choices: tagsList,\n      message: 'Place choose a tag to create project'\n    })\n\n    // 3\uff09return \u7528\u6237\u9009\u62e9\u7684 tag\n    return tag\n  }\n\n  // \u6838\u5fc3\u521b\u5efa\u903b\u8f91\n  // 1\uff09\u83b7\u53d6\u6a21\u677f\u540d\u79f0\n  // 2\uff09\u83b7\u53d6 tag \u540d\u79f0\n  // 3\uff09\u4e0b\u8f7d\u6a21\u677f\u5230\u6a21\u677f\u76ee\u5f55\n  async create(){\n\n    // 1\uff09\u83b7\u53d6\u6a21\u677f\u540d\u79f0\n    const repo = await this.getRepo()\n\n    // 2) \u83b7\u53d6 tag \u540d\u79f0\n    const tag = await this.getTag(repo)\n     \n    console.log('\u7528\u6237\u9009\u62e9\u4e86\uff0crepo=' + repo + '\uff0ctag='+ tag)\n  }\n}\n\nmodule.exports = Generator;\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6d4b\u8bd5\u4e00\u4e0b\uff0c\u6267\u884c",(0,i.jsx)(e.code,{children:"zr create my-project"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://pic3.zhimg.com/v2-8d5e725a6a4af4dc95c73304b1c451d6_r.jpg",alt:""})}),"\n",(0,i.jsx)(e.p,{children:"\u9009\u62e9\u597d\u4e86\u4e4b\u540e\uff0c\u770b\u770b\u6253\u5370\u7ed3\u679c"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://pic3.zhimg.com/v2-078e1d3d1cc0005a45a4b48d8fa2121e_r.jpg",alt:""})}),"\n",(0,i.jsx)(e.p,{children:"\u5230\u6b64\u8be2\u95ee\u7684\u5de5\u4f5c\u5c31\u7ed3\u675f\u4e86\uff0c\u53ef\u4ee5\u8fdb\u884c\u6a21\u677f\u4e0b\u8f7d\u4e86"}),"\n",(0,i.jsx)(e.h4,{id:"\u4e0b\u8f7d\u8fdc\u7a0b\u6a21\u677f",children:"\u4e0b\u8f7d\u8fdc\u7a0b\u6a21\u677f"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e0b\u8f7d\u8fdc\u7a0b\u6a21\u7248\u9700\u8981\u4f7f\u7528",(0,i.jsx)(e.a,{href:"https://github.com/sallen450/download-git-repo",children:(0,i.jsx)(e.code,{children:"download-git-repo"})}),"\u5de5\u5177\u5305\uff0c\u5b9e\u9645\u4e0a\u5b83\u4e5f\u5728\u6211\u4eec\u4e0a\u9762\u5217\u7684\u5de5\u5177\u83dc\u5355\u4e0a\uff0c\u4f46\u662f\u5728\u4f7f\u7528\u5b83\u7684\u65f6\u5019\uff0c\u9700\u8981\u6ce8\u610f\u4e00\u4e2a\u95ee\u9898\uff0c\u5c31\u662f\u5b83\u662f\u4e0d\u652f\u6301",(0,i.jsx)(e.code,{children:"promise"}),"\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u9700\u8981\u4f7f\u7528",(0,i.jsx)(e.code,{children:"util"}),"\u6a21\u5757\u4e2d\u7684",(0,i.jsx)(e.code,{children:"promisify"}),"\u65b9\u6cd5\u5bf9\u5176\u8fdb\u884c",(0,i.jsx)(e.code,{children:"promise"}),"\u5316"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5b89\u88c5\u4f9d\u8d56\u4e0e",(0,i.jsx)(e.code,{children:"promise"}),"\u5316"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"npm install download-git-repo --save\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8fdb\u884c",(0,i.jsx)(e.code,{children:"promise"}),"\u5316\u5904\u7406"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// lib/Generator.js\n\n...\nconst util = require('util')\nconst downloadGitRepo = require('download-git-repo') // \u4e0d\u652f\u6301 Promise\n\nclass Generator {\n  constructor (name, targetDir){\n    ...\n\n    // \u5bf9 download-git-repo \u8fdb\u884c promise \u5316\u6539\u9020\n    this.downloadGitRepo = util.promisify(downloadGitRepo);\n  }\n  \n  ...\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6838\u5fc3\u4e0b\u8f7d\u529f\u80fd"}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u7740\uff0c\u5c31\u662f\u6a21\u677f\u4e0b\u8f7d\u90e8\u5206\u7684\u903b\u8f91\u4e86"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-js",children:"// lib/Generator.js\n\n...\nconst util = require('util')\nconst path = require('path')\nconst downloadGitRepo = require('download-git-repo') // \u4e0d\u652f\u6301 Promise\n\n// \u6dfb\u52a0\u52a0\u8f7d\u52a8\u753b\nasync function wrapLoading(fn, message, ...args) {\n  ...\n}\n\nclass Generator {\n  constructor (name, targetDir){\n    ...\n\n    // \u5bf9 download-git-repo \u8fdb\u884c promise \u5316\u6539\u9020\n    this.downloadGitRepo = util.promisify(downloadGitRepo);\n  }\n  ...\n  \n  // \u4e0b\u8f7d\u8fdc\u7a0b\u6a21\u677f\n  // 1\uff09\u62fc\u63a5\u4e0b\u8f7d\u5730\u5740\n  // 2\uff09\u8c03\u7528\u4e0b\u8f7d\u65b9\u6cd5\n  async download(repo, tag){\n\n    // 1\uff09\u62fc\u63a5\u4e0b\u8f7d\u5730\u5740\n    const requestUrl = `zhurong-cli/${repo}${tag?'#'+tag:''}`;\n\n    // 2\uff09\u8c03\u7528\u4e0b\u8f7d\u65b9\u6cd5\n    await wrapLoading(\n      this.downloadGitRepo, // \u8fdc\u7a0b\u4e0b\u8f7d\u65b9\u6cd5\n      'waiting download template', // \u52a0\u8f7d\u63d0\u793a\u4fe1\u606f\n      requestUrl, // \u53c2\u65701: \u4e0b\u8f7d\u5730\u5740\n      path.resolve(process.cwd(), this.targetDir)) // \u53c2\u65702: \u521b\u5efa\u4f4d\u7f6e\n  }\n\n  // \u6838\u5fc3\u521b\u5efa\u903b\u8f91\n  // 1\uff09\u83b7\u53d6\u6a21\u677f\u540d\u79f0\n  // 2\uff09\u83b7\u53d6 tag \u540d\u79f0\n  // 3\uff09\u4e0b\u8f7d\u6a21\u677f\u5230\u6a21\u677f\u76ee\u5f55\n  // 4\uff09\u6a21\u677f\u4f7f\u7528\u63d0\u793a\n  async create(){\n\n    // 1\uff09\u83b7\u53d6\u6a21\u677f\u540d\u79f0\n    const repo = await this.getRepo()\n\n    // 2) \u83b7\u53d6 tag \u540d\u79f0\n    const tag = await this.getTag(repo)\n\n    // 3\uff09\u4e0b\u8f7d\u6a21\u677f\u5230\u6a21\u677f\u76ee\u5f55\n    await this.download(repo, tag)\n    \n    // 4\uff09\u6a21\u677f\u4f7f\u7528\u63d0\u793a\n    console.log(`\\r\\nSuccessfully created project ${chalk.cyan(this.name)}`)\n    console.log(`\\r\\n  cd ${chalk.cyan(this.name)}`)\n    console.log('  npm run dev\\r\\n')\n  }\n}\n\nmodule.exports = Generator;\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5b8c\u6210\u8fd9\u5757\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u811a\u624b\u67b6\u5c31\u5b8c\u6210\u4e86 \u2705"}),"\n",(0,i.jsxs)(e.p,{children:["\u6765\u8bd5\u4e00\u4e0b\u6548\u679c\u5982\u4f55\uff0c\u6267\u884c ",(0,i.jsx)(e.code,{children:"zr create my-project"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://pic3.zhimg.com/v2-142d11f613f1c66b6765d24b73bbcdbe_r.jpg",alt:""})}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u4e2a\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u770b\u5230\u6a21\u677f\u5c31\u5df2\u7ecf\u521b\u5efa\u597d\u4e86"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"zhurong-cli                 \n\u251c\u2500 bin                      \n\u2502  \u2514\u2500 cli.js                \n\u251c\u2500 lib                      \n\u2502  \u251c\u2500 Generator.js          \n\u2502  \u251c\u2500 create.js             \n\u2502  \u2514\u2500 http.js               \n\u251c\u2500 my-project .............. \u6211\u4eec\u521b\u5efa\u7684\u9879\u76ee             \n\u2502  \u251c\u2500 public                \n\u2502  \u2502  \u251c\u2500 favicon.ico        \n\u2502  \u2502  \u2514\u2500 index.html         \n\u2502  \u251c\u2500 src                   \n\u2502  \u2502  \u251c\u2500 assets             \n\u2502  \u2502  \u2502  \u2514\u2500 logo.png        \n\u2502  \u2502  \u251c\u2500 components         \n\u2502  \u2502  \u2502  \u2514\u2500 HelloWorld.vue  \n\u2502  \u2502  \u251c\u2500 App.vue            \n\u2502  \u2502  \u2514\u2500 main.js            \n\u2502  \u251c\u2500 README.md             \n\u2502  \u251c\u2500 babel.config.js       \n\u2502  \u2514\u2500 package.json          \n\u251c\u2500 README.md                \n\u251c\u2500 package-lock.json        \n\u2514\u2500 package.json             \n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u53d1\u5e03\u9879\u76ee",children:"\u53d1\u5e03\u9879\u76ee"}),"\n",(0,i.jsxs)(e.p,{children:["\u4e0a\u9762\u90fd\u662f\u5728\u672c\u5730\u6d4b\u8bd5\uff0c\u5b9e\u9645\u5728\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u5c31\u9700\u8981\u53d1\u5e03\u5230",(0,i.jsx)(e.code,{children:"npm"}),"\u4ed3\u5e93\uff0c\u901a\u8fc7",(0,i.jsx)(e.code,{children:"npm"}),"\u5168\u5c40\u5b89\u88c5\u4e4b\u540e\uff0c\u76f4\u63a5\u5230\u76ee\u6807\u76ee\u5f55\u4e0b\u9762\u53bb\u521b\u5efa\u9879\u76ee\uff0c\u5982\u4f55\u53d1\u5e03\u5462\uff1f"]}),"\n",(0,i.jsxs)(e.p,{children:["\u7b2c\u4e00\u6b65\uff0c\u5728",(0,i.jsx)(e.code,{children:"git"}),"\u4e0a\u5efa\u597d\u4ed3\u5e93"]}),"\n",(0,i.jsxs)(e.p,{children:["\u7b2c\u4e8c\u6b65\uff0c\u5b8c\u5584",(0,i.jsx)(e.code,{children:"package.json"}),"\u4e2d\u7684\u914d\u7f6e"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "name": "zhurong-cli",\n  "version": "1.0.4",\n  "description": "",\n  "main": "index.js",\n  "bin": {\n    "zr": "./bin/cli.js"\n  },\n  "scripts": {\n    "test": "echo "Error: no test specified" && exit 1"\n  },\n  "files": [\n    "bin",\n    "lib"\n  ],\n  "author": {\n    "name": "kinda",\n    "email": "1142704468@qq.com"\n  },\n  "keywords": [\n    "zhurong-cli",\n    "zr",\n    "\u811a\u624b\u67b6"\n  ],\n  "license": "MIT",\n  "dependencies": {\n    "axios": "^0.21.1",\n    "chalk": "^4.1.1",\n    "commander": "^7.2.0",\n    "download-git-repo": "^3.0.2",\n    "figlet": "^1.5.0",\n    "fs-extra": "^10.0.0",\n    "inquirer": "^8.0.0",\n    "ora": "^5.4.0"\n  }\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["\u7b2c\u4e09\u6b65\uff0c\u4f7f\u7528",(0,i.jsx)(e.code,{children:"npm publish"}),"\u8fdb\u884c\u53d1\u5e03\uff0c\u66f4\u65b0\u5230\u65f6\u5019\uff0c\u6ce8\u610f\u4fee\u6539\u7248\u672c\u53f7"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://pic2.zhimg.com/v2-3c5e28571cb6e15bd975e83126bc0789_r.jpg",alt:""})}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u6837\u5c31\u53d1\u5e03\u6210\u529f\u4e86\uff0c\u6211\u4eec\u6253\u5f00",(0,i.jsx)(e.code,{children:"npm"}),"\u7f51\u7ad9\u641c\u7d22\u4e00\u4e0b"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5df2\u7ecf\u53ef\u4ee5\u627e\u5230\u5b83\u4e86\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7",(0,i.jsx)(e.code,{children:"npm"}),"\u6216\u8005",(0,i.jsx)(e.code,{children:"yarn"}),"\u5168\u5c40\u5b89\u88c5\u4f7f\u7528\u4e86"]})]})}function p(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},3881:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>t});var s=r(8101);const i={},c=s.createContext(i);function o(n){const e=s.useContext(c);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);
"use strict";(self.webpackChunkalndaly_github_io=self.webpackChunkalndaly_github_io||[]).push([[7230],{3881:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var i=t(8101);const s={},a=i.createContext(s);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:n},e.children)}},9928:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"frontend/Swift/basic/\u8bf7\u6c42","title":"Swift\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42","description":"ios\u5f00\u53d1\u6587\u6863","source":"@site/docs/frontend/Swift/basic/\u8bf7\u6c42.md","sourceDirName":"frontend/Swift/basic","slug":"/frontend/Swift/basic/\u8bf7\u6c42","permalink":"/docs/frontend/Swift/basic/\u8bf7\u6c42","draft":false,"unlisted":false,"editUrl":"https://github.com/Alndaly/alndaly.github.io/tree/main/packages/create-docusaurus/templates/shared/docs/frontend/Swift/basic/\u8bf7\u6c42.md","tags":[{"inline":true,"label":"swift","permalink":"/docs/tags/swift"},{"inline":true,"label":"url","permalink":"/docs/tags/url"}],"version":"current","lastUpdatedAt":1742396220000,"frontMatter":{"title":"Swift\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42","tags":["swift","url"],"categories":[["\u6280\u672f"]],"description":"ios\u5f00\u53d1\u6587\u6863"},"sidebar":"frontEndSidebar","previous":{"title":"Swift\u7ee7\u627f","permalink":"/docs/frontend/Swift/basic/\u7ee7\u627f"},"next":{"title":"Swift\u95ed\u5305","permalink":"/docs/frontend/Swift/basic/\u95ed\u5305"}}');var s=t(5105),a=t(3881);const r={title:"Swift\u53d1\u9001\u7f51\u7edc\u8bf7\u6c42",tags:["swift","url"],categories:[["\u6280\u672f"]],description:"ios\u5f00\u53d1\u6587\u6863"},l=void 0,o={},d=[{value:"URL+URLSession",id:"urlurlsession",level:2},{value:"\u4f8b\u5b501",id:"\u4f8b\u5b501",level:3},{value:"\u4f8b\u5b502",id:"\u4f8b\u5b502",level:3},{value:"\u53d1\u9001\u8bf7\u6c42",id:"\u53d1\u9001\u8bf7\u6c42",level:2},{value:"\u53d1\u9001GET\u8bf7\u6c42",id:"\u53d1\u9001get\u8bf7\u6c42",level:3},{value:"\u793a\u4f8b\u4ee3\u7801",id:"\u793a\u4f8b\u4ee3\u7801",level:4},{value:"\u53d1\u9001POST\u8bf7\u6c42",id:"\u53d1\u9001post\u8bf7\u6c42",level:3},{value:"\u793a\u4f8b\u4ee3\u7801",id:"\u793a\u4f8b\u4ee3\u7801-1",level:4}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"\u73b0\u6709\u7684\u7248\u672c\u82f9\u679c\u63a8\u8350\u4f7f\u7528 NSURLSession \u6765\u66ff\u6362 NSURLConnection \u5b8c\u6210\u7f51\u8def\u8bf7\u6c42\u76f8\u5173\u64cd\u4f5c.NSURLSession \u7684\u4f7f\u7528\u975e\u5e38\u7b80\u5355\uff0c\u5148\u6839\u636e\u4f1a\u8bdd\u5bf9\u8c61\u521b\u5efa\u4e00\u4e2a\u8bf7\u6c42 Task\uff0c\u7136\u540e\u6267\u884c\u8be5 Task \u5373\u53ef\u3002"})}),"\n",(0,s.jsx)(n.h2,{id:"urlurlsession",children:"URL+URLSession"}),"\n",(0,s.jsx)(n.h3,{id:"\u4f8b\u5b501",children:"\u4f8b\u5b501"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:'import SwiftUI\nimport CoreData\n\n\nlet url = URL(string: "https://api.muxiaoguo.cn/api/yiyan?api_key=c589aa12a29b1360&")!\n\nlet task = URLSession.shared.dataTask(with: url) {(data, response, error) in\n    guard let data = data else { return }\n    print(String(data: data, encoding: .utf8)!)\n}\n\ntask.resume()\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u4f8b\u5b502",children:"\u4f8b\u5b502"}),"\n",(0,s.jsx)(n.p,{children:"\u8bf7\u6c42\u5e76\u89e3\u6790JSON\u6570\u636e\u5230Swift\u5bf9\u8c61"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:'import SwiftUI\n\nstruct Response: Codable {\n    var results: [Result]\n}\n\nstruct Result: Codable {\n    var trackId: Int\n    var trackName: String\n    var collectionName: String\n}\n\nstruct ContentView: View {\n   @State private var results = [Result]()\n    \n    func loadData() async{\n        guard let url = URL(string: "https://itunes.apple.com/search?term=taylor+swift&entity=song") else {\n            print("Invalid URL")\n            return\n        }\n        do {\n            let (data, _) =  try await URLSession.shared.data(from: url)\n            print(data)\n            if let decodeResponse = try? JSONDecoder().decode(Response.self, from: data){\n                results = decodeResponse.results\n            }\n        }catch{\n            print("Invalid data")\n        }\n    }\n    var body: some View {\n        List(results, id: \\.trackId){ item in\n            VStack(alignment: .leading){\n                Text(item.trackName)\n                    .font(.headline)\n                Text(item.collectionName)\n            }\n        }\n        .task {\n            await loadData()\n        }\n    }\n}\n\nstruct ContentView_Previews: PreviewProvider {\n    static var previews: some View {\n        ContentView()\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u53d1\u9001\u8bf7\u6c42",children:"\u53d1\u9001\u8bf7\u6c42"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u786e\u5b9a\u8bf7\u6c42\u8def\u5f84"}),"\n",(0,s.jsx)(n.li,{children:"\u521b\u5efa\u8bf7\u6c42\u5bf9\u8c61"}),"\n",(0,s.jsx)(n.li,{children:"\u521b\u5efa\u4f1a\u8bdd\u5bf9\u8c61"}),"\n",(0,s.jsx)(n.li,{children:"\u6839\u636e\u4f1a\u8bdd\u5bf9\u8c61\u521b\u5efa\u8bf7\u6c42\u4efb\u52a1"}),"\n",(0,s.jsx)(n.li,{children:"\u6267\u884c Task"}),"\n",(0,s.jsx)(n.li,{children:"\u5f53\u5f97\u5230\u670d\u52a1\u5668\u8fd4\u56de\u7684\u54cd\u5e94\u540e\uff0c\u89e3\u6790\u6570\u636e\uff08XML|JSON|HTTP\uff09"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u53d1\u9001get\u8bf7\u6c42",children:"\u53d1\u9001GET\u8bf7\u6c42"}),"\n",(0,s.jsx)(n.h4,{id:"\u793a\u4f8b\u4ee3\u7801",children:"\u793a\u4f8b\u4ee3\u7801"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift"})}),"\n",(0,s.jsx)(n.h3,{id:"\u53d1\u9001post\u8bf7\u6c42",children:"\u53d1\u9001POST\u8bf7\u6c42"}),"\n",(0,s.jsx)(n.h4,{id:"\u793a\u4f8b\u4ee3\u7801-1",children:"\u793a\u4f8b\u4ee3\u7801"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);
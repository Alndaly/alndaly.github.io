"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[8086],{97631:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var a=t(87462),r=(t(67294),t(3905));t(16758);const i={title:"Spring Framework\u57fa\u7840"},o=void 0,l={unversionedId:"backend/Spring/SpringFramework",id:"backend/Spring/SpringFramework",title:"Spring Framework\u57fa\u7840",description:"Spring\u7b80\u4ecb",source:"@site/docs/backend/Spring/SpringFramework.md",sourceDirName:"backend/Spring",slug:"/backend/Spring/SpringFramework",permalink:"/docs/backend/Spring/SpringFramework",draft:!1,editUrl:"https://github.com/alndaly/alndaly.github.io/edit/docusaurus/docs/backend/Spring/SpringFramework.md",tags:[],version:"current",lastUpdatedAt:1671519357,formattedLastUpdatedAt:"2022\u5e7412\u670820\u65e5",frontMatter:{title:"Spring Framework\u57fa\u7840"},sidebar:"backEndSidebar",previous:{title:"\u6574\u5408WebSocket\u548cRedis",permalink:"/docs/backend/Spring/SpringBoot/\u6574\u5408WebSocket\u548cRedis"},next:{title:"SpringMVC",permalink:"/docs/backend/Spring/SpringMVC"}},p={},d=[{value:"Spring\u7b80\u4ecb",id:"spring\u7b80\u4ecb",level:2},{value:"\u7279\u6027",id:"\u7279\u6027",level:2},{value:"\u4e94\u5927\u529f\u80fd\u6a21\u5757 \uff08\u4ec5\u4ec5\u662fSpring Framework\uff09",id:"\u4e94\u5927\u529f\u80fd\u6a21\u5757-\u4ec5\u4ec5\u662fspring-framework",level:2},{value:"IOC\uff08\u975e\u5e38\u975e\u5e38\u91cd\u8981\uff01\uff01\uff01\uff09",id:"ioc\u975e\u5e38\u975e\u5e38\u91cd\u8981",level:2},{value:"\u601d\u60f3",id:"\u601d\u60f3",level:3},{value:"IOC\u5728Spring\u4e2d\u7684\u5b9e\u73b0",id:"ioc\u5728spring\u4e2d\u7684\u5b9e\u73b0",level:3},{value:"\u5feb\u901f\u5f00\u59cb",id:"\u5feb\u901f\u5f00\u59cb",level:3},{value:"\u9879\u76ee\u4f9d\u8d56",id:"\u9879\u76ee\u4f9d\u8d56",level:4},{value:"\u521b\u5efaspring\u914d\u7f6e\u6587\u4ef6",id:"\u521b\u5efaspring\u914d\u7f6e\u6587\u4ef6",level:4},{value:"\u6d4b\u8bd5\u4e00\u4e0b",id:"\u6d4b\u8bd5\u4e00\u4e0b",level:4},{value:"\u83b7\u53d6Bean\u7684\u4e09\u79cd\u65b9\u5f0f",id:"\u83b7\u53d6bean\u7684\u4e09\u79cd\u65b9\u5f0f",level:3},{value:"\u4f9d\u8d56\u6ce8\u5165",id:"\u4f9d\u8d56\u6ce8\u5165",level:3},{value:"\u7b80\u5355\u6570\u636e",id:"\u7b80\u5355\u6570\u636e",level:4},{value:"\u7c7b\u578b\u6570\u636e",id:"\u7c7b\u578b\u6570\u636e",level:4},{value:"<code>Xml Druid</code>\u6570\u636e\u6e90",id:"xml-druid\u6570\u636e\u6e90",level:3},{value:"\u6ce8\u5165\u4f9d\u8d56",id:"\u6ce8\u5165\u4f9d\u8d56",level:4},{value:"\u914d\u7f6e<code>properties</code>",id:"\u914d\u7f6eproperties",level:4},{value:"\u914d\u7f6e<code>bean</code>",id:"\u914d\u7f6ebean",level:4},{value:"\u4f5c\u7528\u57df<code>scope</code>",id:"\u4f5c\u7528\u57dfscope",level:3},{value:"bean \u7684\u751f\u547d\u5468\u671f\uff08\u91cd\u8981\uff09",id:"bean-\u7684\u751f\u547d\u5468\u671f\u91cd\u8981",level:3},{value:"\u5b9e\u4f53\u7c7b",id:"\u5b9e\u4f53\u7c7b",level:4},{value:"<code>beans</code>\u914d\u7f6e\u9879",id:"beans\u914d\u7f6e\u9879",level:4},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5",level:4},{value:"\u524d/\u540e\u7f6e\u5904\u7406\u5668\uff08\u7b80\u5355\u4e86\u89e3\uff09",id:"\u524d\u540e\u7f6e\u5904\u7406\u5668\u7b80\u5355\u4e86\u89e3",level:3},{value:"<code>FactoryBean</code> \uff08\u91cd\u8981\uff09",id:"factorybean-\u91cd\u8981",level:3},{value:"<code>UserFactoryBean</code>\u7684\u521b\u5efa",id:"userfactorybean\u7684\u521b\u5efa",level:4},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6",level:4},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5-1",level:4},{value:"\u57fa\u4e8e<code>XML</code>\u7684\u81ea\u52a8\u88c5\u914d\uff08\u91cd\u8981\uff09",id:"\u57fa\u4e8exml\u7684\u81ea\u52a8\u88c5\u914d\u91cd\u8981",level:3},{value:"<code>byType</code>",id:"bytype",level:4},{value:"<code>byName</code>",id:"byname",level:4},{value:"\u57fa\u4e8e\u6ce8\u89e3\u7ba1\u7406<code>Bean</code>",id:"\u57fa\u4e8e\u6ce8\u89e3\u7ba1\u7406bean",level:3},{value:"\u56db\u4e2a\u6ce8\u89e3\u53ca\u5176\u5173\u7cfb",id:"\u56db\u4e2a\u6ce8\u89e3\u53ca\u5176\u5173\u7cfb",level:4},{value:"\u626b\u63cf\u7ec4\u4ef6",id:"\u626b\u63cf\u7ec4\u4ef6",level:4},{value:"\u81ea\u52a8\u88c5\u914d\u6ce8\u89e3",id:"\u81ea\u52a8\u88c5\u914d\u6ce8\u89e3",level:3},{value:"\u653e\u7f6e\u4f4d\u7f6e",id:"\u653e\u7f6e\u4f4d\u7f6e",level:4},{value:"AOP",id:"aop",level:2},{value:"\u9759\u6001\u4ee3\u7406",id:"\u9759\u6001\u4ee3\u7406",level:3},{value:"<code>CalculatorImpl</code>\u5b9e\u73b0\u7c7b",id:"calculatorimpl\u5b9e\u73b0\u7c7b",level:4},{value:"<code>Calculator</code>\u63a5\u53e3",id:"calculator\u63a5\u53e3",level:4},{value:"<code>CalculatorStaticProxy</code>\u4ee3\u7406\u7c7b",id:"calculatorstaticproxy\u4ee3\u7406\u7c7b",level:4},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5-2",level:4},{value:"\u52a8\u6001\u4ee3\u7406",id:"\u52a8\u6001\u4ee3\u7406",level:3},{value:"\u5b9e\u73b0\u65b9\u5f0f",id:"\u5b9e\u73b0\u65b9\u5f0f",level:4},{value:"AOP\u4e00\u4e9b\u6982\u5ff5",id:"aop\u4e00\u4e9b\u6982\u5ff5",level:3},{value:"\u4e00\u4e9b\u672f\u8bed",id:"\u4e00\u4e9b\u672f\u8bed",level:3},{value:"\u4f5c\u7528",id:"\u4f5c\u7528",level:3},{value:"\u57fa\u4e8e\u6ce8\u89e3\u5b9e\u73b0AOP",id:"\u57fa\u4e8e\u6ce8\u89e3\u5b9e\u73b0aop",level:3},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6-1",level:4},{value:"\u521b\u5efa\u5207\u9762\u7c7b\u5e76\u914d\u7f6e(**)",id:"\u521b\u5efa\u5207\u9762\u7c7b\u5e76\u914d\u7f6e",level:4},{value:"\u83b7\u53d6\u8fde\u63a5\u70b9\u7684\u65b9\u6cd5\u4fe1\u606f",id:"\u83b7\u53d6\u8fde\u63a5\u70b9\u7684\u65b9\u6cd5\u4fe1\u606f",level:4},{value:"\u5207\u5165\u70b9\u8868\u8fbe\u5f0f\u7684\u91cd\u7528",id:"\u5207\u5165\u70b9\u8868\u8fbe\u5f0f\u7684\u91cd\u7528",level:4},{value:"\u8fd4\u56de\u901a\u77e5\u83b7\u5f97\u8fd4\u56de\u503c",id:"\u8fd4\u56de\u901a\u77e5\u83b7\u5f97\u8fd4\u56de\u503c",level:4},{value:"\u5f02\u5e38\u901a\u77e5\u83b7\u53d6\u5f02\u5e38",id:"\u5f02\u5e38\u901a\u77e5\u83b7\u53d6\u5f02\u5e38",level:4},{value:"\u73af\u7ed5\u901a\u77e5",id:"\u73af\u7ed5\u901a\u77e5",level:4},{value:"\u5404\u79cd\u901a\u77e5\u7684\u6267\u884c\u987a\u5e8f",id:"\u5404\u79cd\u901a\u77e5\u7684\u6267\u884c\u987a\u5e8f",level:4},{value:"\u5207\u9762\u4f18\u5148\u7ea7",id:"\u5207\u9762\u4f18\u5148\u7ea7",level:4},{value:"\u57fa\u4e8e<code>XML</code> \u5b9e\u73b0 <code>AOP</code>\uff08\u4e86\u89e3\uff09",id:"\u57fa\u4e8exml-\u5b9e\u73b0-aop\u4e86\u89e3",level:3},{value:"<code>JdbcTemplate</code>",id:"jdbctemplate",level:2},{value:"\u4f9d\u8d56",id:"\u4f9d\u8d56",level:3},{value:"spring IOC\u5bb9\u5668\u914d\u7f6e\u6587\u4ef6",id:"spring-ioc\u5bb9\u5668\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u6d4b\u8bd5 spring-test",id:"\u6d4b\u8bd5-spring-test",level:3},{value:"\u4e8b\u52a1\uff08\u91cd\u70b9\uff09",id:"\u4e8b\u52a1\u91cd\u70b9",level:2},{value:"\u7f16\u7a0b\u5f0f\u4e8b\u52a1",id:"\u7f16\u7a0b\u5f0f\u4e8b\u52a1",level:3},{value:"\u58f0\u660e\u5f0f\u4e1a\u52a1",id:"\u58f0\u660e\u5f0f\u4e1a\u52a1",level:3},{value:"IOC\u914d\u7f6e\u6587\u4ef6",id:"ioc\u914d\u7f6e\u6587\u4ef6",level:4},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5-3",level:4},{value:"\u4e8b\u52a1\u5c5e\u6027",id:"\u4e8b\u52a1\u5c5e\u6027",level:4},{value:"\u57fa\u4e8eXML\u7684\u4e8b\u52a1",id:"\u57fa\u4e8exml\u7684\u4e8b\u52a1",level:3}],s={toc:d};function c(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"spring\u7b80\u4ecb"},"Spring\u7b80\u4ecb"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Spring \u6846\u67b6\u7684\u6838\u5fc3\u7279\u6027\u5c31\u662f\u53ef\u4ee5\u7528\u4e8e\u5f00\u53d1\u4efb\u4f55Java\u7a0b\u5e8f\uff0c\u4f46\u662f\u5728JEE\u5e73\u53f0\u4e0a\u6784\u5efaweb\u5e94\u7528\u957f\u987b\u662f\u9700\u8981\u6269\u5c55\u7684\u3002")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://spring.io/projects"},"Spring Projects\u5b98\u7f51")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Sprint Framework\u662f\u6240\u6709\u6846\u67b6\u7684\u57fa\u7840\uff0c\u6240\u6709\u7684Spring\u6846\u67b6\u5747\u662f\u5efa\u7acb\u5728Spring Framework \u7684\u57fa\u7840\u4e0a\u7684\u3002")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u6ce8\u610f\u6253\u5305\u65b9\u5f0f\u4e00\u5b9a\u8981\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"jar"),"\uff0c\u5426\u5219",(0,r.kt)("inlineCode",{parentName:"p"},"resource"),"\u4e0b\u7684\u6587\u4ef6\u4e0d\u4f1a\u88ab\u6253\u5305\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"target")," \u4e0b\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<packaging>jar</packaging>\n")),(0,r.kt)("h2",{id:"\u7279\u6027"},"\u7279\u6027"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u975e\u4fb5\u5165\u5f0f\uff1a\u5bf9\u539f\u751f\u6280\u672f\u548c\u9886\u57df\u6a21\u578b\u662f\u96f6\u6c61\u67d3\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u63a7\u5236\u53cd\u8f6cIOC"),"\uff1a\u53cd\u8f6c\u8d44\u6e90\u83b7\u53d6\u65b9\u5411\uff0c\u5c06\u81ea\u5df1\u521b\u5efa\u8d44\u6e90\u3001\u5411\u73af\u5883\u7d22\u53d6\u8d44\u6e90 \u2192 \u73af\u5883\u5c06\u8d44\u6e90\u51c6\u5907\u597d\u3001\u6211\u4eec\u4eab\u53d7\u8d44\u6e90\u6ce8\u5165\uff08\u964d\u4f4e\u5bf9\u8c61\u4e0e\u5bf9\u8c61\u7684\u4f9d\u8d56\u5173\u7cfb\uff09\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u9762\u5411\u5207\u9762AOP"),"\uff1a\u5728\u4e0d\u4fee\u6539\u6e90\u4ee3\u7801\u7684\u57fa\u7840\u4e0a\uff0c\u5c06\u5bb9\u5668\u5185\u5bf9\u8c61\u66ff\u6362\u6210\u4ee3\u7406\u7c7b\uff0c\u518d\u5b8c\u6210\u6ce8\u5165 \u2192 \u589e\u5f3a\u4ee3\u7801\u529f\u80fd\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5bb9\u5668"),"\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"SpringIOC"),"\u662f\u4e00\u4e2a\u5bb9\u5668\uff0c\u56e0\u4e3a\u5b83\u5305\u542b\u5e76\u4e14\u7ba1\u7406\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\u3002\u7ec4\u4ef6\u4eab\u53d7\u5230\u4e86\u5bb9\u5668\u5316\u7684\u7ba1\u7406\uff0c\u66ff\u7a0b\u5e8f\u5458\u5c4f\u853d\u4e86\u7ec4\u4ef6\u521b\u5efa\u8fc7\u7a0b\u4e2d\u7684\u5927\u91cf\u7ec6\u8282\uff0c\u6781\u5927\u964d\u4f4e\u4e86\u4f7f\u7528\u95e8\u69db\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u58f0\u660e\u5f0f\uff1a\u5f88\u591a\u4ee5\u524d\u9700\u8981\u7f16\u5199\u4ee3\u7801\u624d\u80fd\u5b9e\u73b0\u7684\u529f\u80fd\uff0c\u73b0\u5728\u53ea\u9700\u8981\u58f0\u660e\u9700\u6c42\u5373\u53ef\u7531\u6846\u67b6\u4ee3\u4e3a\u5b9e\u73b0\u7684\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u7ec4\u4ef6\u5316\uff1a\u7ec4\u4ef6\u5373\u653e\u5728\u5bb9\u5668\u5f53\u4e2d",(0,r.kt)("inlineCode",{parentName:"li"},"bean"),"\uff0c\u5e76\u4e14\u4f7f\u7528\u6ce8\u5165\u5b8c\u6574\u7ec4\u4ef6\u7684\u7ec4\u88c5\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4e00\u7ad9\u5f0f\uff1a\u5728",(0,r.kt)("inlineCode",{parentName:"li"},"IOC"),"\u548c",(0,r.kt)("inlineCode",{parentName:"li"},"AOP"),"\u7684\u57fa\u7840\u4e0a\u53ef\u4ee5\u6574\u5408\u5404\u79cd\u4f01\u4e1a\u5e94\u7528\u7684\u5f00\u6e90\u6846\u67b6\u548c\u4f18\u79c0\u7684\u5730\u65b9\u5e93\u3002\u800c\u4e14",(0,r.kt)("inlineCode",{parentName:"li"},"Spring"),"\u5bb6\u65cf\u7cfb\u5217\u5df2\u7ecf\u8986\u76d6\u4e86\u5e7f\u6cdb\u7684\u9886\u57df\uff0c\u5f88\u591a\u65b9\u9762\u7684\u529f\u80fd\u6027\u9700\u6c42\u53ef\u4ee5\u5728",(0,r.kt)("inlineCode",{parentName:"li"},"Spring Framework")," \u7684\u57fa\u7840\u4e0a\u5168\u90e8\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"Spring")," \u6765\u5b9e\u73b0\u3002")),(0,r.kt)("h2",{id:"\u4e94\u5927\u529f\u80fd\u6a21\u5757-\u4ec5\u4ec5\u662fspring-framework"},"\u4e94\u5927\u529f\u80fd\u6a21\u5757 \uff08\u4ec5\u4ec5\u662fSpring Framework\uff09"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u529f\u80fd\u6a21\u5757"),(0,r.kt)("th",{parentName:"tr",align:null},"\u529f\u80fd\u4ecb\u7ecd"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Core Container"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6838\u5fc3\u5bb9\u5668\u3001\u5728Spring\u73af\u5883\u4e0b\u4f7f\u7528\u4efb\u4f55\u529f\u80fd\u90fd\u5fc5\u987b\u57fa\u4e8eIOC\u5bb9\u5668\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"AOP & Aspects"),(0,r.kt)("td",{parentName:"tr",align:null},"\u9762\u5411\u5207\u9762\u7f16\u7a0b")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Testing"),(0,r.kt)("td",{parentName:"tr",align:null},"\u63d0\u4f9b\u4e86\u5bf9Junit \u6216 TestNG \u6d4b\u8bd5\u6846\u67b6\u7684\u6574\u5408")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Data Access / Integration"),(0,r.kt)("td",{parentName:"tr",align:null},"\u63d0\u4f9b\u4e86\u5bf9\u6570\u636e\u8bbf\u95ee/\u96c6\u6210\u7684\u529f\u80fd \uff08SpringJDBC\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Spring MVC"),(0,r.kt)("td",{parentName:"tr",align:null},"\u63d0\u4f9b\u4e86\u9762\u5411Web\u5e94\u7528\u7a0b\u5e8f\u7684\u96c6\u6210\u529f\u80fd")))),(0,r.kt)("h2",{id:"ioc\u975e\u5e38\u975e\u5e38\u91cd\u8981"},"IOC\uff08\u975e\u5e38\u975e\u5e38\u91cd\u8981\uff01\uff01\uff01\uff09"),(0,r.kt)("h3",{id:"\u601d\u60f3"},"\u601d\u60f3"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u4ee5\u524d"),"\uff1a\u4f7f\u7528\u4ec0\u4e48\u8d44\u6e90\u9700\u8981\u81ea\u884c\u521b\u5efa\uff0c\u521b\u5efa\u7684\u7ec6\u8282\u4e5f\u9700\u8981\u81ea\u5df1\u4e86\u89e3\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u73b0\u5728"),"\uff1a\u73b0\u5728\u9700\u8981\u4f7f\u7528\u4ec0\u4e48\u8d44\u6e90\uff0c\u58f0\u660e\u4e00\u4e0b\u5373\u53ef\uff0cIOC\u4f1a\u81ea\u52a8\u5411\u58f0\u660e\u4f4d\u7f6e\u6ce8\u5165\u8d44\u6e90\u3002\uff08\u5bb9\u5668\u63a8\u9001\u8d44\u6e90\u7ed9\u9700\u8981\u7684\u7ec4\u4ef6\uff0c\u6574\u5408\u5305\u91cc\u9762\u4f1a\u81ea\u52a8\u63d0\u4f9b\u8d44\u6e90\u7684\u521b\u5efa\u65b9\u5f0f\uff0c\u7a0b\u5e8f\u5458\u4e0d\u7528\u5728\u5904\u7406\u4e86\u3002\uff09"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u4f9d\u8d56\u6ce8\u5165\u3001\u662fIOC\u7684\u53e6\u4e00\u79cd\u8868\u8ff0\u65b9\u5f0f\u3001\u662fIOC\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u6bd4\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"setter"),"\u65b9\u5f0f\u63a5\u53d7\u5bb9\u5668\u8d44\u6e90\u7684\u6ce8\u5165\u3002")),(0,r.kt)("h3",{id:"ioc\u5728spring\u4e2d\u7684\u5b9e\u73b0"},"IOC\u5728Spring\u4e2d\u7684\u5b9e\u73b0"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u65b9\u5f0f\u4e00\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"BeanFactory")," \uff0cIOC\u5bb9\u5668\u7684\u57fa\u672c\u5b9e\u73b0\uff0c\u662fSpring\u5185\u90e8\u4f7f\u7528\u7684\u63a5\u53e3\u3002\u9762\u5411Spring\u672c\u8eab\uff0c\u4e0d\u63d0\u4f9b\u7ed9\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u65b9\u5f0f\u4e8c\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"ApplicationContext"),"\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"BeanFactory"),"\u7684\u5b50\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u66f4\u591a\u9ad8\u7ea7\u7684\u7279\u6027\u3002\u9762\u5411Spring\u7684\u4f7f\u7528\u8005\u7684\uff0c\u51e0\u4e4e\u6240\u6709\u573a\u5408\u90fd\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"li"},"ApplicationContext"),"\uff0c\u800c\u4e0d\u662f\u5e95\u5c42\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"BeanFactory"),"\u3002 \u5b50\u7c7b ",(0,r.kt)("inlineCode",{parentName:"li"},"ClassPathXmlApplicationContext")," \u4f7f\u7528\u7684\u662f\u6700\u591a\u7684\u3002")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"ctrl+h\u53ef\u4ee5\u6253\u5f00\u7ee7\u627f\u4e86\u5f53\u524d\u7c7b\u7684\u7c7b\u7684\u9762\u677f"),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("img",{parentName:"p",src:"https://upload.kinda.info/image/202211181720854.png",alt:"\u622a\u5c4f2022-11-13 12.25.29.png"}))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b\u540d"),(0,r.kt)("th",{parentName:"tr",align:null},"\u7b80\u4ecb"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"FileSystemXmlApplicationContext"),(0,r.kt)("td",{parentName:"tr",align:null},"\u901a\u8fc7\u8bfb\u53d6\u7c7b\u8def\u5f84\u4e0b\u7684XML\u914d\u7f6e\u6587\u4ef6\u521b\u5efaIOC\u5bb9\u5668\u5bf9\u8c61")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ClassPathXmlApplicationContext"),(0,r.kt)("td",{parentName:"tr",align:null},"\u901a\u8fc7\u8bfb\u53d6\u78c1\u76d8\u8def\u5f84\u4e0b\u7684XML\u914d\u7f6e\u6587\u4ef6\u521b\u5efaIOC\u5bb9\u5668\u5bf9\u8c61")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ConfigurableApplicationContext"),(0,r.kt)("td",{parentName:"tr",align:null},"ApplicationContext\u7684\u5b50\u63a5\u53e3\uff0c\u5305\u542b\u4e00\u4e9b\u6269\u5c55\u65b9\u6cd5\uff0c\u8ba9ApplicationContext\u5177\u6709\u542f\u52a8\u3001\u5173\u95ed\u548c\u5237\u65b0\u4e0a\u4e0b\u6587\u7684\u80fd\u529b\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"WebApplicationContext"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4e13\u95e8\u4e3aWeb\u5e94\u7528\u51c6\u5907\uff0c\u57fa\u4e8eWeb\u73af\u5883\u521b\u5efaIOC\u5bb9\u5668\u5bf9\u8c61\uff0c\u5e76\u5c06\u5bf9\u8c61\u5f15\u5165\u5b58\u5165ServletContext\u57df\u4e2d\u3002")))),(0,r.kt)("h3",{id:"\u5feb\u901f\u5f00\u59cb"},"\u5feb\u901f\u5f00\u59cb"),(0,r.kt)("h4",{id:"\u9879\u76ee\u4f9d\u8d56"},"\u9879\u76ee\u4f9d\u8d56"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependencies>\n    <dependency>\n        <groupId>org.springframework</groupId>\n        <artifactId>spring-context</artifactId>\n        <version>5.3.1</version>\n    </dependency>\n\n    <dependency>\n        <groupId>junit</groupId>\n        <artifactId>junit</artifactId>\n        <version>4.12</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n")),(0,r.kt)("h4",{id:"\u521b\u5efaspring\u914d\u7f6e\u6587\u4ef6"},"\u521b\u5efaspring\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"src/main/resources/applicationContext.xml")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8" ?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="\n  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd">\n\n    \x3c!--\n        id : \u533a\u5206\u4e0d\u540c\u7684\u7ec4\u4ef6, \u4e14IOC\u5bb9\u5668\u6839\u636eid\u83b7\u53d6\u7ec4\u4ef6\n        \u9ed8\u8ba4\u5355\u4f8b\u6a21\u5f0f\n     --\x3e\n    <bean id="helloworld" class="com.atguigu.spring.pojo.HelloWorld"></bean>\n\n</beans>\n')),(0,r.kt)("h4",{id:"\u6d4b\u8bd5\u4e00\u4e0b"},"\u6d4b\u8bd5\u4e00\u4e0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class HelloWorldTest {\n    @Test\n    public void test(){\n        // 1. \u521b\u5efaIOC\u5bb9\u5668\n        ClassPathXmlApplicationContext ioc = new ClassPathXmlApplicationContext("applicationContext.xml");\n\n        // 2. \u83b7\u53d6IOC\u5bb9\u5668\u4e2d\u7684Bean\u5bf9\u8c61\n        HelloWorld helloworld = (HelloWorld) ioc.getBean("helloworld");\n        helloworld.sayHello();\n    }\n}\n')),(0,r.kt)("h3",{id:"\u83b7\u53d6bean\u7684\u4e09\u79cd\u65b9\u5f0f"},"\u83b7\u53d6Bean\u7684\u4e09\u79cd\u65b9\u5f0f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e id\u83b7\u53d6"),(0,r.kt)("li",{parentName:"ul"},"\u6839\u636e\u7c7b\u578b\u83b7\u53d6\uff08",(0,r.kt)("strong",{parentName:"li"},"\u8fd9\u4e00\u79cd\u4f7f\u7528\u6700\u591a"),"\uff09 \u5f53\u5bb9\u5668\u5f53\u4e2d\u6709\u591a\u4e2a\u76f8\u540c\u7c7b\u578b\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"Bean"),"\u7684\u65f6\u5019\u5c31GG\u4e86\u3002 \u2192 \u4f1a\u62a5",(0,r.kt)("inlineCode",{parentName:"li"},"NoUniqueBeanDefinitionException"),"\u9519\u8bef"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"id")," + \u7c7b\u578b\u7684\u65b9\u5f0f\uff08",(0,r.kt)("inlineCode",{parentName:"li"},"id"),"\u548c\u7c7b\u578b\u7ec4\u5408\u8d77\u6765\u552f\u4e00\u5c31\u884c\u5566\uff09\u3002")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u7ec4\u4ef6\u5b9e\u73b0\u4e86\u63a5\u53e3\uff0c\u540c\u6837\u53ef\u4ee5\u4f7f\u7528\u63a5\u53e3\u7684\u7c7b\u578b\u83b7\u5f97\u7ec4\u4ef6\uff0c\u4f46\u524d\u63d0\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"Bean"),"\u552f\u4e00\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'// Student implements Person\n// <bean id="student" class="com.atguigu.spring.pojo.Student"></bean>\nPerson person = ioc.getBean(Person.class);\n')),(0,r.kt)("h3",{id:"\u4f9d\u8d56\u6ce8\u5165"},"\u4f9d\u8d56\u6ce8\u5165"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u9664\u4e86\u8fd9\u91cc\u4ecb\u7ecd\u7684\u4ee5\u5916\uff0c\u4f9d\u8d56\u6ce8\u5165\u8fd8\u6709\u4e00\u79cd",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"p"),"\u547d\u540d\u7a7a\u95f4"),"\u7684\u65b9\u5f0f\uff0c\u4f46\u6ce8\u610f\u4e00\u822c\u7528\u7684\u4e0d\u591a\u3002")),(0,r.kt)("h4",{id:"\u7b80\u5355\u6570\u636e"},"\u7b80\u5355\u6570\u636e"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"setter")," \u6ce8\u5165\uff08\u7528\u7684\u6700\u591a\uff09")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"setter")," \u6ce8\u5165\u548c\u5b9e\u4f53\u7c7b\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"set")," \u65b9\u6cd5\u6709\u5173\uff0c\u8ddf\u6210\u5458\u53d8\u91cf\u6ca1\u6709\u5173\u7cfb\u3002\uff08",(0,r.kt)("inlineCode",{parentName:"p"},"name"),"\u5c5e\u6027\u5bf9\u5e94\u7684\u503c\u5c31\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"set"),"\u65b9\u6cd5\u53bb\u6389",(0,r.kt)("inlineCode",{parentName:"p"},"set"),"\u5e76\u4e14\u9996\u5b57\u6bcd\u6539\u4e3a\u5c0f\u5199\u7684\u5c5e\u6027\u3002\uff09")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="studentOne" class="com.atguigu.spring.pojo.Student">\n  \x3c!-- setter \u6ce8\u5165 \u548c set\u65b9\u6cd5\u6709\u5173\uff0c\u8ddf\u6210\u5458\u53d8\u91cf\u6ca1\u6709\u5173\u7cfb--\x3e\n  <property name="sname" value="\u5f20\u4e09"></property>\n</bean>\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6784\u9020\u5668\u6ce8\u5165")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'\x3c!-- public Student(Integer sid, String sname, Integer age, String gender) --\x3e\n<bean id="studentTwo" class="com.atguigu.spring.pojo.Student">\n   <constructor-arg name="sid" value="1"></constructor-arg>\n   <constructor-arg name="sname" value="\u5f20\u4e09"></constructor-arg>\n   <constructor-arg name="age" value="20"></constructor-arg>\n   <constructor-arg name="gender" value="\u7537"></constructor-arg>\n</bean>\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u6839\u636e ",(0,r.kt)("inlineCode",{parentName:"p"},"<constructor-arg>")," \u6807\u7b7e\u7684\u987a\u5e8f\u6765\u51b3\u5b9a\u8c03\u7528\u90a3\u4e2a\u6784\u9020\u53c2\u6570\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"name")," \u5c5e\u6027\u4e0d\u8981\u7701\uff08\u867d\u7136\u53ef\u4ee5\u7701\uff09")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- public Student(Integer sid, String sname, Integer age, String gender) --\x3e\n  <bean id="studentTwo" class="com.atguigu.spring.pojo.Student">\n      <constructor-arg name="sid" value="1"></constructor-arg>\n      <constructor-arg name="sname" value="\u5f20\u4e09"></constructor-arg>\n      <constructor-arg name="age" value="20"></constructor-arg>\n      <constructor-arg name="gender" value="\u7537"></constructor-arg>\n</bean>\n')),(0,r.kt)("h4",{id:"\u7c7b\u578b\u6570\u636e"},"\u7c7b\u578b\u6570\u636e"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5b57\u9762\u91cf\u6ce8\u5165",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u7279\u6b8a\u5b57\u7b26\uff0c\u53ef\u4ee5\u4f7f\u7528\u8f6c\u4e49\uff0c\u6216 ",(0,r.kt)("inlineCode",{parentName:"p"},"CDATA"),"\u533a\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<property name="sname">\n    <value><![CDATA[ a>b ]]</value>\n</property>\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"String")," \u8d4b\u503c ",(0,r.kt)("inlineCode",{parentName:"p"},"null")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\n<property name="sname">\n    <null></null>\n</property>\n'))))),(0,r.kt)("li",{parentName:"ul"},"\u4e3a\u7c7b/\u63a5\u53e3\u7c7b\u578b\u7684\u5c5e\u6027\u590d\u5236",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"ref"),"\u65b9\u5f0f\uff1a\u5982\u4e0b\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"Student"),"\u7c7b\u542b\u6709\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"Course"),"\u6210\u5458\uff0c\u4e14\u63d0\u4f9b\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"setter"),"."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="courseOne" class="com.atguigu.spring.pojo.Course">\n    \x3c!-- \u6ce8\u5165\u7701\u7565 --\x3e\n</bean>\n\n<bean id="studentOne" class="com.atguigu.spring.pojo.Student">\n    \x3c!-- void setCourse(Course course) --\x3e\n    <property name="course" ref="courseOne"></property>\n</bean>\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5185\u90e8",(0,r.kt)("inlineCode",{parentName:"p"},"bean"),"\u7684\u65b9\u5f0f\uff1a\u4f46\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"IOC"),"\u4e0d\u80fd\u83b7\u53d6\u5230\u5185\u90e8",(0,r.kt)("inlineCode",{parentName:"p"},"Bean"),"\u4e86\u3002"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="studentOne" class="com.atguigu.spring.pojo.Student">\n    \x3c!-- void setCourse(Course course) --\x3e\n    <property name="course">\n       <bean id="courseOne" class="com.atguigu.spring.pojo.Course">\n         <property name="cid" value="2222"></property>\n         <property name="cname" value="\u8fdc\u5927\u524d\u7a0b\u73ed"></property>\n      </bean>\n    </property>\n</bean>\n'))))),(0,r.kt)("li",{parentName:"ul"},"\u6570\u7ec4",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u662f\u5b57\u9762\u91cf\u7c7b\u578b\u5219\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"value"),"\uff0c\u5982\u679c\u662f\u7c7b\u7c7b\u578b\u5219\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"ref")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="studentOne" class="com.atguigu.spring.pojo.Student">\n    \x3c!-- String[] hobby; --\x3e\n    <property name="hobby">\n        <array>\n            <value>\u62bd\u70df</value>\n            <value>\u559d\u9152</value>\n            <value>\u70eb\u5934</value>\n            \n            \x3c!-- \u7c7b\u7c7b\u578b\u7528 --\x3e\n            \x3c!-- <ref bean="id"></ref> --\x3e\n        </array>\n    </property>\n</bean>\n'))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"List"),"\u96c6\u5408\uff08\u4e24\u79cd\u65b9\u5f0f\uff09",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u65b9\u5f0f\u4e00 ",(0,r.kt)("inlineCode",{parentName:"p"},"Property"),"\u6807\u7b7e\u5185\u90e8\u8bbe\u7f6e\uff0c\u5b57\u9762\u91cf\u7c7b\u578b\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"value"),"\uff0c\u7c7b\u7c7b\u578b\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"ref")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="course" class="com.atguigu.spring.pojo.Course">\n    \x3c!-- List<Student> students --\x3e\n    <property name="students">\n       <list>\n           <ref bean="studentOne"></ref>\n           <ref bean="studentTwo"></ref>\n           <ref bean="studentThree"></ref>\n       </list>\n    </property>\n</bean>\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u65b9\u5f0f\u4e8c \u4ece",(0,r.kt)("inlineCode",{parentName:"p"},"List"),"\u7c7b\u578b\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"bean")," \u6ce8\u5165"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="course" class="com.atguigu.spring.pojo.Course">\n    \x3c!-- List<Student> students --\x3e\n    <property name="students" ref="studentList"></property>\n</bean>\n\n\x3c!-- \u914d\u7f6e\u4e00\u4e2a\u96c6\u5408\u7c7b\u578b\u7684bean --\x3e\n<util:list id="studentList" >\n    <ref bean="studentOne"></ref>\n    <ref bean="studentTwo"></ref>\n</util:list>\n'))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Map"),"\u96c6\u5408\uff08\u4e24\u79cd\u65b9\u5f0f\uff09",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u65b9\u5f0f\u4e00 ",(0,r.kt)("inlineCode",{parentName:"p"},"Property"),"\u6807\u7b7e\u5185\u90e8\u8bbe\u7f6e\uff08\u952e\u662f\u5b57\u9762\u91cf\u7c7b\u578b\u5219\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"key")," \u5c5e\u6027\uff0c\u7c7b\u7c7b\u578b\u5219\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"key-ref"),"\uff09"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="teacherOne" class="com.atguigu.spring.pojo.Teacher"></bean>\n<bean id="teacherTwo" class="com.atguigu.spring.pojo.Teacher"></bean>\n\n<bean id="studentOne" class="com.atguigu.spring.pojo.Student">\n    \x3c!-- Map<String, Teacher> teacherMap; --\x3e\n    <property name="teacherMap">\n        <map>\n            <entry key="teacherOne" value-ref="teacherOne"></entry>\n            <entry key="teacherTwo" value-ref="teacherTwo"></entry>\n        </map>\n    </property>\n</bean>\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u65b9\u5f0f\u4e8c \u6216\u8005\u4ece",(0,r.kt)("inlineCode",{parentName:"p"},"Map"),"\u7c7b\u578b\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"bean")," \u6ce8\u5165"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<util:map id="teacherMap">\n    <entry key="teacherOne" value-ref="TeacherOne"></entry>\n    <entry key="teacherTwo" value-ref="teacherTwo"></entry>\n</util:map>\n\n<bean id="studentOne" class="com.atguigu.spring.pojo.Student">\n    \x3c!-- Map<String, Teacher> teacherMap; --\x3e\n    <property name="teacherMap" ref="teacherMap"></property>\n</bean>\n')))))),(0,r.kt)("h3",{id:"xml-druid\u6570\u636e\u6e90"},(0,r.kt)("inlineCode",{parentName:"h3"},"Xml Druid"),"\u6570\u636e\u6e90"),(0,r.kt)("h4",{id:"\u6ce8\u5165\u4f9d\u8d56"},"\u6ce8\u5165\u4f9d\u8d56"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- \u6570\u636e\u6e90\u4f9d\u8d56 --\x3e\n<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>8.0.16</version>\n</dependency>\n<dependency>\n    <groupId>com.alibaba</groupId>\n    <artifactId>druid</artifactId>\n    <version>1.0.31</version>\n</dependency>\n")),(0,r.kt)("h4",{id:"\u914d\u7f6eproperties"},"\u914d\u7f6e",(0,r.kt)("inlineCode",{parentName:"h4"},"properties")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"jdbc.url=jdbc:mysql://192.168.23.128:3306/ssm?useSSL=false&serverTimezone=Asia/Shanghai&characterEncoding=utf-8&autoReconnect=true\njdbc.driver=com.mysql.cj.jdbc.Driver\njdbc.user=root\njdbc.password=123456\n")),(0,r.kt)("h4",{id:"\u914d\u7f6ebean"},"\u914d\u7f6e",(0,r.kt)("inlineCode",{parentName:"h4"},"bean")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8" ?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:util="http://www.springframework.org/schema/util"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\n       http://www.springframework.org/schema/util\n       https://www.springframework.org/schema/util/spring-util.xsd\n       http://www.springframework.org/schema/context\n       http://www.springframework.org/schema/context/spring-context.xsd">\n\n    \x3c!-- jdbc.properties\uff0c\u5f15\u5165properties --\x3e\n    <context:property-placeholder location="jdbc.properties"></context:property-placeholder>\n\n    \x3c!-- \u6570\u636e\u6e90 : \u5176\u5b9e\u6dfb\u52a0\u7684\u662f\u5176\u4e00\u4e2a\u5b9e\u73b0\u7c7b  --\x3e\n    <bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource">\n\n        \x3c!-- \u6570\u636e\u5e93\u4fe1\u606f --\x3e\n        <property name="driverClassName" value="${jdbc.driver}"></property>\n        <property name="url" value="${jdbc.url}"></property>\n        <property name="username" value="${jdbc.user}"></property>\n        <property name="password" value="${jdbc.password}"></property>\n\n        \x3c!-- \u8fde\u63a5\u6c60\u8bbe\u7f6e --\x3e\n        <property name="initialSize" value="10"></property>\n        <property name="maxActive" value="16"></property>  \x3c!-- \u8fde\u63a5\u6c60\u6700\u5927\u6d3b\u8dc3\u8fde\u63a5\u6570 --\x3e\n    </bean>\n\n</beans>\n')),(0,r.kt)("h3",{id:"\u4f5c\u7528\u57dfscope"},"\u4f5c\u7528\u57df",(0,r.kt)("inlineCode",{parentName:"h3"},"scope")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="user" class="com.kinda.spring.pojo.User" scope="prototype" init-method="initMethod" destroy-method="destroyMethod">\n    <property name="username" value="kinda"></property>\n</bean>\n')),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u53d6\u503c"),(0,r.kt)("th",{parentName:"tr",align:null},"\u542b\u4e49"),(0,r.kt)("th",{parentName:"tr",align:null},"\u521b\u5efa\u5bf9\u8c61\u65f6\u673a"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"singleton\uff08\u9ed8\u8ba4\u3001\u5927\u90e8\u5206\u573a\u666f\uff09"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5728IOC\u5bb9\u5668\u4e2d\uff0c\u8fd9\u4e2abean\u7684\u5bf9\u8c61\u59cb\u7ec8\u4e3a\u5355\u4f8b"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5bb9\u5668\u521d\u59cb\u5316\u7684\u65f6\u5019\u521b\u5efa")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"prototype"),(0,r.kt)("td",{parentName:"tr",align:null},"\u539f\u578b\u6a21\u5f0f\uff0c\u83b7\u53d6\u521b\u5efa\u7684\u90fd\u662f\u65b0\u7684\u5bf9\u8c61"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ece\u5bb9\u5668\u5f53\u4e2d\u83b7\u53d6\u7684\u65f6\u5019\u521b\u5efa")))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u5982\u679c\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"WebApplicationContext"),"\u73af\u5883\u4e0b\uff08",(0,r.kt)("inlineCode",{parentName:"p"},"Web"),"\u5e94\u7528\uff09\uff0c\u8fd8\u6709\u53e6\u5916\u4e24\u4e2a\u4f5c\u7528\u57df\uff08\u4f46\u4e0d\u5e38\u7528\uff09\u3002")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u53d6\u503c"),(0,r.kt)("th",{parentName:"tr",align:null},"\u542b\u4e49"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"request"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5728\u4e00\u4e2a\u8bf7\u6c42\u8303\u56f4\u5185\u6709\u6548")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"prototype"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5728\u4e00\u4e2a\u4f1a\u8bdd\u8303\u56f4\u5185\u6709\u6548")))),(0,r.kt)("h3",{id:"bean-\u7684\u751f\u547d\u5468\u671f\u91cd\u8981"},"bean \u7684\u751f\u547d\u5468\u671f\uff08\u91cd\u8981\uff09"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://upload.kinda.info/image/202211181720273.png",alt:"bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png"})),(0,r.kt)("h4",{id:"\u5b9e\u4f53\u7c7b"},"\u5b9e\u4f53\u7c7b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class User {\n    private String username;\n    public User() {\n        System.out.println("\u751f\u547d\u5468\u671f1: \u53cd\u5c04\u521b\u5efa\u5bf9\u8c61\u9ed8\u8ba4\u4f7f\u7528\u65e0\u53c2\u6784\u9020");\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n        System.out.println("\u751f\u547d\u5468\u671f2: \u4f9d\u8d56\u6ce8\u5165");\n    }\n\n    @Override\n    public String toString() {\n        return "User{" +\n                "username=\'" + username + \'\\\'\' +\n                \'}\';\n    }\n\n    public void initMethod() {\n        System.out.println("\u751f\u547d\u5468\u671f3: \u521d\u59cb\u5316");\n    }\n\n    public void destroyMethod() {\n        System.out.println("\u751f\u547d\u5468\u671f5: \u9500\u6bc1");\n    }\n\n}\n')),(0,r.kt)("h4",{id:"beans\u914d\u7f6e\u9879"},(0,r.kt)("inlineCode",{parentName:"h4"},"beans"),"\u914d\u7f6e\u9879"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="user" class="com.atguigu.spring.pojo.User" init-method="initMethod" destroy-method="destroyMethod">\n    \x3c!-- setter \u4f9d\u8d56\u6ce8\u5165 --\x3e\n    <property name="username" value="\u5f20\u4e09"></property>\n</bean>\n')),(0,r.kt)("h4",{id:"\u6d4b\u8bd5"},"\u6d4b\u8bd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void test(){\n    ConfigurableApplicationContext ioc = new ClassPathXmlApplicationContext("spring-lifecycle.xml");\n    User user = ioc.getBean(User.class);\n    System.out.println(user);\n\n    // \u5bb9\u5668\u5173\u95ed -> \u51fa\u53d1destroyMethod \u65b9\u6cd5\n    ioc.close();\n}\n')),(0,r.kt)("h3",{id:"\u524d\u540e\u7f6e\u5904\u7406\u5668\u7b80\u5355\u4e86\u89e3"},"\u524d/\u540e\u7f6e\u5904\u7406\u5668\uff08\u7b80\u5355\u4e86\u89e3\uff09"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u751f\u547d\u5468\u671f\u8c03\u7528\u521d\u59cb\u5316\u65b9\u6cd5\u7684\u524d\u540e\u52a0\u5165\u989d\u5916\u7684\u5904\u7406\u4ee3\u7801\u3002")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u5bb9\u5668\u53ea\u80fd\u914d\u7f6e\u4e00\u4e2a\u540e\u7f6e\u5904\u7406\u5668, \u9488\u5bf9\u6240\u6709\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Bean"),"\u8fdb\u884c\u5904\u7406\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class MyBeanPostProcessor implements BeanPostProcessor {\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n        System.out.println("\u521d\u59cb\u5316\u4e4b\u524d\u8c03\u7528 --\x3e postProcessBeforeInitialization");\n        return bean;\n    }\n\n    @Override\n    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n        System.out.println("\u521d\u59cb\u5316\u4e4b\u540e\u8c03\u7528 --\x3e postProcessAfterInitialization");\n        return bean;\n    }\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="user" class="com.atguigu.spring.pojo.User" init-method="initMethod" destroy-method="destroyMethod">\n    \x3c!-- setter \u4f9d\u8d56\u6ce8\u5165 --\x3e\n    <property name="username" value="\u5f20\u4e09"></property>\n</bean>\n\n\x3c!-- \u540e\u7f6e\u5904\u7406\u5668\u914d\u7f6e --\x3e\n<bean id="myBeanPostProcessor" class="com.atguigu.spring.processor.MyBeanPostProcessor"></bean>\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"bean"),"\u7684\u4f5c\u7528\u57df\u5bf9\u751f\u547d\u5468\u671f\u662f\u6709\u5f71\u54cd\u7684\u3002")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"singleton")," : \u5bb9\u5668\u521b\u5efa\u540e\u7acb\u9a6c\u7684\u6267\u884c123\uff0c \u540e\u7eed\u83b7\u53d6\u76f4\u63a5\u4ece4\u5f00\u59cb\uff0c\u5bb9\u5668\u5173\u95ed\u8c03\u75285\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"prototype"),"\uff1a\u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6bean\u52191, 2, 3, 4 \u6267\u884c\uff0c\u5bb9\u5668\u5173\u95ed\u4e0d\u4f1a\u6267\u884c5 , \u6b64\u4f5c\u7528\u57df\u5bf9\u8c61\u9500\u6bc1\u65b9\u6cd5\u9700\u8981\u7528\u6237\u81ea\u5df1\u5904\u7406\u3002")),(0,r.kt)("h3",{id:"factorybean-\u91cd\u8981"},(0,r.kt)("inlineCode",{parentName:"h3"},"FactoryBean")," \uff08\u91cd\u8981\uff09"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u5c06\u5de5\u5382\u4f5c\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"Bean"),"\u914d\u7f6e\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"IOC"),"\u5bb9\u5668\u5f53\u4e2d\u53bb\uff0c\u8fdb\u800c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"IOC"),"\u5bb9\u5668\u83b7\u5f97",(0,r.kt)("inlineCode",{parentName:"p"},"Bean"),"\uff0c\u800c\u4e0d\u662f\u5148\u83b7\u5f97 ",(0,r.kt)("inlineCode",{parentName:"p"},"Factory"),".")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"Bean"),"\u7684\u521b\u5efa\u4ea4\u7ed9\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"FactoryBean")," \uff0c\u800c",(0,r.kt)("inlineCode",{parentName:"p"},"FactoryBean"),"\u5219\u4ea4\u7ed9\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"IOC"),"\u521b\u5efa.")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u771f\u6b63\u4ea4\u7ed9",(0,r.kt)("inlineCode",{parentName:"p"},"IOC"),"\u7ba1\u7406\u7684\u5bf9\u8c61\u662f\u5176\u4ece",(0,r.kt)("inlineCode",{parentName:"p"},"Factory"),"\u5f53\u4e2d\u8fd4\u56de\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"bean"),"\u5bf9\u8c61\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u597d\u5904\uff1a",(0,r.kt)("inlineCode",{parentName:"strong"},"Bean"),"\u7684\u521b\u5efa\u5f88\u590d\u6742\uff0c\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"strong"},"XML"),"\u5b8c\u6210\u521b\u5efa\u5f88\u9ebb\u70e6")),(0,r.kt)("h4",{id:"userfactorybean\u7684\u521b\u5efa"},(0,r.kt)("inlineCode",{parentName:"h4"},"UserFactoryBean"),"\u7684\u521b\u5efa"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class UserFactoryBean implements FactoryBean<User> {\n    @Override\n    public User getObject() throws Exception {\n        return new User();\n    }\n\n    @Override\n    public Class<?> getObjectType() {\n        return User.class;\n    }\n}\n")),(0,r.kt)("h4",{id:"\u914d\u7f6e\u6587\u4ef6"},"\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean class="com.atguigu.spring.factory.UserFactoryBean"></bean>\n')),(0,r.kt)("h4",{id:"\u6d4b\u8bd5-1"},"\u6d4b\u8bd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void test(){\n    ApplicationContext ioc = new ClassPathXmlApplicationContext("spring-factoryBean.xml");\n    User user = ioc.getBean(User.class);\n    System.out.println(user);\n}\n')),(0,r.kt)("h3",{id:"\u57fa\u4e8exml\u7684\u81ea\u52a8\u88c5\u914d\u91cd\u8981"},"\u57fa\u4e8e",(0,r.kt)("inlineCode",{parentName:"h3"},"XML"),"\u7684\u81ea\u52a8\u88c5\u914d\uff08\u91cd\u8981\uff09"),(0,r.kt)("h4",{id:"bytype"},(0,r.kt)("inlineCode",{parentName:"h4"},"byType")),(0,r.kt)("p",null,"\u4f1a\u6839\u636e",(0,r.kt)("inlineCode",{parentName:"p"},"name"),"\u53bb\u5339",(0,r.kt)("inlineCode",{parentName:"p"},"class")),(0,r.kt)("p",null,"\u6ce8\u5165\u7c7b\u7c7b\u578b\uff08\u5b57\u9762\u91cf\u7684\u4e0d\u884c\uff09\u7684\u65f6\u5019\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"XML"),"\u6587\u4ef6\u4e2d\u4e0d\u5728\u5199",(0,r.kt)("inlineCode",{parentName:"p"},"Property"),"\u6807\u7b7e\u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"ref")," \u5c5e\u6027\u5b8c\u6210\u6ce8\u5165\u3002"),(0,r.kt)("p",null,"\u4e0b\u65b9\u6f14\u793a\u7684\u5c06",(0,r.kt)("inlineCode",{parentName:"p"},"Service"),"\u4f7f\u7528\u81ea\u52a8\u88c5\u914d\u7684\u65b9\u5f0f\u6ce8\u5165\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"Controller")," \u4e2d"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"public class UserController {\n\n    UserService userService;\n\n    public UserService getUserService() {\n        return userService;\n    }\n\n    public void setUserService(UserService userService) {\n        this.userService = userService;\n    }\n}\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<bean id="controller" class="com.atguigu.spring.controller.UserController" autowire="byType"></bean>\n\n<bean id="userService" class="com.atguigu.spring.service.impl.UserServiceImpl">\n    \x3c!-- ... --\x3e\n</bean>\n')),(0,r.kt)("p",null,"\u4e0a\u65b9\u6f14\u793a\u7684\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"byType")," (\u7528\u7684\u6700\u591a) \u65b9\u5f0f\uff0c\u5176\u4f1a\u53bb\u5bb9\u5668\u5f53\u4e2d\u627e",(0,r.kt)("inlineCode",{parentName:"p"},"UserService"),"\u7684\u5b9e\u73b0\u7c7b\uff0c"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u5982\u679c\u627e\u4e0d\u5230\u5219\u4e0d\u88c5\u914d\uff08\u5373\u4f7f\u7528\u9ed8\u8ba4\u503c\uff09\uff1b\u5982\u679c\u627e\u5230\u591a\u4e2a\u4f1a\u62a5 ",(0,r.kt)("inlineCode",{parentName:"p"},"noUniqueBeanDefinitionException"),"\u3002")),(0,r.kt)("h4",{id:"byname"},(0,r.kt)("inlineCode",{parentName:"h4"},"byName")),(0,r.kt)("p",null,"\u4f1a\u6839\u636e",(0,r.kt)("inlineCode",{parentName:"p"},"name"),"\u53bb\u5339\u914d",(0,r.kt)("inlineCode",{parentName:"p"},"id")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"byName")," \u57fa\u672c\u7528\u4e0d\u5230\uff0c\u6211\u4eec\u4e0d\u7528\u7ba1\u5566\uff0c\u56e0\u4e3a\u5728",(0,r.kt)("strong",{parentName:"p"},"\u5f00\u53d1\u4e2d\u4e00\u4e2a\u7c7b\u578b\u7684\u7ec4\u4ef6\u53ea\u4f1a\u5411\u5bb9\u5668\u5f53\u4e2d\u653e\u4e00\u6b21"),"\u3002"),(0,r.kt)("p",null,"\u5f53\u5bb9\u5668\u5f53\u4e2d\u6709\u591a\u4e2a\u76f8\u540c\u7c7b\u578b\u80fd\u5339\u914d\u5230\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"byName"),"\u8fdb\u884c\u533a\u5206\u3002"),(0,r.kt)("h3",{id:"\u57fa\u4e8e\u6ce8\u89e3\u7ba1\u7406bean"},"\u57fa\u4e8e\u6ce8\u89e3\u7ba1\u7406",(0,r.kt)("inlineCode",{parentName:"h3"},"Bean")),(0,r.kt)("h4",{id:"\u56db\u4e2a\u6ce8\u89e3\u53ca\u5176\u5173\u7cfb"},"\u56db\u4e2a\u6ce8\u89e3\u53ca\u5176\u5173\u7cfb"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Component")," : \u5c06\u7c7b\u6807\u8bc6\u4e3a\u666e\u901a\u7ec4\u4ef6"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Controller"),"\uff1a\u5c06\u7c7b\u6807\u8bc6\u4e3a\u63a7\u5236\u5c42\u7ec4\u4ef6"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Service"),"\uff1a\u5c06\u7c7b\u6807\u8bc6\u4e3a\u4e1a\u52a1\u5c42\u7ec4\u4ef6"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"@Repository"),": \u5c06\u7c7b\u6807\u8bc6\u4e3a\u6301\u4e45\u5c42\u7ec4\u4ef6")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u81ea\u5b9a\u4e49",(0,r.kt)("inlineCode",{parentName:"p"},"bean"),"\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"id"),"\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},'@Controller("userController")'),"\u3002")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u8fd9\u56db\u4e2a\u6ce8\u89e3\u529f\u80fd\u4e00\u6478\u4e00\u6837 \uff0c \u53ea\u662f\u7ed9\u5f00\u53d1\u4eba\u5458\u770b\uff08\u4ee3\u7801\u53ef\u8bfb\u6027\uff09\uff0c\u8ba9\u5f00\u53d1\u4eba\u5458\u533a\u5206\u7ec4\u4ef6\u7684\u529f\u80fd\u3002")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u56db\u4e2a\u6ce8\u89e3\u4e4b\u95f4\u7684\u5173\u7cfb \uff1a\u5747\u7531 ",(0,r.kt)("inlineCode",{parentName:"p"},"@Component")," \u6269\u5c55\u51fa\u6765\u3002")),(0,r.kt)("h4",{id:"\u626b\u63cf\u7ec4\u4ef6"},"\u626b\u63cf\u7ec4\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u7ec4\u4ef6\u626b\u63cf\u914d\u7f6e --\x3e\n<context:component-scan base-package="com.atguigu.spring"></context:component-scan>\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u6392\u9664\u626b\u63cf")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u7ec4\u4ef6\u626b\u63cf\u914d\u7f6e --\x3e\n<context:component-scan base-package="com.atguigu.spring">\n\n    \x3c!--\n        type: annotation -> \u6839\u636e\u6ce8\u89e3\u6392\u9664\n              assignable -> \u6839\u636e\u7c7b\u7c7b\u578b\u8fdb\u884c\u6392\u9664\n        \u5982\u4e0b\u6392\u9664\u6389\u63a7\u5236\u5c42\u7684\u7ec4\u4ef6\n     --\x3e\n    <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller"/>\n</context:component-scan>\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u5305\u542b\u626b\u63cf")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u9ed8\u8ba4",(0,r.kt)("inlineCode",{parentName:"p"},"context:component-scan"),"\u662f",(0,r.kt)("inlineCode",{parentName:"p"},'use-default-filters="ture"')," \uff1a\u8868\u793a\u5305\u4e0b\u7684\u6240\u6709\u7684\u7c7b\u90fd\u9700\u8981\u626b\u63cf\uff0c\u9700\u8981\u5173\u6389(",(0,r.kt)("inlineCode",{parentName:"p"},"false"),")\u624d\u80fd\u4f7f\u7528\u5305\u542b\u626b\u63cf\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u7ec4\u4ef6\u626b\u63cf\u914d\u7f6e --\x3e\n<context:component-scan base-package="com.atguigu.spring" use-default-filters="false">\n\n    \x3c!--\n        type: annotation -> \u6839\u636e\u6ce8\u89e3\u53ea\u626b\u63cf\n              assignable -> \u6839\u636e\u7c7b\u7c7b\u578b\u53ea\u626b\u63cf\n        \u5982\u4e0b\u53ea\u626b\u63cf\u63a7\u5236\u5c42\u7684\u7ec4\u4ef6\n     --\x3e\n    <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>\n</context:component-scan>\n')),(0,r.kt)("h3",{id:"\u81ea\u52a8\u88c5\u914d\u6ce8\u89e3"},"\u81ea\u52a8\u88c5\u914d\u6ce8\u89e3"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"Autowire"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"Qualifier"))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"Autowire"),"\u9ed8\u8ba4\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"byType"),"\u7684\u65b9\u5f0f\uff0c\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"IOC"),"\u5bb9\u5668\u4e2d\u901a\u8fc7\u7c7b\u578b\u5339\u914d\u67d0\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"bean"),"\u4e3a\u5c5e\u6027\u8d4b\u503c\u3002")),(0,r.kt)("p",null,"\u5982\u679c\u6709\u591a\u4e2a\u7c7b\u578b\u5339\u914d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"bean"),"\uff0c\u6b64\u65f6\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"byName"),"\u7684\u65b9\u5f0f\u5b9e\u73b0\u81ea\u52a8\u88c5\u914d\u7684\u6548\u679c\u3002"),(0,r.kt)("p",null,"\u5982\u679c",(0,r.kt)("inlineCode",{parentName:"p"},"byType"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"byName"),"\u90fd\u4e0d\u884c\uff0c\u6b64\u65f6\u4f1a\u62a5\u9519",(0,r.kt)("inlineCode",{parentName:"p"},"noUniqueBeanDefinitionExceptioin"),"\u3002\u5bf9\u5e94\u53ef\u4ee5\u901a\u8fc7\u6ce8\u89e3",(0,r.kt)("inlineCode",{parentName:"p"},"@Qualifier"),"\u7684\u65b9\u5f0f\uff0c\u6307\u5b9a\u67d0\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"bean"),"\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"id"),"\uff0c\u5c06\u8fd9\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"bean"),"\u4e3a\u5c5e\u6027\u8d4b\u503c\u3002"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u5982\u679c",(0,r.kt)("inlineCode",{parentName:"p"},"IOC"),"\u5bb9\u5668\u4e2d\u6ca1\u6709\u4efb\u4f55\u4e00\u4e2a\u7c7b\u578b\u5339\u914d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"bean"),"\uff0c\u6b64\u65f6\u629b\u51fa\u5f02\u5e38\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"NoSuchBeanDefinitionException"),"\u3002\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"@AutoWired"),"\u6ce8\u89e3\u4e2d\u6709\u4e2a\u5c5e\u6027",(0,r.kt)("inlineCode",{parentName:"p"},"required"),"\uff0c\u9ed8\u8ba4\u503c\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"true"),"\uff0c\u8981\u6c42\u5fc5\u987b\u5b8c\u6210\u81ea\u52a8\u88c5\u914d\uff0c\u53ef\u4ee5\u5c06",(0,r.kt)("inlineCode",{parentName:"p"},"required"),"\u8bbe\u7f6e\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"false"),"\uff0c\u6b64\u65f6\u80fd\u88c5\u914d\u5219\u88c5\u914d\uff0c\u4e0d\u80fd\u88c5\u914d\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\u3002")),(0,r.kt)("h4",{id:"\u653e\u7f6e\u4f4d\u7f6e"},"\u653e\u7f6e\u4f4d\u7f6e"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u653e\u5728\u6210\u5458\u53d8\u91cf\u4e0a\uff1a\u5219Spring\u4f1a\u4f7f\u7528\u66b4\u529b\u53cd\u5c04\u7684\u65b9\u5f0f\u5b8c\u6210\u79c1\u6709\u5c5e\u6027\u8f93\u5165\uff08",(0,r.kt)("strong",{parentName:"li"},"\u6700\u5e38\u89c1\u7684\u7528\u6cd5"),"\uff09")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@Controller\npublic class UserController {\n    @Autowired\n    private UserService service;\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u653e\u5728",(0,r.kt)("inlineCode",{parentName:"li"},"setter"),"\u65b9\u6cd5\u4e0a\uff1a")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@Controller\npublic class UserController {\n    private UserService service;\n\n    @Autowired\n    public void setService(UserService service) {\n        this.service = service;\n    }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u653e\u5728\u6709\u53c2\u6784\u9020\u4e0a")),(0,r.kt)("p",null,"\u4ee3\u7801\u5c31\u4e0d\u6f14\u793a\u4e86\uff0c\u4f7f\u7528\u7b2c\u4e00\u79cd\u5373\u53ef\u5566\u3002"),(0,r.kt)("h2",{id:"aop"},"AOP"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u7406\u5ff5\uff1a\u5c06\u975e\u6838\u5fc3\u903b\u8f91\u5265\u79bb\u51fa\u6765\u4ee5\u540e\uff0c\u5c01\u88c5\u8fd9\u4e9b\u975e\u6838\u5fc3\u903b\u8f91\u7684\u7c7b\u3001\u5bf9\u8c61\u3001\u65b9\u6cd5\u3002")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://upload.kinda.info/image/202211181721850.png",alt:"image.png"})),(0,r.kt)("h3",{id:"\u9759\u6001\u4ee3\u7406"},"\u9759\u6001\u4ee3\u7406"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u4ee3\u7406\u7c7b\u9700\u8981\u80fd\u591f\u5b9e\u73b0\u6240\u6709\u5b9e\u4f53\u7c7b\u80fd\u591f\u5b9e\u73b0\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u4ee3\u7406\u7c7b\u548c\u5b9e\u73b0\u7c7b\u9700\u8981\u7ee7\u627f\u540c\u4e00\u4e2a\u63a5\u53e3\u3002")),(0,r.kt)("h4",{id:"calculatorimpl\u5b9e\u73b0\u7c7b"},(0,r.kt)("inlineCode",{parentName:"h4"},"CalculatorImpl"),"\u5b9e\u73b0\u7c7b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'package com.kinda.spring.proxy;\n\npublic class CalculatorImpl implements Calculator{\n    @Override\n    public int add(int i, int j) {\n        int result = i + j;\n        System.out.println("\u65e5\u5fd7:"+"\u65b9\u6cd5\u5185\u90e8");\n        return result;\n    }\n\n    @Override\n    public int sub(int i, int j) {\n        int result = i - j;\n        System.out.println("\u65e5\u5fd7:"+"\u65b9\u6cd5\u5185\u90e8");\n        return result;\n    }\n}\n')),(0,r.kt)("h4",{id:"calculator\u63a5\u53e3"},(0,r.kt)("inlineCode",{parentName:"h4"},"Calculator"),"\u63a5\u53e3"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"package com.kinda.spring.proxy;\n\npublic interface Calculator {\n    int add(int i, int j);\n    int sub(int i, int j);\n}\n")),(0,r.kt)("h4",{id:"calculatorstaticproxy\u4ee3\u7406\u7c7b"},(0,r.kt)("inlineCode",{parentName:"h4"},"CalculatorStaticProxy"),"\u4ee3\u7406\u7c7b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'package com.kinda.spring.proxy;\n\npublic class CalculatorStaticProxy implements Calculator{\n\n    /**\n     * \u8fd9\u91cc\u7684target\u5176\u5b9e\u5c31\u662f\u76ee\u6807\u5bf9\u8c61\uff0c\u5bf9\u5e94\u8fd9\u4e2a\u9759\u6001\u4ee3\u7406\u7c7b\u4e5f\u5c31\u662fCalculatorImpl\u7c7b\u7684\u5b9e\u4f8b\u5316\u5bf9\u8c61\u3002\n     */\n    private CalculatorImpl target;\n\n    public CalculatorStaticProxy(CalculatorImpl target) {\n        this.target = target;\n    }\n\n    @Override\n    public int add(int i, int j) {\n        System.out.println("\u65e5\u5fd7:"+"\u65b9\u6cd5\u5916\u90e8\uff0c\u5f00\u59cb");\n        int result = target.add(i, j);\n        System.out.println("\u65e5\u5fd7:"+"\u65b9\u6cd5\u5916\u90e8\uff0c\u7ed3\u675f");\n        return result;\n    }\n\n    @Override\n    public int sub(int i, int j) {\n        System.out.println("\u65e5\u5fd7:"+"\u65b9\u6cd5\u5916\u90e8\uff0c\u5f00\u59cb");\n        int result = target.sub(i, j);\n        System.out.println("\u65e5\u5fd7:"+"\u65b9\u6cd5\u5916\u90e8\uff0c\u7ed3\u675f");\n        return result;\n    }\n}\n')),(0,r.kt)("h4",{id:"\u6d4b\u8bd5-2"},"\u6d4b\u8bd5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"package com.kinda.spring;\n\nimport com.kinda.spring.proxy.CalculatorImpl;\nimport com.kinda.spring.proxy.CalculatorStaticProxy;\nimport org.junit.Test;\n\npublic class testProxy {\n    @Test\n    public void testProxy(){\n        CalculatorStaticProxy calculatorStaticProxy = new CalculatorStaticProxy(new CalculatorImpl());\n        int result = calculatorStaticProxy.add(1, 2);\n        System.out.println(result);\n    }\n}\n")),(0,r.kt)("h3",{id:"\u52a8\u6001\u4ee3\u7406"},"\u52a8\u6001\u4ee3\u7406"),(0,r.kt)("h4",{id:"\u5b9e\u73b0\u65b9\u5f0f"},"\u5b9e\u73b0\u65b9\u5f0f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"JDK")," \u5982\u4e0a\u8ff0\u4ee3\u7801\uff0c\u8981\u6c42\u5fc5\u987b\u8981\u6709\u63a5\u53e3\uff0c\u6700\u7ec8\u751f\u6210\u7684\u4ee3\u7406\u7c7b\u5728",(0,r.kt)("inlineCode",{parentName:"li"},"com.sun.Proxy"),"\u5305\u4e0b\uff0c\u540d\u4e3a ",(0,r.kt)("inlineCode",{parentName:"li"},"$Proxy2"),"\uff0c\u5176\u548c\u76ee\u6807\u7c7b\u5b9e\u73b0\u7684\u662f\u76f8\u540c\u63a5\u53e3\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cglib")," \u6700\u7ec8\u751f\u6210\u7684\u4ee3\u7406\u7c7b\u4f1a\u7ee7\u627f\u76ee\u6807\u7c7b\uff0c\u5e76\u4e14\u548c\u76ee\u6807\u7c7b\u5728\u76f8\u540c\u7684\u5305\u4e0b\u3002")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u4e0d\u7528\u81ea\u5df1\u521b\u5efa\u4ee3\u7406\u7c7b",(0,r.kt)("inlineCode",{parentName:"p"},"java"),"\u6587\u4ef6\uff08\u9759\u6001\u4ee3\u7406\uff09\uff0c\u800c\u662f\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"java"),"\u63d0\u4f9b\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"API"),"\u751f\u6210\u4efb\u610f\u76ee\u6807\u7c7b\u7684\u4ee3\u7406\u7c7b\u3002")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"newProxyInstance"),"\u51fd\u6570\u7684\u53c2\u6570"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ClassLoader loader"),": \u6307\u5b9a\u52a0\u8f7d\u52a8\u6001\u751f\u6210\u7684\u4ee3\u7406\u7c7b\u7684\u7c7b\u52a0\u8f7d\u5668"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Class[] interface"),": \u83b7\u53d6\u76ee\u6807\u5bf9\u8c61\u5b9e\u73b0\u7684\u6240\u6709\u63a5\u53e3\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"class"),"\u5bf9\u8c61\u7684\u6570\u7ec4"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InvocationHandler"),": \u8bbe\u7f6e\u4ee3\u7406\u7c7b\u4e2d\u7684\u62bd\u8c61\u65b9\u6cd5\u5982\u4f55\u91cd\u5199"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"// \u4ee3\u7406\u5de5\u5382\npublic class ProxyFactory {\n\n    private static class Handler implements InvocationHandler{\n        private Object target;\n\n        public Handler(Object proxyedObject) {\n            target = proxyedObject;\n        }\n\n        @Override\n        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n            try{\n              // todo: \u6267\u884c\u524d\u6dfb\u52a0\u4ee3\u7801\u4f4d\u7f6e \n              \n              Object result = method.invoke(target, args);\n              \n              // todo: \u6267\u884c\u540e\u6dfb\u52a0\u4ee3\u7801\u4f4d\u7f6e\n            } catch(Exception e) {\n            \n              // todo: \u53d1\u751f\u5f02\u5e38\u7684\u4f4d\u7f6e\n              e.printStackTrace();\n            \n            } finally {\n              // todo: finally \u4f4d\u7f6e\n            }\n            return result;\n        }\n    }\n\n    public static Object getProxy(final Object target) {\n        return Proxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces(), new Handler(target));\n    }\n}\n")),(0,r.kt)("h3",{id:"aop\u4e00\u4e9b\u6982\u5ff5"},"AOP\u4e00\u4e9b\u6982\u5ff5"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"AOP"),"\u672c\u8eab\u662f\u4e00\u79cd\u601d\u60f3\uff0c\u9762\u5411\u5207\u9762\u7f16\u7a0b\uff0c\u662f\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7684\u4e00\u79cd\u8865\u5145\u548c\u5b8c\u5584\uff0c\u5b83\u662f\u4ee5\u901a\u8fc7\u9884\u7f16\u8bd1\u7684\u65b9\u5f0f\u548c\u8fd0\u884c\u671f\u52a8\u6001\u4ee3\u7406\u7684\u65b9\u5f0f\u5b9e\u73b0\u5728\u4e0d\u4fee\u6539\u6e90\u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\u7ed9\u7a0b\u5e8f\u52a8\u6001\u7edf\u4e00\u6dfb\u52a0\u989d\u5916\u529f\u80fd\u7684\u4e00\u79cd\u6280\u672f\u3002"),(0,r.kt)("h3",{id:"\u4e00\u4e9b\u672f\u8bed"},"\u4e00\u4e9b\u672f\u8bed"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6a2a\u5207\u5173\u6ce8\u70b9\uff1a\u88ab\u4ee3\u7406\u7c7b\u62bd\u53d6\u7684\u975e\u6838\u5fc3\u4e1a\u52a1\u4ee3\u7801\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u901a\u77e5\uff1a\u6bcf\u4e2a\u6a2a\u5207\u5173\u6ce8\u70b9\u90fd\u9700\u8981\u5bf9\u5e94\u4e00\u4e2a\u65b9\u6cd5\u5b9e\u73b0, \u8fd9\u6837\u7684\u5207\u9762\u7c7b\u65b9\u6cd5\u5c31\u53eb\u901a\u77e5\u65b9\u6cd5\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5207\u9762\uff1a\u5c01\u88c5\u6a2a\u5207\u5173\u6ce8\u70b9\u7684\u7c7b\uff0c\u5c31\u53eb\u5207\u9762\u6216\u5c01\u88c5\u901a\u77e5\u65b9\u6cd5\u7c7b\u5c31\u53eb\u5207\u9762\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u76ee\u6807\uff1a\u88ab\u4ee3\u7406\u7684\u76ee\u6807\u5bf9\u8c61\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4ee3\u7406\uff1a\u5411\u76ee\u6807\u5bf9\u8c61\u5e94\u7528\u901a\u77e5\u4e4b\u540e\u521b\u5efa\u7684\u4ee3\u7406\u5bf9\u8c61\u3002( \u4e0d\u9700\u8981\u6211\u4eec\u81ea\u5df1\u521b\u5efa, \u800c\u662f AOP \u5e2e\u6211\u4eec\u521b\u5efa )"),(0,r.kt)("li",{parentName:"ul"},"\u8fde\u63a5\u70b9\uff08\u903b\u8f91\u6982\u5ff5\uff09\uff1a\u6a2a\u5207\u5173\u6ce8\u70b9\u88ab\u62bd\u53d6\u7684\u4f4d\u7f6e\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5207\u5165\u70b9\uff1a\u672c\u8d28\u5c31\u662f\u4e2a\u8868\u8fbe\u5f0f\uff0c\u8d77\u5230\u5b9a\u4f4d\u94fe\u63a5\u70b9\u7684\u4f5c\u7528\uff0c\u5c06\u8868\u8fbe\u5f0f\u6ce8\u89e3\u5230\u901a\u77e5\u4e0a\u9762\uff0c\u8fdb\u800c\u4f5c\u7528\u5230\u8868\u793a\u7684\u8fde\u63a5\u70b9\u4e0a\u9762\u3002")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"\u603b\u7ed3")," : AOP \u91cd\u70b9\u7f16\u5199\u5207\u9762\u7c7b\uff08\u5148\u62bd\u53d6\u4ee3\u7801\uff09\uff0c\u901a\u8fc7\u5207\u70b9\u8868\u8fbe\u5f0f\u58f0\u660e\u7684\u65b9\u5f0f\u518d\u5957\u5230\u76ee\u6807\u7c7b\u4e0a\u544a\u8bc9",(0,r.kt)("inlineCode",{parentName:"p"},"Spring"),"\u6846\u67b6\u6211\u8981\u5c06\u6211\u6ce8\u89e3\u5230\u7684\u901a\u77e5\u5e94\u7528\u5230\u90a3\u4e2a\u7c7b\u7684\u90a3\u4e2a\u8fde\u63a5\u70b9\u4e0a\u3002")),(0,r.kt)("h3",{id:"\u4f5c\u7528"},"\u4f5c\u7528"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7b80\u5316\u4ee3\u7801\uff1a\u5177\u6709\u91cd\u590d\u6027\uff08\u591a\u4e2a\u7c7b\u7684\u76f8\u540c\u4f4d\u7f6e\uff09\u7684\u975e\u6838\u5fc3\u4e1a\u52a1\u4ee3\u7801\u62bd\u53d6\uff0c\u8ba9\u76ee\u6807\u7c7b\u5f53\u4e2d\u4ec5\u5269\u4e0b\u7b80\u6d01\u7684\u6838\u5fc3\u4e1a\u52a1\u4ee3\u7801\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4ee3\u7801\u589e\u5f3a\uff1a\u9700\u8981\u5207\u9762\u7c7b\u91cc\u9762\u529f\u80fd\uff0c\u76f4\u63a5\u5957\u4e0a\u53bb\u5c31\u589e\u5f3a\u76ee\u6807\u7c7b\u7684\u4ee3\u7801\u4e86\u3002")),(0,r.kt)("h3",{id:"\u57fa\u4e8e\u6ce8\u89e3\u5b9e\u73b0aop"},"\u57fa\u4e8e\u6ce8\u89e3\u5b9e\u73b0AOP"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"Spring"),"\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5f00\u542f",(0,r.kt)("inlineCode",{parentName:"p"},"aop"),"\u6ce8\u89e3\u529f\u80fd",(0,r.kt)("inlineCode",{parentName:"p"},"<aop:aspectj-autoproxy />"))),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://upload.kinda.info/image/202211181721633.png",alt:"image.png"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"AspectJ"),"\uff1a\u672c\u8d28\u4e0a\u662f\u9759\u6001\u4ee3\u7406, \u5c06\u4ee3\u7406\u903b\u8f91\u201c\u7ec7\u5165\u201d\u88ab\u4ee3\u7406\u7684\u76ee\u6807\u7c7b\u7f16\u8bd1\u5f97\u5230\u7684\u5b57\u8282\u7801\u6587\u4ef6\uff0c\u6240\u4ee5\u6700\u7ec8\u6548\u679c\u662f\u52a8\u6001\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"weaver"),"\u5c31\u662f\u7ec7\u5165\u5668\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Spring"),"\u53ea\u662f\u501f\u7528\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"AspectJ"),"\u4e2d\u7684\u6ce8\u89e3\u3002"),(0,r.kt)("h4",{id:"\u914d\u7f6e\u6587\u4ef6-1"},"\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8" ?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:util="http://www.springframework.org/schema/util"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:aop="http://www.springframework.org/schema/aop"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\n       http://www.springframework.org/schema/util\n       https://www.springframework.org/schema/util/spring-util.xsd\n       http://www.springframework.org/schema/context\n       http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd">\n\n    \x3c!--\n        AOP \u5207\u9762\u7c7b \u548c \u76ee\u6807\u7c7b\u90fd\u9700\u8981\u4ea4\u7ed9 IOC \u5bb9\u5668\u7ba1\u7406\n     --\x3e\n    <context:component-scan base-package="com.atguigu.spring.aop"></context:component-scan>\n\n    \x3c!-- \u5f00\u542f\u57fa\u4e8e\u6ce8\u89e3\u7684AOP\u529f\u80fd --\x3e\n    <aop:aspectj-autoproxy/>\n\n</beans>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>org.springframework</groupId>\n    <artifactId>spring-context</artifactId>\n    <version>5.3.1</version>\n</dependency>\n<dependency>\n    <groupId>org.springframework</groupId>\n    <artifactId>spring-aspects</artifactId>\n    <version>5.3.1</version>\n</dependency>\n<dependency>\n    <groupId>junit</groupId>\n    <artifactId>junit</artifactId>\n    <version>4.12</version>\n    <scope>test</scope>\n</dependency>\n")),(0,r.kt)("h4",{id:"\u521b\u5efa\u5207\u9762\u7c7b\u5e76\u914d\u7f6e"},"\u521b\u5efa\u5207\u9762\u7c7b\u5e76\u914d\u7f6e(**)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'/**\n * \u5207\u9762\u7c7b : \u9700\u8981\u6ce8\u518c\u5230IOC\u5bb9\u5668\n */\n@Component\n@Aspect  // \u5c06\u7ec4\u4ef6\u6807\u8bc6\u4e3a\u5207\u9762\u7ec4\u4ef6\npublic class LoggerAspect {\n\n    // @Before("execution(public int com.atguigu.spring.aop.anno.Calculator.add(int, int))")\n\n    // \u88ab\u589e\u5f3a\u7c7b\u7684\u6240\u6709\u7684\u65b9\u6cd5\n    @Before("execution(* com.atguigu.spring.aop.anno.Calculator.*(..))")\n    public void beforeAdviceMethod(JoinPoint joinPoint) {\n      System.out.println("\u524d\u7f6e\u65b9\u6cd5\u901a\u77e5");\n    }\n}\n')),(0,r.kt)("h4",{id:"\u83b7\u53d6\u8fde\u63a5\u70b9\u7684\u65b9\u6cd5\u4fe1\u606f"},"\u83b7\u53d6\u8fde\u63a5\u70b9\u7684\u65b9\u6cd5\u4fe1\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Component\n@Aspect  // \u5c06\u7ec4\u4ef6\u6807\u8bc6\u4e3a \u5207\u9762 \u7ec4\u4ef6\npublic class LoggerAspect {\n\n    // \u5199\u7684\u592a\u6b7b\u4e86\n    // @Before("execution(public int com.atguigu.spring.aop.anno.Calculator.add(int, int))")\n\n    // \u88ab\u589e\u5f3a\u7c7b\u7684\u6240\u6709\u7684\u65b9\u6cd5\n    @Before("execution(* com.atguigu.spring.aop.anno.Calculator.*(..))")\n    public void beforeAdviceMethod(JoinPoint joinPoint) {\n        System.out.println(joinPoint.getSignature().getName());  // \u83b7\u53d6\u65b9\u6cd5\u540d\u79f0\n        Object[] args = joinPoint.getArgs(); // \u83b7\u53d6\u8fde\u63a5\u70b9\u7684\u53c2\u6570\n        for (int i = 0; i < args.length; i++) {\n            System.out.println(args[i]);\n        }\n    }\n}\n')),(0,r.kt)("h4",{id:"\u5207\u5165\u70b9\u8868\u8fbe\u5f0f\u7684\u91cd\u7528"},"\u5207\u5165\u70b9\u8868\u8fbe\u5f0f\u7684\u91cd\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Component\n@Aspect  // \u5c06\u7ec4\u4ef6\u6807\u8bc6\u4e3a \u5207\u9762 \u7ec4\u4ef6\npublic class LoggerAspect {\n\n    @Pointcut("execution(* com.atguigu.spring.aop.anno.Calculator.*(..))")\n    public void pointCut() {}\n\n    @Before("pointCut()")\n    public void beforeAdviceMethod(JoinPoint joinPoint) {\n        System.out.println("\u524d\u7f6e\u901a\u77e5");\n    }\n\n    @AfterReturning("pointCut()")\n    public void afterAdviceMethod(JoinPoint joinPoint) {\n        System.out.println("\u8fd4\u56de\u901a\u77e5");\n    }\n}\n')),(0,r.kt)("h4",{id:"\u8fd4\u56de\u901a\u77e5\u83b7\u5f97\u8fd4\u56de\u503c"},"\u8fd4\u56de\u901a\u77e5\u83b7\u5f97\u8fd4\u56de\u503c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@AfterReturning(value = "pointCut()", returning = "result")\npublic void afterAdviceMethod(JoinPoint joinPoint, Object result) {\n    System.out.println("\u8fd4\u56de\u901a\u77e5, \u4e14\u8fd4\u56de\u503c\u4e3a : " + result);\n}\n')),(0,r.kt)("h4",{id:"\u5f02\u5e38\u901a\u77e5\u83b7\u53d6\u5f02\u5e38"},"\u5f02\u5e38\u901a\u77e5\u83b7\u53d6\u5f02\u5e38"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@AfterThrowing(value = "pointCut()", throwing = "ex")\npublic void afterThrowingAdviceMethod(JoinPoint joinPoint, Exception ex) {\n    System.out.println("\u53d1\u751f\u5f02\u5e38" + ex);\n}\n')),(0,r.kt)("h4",{id:"\u73af\u7ed5\u901a\u77e5"},"\u73af\u7ed5\u901a\u77e5"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u76f8\u5f53\u4e8e\u624b\u52a8\u5b9e\u73b0\u52a8\u6001\u4ee3\u7406\uff0c\u80fd\u4ee3\u66ff\u524d\u9762\u56db\u79cd\u901a\u77e5\uff0c\u4e14\u80fd\u4e0e\u524d\u97624\u79cd\u901a\u77e5\u5171\u5b58\u3002\u4e00\u822c\u8bbe\u7f6e\u4e86\u524d\u9762\u7684\u901a\u77e5\u540e\uff0c\u5c31\u6ca1\u5fc5\u8981\u8bbe\u7f6e\u73af\u7ed5\u901a\u77e5\u5566\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'/**\n *\n * @param proceedingJoinPoint \u53ef\u6267\u884c\u7684\u8fde\u63a5\u70b9\n */\n@Around("pointCut()")\npublic void aroundAdviceMethod(ProceedingJoinPoint proceedingJoinPoint) {\n    try {\n        System.out.println("\u73af\u7ed5\u901a\u77e5 --\x3e \u524d\u7f6e\u901a\u77e5");\n        Object proceed = proceedingJoinPoint.proceed();\n        System.out.println("\u73af\u7ed5\u901a\u77e5 --\x3e \u8fd4\u56de\u901a\u77e5");\n    } catch (Throwable e) {\n        System.out.println("\u73af\u7ed5\u901a\u77e5 --\x3e \u5f02\u5e38\u901a\u77e5");\n        throw new RuntimeException(e);\n    } finally {\n        System.out.println("\u73af\u7ed5\u901a\u77e5 --\x3e \u540e\u7f6e\u901a\u77e5");\n    }\n}\n')),(0,r.kt)("h4",{id:"\u5404\u79cd\u901a\u77e5\u7684\u6267\u884c\u987a\u5e8f"},"\u5404\u79cd\u901a\u77e5\u7684\u6267\u884c\u987a\u5e8f"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Spring 5.3.x \u7248\u672c\u4ee5\u524d")),(0,r.kt)("p",null,"\u524d\u7f6e\u901a\u77e5 \u2192 \u76ee\u6807\u64cd\u4f5c \u2192 \u540e\u7f6e\u901a\u77e5 \u2192 \u8fd4\u56de\u901a\u77e5/\u5f02\u5e38\u901a\u77e5"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Spring 5.3.x \u7248\u672c\u4ee5\u540e \uff08 \u5f53\u524d\u7b14\u8bb0\u6240\u4f5c\u7684\u7248\u672c \uff09")),(0,r.kt)("p",null,"\u524d\u7f6e\u901a\u77e5 \u2192 \u76ee\u6807\u64cd\u4f5c \u2192 \u8fd4\u56de\u901a\u77e5 / \u5f02\u5e38\u901a\u77e5 \u2192 \u540e\u7f6e\u901a\u77e5"),(0,r.kt)("h4",{id:"\u5207\u9762\u4f18\u5148\u7ea7"},"\u5207\u9762\u4f18\u5148\u7ea7"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u53ea\u9700\u8981\u4f7f\u7528\u6ce8\u89e3",(0,r.kt)("inlineCode",{parentName:"p"},"@Order"),"\u5728\u5207\u9762\u7c7b\u7684\u6ce8\u89e3\u4e0a\u5373\u53ef\uff0c\u6570\u503c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\u3002\u4e14\u9ed8\u8ba4\u503c\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"INT_MAX"),"\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Component\n@Aspect     // \u5c06\u7ec4\u4ef6\u6807\u8bc6\u4e3a \u5207\u9762 \u7ec4\u4ef6\n@Order(1)   // \u8bbe\u7f6e\u5207\u9762\u7684\u4f18\u5148\u7ea7\npublic class LoggerAspect {\n\n    @Pointcut("execution(* com.atguigu.spring.aop.anno.Calculator.*(..))")\n    public void pointCut() {}\n\n    @Before("pointCut()")\n    public void beforeAdviceMethod(JoinPoint joinPoint) {\n        System.out.println("\u524d\u7f6e\u901a\u77e5");\n    }\n\n    @AfterReturning("pointCut()")\n    public void afterAdviceMethod(JoinPoint joinPoint) {\n        System.out.println("\u8fd4\u56de\u901a\u77e5");\n    }\n}\n')),(0,r.kt)("h3",{id:"\u57fa\u4e8exml-\u5b9e\u73b0-aop\u4e86\u89e3"},"\u57fa\u4e8e",(0,r.kt)("inlineCode",{parentName:"h3"},"XML")," \u5b9e\u73b0 ",(0,r.kt)("inlineCode",{parentName:"h3"},"AOP"),"\uff08\u4e86\u89e3\uff09"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.bilibili.com/video/BV1Ya411S7aT?p=106&vd_source=1de471cea1967763d6f30f2c0f0efd6d"},"106-\u57fa\u4e8exml\u7684AOP\u5b9e\u73b0_\u54d4\u54e9\u54d4\u54e9_bilibili")),(0,r.kt)("h2",{id:"jdbctemplate"},(0,r.kt)("inlineCode",{parentName:"h2"},"JdbcTemplate")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Spring"),"\u5bf9",(0,r.kt)("inlineCode",{parentName:"p"},"JDBC"),"\u8fdb\u884c\u5c01\u88c5\uff0c\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"JdbcTemplate"),"\u65b9\u4fbf\u5b9e\u73b0\u6570\u636e\u5e93\u64cd\u4f5c."),(0,r.kt)("h3",{id:"\u4f9d\u8d56"},"\u4f9d\u8d56"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- spring \u6838\u5fc3: IOC \u7684\u4f9d\u8d56 --\x3e\n<dependency>\n    <groupId>org.springframework</groupId>\n    <artifactId>spring-context</artifactId>\n    <version>5.3.1</version>\n</dependency>\n\n\x3c!-- \u6570\u636e\u6e90 --\x3e\n<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>8.0.16</version>\n</dependency>\n<dependency>\n    <groupId>com.alibaba</groupId>\n    <artifactId>druid</artifactId>\n    <version>1.0.31</version>\n</dependency>\n\n\x3c!-- Spring jdbc \u548c spring-tx \u4e8b\u52a1 --\x3e\n<dependency>\n    <groupId>org.springframework</groupId>\n    <artifactId>spring-orm</artifactId>\n    <version>5.3.1</version>\n</dependency>\n\n\x3c!-- Spring \u6574\u5408Junit \u7684\u5305 --\x3e\n<dependency>\n    <groupId>org.springframework</groupId>\n    <artifactId>spring-test</artifactId>\n    <version>5.3.1</version>\n</dependency>\n")),(0,r.kt)("h3",{id:"spring-ioc\u5bb9\u5668\u914d\u7f6e\u6587\u4ef6"},"spring IOC\u5bb9\u5668\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- jdbc.properties --\x3e\n<context:property-placeholder location="jdbc.properties"></context:property-placeholder>\n\n\x3c!-- \u6570\u636e\u6e90 : \u5176\u5b9e\u6dfb\u52a0\u7684\u662f\u5176\u4e00\u4e2a\u5b9e\u73b0\u7c7b  --\x3e\n<bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource">\n\n    \x3c!-- \u6570\u636e\u5e93\u4fe1\u606f --\x3e\n    <property name="driverClassName" value="${jdbc.driver}"></property>\n    <property name="url" value="${jdbc.url}"></property>\n    <property name="username" value="${jdbc.user}"></property>\n    <property name="password" value="${jdbc.password}"></property>\n\n    \x3c!-- \u8fde\u63a5\u6c60\u8bbe\u7f6e --\x3e\n    <property name="initialSize" value="10"></property>\n    <property name="maxActive" value="16"></property>  \x3c!-- \u8fde\u63a5\u6c60\u6700\u5927\u6d3b\u8dc3\u8fde\u63a5\u6570 --\x3e\n</bean>\n\n\x3c!-- \u6ce8\u518c JDBCTemplate : \u7b2c\u4e09\u65b9Jar\u5305\u4f7f\u7528\u4e0d\u4e86\u6ce8\u89e3 --\x3e\n<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">\n\n    \x3c!-- \u6ce8\u5165\u6570\u636e\u6e90 --\x3e\n    <property name="dataSource" ref="dataSource"></property>\n</bean>\n')),(0,r.kt)("h3",{id:"\u6d4b\u8bd5-spring-test"},"\u6d4b\u8bd5 spring-test"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},"spring")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"junit")," \u7684\u6574\u5408\u5305\uff0c\u53ef\u4ee5\u8ba9\u6d4b\u8bd5\u73af\u5883\u76f4\u63a5\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"IOC"),"\u5bb9\u5668\u4e2d\u5f00\u59cb\uff0c\u4e0d\u7528\u6bcf\u6b21\u6d4b\u8bd5\u53bb\u521b\u5efa",(0,r.kt)("inlineCode",{parentName:"p"},"IOC"),"\u5bb9\u5668")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@RunWith(SpringJUnit4ClassRunner.class)\n// \u6307\u5b9a\u6d4b\u8bd5\u73af\u5883\u7684\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6\n@ContextConfiguration("classpath:applicationContext.xml")\npublic class jdbctemplateTest {\n\n    // \u6ce8\u5165 JdbcTemplate\n    @Autowired\n    private JdbcTemplate jdbcTemplate;\n\n    /**\n     * \u67e5\u8be2\u63d2\u5165\n     */\n    @Test\n    public void testInsert(){\n        String sql = "INSERT INTO t_user VALUES (null, ?, ?, ?, ?, ?)";\n        jdbcTemplate.update(sql, "root", "123456", 23, "\u5973", "123@qq.com");\n    }\n\n    /**\n     * \u6d4b\u8bd5\u67e5\u8be2\u5355\u4e2a\u5bf9\u8c61\n     */\n    @Test\n    public void testGetUserById(){\n        String sql = "SELECT * FROM t_user WHERE id = ?";\n        User user = jdbcTemplate.queryForObject(sql, new BeanPropertyRowMapper<>(User.class), 5);\n        System.out.println(user);\n    }\n\n    /**\n     * \u6d4b\u8bd5\u67e5\u8be2\u6240\u6709\n     */\n    @Test\n    public void testGetAllUser(){\n        String sql = "SELECT * FROM t_user";\n        List<User> users = jdbcTemplate.query(sql, new BeanPropertyRowMapper<>(User.class));\n        users.forEach(System.out::println);\n    }\n\n    /**\n     * \u5355\u884c\u5355\u5217\u67e5\u8be2\n     */\n    @Test\n    public void testGetCount(){\n        String sql = "SELECT count(*) from t_user";\n        Integer integer = jdbcTemplate.queryForObject(sql, Integer.class);\n        System.out.println(integer);\n    }\n}\n')),(0,r.kt)("h2",{id:"\u4e8b\u52a1\u91cd\u70b9"},"\u4e8b\u52a1\uff08\u91cd\u70b9\uff09"),(0,r.kt)("h3",{id:"\u7f16\u7a0b\u5f0f\u4e8b\u52a1"},"\u7f16\u7a0b\u5f0f\u4e8b\u52a1"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u7ec6\u8282\u6ca1\u6709\u88ab\u5c4f\u853d\uff1a\u6240\u6709\u7ec6\u8282\u90fd\u8981\u7a0b\u5e8f\u5458\u81ea\u5df1\u6765\u5b9e\u73b0\uff0c\u6bd4\u8f83\u7e41\u7410\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u4ee3\u7801\u590d\u7528\u6027\u4e0d\u9ad8\uff1a\u6ca1\u6709\u6709\u6548\u62bd\u53d6\u51fa\u6765\uff0c\u6bcf\u6b21\u5b9e\u73b0\u529f\u80fd\u90fd\u9700\u8981\u81ea\u5df1\u7f16\u5199\u4ee3\u7801\uff0c\u4ee3\u7801\u6ca1\u6709\u5f97\u5230\u590d\u7528\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"try {\n  // \u5f00\u542f\u4e8b\u52a1\n  conn.setAutoCommit(false);\n  \n  // \u6838\u5fc3\u64cd\u4f5c\n  \n  // \u63d0\u4ea4\u4e8b\u52a1\n  conn.commit();\n} catch (Exception e) {\n  \n  // \u56de\u6eda\u4e8b\u52a1\n  conn.rollback();\n} finally {\n  // \u8d44\u6e90\u56de\u6536 \u6216 \u5f52\u8fd8\u94fe\u63a5\u5230\u8fde\u63a5\u6c60\u4e2d\n  conn.close();\n}\n")),(0,r.kt)("h3",{id:"\u58f0\u660e\u5f0f\u4e1a\u52a1"},"\u58f0\u660e\u5f0f\u4e1a\u52a1"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Spring"),"\u4e2d\u5b9e\u73b0\u4e8b\u52a1\u7684\u5207\u9762\u548c\u901a\u77e5\u5df2\u7ecf\u5199\u597d\uff08\u4e8b\u52a1\u7ba1\u7406\u5668\uff09\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"@Transaction"),"\u6765\u6807\u8bb0\u9700\u8981\u5957\u7684\u8fde\u63a5\u70b9\u3002"),(0,r.kt)("h4",{id:"ioc\u914d\u7f6e\u6587\u4ef6"},"IOC\u914d\u7f6e\u6587\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8" ?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:util="http://www.springframework.org/schema/util"\n       xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\n       http://www.springframework.org/schema/util\n       https://www.springframework.org/schema/util/spring-util.xsd\n       http://www.springframework.org/schema/context\n       http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">\n\n    \x3c!-- \u5305\u626b\u63cf --\x3e\n    <context:component-scan base-package="com.atguigu.spring"></context:component-scan>\n\n    \x3c!-- jdbc.properties --\x3e\n    <context:property-placeholder location="jdbc.properties"></context:property-placeholder>\n\n    \x3c!-- \u6570\u636e\u6e90 : \u5176\u5b9e\u6dfb\u52a0\u7684\u662f\u5176\u4e00\u4e2a\u5b9e\u73b0\u7c7b  --\x3e\n    <bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource">\n\n        \x3c!-- \u6570\u636e\u5e93\u4fe1\u606f --\x3e\n        <property name="driverClassName" value="${jdbc.driver}"></property>\n        <property name="url" value="${jdbc.url}"></property>\n        <property name="username" value="${jdbc.user}"></property>\n        <property name="password" value="${jdbc.password}"></property>\n\n        \x3c!-- \u8fde\u63a5\u6c60\u8bbe\u7f6e --\x3e\n        <property name="initialSize" value="10"></property>\n        <property name="maxActive" value="16"></property>  \x3c!-- \u8fde\u63a5\u6c60\u6700\u5927\u6d3b\u8dc3\u8fde\u63a5\u6570 --\x3e\n    </bean>\n\n    \x3c!-- \u6ce8\u518c JDBCTemplate : \u7b2c\u4e09\u65b9Jar\u5305\u4f7f\u7528\u4e0d\u4e86\u6ce8\u89e3 --\x3e\n    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">\n\n        \x3c!-- \u6ce8\u5165\u6570\u636e\u6e90 --\x3e\n        <property name="dataSource" ref="dataSource"></property>\n    </bean>\n\n    \x3c!-- \u6ce8\u518c \u4e8b\u52a1\u7ba1\u7406\u5668 \uff1a \u662f\u4e2a\u5207\u9762\u7c7b --\x3e\n    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n\n        \x3c!-- \u6ce8\u5165\u6570\u636e\u6e90\uff1a\u94fe\u63a5\u5747\u4ece\u6570\u636e\u6e90\u5f53\u4e2d\u83b7\u53d6 --\x3e\n        <property name="dataSource" ref="dataSource"></property>\n    </bean>\n\n    \x3c!-- \u5f00\u542f\u4e8b\u52a1\u7684\u6ce8\u89e3\u9a71\u52a8 \uff1a \u5c06\u73af\u7ed5\u901a\u77e5\u4f5c\u7528\u5230\u8fde\u63a5\u70b9\u4e0a\uff0c\u5373 @Transactional \u6807\u8bb0\u7684\u7c7b \u6216 \u65b9\u6cd5\u4f7f\u7528\u4e8b\u52a1\u7ba1\u7406 --\x3e\n    <tx:annotation-driven transaction-manager="transactionManager"/>\n\n</beans>\n')),(0,r.kt)("h4",{id:"\u6d4b\u8bd5-3"},"\u6d4b\u8bd5"),(0,r.kt)("p",null,"\u573a\u666f\u6a21\u62df\uff1a\u4e70\u4e66\u64cd\u4f5c"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5148\u67e5\u8be2\u56fe\u4e66\u4ef7\u683c\u3002 \u2192 2. \u66f4\u65b0\u56fe\u4e66\u5e93\u5b58\u3002 \u2192 3. \u66f4\u65b0\u7528\u6237\u4f59\u989d\u3002 ")),(0,r.kt)("p",null,"\u5176\u4e2d2\uff0c3\u73af\u8282\u4f59\u989d\u4e0d\u8db3\u7684\u65f6\u5019\u5c31\u4f1a\u89e6\u53d1\u4e8b\u52a1\u7684\u56de\u6eda\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@Service\npublic class BookServiceImpl implements BookService {\n    @Autowired\n    private BookDao bookDao;\n\n    @Autowired\n    private UserDao userDao;\n\n    /**\n     * \u6211\u5011\u4e0d\u505a\u6570\u636e\u7684\u68c0\u9a8c\u548c\u629b\u51fa\u5f02\u5e38, \u501f\u52a9\u6570\u636e\u5e93 unsigned \u7c7b\u578b\u629b\u51fa\u5f02\u5e38\n     * @param userId\n     * @param bookId\n     */\n    @Override\n    @Transactional\n    public void buyBook(Integer userId, Integer bookId) {\n        // \u67e5\u8be2\u56fe\u4e66\u7684\u4ef7\u683c \u548c \u7528\u6237\u4f59\u989d\n        Integer bookPrice = bookDao.getPriceById(bookId);\n        Integer userBalance = userDao.getBalanceById(userId);\n\n        // \u66f4\u65b0\u56fe\u4e66\u7684\u5e93\u5b58\n        bookDao.updateStock(bookId);\n\n        // \u66f4\u65b0\u7528\u6237\u7684\u4f59\u989d\n        userDao.updateBnlance(userId, userBalance - bookPrice);\n\n    }\n}\n")),(0,r.kt)("h4",{id:"\u4e8b\u52a1\u5c5e\u6027"},"\u4e8b\u52a1\u5c5e\u6027"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53ea\u8bfb")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u5bf9\u4e00\u4e2a\u67e5\u8be2\u64cd\u4f5c\u6765\u8bf4\uff0c\u6211\u4eec\u8bbe\u7f6e\u6210\u53ea\u8bfb\uff08\u9ed8\u8ba4",(0,r.kt)("inlineCode",{parentName:"p"},"false"),"\uff09\uff0c\u5c31\u80fd\u660e\u786e\u544a\u8bc9\u6570\u636e\u5e93\u8fd9\u4e2a\u64cd\u4f5c\u4e0d\u6d89\u53ca\u5199\u64cd\u4f5c\u3002\u8fd9\u6837\u6570\u636e\u5e93\u9488\u5bf9\u67e5\u8be2\u64cd\u4f5c\u5c31\u80fd\u8fdb\u884c\u4f18\u5316\u3002\n\u5982\u679c\u4e8b\u52a1\u5185\u90e8\u6d89\u53ca\u5230\u4efb\u4f55\u589e\u5220\u6539\uff0c\u5219\u4f1a\u62a5\u9519\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"SQLException\uff1aConnection is read-only"),"\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@Override\n@Transactional(readOnly=true)\npublic void buyBook(Integer userId, Integer bookId) {\n    // \u67e5\u8be2\u56fe\u4e66\u7684\u4ef7\u683c \u548c \u7528\u6237\u4f59\u989d\n    Integer bookPrice = bookDao.getPriceById(bookId);\n    Integer userBalance = userDao.getBalanceById(userId);\n\n    // \u66f4\u65b0\u56fe\u4e66\u7684\u5e93\u5b58\n    bookDao.updateStock(bookId);  // \u6709\u4fee\u6539\u64cd\u4f5c\uff1a\u62a5\u9519\n\n    // \u66f4\u65b0\u7528\u6237\u7684\u4f59\u989d\n    userDao.updateBnlance(userId, userBalance - bookPrice);\n\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u8d85\u65f6")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u4e8b\u52a1\u5f53\u4e2d\u7a0b\u5e8f\u963b\u585e\u4f4f\u4e86\uff0c\u4ece\u800c\u957f\u65f6\u95f4\u5360\u7528\u6570\u636e\u5e93\u8d44\u6e90\uff08\u5927\u6982\u7387\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"java"),"\u7a0b\u5e8f\u6216\u8005",(0,r.kt)("inlineCode",{parentName:"p"},"MySQL"),"\u6570\u636e\u5e93\u94fe\u63a5\u7b49\u7b49\uff09\u3002\u8fd9\u4e2a\u65f6\u5019\u8bbe\u7f6e\u8d85\u65f6\uff0c\u53ef\u4ee5\u5728\u89c4\u5b9a\u65f6\u95f4\u5230\u8fbe\u540e\u7acb\u9a6c\u56de\u6eda\uff0c\u5c06\u8d44\u6e90\u91ca\u653e\u51fa\u6765\uff0c\u5e76\u629b\u51fa ",(0,r.kt)("inlineCode",{parentName:"p"},"TransactionTimedOutException")," \u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@Override\n@Transactional(timeout=3)  // \u8bbe\u7f6e\u8d85\u5e02\u65f6\u95f4\u4e3a 3S\npublic void buyBook(Integer userId, Integer bookId) {\n      @Override\n    @Transactional(timeout = 3)\n    public void buyBook(Integer userId, Integer bookId) {\n\n        try {\n            TimeUnit.SECONDS.sleep(5);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n\n        // \u67e5\u8be2\u56fe\u4e66\u7684\u4ef7\u683c \u548c \u7528\u6237\u4f59\u989d\n        Integer bookPrice = bookDao.getPriceById(bookId);\n    }\n\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u56de\u6eda\u7b56\u7565")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u58f0\u660e\u5f0f\u4e8b\u52a1\u9ed8\u8ba4\u53ea\u9488\u5bf9\u8fd0\u884c\u65f6\u5f02\u5e38\u56de\u6eda\uff0c\u7f16\u8bd1\u65f6\u5f02\u5e38\u4e0d\u4f1a\u6eda\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@Override\n@Transactional(\n        noRollbackFor = {ArithmeticException.class}  // 1/0 \u7684\u8fd0\u884c\u5f02\u5e38\u88ab\u6392\u9664\u51fa\u53bb\uff0c\u4e8b\u52a1\u4f9d\u7136\u6267\u884c\u6210\u529f\n)\npublic void buyBook(Integer userId, Integer bookId) {\n    // \u67e5\u8be2\u56fe\u4e66\u7684\u4ef7\u683c \u548c \u7528\u6237\u4f59\u989d\n    Integer bookPrice = bookDao.getPriceById(bookId);\n    Integer userBalance = userDao.getBalanceById(userId);\n\n    // \u66f4\u65b0\u56fe\u4e66\u7684\u5e93\u5b58\n    bookDao.updateStock(bookId);\n\n    // \u66f4\u65b0\u7528\u6237\u7684\u4f59\u989d\n     userDao.updateBnlance(userId, userBalance - bookPrice);\n\n     System.out.println(1/0); // \u629b\u51fa \u6570\u5b66\u8fd0\u884c\u65f6\u5f02\u5e38 \u4f1a\u5bfc\u81f4\u4e8b\u52a1\u56de\u6eda, \u4f46\u662f\u4e8b\u52a1\u5185\u7684\u64cd\u4f5c\u5e94\u8be5\u662f\u6267\u884c\u6210\u529f\u4e86\uff0c\u56e0\u6b64\u9047\u89c1\u6b64\u5f02\u5e38\u4e0d\u56de\u6eda\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u9694\u79bb\u7ea7\u522b")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u9694\u79bb\u7ea7\u522b"),(0,r.kt)("th",{parentName:"tr",align:null},"\u4e2d\u6587"),(0,r.kt)("th",{parentName:"tr",align:null},"\u810f\u8bfb"),(0,r.kt)("th",{parentName:"tr",align:null},"\u4e0d\u53ef\u91cd\u590d\u8bfb"),(0,r.kt)("th",{parentName:"tr",align:null},"\u5e7b\u8bfb"),(0,r.kt)("th",{parentName:"tr",align:null},"\u5907\u6ce8"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"READ UNCOMMITED"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8bfb\u672a\u63d0\u4ea4"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6709"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6709"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6709"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"READ COMMITTED"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8bfb\u5df2\u63d0\u4ea4"),(0,r.kt)("td",{parentName:"tr",align:null},"\u65e0"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6709"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6709"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PEREATABEL READ"),(0,r.kt)("td",{parentName:"tr",align:null},"\u53ef\u91cd\u590d\u8bfb"),(0,r.kt)("td",{parentName:"tr",align:null},"\u65e0"),(0,r.kt)("td",{parentName:"tr",align:null},"\u65e0"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6709"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SERIALIZABLE"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4e32\u884c\u5316"),(0,r.kt)("td",{parentName:"tr",align:null},"\u65e0"),(0,r.kt)("td",{parentName:"tr",align:null},"\u65e0"),(0,r.kt)("td",{parentName:"tr",align:null},"\u65e0"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u53ef\u91cd\u590d\u8bfb\u4f1a\u8bfb\u4e8b\u52a1\u5185\u6b63\u5728\u8bfb\u53d6\u7684\u6570\u636e\u52a0\u9501\uff08\u884c\u9501\uff09\uff0c\u5176\u4ed6\u4e8b\u52a1\u7684\u66f4\u65b0\u63d0\u4ea4\u4f1a\u8fdb\u5165\u963b\u585e\u72b6\u6001\uff0c\u76f4\u5230\u524d\u8005\u4e8b\u52a1\u63d0\u4ea4\u3002\u4f46\u662f\u4e0d\u5f71\u54cd\u540e\u8005\u5bf9\u5176\u4ed6\u884c\u4fee\u6539\u6216\u6dfb\u52a0\u6570\u636e\u3002\u4f46\u662fMySQL\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"REPEATABLE_READ"),"\u89e3\u51b3\u4e86\u5e7b\u8bfb\u7684\u95ee\u9898\u3002")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u8fd9\u4e00\u73af\u8282\u6709\u5927\u91cf\u8f83\u96be\u7684\u6570\u636e\u5e93\u76f8\u5173\u77e5\u8bc6\uff0c\u6709\u5f85\u8865\u5145\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@Override\n    @Transactional(\n            isolation = Isolation.REPEATABLE_READ  // \u4fee\u6539\u4e3a\u53ef\u91cd\u590d\u8bfb\uff08\u5176\u5b9e\u5c31\u662fMySQL\u7684\u9ed8\u8ba4\u7684\u9694\u79bb\u7ea7\u522b\uff09\n    )\n    public void buyBook(Integer userId, Integer bookId) {\n        // \u67e5\u8be2\u56fe\u4e66\u7684\u4ef7\u683c \u548c \u7528\u6237\u4f59\u989d\n        Integer bookPrice = bookDao.getPriceById(bookId);\n        Integer userBalance = userDao.getBalanceById(userId);\n\n        // \u66f4\u65b0\u56fe\u4e66\u7684\u5e93\u5b58\n        bookDao.updateStock(bookId);\n\n        // \u66f4\u65b0\u7528\u6237\u7684\u4f59\u989d\n         userDao.updateBnlance(userId, userBalance - bookPrice);\n    }\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4f20\u64ad\u884c\u4e3a\uff08\u91cd\u8981\uff09")),(0,r.kt)("p",null,"A\u65b9\u6cd5\u8c03\u7528B\u65b9\u6cd5\uff0c\u4e14\u4e24\u8005\u90fd\u58f0\u660e\u4e86\u4e8b\u52a1\uff0c\u6211\u4eec\u4eceB\u7684\u89d2\u5ea6\u6765\u601d\u8003\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"B\u4f7f\u7528\u81ea\u5df1\u7684\u4e8b\u52a1\uff1a\u5982\u679cB\u56de\u6eda\u4e86\uff0c\u4e0d\u4f1a\u5bfc\u81f4\u6216\u8005\u8bf4\u662f\u5f71\u54cdA\u7684\u56de\u6eda\u3002 ",(0,r.kt)("inlineCode",{parentName:"li"},"propagation = Propagation.REQUIRED_NEW")),(0,r.kt)("li",{parentName:"ol"},"B\u4f7f\u7528A\u7684\u4e8b\u52a1\uff1a\u5982\u679cB\u53d1\u751f\u56de\u6eda\u4e86\uff0c\u5219A\u4e5f\u53d1\u751f\u56de\u6eda\u3002 ",(0,r.kt)("inlineCode",{parentName:"li"},"propagation = Propagation.REQUIRED"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"/**\n * \u6211\u5011\u4e0d\u505a\u6570\u636e\u7684\u68c0\u9a8c\u548c\u629b\u51fa\u5f02\u5e38, \u501f\u52a9\u6570\u636e\u5e93 unsigned \u7c7b\u578b\u629b\u51fa\u5f02\u5e38\n * @param userId\n * @param bookId\n */\n@Override\n@Transactional(\n        propagation = Propagation.REQUIRED\n)\npublic void buyBook(Integer userId, Integer bookId) {\n    // \u67e5\u8be2\u56fe\u4e66\u7684\u4ef7\u683c \u548c \u7528\u6237\u4f59\u989d\n    Integer bookPrice = bookDao.getPriceById(bookId);\n    Integer userBalance = userDao.getBalanceById(userId);\n\n    // \u66f4\u65b0\u56fe\u4e66\u7684\u5e93\u5b58\n    bookDao.updateStock(bookId);\n\n    // \u66f4\u65b0\u7528\u6237\u7684\u4f59\u989d\n     userDao.updateBnlance(userId, userBalance - bookPrice);\n}\n\n/**\n * \u4e70\u591a\u672c\u4e66\n * @param userId\n * @param bookIds\n */\n@Override\n@Transactional\npublic void checkout(Integer userId, Integer[] bookIds) {\n    for(Integer bookId : bookIds) {\n        buyBook(userId, bookId);\n    }\n}\n")),(0,r.kt)("h3",{id:"\u57fa\u4e8exml\u7684\u4e8b\u52a1"},"\u57fa\u4e8eXML\u7684\u4e8b\u52a1"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u7528\u7684\u5f88\u5c11\uff0c\u7528\u5230\u7684\u65f6\u5019\u6765\u770b\u4e0b\u5c31\u597d\u4e86\u3002")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.bilibili.com/video/BV1Ya411S7aT?p=117&vd_source=935f8cb396d86a459ec90d3a271fd2b3"},"117-\u57fa\u4e8exml\u7684\u58f0\u660e\u5f0f\u4e8b\u52a1_\u54d4\u54e9\u54d4\u54e9_bilibili")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u914d\u7f6e\u4e8b\u52a1\u7ba1\u7406\u5668 --\x3e\n<bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n    <property name="dataSource" ref="dataSource"/>\n</bean>\n\n\x3c!-- \u914d\u7f6e\u4e8b\u52a1\u7684\u5207\u9762 --\x3e\n<aop:config>\n    \x3c!-- \u8003\u8651\u5230\u540e\u9762\u6574\u5408 SpringSecurity, \u907f\u514d\u628a UserDetialsService \u626b\u63cf\u5230\u4e8b\u52a1\u63a7\u5236\uff0c\u56e0\u6b64\u8ba9\u5207\u5165\u70b9\u8868\u8fbe\u5f0f\u5b9a\u4f4d\u5230 impl  --\x3e\n    <aop:pointcut id="txPointcut" expression="execution(* *..*ServiceImpl.*(..))"/>\n\n    \x3c!-- \u5c06\u5207\u5165\u70b9\u8868\u8fbe\u5f0f \u548c \u4e8b\u52a1\u7684\u901a\u77e5\u5173\u8054\u8d77\u6765 --\x3e\n    <aop:advisor advice-ref="txAdvice" pointcut-ref="txPointcut" />\n</aop:config>\n\n\x3c!-- \u914d\u7f6e\u4e8b\u52a1\u901a\u77e5 --\x3e\n<tx:advice id="txAdvice" transaction-manager="txManager">\n    \x3c!-- \u914d\u7f6e\u4e8b\u52a1\u7684\u5c5e\u6027 --\x3e\n    <tx:attributes>\n        \x3c!-- \u67e5\u8be2\u65b9\u6cd5\uff1a\u914d\u7f6e\u53ea\u8bfb\u5c5e\u6027\uff0c\u8ba9\u6570\u636e\u5e93\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a\u67e5\u8be2\u64cd\u4f5c --\x3e\n        <tx:method name="get*" read-only="true"/>\n        <tx:method name="find*" read-only="true"/>\n        <tx:method name="query*" read-only="true"/>\n\n        \x3c!-- \u589e\u5220\u6539\u67e5\u65b9\u6cd5\uff1a\u914d\u7f6e\u4e0b\u4e8b\u52a1\u7684\u4f20\u64ad\u884c\u4e3a\u3001\u56de\u6eda\u5f02\u5e38\n            rollbackfor:\n            \u9ed8\u8ba4\uff1a\u8fd0\u884c\u65f6\u5f02\u5e38\n            \u5efa\u8bae\uff1a\u7f16\u8bd1\u65f6\u5f02\u5e38\u548c\u8fd0\u884c\u65f6\u5f02\u5e38\u90fd\u56de\u6eda.\n        --\x3e\n        <tx:method name="save*" propagation="REQUIRED" rollback-for="Exception"/>\n        <tx:method name="update*" propagation="REQUIRED" rollback-for="Exception"/>\n        <tx:method name="remove*" propagation="REQUIRED" rollback-for="Exception"/>\n        <tx:method name="batch*" propagation="REQUIRED" rollback-for="Exception"/>\n    </tx:attributes>\n</tx:advice>\n')))}c.isMDXComponent=!0}}]);